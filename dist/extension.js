"use strict";var Rp=Object.create;var kr=Object.defineProperty;var Ha=Object.getOwnPropertyDescriptor;var Tp=Object.getOwnPropertyNames;var Pp=Object.getPrototypeOf,Np=Object.prototype.hasOwnProperty;var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Ya=(n,e)=>{for(var t in e)kr(n,t,{get:e[t],enumerable:!0})},On=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Tp(e))!Np.call(n,i)&&i!==t&&kr(n,i,{get:()=>e[i],enumerable:!(r=Ha(e,i))||r.enumerable});return n},Gs=(n,e,t)=>(On(n,e,"default"),t&&On(t,e,"default")),W=(n,e,t)=>(t=n!=null?Rp(Pp(n)):{},On(e||!n||!n.__esModule?kr(t,"default",{value:n,enumerable:!0}):t,n)),Op=n=>On(kr({},"__esModule",{value:!0}),n),H=(n,e,t,r)=>{for(var i=r>1?void 0:r?Ha(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&kr(e,t,i),i};var jr=F((Gy,yc)=>{"use strict";var Vp="2.0.0",Gp=Number.MAX_SAFE_INTEGER||9007199254740991,zp=16,Hp=250,Yp=["major","premajor","minor","preminor","patch","prepatch","prerelease"];yc.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:zp,MAX_SAFE_BUILD_LENGTH:Hp,MAX_SAFE_INTEGER:Gp,RELEASE_TYPES:Yp,SEMVER_SPEC_VERSION:Vp,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Xr=F((zy,wc)=>{"use strict";var Qp=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};wc.exports=Qp});var gr=F((ct,vc)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:ao,MAX_SAFE_BUILD_LENGTH:Kp,MAX_LENGTH:Zp}=jr(),Jp=Xr();ct=vc.exports={};var eh=ct.re=[],th=ct.safeRe=[],q=ct.src=[],rh=ct.safeSrc=[],j=ct.t={},nh=0,co="[a-zA-Z0-9-]",ih=[["\\s",1],["\\d",Zp],[co,Kp]],sh=n=>{for(let[e,t]of ih)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},V=(n,e,t)=>{let r=sh(e),i=nh++;Jp(n,i,e),j[n]=i,q[i]=e,rh[i]=r,eh[i]=new RegExp(e,t?"g":void 0),th[i]=new RegExp(r,t?"g":void 0)};V("NUMERICIDENTIFIER","0|[1-9]\\d*");V("NUMERICIDENTIFIERLOOSE","\\d+");V("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${co}*`);V("MAINVERSION",`(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})`);V("MAINVERSIONLOOSE",`(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})`);V("PRERELEASEIDENTIFIER",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIER]})`);V("PRERELEASEIDENTIFIERLOOSE",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIERLOOSE]})`);V("PRERELEASE",`(?:-(${q[j.PRERELEASEIDENTIFIER]}(?:\\.${q[j.PRERELEASEIDENTIFIER]})*))`);V("PRERELEASELOOSE",`(?:-?(${q[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${q[j.PRERELEASEIDENTIFIERLOOSE]})*))`);V("BUILDIDENTIFIER",`${co}+`);V("BUILD",`(?:\\+(${q[j.BUILDIDENTIFIER]}(?:\\.${q[j.BUILDIDENTIFIER]})*))`);V("FULLPLAIN",`v?${q[j.MAINVERSION]}${q[j.PRERELEASE]}?${q[j.BUILD]}?`);V("FULL",`^${q[j.FULLPLAIN]}$`);V("LOOSEPLAIN",`[v=\\s]*${q[j.MAINVERSIONLOOSE]}${q[j.PRERELEASELOOSE]}?${q[j.BUILD]}?`);V("LOOSE",`^${q[j.LOOSEPLAIN]}$`);V("GTLT","((?:<|>)?=?)");V("XRANGEIDENTIFIERLOOSE",`${q[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);V("XRANGEIDENTIFIER",`${q[j.NUMERICIDENTIFIER]}|x|X|\\*`);V("XRANGEPLAIN",`[v=\\s]*(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:${q[j.PRERELEASE]})?${q[j.BUILD]}?)?)?`);V("XRANGEPLAINLOOSE",`[v=\\s]*(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:${q[j.PRERELEASELOOSE]})?${q[j.BUILD]}?)?)?`);V("XRANGE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAIN]}$`);V("XRANGELOOSE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAINLOOSE]}$`);V("COERCEPLAIN",`(^|[^\\d])(\\d{1,${ao}})(?:\\.(\\d{1,${ao}}))?(?:\\.(\\d{1,${ao}}))?`);V("COERCE",`${q[j.COERCEPLAIN]}(?:$|[^\\d])`);V("COERCEFULL",q[j.COERCEPLAIN]+`(?:${q[j.PRERELEASE]})?(?:${q[j.BUILD]})?(?:$|[^\\d])`);V("COERCERTL",q[j.COERCE],!0);V("COERCERTLFULL",q[j.COERCEFULL],!0);V("LONETILDE","(?:~>?)");V("TILDETRIM",`(\\s*)${q[j.LONETILDE]}\\s+`,!0);ct.tildeTrimReplace="$1~";V("TILDE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAIN]}$`);V("TILDELOOSE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAINLOOSE]}$`);V("LONECARET","(?:\\^)");V("CARETTRIM",`(\\s*)${q[j.LONECARET]}\\s+`,!0);ct.caretTrimReplace="$1^";V("CARET",`^${q[j.LONECARET]}${q[j.XRANGEPLAIN]}$`);V("CARETLOOSE",`^${q[j.LONECARET]}${q[j.XRANGEPLAINLOOSE]}$`);V("COMPARATORLOOSE",`^${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]})$|^$`);V("COMPARATOR",`^${q[j.GTLT]}\\s*(${q[j.FULLPLAIN]})$|^$`);V("COMPARATORTRIM",`(\\s*)${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]}|${q[j.XRANGEPLAIN]})`,!0);ct.comparatorTrimReplace="$1$2$3";V("HYPHENRANGE",`^\\s*(${q[j.XRANGEPLAIN]})\\s+-\\s+(${q[j.XRANGEPLAIN]})\\s*$`);V("HYPHENRANGELOOSE",`^\\s*(${q[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${q[j.XRANGEPLAINLOOSE]})\\s*$`);V("STAR","(<|>)?=?\\s*\\*");V("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");V("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var qn=F((Hy,bc)=>{"use strict";var oh=Object.freeze({loose:!0}),ah=Object.freeze({}),ch=n=>n?typeof n!="object"?oh:n:ah;bc.exports=ch});var uo=F((Yy,Ic)=>{"use strict";var Ec=/^[0-9]+$/,Cc=(n,e)=>{if(typeof n=="number"&&typeof e=="number")return n===e?0:n<e?-1:1;let t=Ec.test(n),r=Ec.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},uh=(n,e)=>Cc(e,n);Ic.exports={compareIdentifiers:Cc,rcompareIdentifiers:uh}});var Se=F((Qy,Dc)=>{"use strict";var jn=Xr(),{MAX_LENGTH:Sc,MAX_SAFE_INTEGER:Xn}=jr(),{safeRe:Wn,t:Vn}=gr(),lh=qn(),{compareIdentifiers:lo}=uo(),fo=class n{constructor(e,t){if(t=lh(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Sc)throw new TypeError(`version is longer than ${Sc} characters`);jn("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Wn[Vn.LOOSE]:Wn[Vn.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Xn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xn||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Xn)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(jn("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(jn("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lo(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(jn("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lo(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?Wn[Vn.PRERELEASELOOSE]:Wn[Vn.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];r===!1&&(s=[t]),lo(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Dc.exports=fo});var Kt=F((Ky,Tc)=>{"use strict";var Rc=Se(),fh=(n,e,t=!1)=>{if(n instanceof Rc)return n;try{return new Rc(n,e)}catch(r){if(!t)return null;throw r}};Tc.exports=fh});var Nc=F((Zy,Pc)=>{"use strict";var ph=Kt(),hh=(n,e)=>{let t=ph(n,e);return t?t.version:null};Pc.exports=hh});var _c=F((Jy,Oc)=>{"use strict";var xh=Kt(),dh=(n,e)=>{let t=xh(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Oc.exports=dh});var Mc=F((ew,Lc)=>{"use strict";var Ac=Se(),mh=(n,e,t,r,i)=>{typeof t=="string"&&(i=r,r=t,t=void 0);try{return new Ac(n instanceof Ac?n.version:n,t).inc(e,r,i).version}catch{return null}};Lc.exports=mh});var kc=F((tw,Uc)=>{"use strict";var Fc=Kt(),gh=(n,e)=>{let t=Fc(n,null,!0),r=Fc(e,null,!0),i=t.compare(r);if(i===0)return null;let s=i>0,o=s?t:r,a=s?r:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let x=c?"pre":"";return t.major!==r.major?x+"major":t.minor!==r.minor?x+"minor":t.patch!==r.patch?x+"patch":"prerelease"};Uc.exports=gh});var Bc=F((rw,$c)=>{"use strict";var yh=Se(),wh=(n,e)=>new yh(n,e).major;$c.exports=wh});var jc=F((nw,qc)=>{"use strict";var vh=Se(),bh=(n,e)=>new vh(n,e).minor;qc.exports=bh});var Wc=F((iw,Xc)=>{"use strict";var Eh=Se(),Ch=(n,e)=>new Eh(n,e).patch;Xc.exports=Ch});var Gc=F((sw,Vc)=>{"use strict";var Ih=Kt(),Sh=(n,e)=>{let t=Ih(n,e);return t&&t.prerelease.length?t.prerelease:null};Vc.exports=Sh});var Ke=F((ow,Hc)=>{"use strict";var zc=Se(),Dh=(n,e,t)=>new zc(n,t).compare(new zc(e,t));Hc.exports=Dh});var Qc=F((aw,Yc)=>{"use strict";var Rh=Ke(),Th=(n,e,t)=>Rh(e,n,t);Yc.exports=Th});var Zc=F((cw,Kc)=>{"use strict";var Ph=Ke(),Nh=(n,e)=>Ph(n,e,!0);Kc.exports=Nh});var Gn=F((uw,e0)=>{"use strict";var Jc=Se(),Oh=(n,e,t)=>{let r=new Jc(n,t),i=new Jc(e,t);return r.compare(i)||r.compareBuild(i)};e0.exports=Oh});var r0=F((lw,t0)=>{"use strict";var _h=Gn(),Ah=(n,e)=>n.sort((t,r)=>_h(t,r,e));t0.exports=Ah});var i0=F((fw,n0)=>{"use strict";var Lh=Gn(),Mh=(n,e)=>n.sort((t,r)=>Lh(r,t,e));n0.exports=Mh});var Wr=F((pw,s0)=>{"use strict";var Fh=Ke(),Uh=(n,e,t)=>Fh(n,e,t)>0;s0.exports=Uh});var zn=F((hw,o0)=>{"use strict";var kh=Ke(),$h=(n,e,t)=>kh(n,e,t)<0;o0.exports=$h});var po=F((xw,a0)=>{"use strict";var Bh=Ke(),qh=(n,e,t)=>Bh(n,e,t)===0;a0.exports=qh});var ho=F((dw,c0)=>{"use strict";var jh=Ke(),Xh=(n,e,t)=>jh(n,e,t)!==0;c0.exports=Xh});var Hn=F((mw,u0)=>{"use strict";var Wh=Ke(),Vh=(n,e,t)=>Wh(n,e,t)>=0;u0.exports=Vh});var Yn=F((gw,l0)=>{"use strict";var Gh=Ke(),zh=(n,e,t)=>Gh(n,e,t)<=0;l0.exports=zh});var xo=F((yw,f0)=>{"use strict";var Hh=po(),Yh=ho(),Qh=Wr(),Kh=Hn(),Zh=zn(),Jh=Yn(),ex=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Hh(n,t,r);case"!=":return Yh(n,t,r);case">":return Qh(n,t,r);case">=":return Kh(n,t,r);case"<":return Zh(n,t,r);case"<=":return Jh(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};f0.exports=ex});var h0=F((ww,p0)=>{"use strict";var tx=Se(),rx=Kt(),{safeRe:Qn,t:Kn}=gr(),nx=(n,e)=>{if(n instanceof tx)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(e.includePrerelease?Qn[Kn.COERCEFULL]:Qn[Kn.COERCE]);else{let c=e.includePrerelease?Qn[Kn.COERCERTLFULL]:Qn[Kn.COERCERTL],u;for(;(u=c.exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(t===null)return null;let r=t[2],i=t[3]||"0",s=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return rx(`${r}.${i}.${s}${o}${a}`,e)};p0.exports=nx});var d0=F((vw,x0)=>{"use strict";var mo=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};x0.exports=mo});var Ze=F((bw,w0)=>{"use strict";var ix=/\s+/g,go=class n{constructor(e,t){if(t=ox(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof yo)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(ix," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!g0(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&hx(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&fx)|(this.options.loose&&px))+":"+e,i=m0.get(r);if(i)return i;let s=this.options.loose,o=s?Oe[De.HYPHENRANGELOOSE]:Oe[De.HYPHENRANGE];e=e.replace(o,Cx(this.options.includePrerelease)),oe("hyphen replace",e),e=e.replace(Oe[De.COMPARATORTRIM],cx),oe("comparator trim",e),e=e.replace(Oe[De.TILDETRIM],ux),oe("tilde trim",e),e=e.replace(Oe[De.CARETTRIM],lx),oe("caret trim",e);let a=e.split(" ").map(m=>xx(m,this.options)).join(" ").split(/\s+/).map(m=>Ex(m,this.options));s&&(a=a.filter(m=>(oe("loose invalid filter",m,this.options),!!m.match(Oe[De.COMPARATORLOOSE])))),oe("range list",a);let c=new Map,u=a.map(m=>new yo(m,this.options));for(let m of u){if(g0(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let x=[...c.values()];return m0.set(r,x),x}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>y0(r,t)&&e.set.some(i=>y0(i,t)&&r.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ax(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Ix(this.set[t],e,this.options))return!0;return!1}};w0.exports=go;var sx=d0(),m0=new sx,ox=qn(),yo=Vr(),oe=Xr(),ax=Se(),{safeRe:Oe,t:De,comparatorTrimReplace:cx,tildeTrimReplace:ux,caretTrimReplace:lx}=gr(),{FLAG_INCLUDE_PRERELEASE:fx,FLAG_LOOSE:px}=jr(),g0=n=>n.value==="<0.0.0-0",hx=n=>n.value==="",y0=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(s=>i.intersects(s,e)),i=r.pop();return t},xx=(n,e)=>(n=n.replace(Oe[De.BUILD],""),oe("comp",n,e),n=gx(n,e),oe("caret",n),n=dx(n,e),oe("tildes",n),n=wx(n,e),oe("xrange",n),n=bx(n,e),oe("stars",n),n),_e=n=>!n||n.toLowerCase()==="x"||n==="*",dx=(n,e)=>n.trim().split(/\s+/).map(t=>mx(t,e)).join(" "),mx=(n,e)=>{let t=e.loose?Oe[De.TILDELOOSE]:Oe[De.TILDE];return n.replace(t,(r,i,s,o,a)=>{oe("tilde",n,r,i,s,o,a);let c;return _e(i)?c="":_e(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:_e(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(oe("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,oe("tilde return",c),c})},gx=(n,e)=>n.trim().split(/\s+/).map(t=>yx(t,e)).join(" "),yx=(n,e)=>{oe("caret",n,e);let t=e.loose?Oe[De.CARETLOOSE]:Oe[De.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,s,o,a,c)=>{oe("caret",n,i,s,o,a,c);let u;return _e(s)?u="":_e(o)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:_e(a)?s==="0"?u=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:c?(oe("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(oe("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),oe("caret return",u),u})},wx=(n,e)=>(oe("replaceXRanges",n,e),n.split(/\s+/).map(t=>vx(t,e)).join(" ")),vx=(n,e)=>{n=n.trim();let t=e.loose?Oe[De.XRANGELOOSE]:Oe[De.XRANGE];return n.replace(t,(r,i,s,o,a,c)=>{oe("xRange",n,r,i,s,o,a,c);let u=_e(s),x=u||_e(o),m=x||_e(a),g=m;return i==="="&&g&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&g?(x&&(o=0),a=0,i===">"?(i=">=",x?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",x?s=+s+1:o=+o+1),i==="<"&&(c="-0"),r=`${i+s}.${o}.${a}${c}`):x?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:m&&(r=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),oe("xRange return",r),r})},bx=(n,e)=>(oe("replaceStars",n,e),n.trim().replace(Oe[De.STAR],"")),Ex=(n,e)=>(oe("replaceGTE0",n,e),n.trim().replace(Oe[e.includePrerelease?De.GTE0PRE:De.GTE0],"")),Cx=n=>(e,t,r,i,s,o,a,c,u,x,m,g)=>(_e(r)?t="":_e(i)?t=`>=${r}.0.0${n?"-0":""}`:_e(s)?t=`>=${r}.${i}.0${n?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,_e(u)?c="":_e(x)?c=`<${+u+1}.0.0-0`:_e(m)?c=`<${u}.${+x+1}.0-0`:g?c=`<=${u}.${x}.${m}-${g}`:n?c=`<${u}.${x}.${+m+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),Ix=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(oe(n[r].semver),n[r].semver!==yo.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Vr=F((Ew,S0)=>{"use strict";var Gr=Symbol("SemVer ANY"),bo=class n{static get ANY(){return Gr}constructor(e,t){if(t=v0(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),vo("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Gr?this.value="":this.value=this.operator+this.semver.version,vo("comp",this)}parse(e){let t=this.options.loose?b0[E0.COMPARATORLOOSE]:b0[E0.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new C0(r[2],this.options.loose):this.semver=Gr}toString(){return this.value}test(e){if(vo("Comparator.test",e,this.options.loose),this.semver===Gr||e===Gr)return!0;if(typeof e=="string")try{e=new C0(e,this.options)}catch{return!1}return wo(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new I0(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new I0(this.value,t).test(e.semver):(t=v0(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||wo(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||wo(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};S0.exports=bo;var v0=qn(),{safeRe:b0,t:E0}=gr(),wo=xo(),vo=Xr(),C0=Se(),I0=Ze()});var zr=F((Cw,D0)=>{"use strict";var Sx=Ze(),Dx=(n,e,t)=>{try{e=new Sx(e,t)}catch{return!1}return e.test(n)};D0.exports=Dx});var T0=F((Iw,R0)=>{"use strict";var Rx=Ze(),Tx=(n,e)=>new Rx(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));R0.exports=Tx});var N0=F((Sw,P0)=>{"use strict";var Px=Se(),Nx=Ze(),Ox=(n,e,t)=>{let r=null,i=null,s=null;try{s=new Nx(e,t)}catch{return null}return n.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new Px(r,t))}),r};P0.exports=Ox});var _0=F((Dw,O0)=>{"use strict";var _x=Se(),Ax=Ze(),Lx=(n,e,t)=>{let r=null,i=null,s=null;try{s=new Ax(e,t)}catch{return null}return n.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new _x(r,t))}),r};O0.exports=Lx});var M0=F((Rw,L0)=>{"use strict";var Eo=Se(),Mx=Ze(),A0=Wr(),Fx=(n,e)=>{n=new Mx(n,e);let t=new Eo("0.0.0");if(n.test(t)||(t=new Eo("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],s=null;i.forEach(o=>{let a=new Eo(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||A0(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!t||A0(t,s))&&(t=s)}return t&&n.test(t)?t:null};L0.exports=Fx});var U0=F((Tw,F0)=>{"use strict";var Ux=Ze(),kx=(n,e)=>{try{return new Ux(n,e).range||"*"}catch{return null}};F0.exports=kx});var Zn=F((Pw,q0)=>{"use strict";var $x=Se(),B0=Vr(),{ANY:Bx}=B0,qx=Ze(),jx=zr(),k0=Wr(),$0=zn(),Xx=Yn(),Wx=Hn(),Vx=(n,e,t,r)=>{n=new $x(n,r),e=new qx(e,r);let i,s,o,a,c;switch(t){case">":i=k0,s=Xx,o=$0,a=">",c=">=";break;case"<":i=$0,s=Wx,o=k0,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(jx(n,e,r))return!1;for(let u=0;u<e.set.length;++u){let x=e.set[u],m=null,g=null;if(x.forEach(p=>{p.semver===Bx&&(p=new B0(">=0.0.0")),m=m||p,g=g||p,i(p.semver,m.semver,r)?m=p:o(p.semver,g.semver,r)&&(g=p)}),m.operator===a||m.operator===c||(!g.operator||g.operator===a)&&s(n,g.semver))return!1;if(g.operator===c&&o(n,g.semver))return!1}return!0};q0.exports=Vx});var X0=F((Nw,j0)=>{"use strict";var Gx=Zn(),zx=(n,e,t)=>Gx(n,e,">",t);j0.exports=zx});var V0=F((Ow,W0)=>{"use strict";var Hx=Zn(),Yx=(n,e,t)=>Hx(n,e,"<",t);W0.exports=Yx});var H0=F((_w,z0)=>{"use strict";var G0=Ze(),Qx=(n,e,t)=>(n=new G0(n,t),e=new G0(e,t),n.intersects(e,t));z0.exports=Qx});var Q0=F((Aw,Y0)=>{"use strict";var Kx=zr(),Zx=Ke();Y0.exports=(n,e,t)=>{let r=[],i=null,s=null,o=n.sort((x,m)=>Zx(x,m,t));for(let x of o)Kx(x,e,t)?(s=x,i||(i=x)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let a=[];for(let[x,m]of r)x===m?a.push(x):!m&&x===o[0]?a.push("*"):m?x===o[0]?a.push(`<=${m}`):a.push(`${x} - ${m}`):a.push(`>=${x}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var ru=F((Lw,tu)=>{"use strict";var K0=Ze(),Io=Vr(),{ANY:Co}=Io,Hr=zr(),So=Ke(),Jx=(n,e,t={})=>{if(n===e)return!0;n=new K0(n,t),e=new K0(e,t);let r=!1;e:for(let i of n.set){for(let s of e.set){let o=td(i,s,t);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},ed=[new Io(">=0.0.0-0")],Z0=[new Io(">=0.0.0")],td=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Co){if(e.length===1&&e[0].semver===Co)return!0;t.includePrerelease?n=ed:n=Z0}if(e.length===1&&e[0].semver===Co){if(t.includePrerelease)return!0;e=Z0}let r=new Set,i,s;for(let p of n)p.operator===">"||p.operator===">="?i=J0(i,p,t):p.operator==="<"||p.operator==="<="?s=eu(s,p,t):r.add(p.semver);if(r.size>1)return null;let o;if(i&&s){if(o=So(i.semver,s.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let p of r){if(i&&!Hr(p,String(i),t)||s&&!Hr(p,String(s),t))return null;for(let y of e)if(!Hr(p,String(y),t))return!1;return!0}let a,c,u,x,m=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,g=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&s.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let p of e){if(x=x||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",i){if(g&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===g.major&&p.semver.minor===g.minor&&p.semver.patch===g.patch&&(g=!1),p.operator===">"||p.operator===">="){if(a=J0(i,p,t),a===p&&a!==i)return!1}else if(i.operator===">="&&!Hr(i.semver,String(p),t))return!1}if(s){if(m&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===m.major&&p.semver.minor===m.minor&&p.semver.patch===m.patch&&(m=!1),p.operator==="<"||p.operator==="<="){if(c=eu(s,p,t),c===p&&c!==s)return!1}else if(s.operator==="<="&&!Hr(s.semver,String(p),t))return!1}if(!p.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&x&&!i&&o!==0||g||m)},J0=(n,e,t)=>{if(!n)return e;let r=So(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},eu=(n,e,t)=>{if(!n)return e;let r=So(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};tu.exports=Jx});var yr=F((Mw,su)=>{"use strict";var Do=gr(),nu=jr(),rd=Se(),iu=uo(),nd=Kt(),id=Nc(),sd=_c(),od=Mc(),ad=kc(),cd=Bc(),ud=jc(),ld=Wc(),fd=Gc(),pd=Ke(),hd=Qc(),xd=Zc(),dd=Gn(),md=r0(),gd=i0(),yd=Wr(),wd=zn(),vd=po(),bd=ho(),Ed=Hn(),Cd=Yn(),Id=xo(),Sd=h0(),Dd=Vr(),Rd=Ze(),Td=zr(),Pd=T0(),Nd=N0(),Od=_0(),_d=M0(),Ad=U0(),Ld=Zn(),Md=X0(),Fd=V0(),Ud=H0(),kd=Q0(),$d=ru();su.exports={parse:nd,valid:id,clean:sd,inc:od,diff:ad,major:cd,minor:ud,patch:ld,prerelease:fd,compare:pd,rcompare:hd,compareLoose:xd,compareBuild:dd,sort:md,rsort:gd,gt:yd,lt:wd,eq:vd,neq:bd,gte:Ed,lte:Cd,cmp:Id,coerce:Sd,Comparator:Dd,Range:Rd,satisfies:Td,toComparators:Pd,maxSatisfying:Nd,minSatisfying:Od,minVersion:_d,validRange:Ad,outside:Ld,gtr:Md,ltr:Fd,intersects:Ud,simplifyRange:kd,subset:$d,SemVer:rd,re:Do.re,src:Do.src,tokens:Do.t,SEMVER_SPEC_VERSION:nu.SEMVER_SPEC_VERSION,RELEASE_TYPES:nu.RELEASE_TYPES,compareIdentifiers:iu.compareIdentifiers,rcompareIdentifiers:iu.rcompareIdentifiers}});var ou=F((To,Ro)=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});var Jn;To.default=()=>{if(typeof Ro=="object"&&typeof Ro.exports=="object")return Jn=Jn||require("fs"),Jn;throw new Error("File system is not available")}});var Zt=F(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.default=(n,e,t)=>({confidence:t,name:e.name(n),lang:e.language?e.language():void 0})});var cu=F(Yr=>{"use strict";var Bd=Yr&&Yr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yr,"__esModule",{value:!0});var au=Bd(Zt()),No=class{name(){return"ASCII"}match(e){let t=e.rawInput;for(let r=0;r<e.rawLen;r++){let i=t[r];if(i<32||i>126)return(0,au.default)(e,this,0)}return(0,au.default)(e,this,100)}};Yr.default=No});var uu=F(Qr=>{"use strict";var qd=Qr&&Qr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qr,"__esModule",{value:!0});var jd=qd(Zt()),Oo=class{name(){return"UTF-8"}match(e){let t=!1,r=0,i=0,s=0,o,a=e.rawInput;e.rawLen>=3&&(a[0]&255)==239&&(a[1]&255)==187&&(a[2]&255)==191&&(t=!0);for(let c=0;c<e.rawLen;c++){let u=a[c];if(u&128){if((u&224)==192)s=1;else if((u&240)==224)s=2;else if((u&248)==240)s=3;else{if(i++,i>5)break;s=0}for(;c++,!(c>=e.rawLen);){if((a[c]&192)!=128){i++;break}if(--s==0){r++;break}}}}if(o=0,t&&i==0)o=100;else if(t&&r>i*10)o=80;else if(r>3&&i==0)o=100;else if(r>0&&i==0)o=80;else if(r==0&&i==0)o=10;else if(r>i*10)o=25;else return null;return(0,jd.default)(e,this,o)}};Qr.default=Oo});var lu=F(Je=>{"use strict";var Xd=Je&&Je.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Je,"__esModule",{value:!0});Je.UTF_32LE=Je.UTF_32BE=Je.UTF_16LE=Je.UTF_16BE=void 0;var Fo=Xd(Zt()),_o=class{name(){return"UTF-16BE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==254&&(t[1]&255)==255?(0,Fo.default)(e,this,100):null}};Je.UTF_16BE=_o;var Ao=class{name(){return"UTF-16LE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==255&&(t[1]&255)==254?t.length>=4&&t[2]==0&&t[3]==0?null:(0,Fo.default)(e,this,100):null}};Je.UTF_16LE=Ao;var ei=class{name(){return"UTF-32"}getChar(e,t){return-1}match(e){let t=0,r=0,i=!1,s=0,o=e.rawLen/4*4,a=e.rawInput;if(o==0)return null;this.getChar(a,0)==65279&&(i=!0);for(let c=0;c<o;c+=4){let u=this.getChar(a,c);u<0||u>=1114111||u>=55296&&u<=57343?r+=1:t+=1}return i&&r==0?s=100:i&&t>r*10?s=80:t>3&&r==0?s=100:t>0&&r==0?s=80:t>r*10&&(s=25),s==0?null:(0,Fo.default)(e,this,s)}},Lo=class extends ei{name(){return"UTF-32BE"}getChar(e,t){return(e[t+0]&255)<<24|(e[t+1]&255)<<16|(e[t+2]&255)<<8|e[t+3]&255}};Je.UTF_32BE=Lo;var Mo=class extends ei{name(){return"UTF-32LE"}getChar(e,t){return(e[t+3]&255)<<24|(e[t+2]&255)<<16|(e[t+1]&255)<<8|e[t+0]&255}};Je.UTF_32LE=Mo});var pu=F(Ue=>{"use strict";var Wd=Ue&&Ue.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.gb_18030=Ue.euc_kr=Ue.euc_jp=Ue.big5=Ue.sjis=void 0;var Vd=Wd(Zt());function Gd(n,e){let t=(r,i,s,o)=>{if(o<s)return-1;let a=Math.floor(s+o>>>1);return i>r[a]?t(r,i,a+1,o):i<r[a]?t(r,i,s,a-1):a};return t(n,e,0,n.length-1)}var Uo=class{constructor(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1}reset(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1}nextByte(e){return this.nextIndex>=e.rawLen?(this.done=!0,-1):e.rawInput[this.nextIndex++]&255}},Jt=class{constructor(){this.commonChars=[]}name(){return"mbcs"}match(e){let t=0,r=0,i=0,s=0,o=0,a=new Uo;e:{for(a.reset();this.nextChar(a,e);){if(s++,a.error)i++;else{let c=a.charValue&4294967295;c>255&&(t++,this.commonChars!=null&&Gd(this.commonChars,c)>=0&&r++)}if(i>=2&&i*5>=t)break e}if(t<=10&&i==0){t==0&&s<10?o=0:o=10;break e}if(t<20*i){o=0;break e}if(this.commonChars==null)o=30+t-20*i,o>100&&(o=100);else{let u=90/Math.log(t/4);o=Math.floor(Math.log(r+1)*u+10),o=Math.min(o,100)}}return o==0?null:(0,Vd.default)(e,this,o)}nextChar(e,t){return!0}},ko=class extends Jt{constructor(){super(...arguments),this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314]}name(){return"Shift_JIS"}language(){return"ja"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r>160&&r<=223)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=r<<8|i,i>=64&&i<=127||i>=128&&i<=255||(e.error=!0),!0)}};Ue.sjis=ko;var $o=class extends Jt{constructor(){super(...arguments),this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271]}name(){return"Big5"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r==255)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=e.charValue<<8|i,(i<64||i==127||i==255)&&(e.error=!0),!0)}};Ue.big5=$o;function fu(n,e){n.index=n.nextIndex,n.error=!1;let t=0,r=0,i=0;e:{if(t=n.charValue=n.nextByte(e),t<0){n.done=!0;break e}if(t<=141)break e;if(r=n.nextByte(e),n.charValue=n.charValue<<8|r,t>=161&&t<=254){r<161&&(n.error=!0);break e}if(t==142){r<161&&(n.error=!0);break e}t==143&&(i=n.nextByte(e),n.charValue=n.charValue<<8|i,i<161&&(n.error=!0))}return n.done==!1}var Bo=class extends Jt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=fu}name(){return"EUC-JP"}language(){return"ja"}};Ue.euc_jp=Bo;var qo=class extends Jt{constructor(){super(...arguments),this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=fu}name(){return"EUC-KR"}language(){return"ko"}};Ue.euc_kr=qo;var jo=class extends Jt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]}name(){return"GB18030"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=0,i=0,s=0,o=0;e:{if(r=e.charValue=e.nextByte(t),r<0){e.done=!0;break e}if(r<=128)break e;if(i=e.nextByte(t),e.charValue=e.charValue<<8|i,r>=129&&r<=254){if(i>=64&&i<=126||i>=80&&i<=254)break e;if(i>=48&&i<=57&&(s=e.nextByte(t),s>=129&&s<=254&&(o=e.nextByte(t),o>=48&&o<=57))){e.charValue=e.charValue<<16|s<<8|o;break e}e.error=!0;break e}}return e.done==!1}};Ue.gb_18030=jo});var xu=F(ae=>{"use strict";var zd=ae&&ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ae,"__esModule",{value:!0});ae.KOI8_R=ae.windows_1256=ae.windows_1251=ae.ISO_8859_9=ae.ISO_8859_8=ae.ISO_8859_7=ae.ISO_8859_6=ae.ISO_8859_5=ae.ISO_8859_2=ae.ISO_8859_1=void 0;var hu=zd(Zt()),Hd=16777215,ti=class{constructor(e,t){this.byteIndex=0,this.ngram=0,this.ngramCount=0,this.hitCount=0,this.spaceChar=32,this.ngramList=e,this.byteMap=t}search(e,t){let r=0;return e[r+32]<=t&&(r+=32),e[r+16]<=t&&(r+=16),e[r+8]<=t&&(r+=8),e[r+4]<=t&&(r+=4),e[r+2]<=t&&(r+=2),e[r+1]<=t&&(r+=1),e[r]>t&&(r-=1),r<0||e[r]!=t?-1:r}lookup(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)}addByte(e){this.ngram=(this.ngram<<8)+(e&255)&Hd,this.lookup(this.ngram)}nextByte(e){return this.byteIndex>=e.inputLen?-1:e.inputBytes[this.byteIndex++]&255}parse(e,t){let r,i=!1;for(this.spaceChar=t;(r=this.nextByte(e))>=0;){let o=this.byteMap[r];o!=0&&(o==this.spaceChar&&i||this.addByte(o),i=o==this.spaceChar)}this.addByte(this.spaceChar);let s=this.hitCount/this.ngramCount;return s>.33?98:Math.floor(s*300)}},we=class{constructor(e,t){this.fLang=e,this.fNGrams=t}},Yd=n=>Array.isArray(n)&&isFinite(n[0]),et=class{constructor(){this.spaceChar=32,this.nGramLang=void 0}ngrams(){return[]}byteMap(){return[]}name(e){return"sbcs"}language(){return this.nGramLang}match(e){this.nGramLang=void 0;let t=this.ngrams();if(Yd(t)){let s=new ti(t,this.byteMap()).parse(e,this.spaceChar);return s<=0?null:(0,hu.default)(e,this,s)}let r=-1;for(let i=t.length-1;i>=0;i--){let s=t[i],a=new ti(s.fNGrams,this.byteMap()).parse(e,this.spaceChar);a>r&&(r=a,this.nGramLang=s.fLang)}return r<=0?null:(0,hu.default)(e,this,r)}},Xo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[new we("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new we("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new we("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new we("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new we("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new we("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new we("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new we("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new we("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new we("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]}name(e){return e&&e.c1Bytes?"windows-1252":"ISO-8859-1"}};ae.ISO_8859_1=Xo;var Wo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]}ngrams(){return[new we("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new we("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new we("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new we("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]}name(e){return e&&e.c1Bytes?"windows-1250":"ISO-8859-2"}};ae.ISO_8859_2=Wo;var Vo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]}ngrams(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]}name(){return"ISO-8859-5"}language(){return"ru"}};ae.ISO_8859_5=Vo;var Go=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]}ngrams(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]}name(){return"ISO-8859-6"}language(){return"ar"}};ae.ISO_8859_6=Go;var zo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]}ngrams(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]}name(e){return e&&e.c1Bytes?"windows-1253":"ISO-8859-7"}language(){return"el"}};ae.ISO_8859_7=zo;var Ho=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]}ngrams(){return[new we("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new we("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]}name(e){return e&&e.c1Bytes?"windows-1255":"ISO-8859-8"}language(){return"he"}};ae.ISO_8859_8=Ho;var Yo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]}name(e){return e&&e.c1Bytes?"windows-1254":"ISO-8859-9"}language(){return"tr"}};ae.ISO_8859_9=Yo;var Qo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}ngrams(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]}name(){return"windows-1251"}language(){return"ru"}};ae.windows_1251=Qo;var Ko=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]}ngrams(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]}name(){return"windows-1256"}language(){return"ar"}};ae.windows_1256=Ko;var Zo=class extends et{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}ngrams(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]}name(){return"KOI8-R"}language(){return"ru"}};ae.KOI8_R=Zo});var du=F(ut=>{"use strict";var Qd=ut&&ut.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ut,"__esModule",{value:!0});ut.ISO_2022_CN=ut.ISO_2022_KR=ut.ISO_2022_JP=void 0;var Kd=Qd(Zt()),Kr=class{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,r,i,s=0,o=0,a=0,c,u=e.inputBytes,x=e.inputLen;e:for(t=0;t<x;t++){if(u[t]==27){t:for(i=0;i<this.escapeSequences.length;i++){let m=this.escapeSequences[i];if(x-t<m.length)continue t;for(r=1;r<m.length;r++)if(m[r]!=u[t+r])continue t;s++,t+=m.length-1;continue e}o++}(u[t]==14||u[t]==15)&&a++}return s==0?null:(c=(100*s-100*o)/(s+o),s+a<5&&(c-=(5-(s+a))*10),c<=0?null:(0,Kd.default)(e,this,c))}},Jo=class extends Kr{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}};ut.ISO_2022_JP=Jo;var ea=class extends Kr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}};ut.ISO_2022_KR=ea;var ta=class extends Kr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}};ut.ISO_2022_CN=ta});var mu=F(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.isByteArray=void 0;var Zd=n=>n==null||typeof n!="object"?!1:isFinite(n.length)&&n.length>=0;ri.isByteArray=Zd});var yu=F(ne=>{"use strict";var Jd=ne&&ne.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),em=ne&&ne.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),ii=ne&&ne.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},n(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=n(e),i=0;i<r.length;i++)r[i]!=="default"&&Jd(t,e,r[i]);return em(t,e),t}}(),na=ne&&ne.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ne,"__esModule",{value:!0});ne.detectFileSync=ne.detectFile=ne.analyse=ne.detect=void 0;var gu=na(ou()),tm=na(cu()),rm=na(uu()),ni=ii(lu()),Zr=ii(pu()),lt=ii(xu()),ra=ii(du()),nm=mu(),im=[new rm.default,new ni.UTF_16BE,new ni.UTF_16LE,new ni.UTF_32BE,new ni.UTF_32LE,new Zr.sjis,new Zr.big5,new Zr.euc_jp,new Zr.euc_kr,new Zr.gb_18030,new ra.ISO_2022_JP,new ra.ISO_2022_KR,new ra.ISO_2022_CN,new lt.ISO_8859_1,new lt.ISO_8859_2,new lt.ISO_8859_5,new lt.ISO_8859_6,new lt.ISO_8859_7,new lt.ISO_8859_8,new lt.ISO_8859_9,new lt.windows_1251,new lt.windows_1256,new lt.KOI8_R,new tm.default],sm=n=>{let e=(0,ne.analyse)(n);return e.length>0?e[0].name:null};ne.detect=sm;var om=n=>{if(!(0,nm.isByteArray)(n))throw new Error("Input must be a byte array, e.g. Buffer or Uint8Array");let e=[];for(let s=0;s<256;s++)e[s]=0;for(let s=n.length-1;s>=0;s--)e[n[s]&255]++;let t=!1;for(let s=128;s<=159;s+=1)if(e[s]!==0){t=!0;break}let r={byteStats:e,c1Bytes:t,rawInput:n,rawLen:n.length,inputBytes:n,inputLen:n.length};return im.map(s=>s.match(r)).filter(s=>!!s).sort((s,o)=>o.confidence-s.confidence)};ne.analyse=om;var am=(n,e={})=>new Promise((t,r)=>{let i,s=(0,gu.default)(),o=(c,u)=>{i&&s.closeSync(i),c?r(c):u?t((0,ne.detect)(u)):r(new Error("No error and no buffer received"))},a=(e==null?void 0:e.sampleSize)||0;if(a>0){i=s.openSync(n,"r");let c=Buffer.allocUnsafe(a);s.read(i,c,0,a,e.offset,(u,x)=>{u?o(u,null):(x<a&&(c=c.subarray(0,x)),o(null,c))});return}s.readFile(n,o)});ne.detectFile=am;var cm=(n,e={})=>{let t=(0,gu.default)();if(e&&e.sampleSize){let r=t.openSync(n,"r"),i=Buffer.allocUnsafe(e.sampleSize),s=t.readSync(r,i,0,e.sampleSize,e.offset);return s<e.sampleSize&&(i=i.subarray(0,s)),t.closeSync(r),(0,ne.detect)(i)}return(0,ne.detect)(t.readFileSync(n))};ne.detectFileSync=cm;ne.default={analyse:ne.analyse,detect:ne.detect,detectFileSync:ne.detectFileSync,detectFile:ne.detectFile}});var ai=F(ia=>{(function(){ia.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(ia)});var ft=F((Eu,Ft)=>{(function(){var n,e,t,r,i,s,o,a=[].slice,c={}.hasOwnProperty;n=function(){var u,x,m,g,p,y;if(y=arguments[0],p=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,m=p.length;u<m;u++)if(g=p[u],g!=null)for(x in g)c.call(g,x)&&(y[x]=g[x]);return y},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},s=function(u){var x;return!!u&&((x=typeof u)=="function"||x==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var x;if(t(u))return!u.length;for(x in u)if(c.call(u,x))return!1;return!0},o=function(u){var x,m;return s(u)&&(m=Object.getPrototypeOf(u))&&(x=m.constructor)&&typeof x=="function"&&x instanceof x&&Function.prototype.toString.call(x)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Ft.exports.assign=n,Ft.exports.isFunction=i,Ft.exports.isObject=s,Ft.exports.isArray=t,Ft.exports.isEmpty=r,Ft.exports.isPlainObject=o,Ft.exports.getValue=e}).call(Eu)});var sa=F((Cu,Iu)=>{(function(){var n;Iu.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Cu)});var Ru=F((Su,Du)=>{(function(){var n;Du.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Su)});var Nu=F((Tu,Pu)=>{(function(){var n;Pu.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Tu)});var Au=F((Ou,_u)=>{(function(){var n,e,t;e=Ru(),t=Nu(),_u.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,s){return!0},r.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},r}()}).call(Ou)});var fe=F((Lu,Mu)=>{(function(){Mu.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Lu)});var oa=F((Fu,Uu)=>{(function(){var n,e,t;n=fe(),t=Xe(),Uu.exports=e=function(){function r(i,s,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),s==null)throw new Error("Missing attribute name. "+this.debugInfo(s));this.name=this.stringify.name(s),this.value=this.stringify.attValue(o),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(Fu)});var ci=F((ku,$u)=>{(function(){var n;$u.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(ku)});var ui=F((Bu,qu)=>{(function(){var n,e,t,r,i,s,o,a,c,u=function(m,g){for(var p in g)x.call(g,p)&&(m[p]=g[p]);function y(){this.constructor=m}return y.prototype=g.prototype,m.prototype=new y,m.__super__=g.prototype,m},x={}.hasOwnProperty;c=ft(),a=c.isObject,o=c.isFunction,s=c.getValue,i=Xe(),n=fe(),e=oa(),r=ci(),qu.exports=t=function(m){u(g,m);function g(p,y,b){var R,P,S,v;if(g.__super__.constructor.call(this,p),y==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(y),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,b!=null&&this.attribute(b),p.type===n.Document&&(this.isRoot=!0,this.documentObject=p,p.rootObject=this,p.children)){for(v=p.children,P=0,S=v.length;P<S;P++)if(R=v[P],R.type===n.DocType){R.name=this.name;break}}}return Object.defineProperty(g.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(g.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(g.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),g.prototype.clone=function(){var p,y,b,R;b=Object.create(this),b.isRoot&&(b.documentObject=null),b.attribs={},R=this.attribs;for(y in R)x.call(R,y)&&(p=R[y],b.attribs[y]=p.clone());return b.children=[],this.children.forEach(function(P){var S;return S=P.clone(),S.parent=b,b.children.push(S)}),b},g.prototype.attribute=function(p,y){var b,R;if(p!=null&&(p=s(p)),a(p))for(b in p)x.call(p,b)&&(R=p[b],this.attribute(b,R));else o(y)&&(y=y.apply()),this.options.keepNullAttributes&&y==null?this.attribs[p]=new e(this,p,""):y!=null&&(this.attribs[p]=new e(this,p,y));return this},g.prototype.removeAttribute=function(p){var y,b,R;if(p==null)throw new Error("Missing attribute name. "+this.debugInfo());if(p=s(p),Array.isArray(p))for(b=0,R=p.length;b<R;b++)y=p[b],delete this.attribs[y];else delete this.attribs[p];return this},g.prototype.toString=function(p){return this.options.writer.element(this,this.options.writer.filterOptions(p))},g.prototype.att=function(p,y){return this.attribute(p,y)},g.prototype.a=function(p,y){return this.attribute(p,y)},g.prototype.getAttribute=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p].value:null},g.prototype.setAttribute=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNode=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p]:null},g.prototype.setAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNS=function(p,y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNodeNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNodeNS=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasAttribute=function(p){return this.attribs.hasOwnProperty(p)},g.prototype.hasAttributeNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttribute=function(p,y){return this.attribs.hasOwnProperty(p)?this.attribs[p].isId:y},g.prototype.setIdAttributeNS=function(p,y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttributeNode=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(p){var y,b,R;if(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.namespaceURI!==this.namespaceURI||p.prefix!==this.prefix||p.localName!==this.localName||p.attribs.length!==this.attribs.length)return!1;for(y=b=0,R=this.attribs.length-1;0<=R?b<=R:b>=R;y=0<=R?++b:--b)if(!this.attribs[y].isEqualNode(p.attribs[y]))return!1;return!0},g}(i)}).call(Bu)});var Jr=F((ju,Xu)=>{(function(){var n,e,t=function(i,s){for(var o in s)r.call(s,o)&&(i[o]=s[o]);function a(){this.constructor=i}return a.prototype=s.prototype,i.prototype=new a,i.__super__=s.prototype,i},r={}.hasOwnProperty;e=Xe(),Xu.exports=n=function(i){t(s,i);function s(o){s.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(o,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(o){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},s}(e)}).call(ju)});var li=F((Wu,Vu)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),t=Jr(),Vu.exports=e=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(c)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},o}(t)}).call(Wu)});var fi=F((Gu,zu)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Jr(),zu.exports=t=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(c)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},o}(e)}).call(Gu)});var pi=F((Hu,Yu)=>{(function(){var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;r=ft().isObject,t=Xe(),n=fe(),Yu.exports=e=function(o){i(a,o);function a(c,u,x,m){var g;a.__super__.constructor.call(this,c),r(u)&&(g=u,u=g.version,x=g.encoding,m=g.standalone),u||(u="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(u),x!=null&&(this.encoding=this.stringify.xmlEncoding(x)),m!=null&&(this.standalone=this.stringify.xmlStandalone(m))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(Hu)});var hi=F((Qu,Ku)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),Ku.exports=e=function(s){r(o,s);function o(a,c,u,x,m,g){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!x)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!m)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(m.indexOf("#")!==0&&(m="#"+m),!m.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(g&&!m.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(x),g&&(this.defaultValue=this.stringify.dtdAttDefault(g)),this.defaultValueType=m}return o.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},o}(t)}).call(Qu)});var xi=F((Zu,Ju)=>{(function(){var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;r=ft().isObject,t=Xe(),n=fe(),Ju.exports=e=function(o){i(a,o);function a(c,u,x,m){if(a.__super__.constructor.call(this,c),x==null)throw new Error("Missing DTD entity name. "+this.debugInfo(x));if(m==null)throw new Error("Missing DTD entity value. "+this.debugInfo(x));if(this.pe=!!u,this.name=this.stringify.name(x),this.type=n.EntityDeclaration,!r(m))this.value=this.stringify.dtdEntityValue(m),this.internal=!0;else{if(!m.pubID&&!m.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(x));if(m.pubID&&!m.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(x));if(this.internal=!1,m.pubID!=null&&(this.pubID=this.stringify.dtdPubID(m.pubID)),m.sysID!=null&&(this.sysID=this.stringify.dtdSysID(m.sysID)),m.nData!=null&&(this.nData=this.stringify.dtdNData(m.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(x))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(Zu)});var di=F((el,tl)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),tl.exports=e=function(s){r(o,s);function o(a,c,u){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return o.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},o}(t)}).call(el)});var mi=F((rl,nl)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),nl.exports=e=function(s){r(o,s);function o(a,c,u){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=n.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},o}(t)}).call(rl)});var gi=F((il,sl)=>{(function(){var n,e,t,r,i,s,o,a,c,u=function(m,g){for(var p in g)x.call(g,p)&&(m[p]=g[p]);function y(){this.constructor=m}return y.prototype=g.prototype,m.prototype=new y,m.__super__=g.prototype,m},x={}.hasOwnProperty;c=ft().isObject,a=Xe(),n=fe(),e=hi(),r=xi(),t=di(),i=mi(),o=ci(),sl.exports=s=function(m){u(g,m);function g(p,y,b){var R,P,S,v,l,f;if(g.__super__.constructor.call(this,p),this.type=n.DocType,p.children){for(v=p.children,P=0,S=v.length;P<S;P++)if(R=v[P],R.type===n.Element){this.name=R.name;break}}this.documentObject=p,c(y)&&(l=y,y=l.pubID,b=l.sysID),b==null&&(f=[y,b],b=f[0],y=f[1]),y!=null&&(this.pubID=this.stringify.dtdPubID(y)),b!=null&&(this.sysID=this.stringify.dtdSysID(b))}return Object.defineProperty(g.prototype,"entities",{get:function(){var p,y,b,R,P;for(R={},P=this.children,y=0,b=P.length;y<b;y++)p=P[y],p.type===n.EntityDeclaration&&!p.pe&&(R[p.name]=p);return new o(R)}}),Object.defineProperty(g.prototype,"notations",{get:function(){var p,y,b,R,P;for(R={},P=this.children,y=0,b=P.length;y<b;y++)p=P[y],p.type===n.NotationDeclaration&&(R[p.name]=p);return new o(R)}}),Object.defineProperty(g.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(g.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(g.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.element=function(p,y){var b;return b=new t(this,p,y),this.children.push(b),this},g.prototype.attList=function(p,y,b,R,P){var S;return S=new e(this,p,y,b,R,P),this.children.push(S),this},g.prototype.entity=function(p,y){var b;return b=new r(this,!1,p,y),this.children.push(b),this},g.prototype.pEntity=function(p,y){var b;return b=new r(this,!0,p,y),this.children.push(b),this},g.prototype.notation=function(p,y){var b;return b=new i(this,p,y),this.children.push(b),this},g.prototype.toString=function(p){return this.options.writer.docType(this,this.options.writer.filterOptions(p))},g.prototype.ele=function(p,y){return this.element(p,y)},g.prototype.att=function(p,y,b,R,P){return this.attList(p,y,b,R,P)},g.prototype.ent=function(p,y){return this.entity(p,y)},g.prototype.pent=function(p,y){return this.pEntity(p,y)},g.prototype.not=function(p,y){return this.notation(p,y)},g.prototype.up=function(){return this.root()||this.documentObject},g.prototype.isEqualNode=function(p){return!(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.name!==this.name||p.publicId!==this.publicId||p.systemId!==this.systemId)},g}(a)}).call(il)});var yi=F((ol,al)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Xe(),al.exports=t=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(c)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},o}(e)}).call(ol)});var wi=F((cl,ul)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Jr(),ul.exports=t=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(c)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},o.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(e)}).call(cl)});var vi=F((ll,fl)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Jr(),fl.exports=t=function(s){r(o,s);function o(a,c,u){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},o.prototype.isEqualNode=function(a){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},o}(e)}).call(ll)});var aa=F((pl,hl)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),hl.exports=e=function(s){r(o,s);function o(a){o.__super__.constructor.call(this,a),this.type=n.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return""},o}(t)}).call(pl)});var ml=F((xl,dl)=>{(function(){var n;dl.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(xl)});var wl=F((gl,yl)=>{(function(){yl.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(gl)});var Xe=F((vl,bl)=>{(function(){var n,e,t,r,i,s,o,a,c,u,x,m,g,p,y,b,R,P,S,v={}.hasOwnProperty;S=ft(),P=S.isObject,R=S.isFunction,b=S.isEmpty,y=S.getValue,a=null,t=null,r=null,i=null,s=null,g=null,p=null,m=null,o=null,e=null,x=null,c=null,n=null,bl.exports=u=function(){function l(f){this.parent=f,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=ui(),t=li(),r=fi(),i=pi(),s=gi(),g=yi(),p=wi(),m=vi(),o=aa(),e=fe(),x=ml(),c=ci(),n=wl())}return Object.defineProperty(l.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(l.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(l.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(l.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(l.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new x(this.children)),this.childNodeList}}),Object.defineProperty(l.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(l.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(l.prototype,"previousSibling",{get:function(){var f;return f=this.parent.children.indexOf(this),this.parent.children[f-1]||null}}),Object.defineProperty(l.prototype,"nextSibling",{get:function(){var f;return f=this.parent.children.indexOf(this),this.parent.children[f+1]||null}}),Object.defineProperty(l.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(l.prototype,"textContent",{get:function(){var f,E,N,d,D;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(D="",d=this.children,E=0,N=d.length;E<N;E++)f=d[E],f.textContent&&(D+=f.textContent);return D}else return null},set:function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),l.prototype.setParent=function(f){var E,N,d,D,C;for(this.parent=f,f&&(this.options=f.options,this.stringify=f.stringify),D=this.children,C=[],N=0,d=D.length;N<d;N++)E=D[N],C.push(E.setParent(this));return C},l.prototype.element=function(f,E,N){var d,D,C,T,O,_,M,k,A,X,B;if(_=null,E===null&&N==null&&(A=[{},null],E=A[0],N=A[1]),E==null&&(E={}),E=y(E),P(E)||(X=[E,N],N=X[0],E=X[1]),f!=null&&(f=y(f)),Array.isArray(f))for(C=0,M=f.length;C<M;C++)D=f[C],_=this.element(D);else if(R(f))_=this.element(f.apply());else if(P(f)){for(O in f)if(v.call(f,O))if(B=f[O],R(B)&&(B=B.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&O.indexOf(this.stringify.convertAttKey)===0)_=this.attribute(O.substr(this.stringify.convertAttKey.length),B);else if(!this.options.separateArrayItems&&Array.isArray(B)&&b(B))_=this.dummy();else if(P(B)&&b(B))_=this.element(O);else if(!this.options.keepNullNodes&&B==null)_=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(B))for(T=0,k=B.length;T<k;T++)D=B[T],d={},d[O]=D,_=this.element(d);else P(B)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&O.indexOf(this.stringify.convertTextKey)===0?_=this.element(B):(_=this.element(O),_.element(B)):_=this.element(O,B)}else!this.options.keepNullNodes&&N===null?_=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&f.indexOf(this.stringify.convertTextKey)===0?_=this.text(N):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&f.indexOf(this.stringify.convertCDataKey)===0?_=this.cdata(N):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&f.indexOf(this.stringify.convertCommentKey)===0?_=this.comment(N):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&f.indexOf(this.stringify.convertRawKey)===0?_=this.raw(N):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&f.indexOf(this.stringify.convertPIKey)===0?_=this.instruction(f.substr(this.stringify.convertPIKey.length),N):_=this.node(f,E,N);if(_==null)throw new Error("Could not create any elements with: "+f+". "+this.debugInfo());return _},l.prototype.insertBefore=function(f,E,N){var d,D,C,T,O;if(f!=null&&f.type)return C=f,T=E,C.setParent(this),T?(D=children.indexOf(T),O=children.splice(D),children.push(C),Array.prototype.push.apply(children,O)):children.push(C),C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(f));return D=this.parent.children.indexOf(this),O=this.parent.children.splice(D),d=this.parent.element(f,E,N),Array.prototype.push.apply(this.parent.children,O),d},l.prototype.insertAfter=function(f,E,N){var d,D,C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(f));return D=this.parent.children.indexOf(this),C=this.parent.children.splice(D+1),d=this.parent.element(f,E,N),Array.prototype.push.apply(this.parent.children,C),d},l.prototype.remove=function(){var f,E;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return f=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[f,f-f+1].concat(E=[])),this.parent},l.prototype.node=function(f,E,N){var d,D;return f!=null&&(f=y(f)),E||(E={}),E=y(E),P(E)||(D=[E,N],N=D[0],E=D[1]),d=new a(this,f,E),N!=null&&d.text(N),this.children.push(d),d},l.prototype.text=function(f){var E;return P(f)&&this.element(f),E=new p(this,f),this.children.push(E),this},l.prototype.cdata=function(f){var E;return E=new t(this,f),this.children.push(E),this},l.prototype.comment=function(f){var E;return E=new r(this,f),this.children.push(E),this},l.prototype.commentBefore=function(f){var E,N,d;return N=this.parent.children.indexOf(this),d=this.parent.children.splice(N),E=this.parent.comment(f),Array.prototype.push.apply(this.parent.children,d),this},l.prototype.commentAfter=function(f){var E,N,d;return N=this.parent.children.indexOf(this),d=this.parent.children.splice(N+1),E=this.parent.comment(f),Array.prototype.push.apply(this.parent.children,d),this},l.prototype.raw=function(f){var E;return E=new g(this,f),this.children.push(E),this},l.prototype.dummy=function(){var f;return f=new o(this),f},l.prototype.instruction=function(f,E){var N,d,D,C,T;if(f!=null&&(f=y(f)),E!=null&&(E=y(E)),Array.isArray(f))for(C=0,T=f.length;C<T;C++)N=f[C],this.instruction(N);else if(P(f))for(N in f)v.call(f,N)&&(d=f[N],this.instruction(N,d));else R(E)&&(E=E.apply()),D=new m(this,f,E),this.children.push(D);return this},l.prototype.instructionBefore=function(f,E){var N,d,D;return d=this.parent.children.indexOf(this),D=this.parent.children.splice(d),N=this.parent.instruction(f,E),Array.prototype.push.apply(this.parent.children,D),this},l.prototype.instructionAfter=function(f,E){var N,d,D;return d=this.parent.children.indexOf(this),D=this.parent.children.splice(d+1),N=this.parent.instruction(f,E),Array.prototype.push.apply(this.parent.children,D),this},l.prototype.declaration=function(f,E,N){var d,D;return d=this.document(),D=new i(d,f,E,N),d.children.length===0?d.children.unshift(D):d.children[0].type===e.Declaration?d.children[0]=D:d.children.unshift(D),d.root()||d},l.prototype.dtd=function(f,E){var N,d,D,C,T,O,_,M,k,A;for(d=this.document(),D=new s(d,f,E),k=d.children,C=T=0,_=k.length;T<_;C=++T)if(N=k[C],N.type===e.DocType)return d.children[C]=D,D;for(A=d.children,C=O=0,M=A.length;O<M;C=++O)if(N=A[C],N.isRoot)return d.children.splice(C,0,D),D;return d.children.push(D),D},l.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},l.prototype.root=function(){var f;for(f=this;f;){if(f.type===e.Document)return f.rootObject;if(f.isRoot)return f;f=f.parent}},l.prototype.document=function(){var f;for(f=this;f;){if(f.type===e.Document)return f;f=f.parent}},l.prototype.end=function(f){return this.document().end(f)},l.prototype.prev=function(){var f;if(f=this.parent.children.indexOf(this),f<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[f-1]},l.prototype.next=function(){var f;if(f=this.parent.children.indexOf(this),f===-1||f===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[f+1]},l.prototype.importDocument=function(f){var E;return E=f.root().clone(),E.parent=this,E.isRoot=!1,this.children.push(E),this},l.prototype.debugInfo=function(f){var E,N;return f=f||this.name,f==null&&!((E=this.parent)!=null&&E.name)?"":f==null?"parent: <"+this.parent.name+">":(N=this.parent)!=null&&N.name?"node: <"+f+">, parent: <"+this.parent.name+">":"node: <"+f+">"},l.prototype.ele=function(f,E,N){return this.element(f,E,N)},l.prototype.nod=function(f,E,N){return this.node(f,E,N)},l.prototype.txt=function(f){return this.text(f)},l.prototype.dat=function(f){return this.cdata(f)},l.prototype.com=function(f){return this.comment(f)},l.prototype.ins=function(f,E){return this.instruction(f,E)},l.prototype.doc=function(){return this.document()},l.prototype.dec=function(f,E,N){return this.declaration(f,E,N)},l.prototype.e=function(f,E,N){return this.element(f,E,N)},l.prototype.n=function(f,E,N){return this.node(f,E,N)},l.prototype.t=function(f){return this.text(f)},l.prototype.d=function(f){return this.cdata(f)},l.prototype.c=function(f){return this.comment(f)},l.prototype.r=function(f){return this.raw(f)},l.prototype.i=function(f,E){return this.instruction(f,E)},l.prototype.u=function(){return this.up()},l.prototype.importXMLBuilder=function(f){return this.importDocument(f)},l.prototype.replaceChild=function(f,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.removeChild=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.appendChild=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.hasChildNodes=function(){return this.children.length!==0},l.prototype.cloneNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isSupported=function(f,E){return!0},l.prototype.hasAttributes=function(){return this.attribs.length!==0},l.prototype.compareDocumentPosition=function(f){var E,N;return E=this,E===f?0:this.document()!==f.document()?(N=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?N|=n.Preceding:N|=n.Following,N):E.isAncestor(f)?n.Contains|n.Preceding:E.isDescendant(f)?n.Contains|n.Following:E.isPreceding(f)?n.Preceding:n.Following},l.prototype.isSameNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.lookupPrefix=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isDefaultNamespace=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.lookupNamespaceURI=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isEqualNode=function(f){var E,N,d;if(f.nodeType!==this.nodeType||f.children.length!==this.children.length)return!1;for(E=N=0,d=this.children.length-1;0<=d?N<=d:N>=d;E=0<=d?++N:--N)if(!this.children[E].isEqualNode(f.children[E]))return!1;return!0},l.prototype.getFeature=function(f,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.setUserData=function(f,E,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getUserData=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.contains=function(f){return f?f===this||this.isDescendant(f):!1},l.prototype.isDescendant=function(f){var E,N,d,D,C;for(C=this.children,d=0,D=C.length;d<D;d++)if(E=C[d],f===E||(N=E.isDescendant(f),N))return!0;return!1},l.prototype.isAncestor=function(f){return f.isDescendant(this)},l.prototype.isPreceding=function(f){var E,N;return E=this.treePosition(f),N=this.treePosition(this),E===-1||N===-1?!1:E<N},l.prototype.isFollowing=function(f){var E,N;return E=this.treePosition(f),N=this.treePosition(this),E===-1||N===-1?!1:E>N},l.prototype.treePosition=function(f){var E,N;return N=0,E=!1,this.foreachTreeNode(this.document(),function(d){if(N++,!E&&d===f)return E=!0}),E?N:-1},l.prototype.foreachTreeNode=function(f,E){var N,d,D,C,T;for(f||(f=this.document()),C=f.children,d=0,D=C.length;d<D;d++){if(N=C[d],T=E(N))return T;if(T=this.foreachTreeNode(N,E),T)return T}},l}()}).call(vl)});var ca=F((El,Cl)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;Cl.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var s,o,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{};for(s in o)t.call(o,s)&&(a=o[s],this[s]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var s,o;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+o.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+o.index);return i},r.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(El)});var en=F((Il,Sl)=>{(function(){Sl.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Il)});var ua=F((Dl,Rl)=>{(function(){var n,e,t,r,i,s,o,a,c,u,x,m,g,p,y,b,R,P={}.hasOwnProperty;R=ft().assign,n=fe(),c=pi(),u=gi(),t=li(),r=fi(),m=ui(),p=yi(),y=wi(),g=vi(),x=aa(),i=hi(),s=di(),o=xi(),a=mi(),e=en(),Rl.exports=b=function(){function S(v){var l,f,E;v||(v={}),this.options=v,f=v.writer||{};for(l in f)P.call(f,l)&&(E=f[l],this["_"+l]=this[l],this[l]=E)}return S.prototype.filterOptions=function(v){var l,f,E,N,d,D,C,T;return v||(v={}),v=R({},this.options,v),l={writer:this},l.pretty=v.pretty||!1,l.allowEmpty=v.allowEmpty||!1,l.indent=(f=v.indent)!=null?f:"  ",l.newline=(E=v.newline)!=null?E:`
`,l.offset=(N=v.offset)!=null?N:0,l.dontPrettyTextNodes=(d=(D=v.dontPrettyTextNodes)!=null?D:v.dontprettytextnodes)!=null?d:0,l.spaceBeforeSlash=(C=(T=v.spaceBeforeSlash)!=null?T:v.spacebeforeslash)!=null?C:"",l.spaceBeforeSlash===!0&&(l.spaceBeforeSlash=" "),l.suppressPrettyCount=0,l.user={},l.state=e.None,l},S.prototype.indent=function(v,l,f){var E;return!l.pretty||l.suppressPrettyCount?"":l.pretty&&(E=(f||0)+l.offset+1,E>0)?new Array(E).join(l.indent):""},S.prototype.endline=function(v,l,f){return!l.pretty||l.suppressPrettyCount?"":l.newline},S.prototype.attribute=function(v,l,f){var E;return this.openAttribute(v,l,f),E=" "+v.name+'="'+v.value+'"',this.closeAttribute(v,l,f),E},S.prototype.cdata=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<![CDATA[",l.state=e.InsideTag,E+=v.value,l.state=e.CloseTag,E+="]]>"+this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.comment=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<!-- ",l.state=e.InsideTag,E+=v.value,l.state=e.CloseTag,E+=" -->"+this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.declaration=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<?xml",l.state=e.InsideTag,E+=' version="'+v.version+'"',v.encoding!=null&&(E+=' encoding="'+v.encoding+'"'),v.standalone!=null&&(E+=' standalone="'+v.standalone+'"'),l.state=e.CloseTag,E+=l.spaceBeforeSlash+"?>",E+=this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.docType=function(v,l,f){var E,N,d,D,C;if(f||(f=0),this.openNode(v,l,f),l.state=e.OpenTag,D=this.indent(v,l,f),D+="<!DOCTYPE "+v.root().name,v.pubID&&v.sysID?D+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(D+=' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(D+=" [",D+=this.endline(v,l,f),l.state=e.InsideTag,C=v.children,N=0,d=C.length;N<d;N++)E=C[N],D+=this.writeChildNode(E,l,f+1);l.state=e.CloseTag,D+="]"}return l.state=e.CloseTag,D+=l.spaceBeforeSlash+">",D+=this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),D},S.prototype.element=function(v,l,f){var E,N,d,D,C,T,O,_,M,k,A,X,B,Q;f||(f=0),k=!1,A="",this.openNode(v,l,f),l.state=e.OpenTag,A+=this.indent(v,l,f)+"<"+v.name,X=v.attribs;for(M in X)P.call(X,M)&&(E=X[M],A+=this.attribute(E,l,f));if(d=v.children.length,D=d===0?null:v.children[0],d===0||v.children.every(function(Z){return(Z.type===n.Text||Z.type===n.Raw)&&Z.value===""}))l.allowEmpty?(A+=">",l.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,l,f)):(l.state=e.CloseTag,A+=l.spaceBeforeSlash+"/>"+this.endline(v,l,f));else if(l.pretty&&d===1&&(D.type===n.Text||D.type===n.Raw)&&D.value!=null)A+=">",l.state=e.InsideTag,l.suppressPrettyCount++,k=!0,A+=this.writeChildNode(D,l,f+1),l.suppressPrettyCount--,k=!1,l.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,l,f);else{if(l.dontPrettyTextNodes){for(B=v.children,C=0,O=B.length;C<O;C++)if(N=B[C],(N.type===n.Text||N.type===n.Raw)&&N.value!=null){l.suppressPrettyCount++,k=!0;break}}for(A+=">"+this.endline(v,l,f),l.state=e.InsideTag,Q=v.children,T=0,_=Q.length;T<_;T++)N=Q[T],A+=this.writeChildNode(N,l,f+1);l.state=e.CloseTag,A+=this.indent(v,l,f)+"</"+v.name+">",k&&l.suppressPrettyCount--,A+=this.endline(v,l,f),l.state=e.None}return this.closeNode(v,l,f),A},S.prototype.writeChildNode=function(v,l,f){switch(v.type){case n.CData:return this.cdata(v,l,f);case n.Comment:return this.comment(v,l,f);case n.Element:return this.element(v,l,f);case n.Raw:return this.raw(v,l,f);case n.Text:return this.text(v,l,f);case n.ProcessingInstruction:return this.processingInstruction(v,l,f);case n.Dummy:return"";case n.Declaration:return this.declaration(v,l,f);case n.DocType:return this.docType(v,l,f);case n.AttributeDeclaration:return this.dtdAttList(v,l,f);case n.ElementDeclaration:return this.dtdElement(v,l,f);case n.EntityDeclaration:return this.dtdEntity(v,l,f);case n.NotationDeclaration:return this.dtdNotation(v,l,f);default:throw new Error("Unknown XML node type: "+v.constructor.name)}},S.prototype.processingInstruction=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<?",l.state=e.InsideTag,E+=v.target,v.value&&(E+=" "+v.value),l.state=e.CloseTag,E+=l.spaceBeforeSlash+"?>",E+=this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.raw=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f),l.state=e.InsideTag,E+=v.value,l.state=e.CloseTag,E+=this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.text=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f),l.state=e.InsideTag,E+=v.value,l.state=e.CloseTag,E+=this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.dtdAttList=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<!ATTLIST",l.state=e.InsideTag,E+=" "+v.elementName+" "+v.attributeName+" "+v.attributeType,v.defaultValueType!=="#DEFAULT"&&(E+=" "+v.defaultValueType),v.defaultValue&&(E+=' "'+v.defaultValue+'"'),l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.dtdElement=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<!ELEMENT",l.state=e.InsideTag,E+=" "+v.name+" "+v.value,l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.dtdEntity=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<!ENTITY",l.state=e.InsideTag,v.pe&&(E+=" %"),E+=" "+v.name,v.value?E+=' "'+v.value+'"':(v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),v.nData&&(E+=" NDATA "+v.nData)),l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.dtdNotation=function(v,l,f){var E;return this.openNode(v,l,f),l.state=e.OpenTag,E=this.indent(v,l,f)+"<!NOTATION",l.state=e.InsideTag,E+=" "+v.name,v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.pubID?E+=' PUBLIC "'+v.pubID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(v,l,f),l.state=e.None,this.closeNode(v,l,f),E},S.prototype.openNode=function(v,l,f){},S.prototype.closeNode=function(v,l,f){},S.prototype.openAttribute=function(v,l,f){},S.prototype.closeAttribute=function(v,l,f){},S}()}).call(Dl)});var bi=F((Tl,Pl)=>{(function(){var n,e,t=function(i,s){for(var o in s)r.call(s,o)&&(i[o]=s[o]);function a(){this.constructor=i}return a.prototype=s.prototype,i.prototype=new a,i.__super__=s.prototype,i},r={}.hasOwnProperty;e=ua(),Pl.exports=n=function(i){t(s,i);function s(o){s.__super__.constructor.call(this,o)}return s.prototype.document=function(o,a){var c,u,x,m,g;for(a=this.filterOptions(a),m="",g=o.children,u=0,x=g.length;u<x;u++)c=g[u],m+=this.writeChildNode(c,a,0);return a.pretty&&m.slice(-a.newline.length)===a.newline&&(m=m.slice(0,-a.newline.length)),m},s}(e)}).call(Tl)});var la=F((Nl,Ol)=>{(function(){var n,e,t,r,i,s,o,a,c=function(x,m){for(var g in m)u.call(m,g)&&(x[g]=m[g]);function p(){this.constructor=x}return p.prototype=m.prototype,x.prototype=new p,x.__super__=m.prototype,x},u={}.hasOwnProperty;a=ft().isPlainObject,t=sa(),e=Au(),i=Xe(),n=fe(),o=ca(),s=bi(),Ol.exports=r=function(x){c(m,x);function m(g){m.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,g||(g={}),g.writer||(g.writer=new s),this.options=g,this.stringify=new o(g)}return Object.defineProperty(m.prototype,"implementation",{value:new t}),Object.defineProperty(m.prototype,"doctype",{get:function(){var g,p,y,b;for(b=this.children,p=0,y=b.length;p<y;p++)if(g=b[p],g.type===n.DocType)return g;return null}}),Object.defineProperty(m.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(m.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(m.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(m.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(m.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(m.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(m.prototype,"origin",{get:function(){return null}}),Object.defineProperty(m.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(m.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(m.prototype,"contentType",{get:function(){return null}}),m.prototype.end=function(g){var p;return p={},g?a(g)&&(p=g,g=this.options.writer):g=this.options.writer,g.document(this,g.filterOptions(p))},m.prototype.toString=function(g){return this.options.writer.document(this,this.options.writer.filterOptions(g))},m.prototype.createElement=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTextNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createComment=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createCDATASection=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createProcessingInstruction=function(g,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttribute=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEntityReference=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.importNode=function(g,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createElementNS=function(g,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttributeNS=function(g,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(g,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementById=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.adoptNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.renameNode=function(g,p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByClassName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEvent=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createNodeIterator=function(g,p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTreeWalker=function(g,p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m}(i)}).call(Nl)});var Ll=F((_l,Al)=>{(function(){var n,e,t,r,i,s,o,a,c,u,x,m,g,p,y,b,R,P,S,v,l,f,E,N,d={}.hasOwnProperty;N=ft(),f=N.isObject,l=N.isFunction,E=N.isPlainObject,v=N.getValue,n=fe(),m=la(),p=ui(),r=li(),i=fi(),b=yi(),S=wi(),y=vi(),u=pi(),x=gi(),s=hi(),a=xi(),o=di(),c=mi(),t=oa(),P=ca(),R=bi(),e=en(),Al.exports=g=function(){function D(C,T,O){var _;this.name="?xml",this.type=n.Document,C||(C={}),_={},C.writer?E(C.writer)&&(_=C.writer,C.writer=new R):C.writer=new R,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(_),this.stringify=new P(C),this.onDataCallback=T||function(){},this.onEndCallback=O||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return D.prototype.createChildNode=function(C){var T,O,_,M,k,A,X,B;switch(C.type){case n.CData:this.cdata(C.value);break;case n.Comment:this.comment(C.value);break;case n.Element:_={},X=C.attribs;for(O in X)d.call(X,O)&&(T=X[O],_[O]=T.value);this.node(C.name,_);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(C.value);break;case n.Text:this.text(C.value);break;case n.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(B=C.children,k=0,A=B.length;k<A;k++)M=B[k],this.createChildNode(M),M.type===n.Element&&this.up();return this},D.prototype.dummy=function(){return this},D.prototype.node=function(C,T,O){var _;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=v(C),T==null&&(T={}),T=v(T),f(T)||(_=[T,O],O=_[0],T=_[1]),this.currentNode=new p(this,C,T),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,O!=null&&this.text(O),this},D.prototype.element=function(C,T,O){var _,M,k,A,X,B;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||f(C)||l(C))for(A=this.options.noValidation,this.options.noValidation=!0,B=new m(this.options).element("TEMP_ROOT"),B.element(C),this.options.noValidation=A,X=B.children,M=0,k=X.length;M<k;M++)_=X[M],this.createChildNode(_),_.type===n.Element&&this.up();else this.node(C,T,O);return this},D.prototype.attribute=function(C,T){var O,_;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=v(C)),f(C))for(O in C)d.call(C,O)&&(_=C[O],this.attribute(O,_));else l(T)&&(T=T.apply()),this.options.keepNullAttributes&&T==null?this.currentNode.attribs[C]=new t(this,C,""):T!=null&&(this.currentNode.attribs[C]=new t(this,C,T));return this},D.prototype.text=function(C){var T;return this.openCurrent(),T=new S(this,C),this.onData(this.writer.text(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.cdata=function(C){var T;return this.openCurrent(),T=new r(this,C),this.onData(this.writer.cdata(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.comment=function(C){var T;return this.openCurrent(),T=new i(this,C),this.onData(this.writer.comment(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.raw=function(C){var T;return this.openCurrent(),T=new b(this,C),this.onData(this.writer.raw(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.instruction=function(C,T){var O,_,M,k,A;if(this.openCurrent(),C!=null&&(C=v(C)),T!=null&&(T=v(T)),Array.isArray(C))for(O=0,k=C.length;O<k;O++)_=C[O],this.instruction(_);else if(f(C))for(_ in C)d.call(C,_)&&(M=C[_],this.instruction(_,M));else l(T)&&(T=T.apply()),A=new y(this,C,T),this.onData(this.writer.processingInstruction(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},D.prototype.declaration=function(C,T,O){var _;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return _=new u(this,C,T,O),this.onData(this.writer.declaration(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.doctype=function(C,T,O){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new x(this,T,O),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},D.prototype.dtdElement=function(C,T){var O;return this.openCurrent(),O=new o(this,C,T),this.onData(this.writer.dtdElement(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.attList=function(C,T,O,_,M){var k;return this.openCurrent(),k=new s(this,C,T,O,_,M),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.entity=function(C,T){var O;return this.openCurrent(),O=new a(this,!1,C,T),this.onData(this.writer.dtdEntity(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.pEntity=function(C,T){var O;return this.openCurrent(),O=new a(this,!0,C,T),this.onData(this.writer.dtdEntity(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.notation=function(C,T){var O;return this.openCurrent(),O=new c(this,C,T),this.onData(this.writer.dtdNotation(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},D.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},D.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},D.prototype.openNode=function(C){var T,O,_,M;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===n.Element&&(this.root=C),O="",C.type===n.Element){this.writerOptions.state=e.OpenTag,O=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,M=C.attribs;for(_ in M)d.call(M,_)&&(T=M[_],O+=this.writer.attribute(T,this.writerOptions,this.currentLevel));O+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,O=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?O+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(O+=' SYSTEM "'+C.sysID+'"'),C.children?(O+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,O+=">"),O+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(O,this.currentLevel),C.isOpen=!0}},D.prototype.closeNode=function(C){var T;if(!C.isClosed)return T="",this.writerOptions.state=e.CloseTag,C.type===n.Element?T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(T,this.currentLevel),C.isClosed=!0},D.prototype.onData=function(C,T){return this.documentStarted=!0,this.onDataCallback(C,T+1)},D.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},D.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},D.prototype.ele=function(){return this.element.apply(this,arguments)},D.prototype.nod=function(C,T,O){return this.node(C,T,O)},D.prototype.txt=function(C){return this.text(C)},D.prototype.dat=function(C){return this.cdata(C)},D.prototype.com=function(C){return this.comment(C)},D.prototype.ins=function(C,T){return this.instruction(C,T)},D.prototype.dec=function(C,T,O){return this.declaration(C,T,O)},D.prototype.dtd=function(C,T,O){return this.doctype(C,T,O)},D.prototype.e=function(C,T,O){return this.element(C,T,O)},D.prototype.n=function(C,T,O){return this.node(C,T,O)},D.prototype.t=function(C){return this.text(C)},D.prototype.d=function(C){return this.cdata(C)},D.prototype.c=function(C){return this.comment(C)},D.prototype.r=function(C){return this.raw(C)},D.prototype.i=function(C,T){return this.instruction(C,T)},D.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.ent=function(C,T){return this.entity(C,T)},D.prototype.pent=function(C,T){return this.pEntity(C,T)},D.prototype.not=function(C,T){return this.notation(C,T)},D}()}).call(_l)});var Ul=F((Ml,Fl)=>{(function(){var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;n=fe(),r=ua(),e=en(),Fl.exports=t=function(o){i(a,o);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,x){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,x)},a.prototype.document=function(c,u){var x,m,g,p,y,b,R,P,S;for(R=c.children,m=g=0,y=R.length;g<y;m=++g)x=R[m],x.isLastRootNode=m===c.children.length-1;for(u=this.filterOptions(u),P=c.children,S=[],p=0,b=P.length;p<b;p++)x=P[p],S.push(this.writeChildNode(x,u,0));return S},a.prototype.attribute=function(c,u,x){return this.stream.write(a.__super__.attribute.call(this,c,u,x))},a.prototype.cdata=function(c,u,x){return this.stream.write(a.__super__.cdata.call(this,c,u,x))},a.prototype.comment=function(c,u,x){return this.stream.write(a.__super__.comment.call(this,c,u,x))},a.prototype.declaration=function(c,u,x){return this.stream.write(a.__super__.declaration.call(this,c,u,x))},a.prototype.docType=function(c,u,x){var m,g,p,y;if(x||(x=0),this.openNode(c,u,x),u.state=e.OpenTag,this.stream.write(this.indent(c,u,x)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,x)),u.state=e.InsideTag,y=c.children,g=0,p=y.length;g<p;g++)m=y[g],this.writeChildNode(m,u,x+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,x)),u.state=e.None,this.closeNode(c,u,x)},a.prototype.element=function(c,u,x){var m,g,p,y,b,R,P,S,v,l;x||(x=0),this.openNode(c,u,x),u.state=e.OpenTag,this.stream.write(this.indent(c,u,x)+"<"+c.name),v=c.attribs;for(P in v)s.call(v,P)&&(m=v[P],this.attribute(m,u,x));if(p=c.children.length,y=p===0?null:c.children[0],p===0||c.children.every(function(f){return(f.type===n.Text||f.type===n.Raw)&&f.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&p===1&&(y.type===n.Text||y.type===n.Raw)&&y.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,S=!0,this.writeChildNode(y,u,x+1),u.suppressPrettyCount--,S=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,x)),u.state=e.InsideTag,l=c.children,b=0,R=l.length;b<R;b++)g=l[b],this.writeChildNode(g,u,x+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,x)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,x)),u.state=e.None,this.closeNode(c,u,x)},a.prototype.processingInstruction=function(c,u,x){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,x))},a.prototype.raw=function(c,u,x){return this.stream.write(a.__super__.raw.call(this,c,u,x))},a.prototype.text=function(c,u,x){return this.stream.write(a.__super__.text.call(this,c,u,x))},a.prototype.dtdAttList=function(c,u,x){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,x))},a.prototype.dtdElement=function(c,u,x){return this.stream.write(a.__super__.dtdElement.call(this,c,u,x))},a.prototype.dtdEntity=function(c,u,x){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,x))},a.prototype.dtdNotation=function(c,u,x){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,x))},a}(r)}).call(Ml)});var $l=F((kl,Ut)=>{(function(){var n,e,t,r,i,s,o,a,c,u;u=ft(),a=u.assign,c=u.isFunction,t=sa(),r=la(),i=Ll(),o=bi(),s=Ul(),n=fe(),e=en(),Ut.exports.create=function(x,m,g,p){var y,b;if(x==null)throw new Error("Root element needs a name.");return p=a({},m,g,p),y=new r(p),b=y.element(x),p.headless||(y.declaration(p),(p.pubID!=null||p.sysID!=null)&&y.dtd(p)),b},Ut.exports.begin=function(x,m,g){var p;return c(x)&&(p=[x,m],m=p[0],g=p[1],x={}),m?new i(x,m,g):new r(x)},Ut.exports.stringWriter=function(x){return new o(x)},Ut.exports.streamWriter=function(x,m){return new s(x,m)},Ut.exports.implementation=new t,Ut.exports.nodeType=n,Ut.exports.writerState=e}).call(kl)});var Bl=F(fa=>{(function(){"use strict";var n,e,t,r,i,s={}.hasOwnProperty;n=$l(),e=ai().defaults,r=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},i=function(o){return"<![CDATA["+t(o)+"]]>"},t=function(o){return o.replace("]]>","]]]]><![CDATA[>")},fa.Builder=function(){function o(a){var c,u,x;this.options={},u=e["0.2"];for(c in u)s.call(u,c)&&(x=u[c],this.options[c]=x);for(c in a)s.call(a,c)&&(x=a[c],this.options[c]=x)}return o.prototype.buildObject=function(a){var c,u,x,m,g;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(g=Object.keys(a)[0],a=a[g]):g=this.options.rootName,x=function(p){return function(y,b){var R,P,S,v,l,f;if(typeof b!="object")p.options.cdata&&r(b)?y.raw(i(b)):y.txt(b);else if(Array.isArray(b)){for(v in b)if(s.call(b,v)){P=b[v];for(l in P)S=P[l],y=x(y.ele(l),S).up()}}else for(l in b)if(s.call(b,l))if(P=b[l],l===c){if(typeof P=="object")for(R in P)f=P[R],y=y.att(R,f)}else if(l===u)p.options.cdata&&r(P)?y=y.raw(i(P)):y=y.txt(P);else if(Array.isArray(P))for(v in P)s.call(P,v)&&(S=P[v],typeof S=="string"?p.options.cdata&&r(S)?y=y.ele(l).raw(i(S)).up():y=y.ele(l,S).up():y=x(y.ele(l),S).up());else typeof P=="object"?y=x(y.ele(l),P).up():typeof P=="string"&&p.options.cdata&&r(P)?y=y.ele(l).raw(i(P)).up():(P==null&&(P=""),y=y.ele(l,P.toString()).up());return y}}(this),m=n.create(g,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),x(m,a).end(this.options.renderOpts)},o}()}).call(fa)});var ql=F(Ei=>{(function(n){n.parser=function(w,h){return new t(w,h)},n.SAXParser=t,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(w,h){if(!(this instanceof t))return new t(w,h);var L=this;i(L),L.q=L.c="",L.bufferCheckPosition=n.MAX_BUFFER_LENGTH,L.opt=h||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!w,L.noscript=!!(w||L.opt.noscript),L.state=d.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(y)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!w),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),C(L,"onready")}Object.create||(Object.create=function(w){function h(){}h.prototype=w;var L=new h;return L}),Object.keys||(Object.keys=function(w){var h=[];for(var L in w)w.hasOwnProperty(L)&&h.push(L);return h});function r(w){for(var h=Math.max(n.MAX_BUFFER_LENGTH,10),L=0,I=0,Y=e.length;I<Y;I++){var ie=w[e[I]].length;if(ie>h)switch(e[I]){case"textNode":O(w);break;case"cdata":T(w,"oncdata",w.cdata),w.cdata="";break;case"script":T(w,"onscript",w.script),w.script="";break;default:M(w,"Max buffer length exceeded: "+e[I])}L=Math.max(L,ie)}var xe=n.MAX_BUFFER_LENGTH-L;w.bufferCheckPosition=xe+w.position}function i(w){for(var h=0,L=e.length;h<L;h++)w[e[h]]=""}function s(w){O(w),w.cdata!==""&&(T(w,"oncdata",w.cdata),w.cdata=""),w.script!==""&&(T(w,"onscript",w.script),w.script="")}t.prototype={end:function(){k(this)},write:gt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var a=n.EVENTS.filter(function(w){return w!=="error"&&w!=="end"});function c(w,h){return new u(w,h)}function u(w,h){if(!(this instanceof u))return new u(w,h);o.apply(this),this._parser=new t(w,h),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(I){L.emit("error",I),L._parser.error=null},this._decoder=null,a.forEach(function(I){Object.defineProperty(L,"on"+I,{get:function(){return L._parser["on"+I]},set:function(Y){if(!Y)return L.removeAllListeners(I),L._parser["on"+I]=Y,Y;L.on(I,Y)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(o.prototype,{constructor:{value:u}}),u.prototype.write=function(w){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(w)){if(!this._decoder){var h=require("string_decoder").StringDecoder;this._decoder=new h("utf8")}w=this._decoder.write(w)}return this._parser.write(w.toString()),this.emit("data",w),!0},u.prototype.end=function(w){return w&&w.length&&this.write(w),this._parser.end(),!0},u.prototype.on=function(w,h){var L=this;return!L._parser["on"+w]&&a.indexOf(w)!==-1&&(L._parser["on"+w]=function(){var I=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,w),L.emit.apply(L,I)}),o.prototype.on.call(L,w,h)};var x="[CDATA[",m="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={xml:g,xmlns:p},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(w){return w===" "||w===`
`||w==="\r"||w==="	"}function l(w){return w==='"'||w==="'"}function f(w){return w===">"||v(w)}function E(w,h){return w.test(h)}function N(w,h){return!E(w,h)}var d=0;n.STATE={BEGIN:d++,BEGIN_WHITESPACE:d++,TEXT:d++,TEXT_ENTITY:d++,OPEN_WAKA:d++,SGML_DECL:d++,SGML_DECL_QUOTED:d++,DOCTYPE:d++,DOCTYPE_QUOTED:d++,DOCTYPE_DTD:d++,DOCTYPE_DTD_QUOTED:d++,COMMENT_STARTING:d++,COMMENT:d++,COMMENT_ENDING:d++,COMMENT_ENDED:d++,CDATA:d++,CDATA_ENDING:d++,CDATA_ENDING_2:d++,PROC_INST:d++,PROC_INST_BODY:d++,PROC_INST_ENDING:d++,OPEN_TAG:d++,OPEN_TAG_SLASH:d++,ATTRIB:d++,ATTRIB_NAME:d++,ATTRIB_NAME_SAW_WHITE:d++,ATTRIB_VALUE:d++,ATTRIB_VALUE_QUOTED:d++,ATTRIB_VALUE_CLOSED:d++,ATTRIB_VALUE_UNQUOTED:d++,ATTRIB_VALUE_ENTITY_Q:d++,ATTRIB_VALUE_ENTITY_U:d++,CLOSE_TAG:d++,CLOSE_TAG_SAW_WHITE:d++,SCRIPT:d++,SCRIPT_ENDING:d++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(w){var h=n.ENTITIES[w],L=typeof h=="number"?String.fromCharCode(h):h;n.ENTITIES[w]=L});for(var D in n.STATE)n.STATE[n.STATE[D]]=D;d=n.STATE;function C(w,h,L){w[h]&&w[h](L)}function T(w,h,L){w.textNode&&O(w),C(w,h,L)}function O(w){w.textNode=_(w.opt,w.textNode),w.textNode&&C(w,"ontext",w.textNode),w.textNode=""}function _(w,h){return w.trim&&(h=h.trim()),w.normalize&&(h=h.replace(/\s+/g," ")),h}function M(w,h){return O(w),w.trackPosition&&(h+=`
Line: `+w.line+`
Column: `+w.column+`
Char: `+w.c),h=new Error(h),w.error=h,C(w,"onerror",h),w}function k(w){return w.sawRoot&&!w.closedRoot&&A(w,"Unclosed root tag"),w.state!==d.BEGIN&&w.state!==d.BEGIN_WHITESPACE&&w.state!==d.TEXT&&M(w,"Unexpected end"),O(w),w.c="",w.closed=!0,C(w,"onend"),t.call(w,w.strict,w.opt),w}function A(w,h){if(typeof w!="object"||!(w instanceof t))throw new Error("bad call to strictFail");w.strict&&M(w,h)}function X(w){w.strict||(w.tagName=w.tagName[w.looseCase]());var h=w.tags[w.tags.length-1]||w,L=w.tag={name:w.tagName,attributes:{}};w.opt.xmlns&&(L.ns=h.ns),w.attribList.length=0,T(w,"onopentagstart",L)}function B(w,h){var L=w.indexOf(":"),I=L<0?["",w]:w.split(":"),Y=I[0],ie=I[1];return h&&w==="xmlns"&&(Y="xmlns",ie=""),{prefix:Y,local:ie}}function Q(w){if(w.strict||(w.attribName=w.attribName[w.looseCase]()),w.attribList.indexOf(w.attribName)!==-1||w.tag.attributes.hasOwnProperty(w.attribName)){w.attribName=w.attribValue="";return}if(w.opt.xmlns){var h=B(w.attribName,!0),L=h.prefix,I=h.local;if(L==="xmlns")if(I==="xml"&&w.attribValue!==g)A(w,"xml: prefix must be bound to "+g+`
Actual: `+w.attribValue);else if(I==="xmlns"&&w.attribValue!==p)A(w,"xmlns: prefix must be bound to "+p+`
Actual: `+w.attribValue);else{var Y=w.tag,ie=w.tags[w.tags.length-1]||w;Y.ns===ie.ns&&(Y.ns=Object.create(ie.ns)),Y.ns[I]=w.attribValue}w.attribList.push([w.attribName,w.attribValue])}else w.tag.attributes[w.attribName]=w.attribValue,T(w,"onattribute",{name:w.attribName,value:w.attribValue});w.attribName=w.attribValue=""}function Z(w,h){if(w.opt.xmlns){var L=w.tag,I=B(w.tagName);L.prefix=I.prefix,L.local=I.local,L.uri=L.ns[I.prefix]||"",L.prefix&&!L.uri&&(A(w,"Unbound namespace prefix: "+JSON.stringify(w.tagName)),L.uri=I.prefix);var Y=w.tags[w.tags.length-1]||w;L.ns&&Y.ns!==L.ns&&Object.keys(L.ns).forEach(function(za){T(w,"onopennamespace",{prefix:za,uri:L.ns[za]})});for(var ie=0,xe=w.attribList.length;ie<xe;ie++){var Le=w.attribList[ie],Me=Le[0],or=Le[1],ve=B(Me,!0),yt=ve.prefix,Dp=ve.local,Ga=yt===""?"":L.ns[yt]||"",Vs={name:Me,value:or,prefix:yt,local:Dp,uri:Ga};yt&&yt!=="xmlns"&&!Ga&&(A(w,"Unbound namespace prefix: "+JSON.stringify(yt)),Vs.uri=yt),w.tag.attributes[Me]=Vs,T(w,"onattribute",Vs)}w.attribList.length=0}w.tag.isSelfClosing=!!h,w.sawRoot=!0,w.tags.push(w.tag),T(w,"onopentag",w.tag),h||(!w.noscript&&w.tagName.toLowerCase()==="script"?w.state=d.SCRIPT:w.state=d.TEXT,w.tag=null,w.tagName=""),w.attribName=w.attribValue="",w.attribList.length=0}function ue(w){if(!w.tagName){A(w,"Weird empty close tag."),w.textNode+="</>",w.state=d.TEXT;return}if(w.script){if(w.tagName!=="script"){w.script+="</"+w.tagName+">",w.tagName="",w.state=d.SCRIPT;return}T(w,"onscript",w.script),w.script=""}var h=w.tags.length,L=w.tagName;w.strict||(L=L[w.looseCase]());for(var I=L;h--;){var Y=w.tags[h];if(Y.name!==I)A(w,"Unexpected close tag");else break}if(h<0){A(w,"Unmatched closing tag: "+w.tagName),w.textNode+="</"+w.tagName+">",w.state=d.TEXT;return}w.tagName=L;for(var ie=w.tags.length;ie-- >h;){var xe=w.tag=w.tags.pop();w.tagName=w.tag.name,T(w,"onclosetag",w.tagName);var Le={};for(var Me in xe.ns)Le[Me]=xe.ns[Me];var or=w.tags[w.tags.length-1]||w;w.opt.xmlns&&xe.ns!==or.ns&&Object.keys(xe.ns).forEach(function(ve){var yt=xe.ns[ve];T(w,"onclosenamespace",{prefix:ve,uri:yt})})}h===0&&(w.closedRoot=!0),w.tagName=w.attribValue=w.attribName="",w.attribList.length=0,w.state=d.TEXT}function de(w){var h=w.entity,L=h.toLowerCase(),I,Y="";return w.ENTITIES[h]?w.ENTITIES[h]:w.ENTITIES[L]?w.ENTITIES[L]:(h=L,h.charAt(0)==="#"&&(h.charAt(1)==="x"?(h=h.slice(2),I=parseInt(h,16),Y=I.toString(16)):(h=h.slice(1),I=parseInt(h,10),Y=I.toString(10))),h=h.replace(/^0+/,""),isNaN(I)||Y.toLowerCase()!==h||I<0||I>1114111?(A(w,"Invalid character entity"),"&"+w.entity+";"):String.fromCodePoint(I))}function Te(w,h){h==="<"?(w.state=d.OPEN_WAKA,w.startTagPosition=w.position):v(h)||(A(w,"Non-whitespace before first tag."),w.textNode=h,w.state=d.TEXT)}function st(w,h){var L="";return h<w.length&&(L=w.charAt(h)),L}function gt(w){var h=this;if(this.error)throw this.error;if(h.closed)return M(h,"Cannot write after close. Assign an onready handler.");if(w===null)return k(h);typeof w=="object"&&(w=w.toString());for(var L=0,I="";I=st(w,L++),h.c=I,!!I;)switch(h.trackPosition&&(h.position++,I===`
`?(h.line++,h.column=0):h.column++),h.state){case d.BEGIN:if(h.state=d.BEGIN_WHITESPACE,I==="\uFEFF")continue;Te(h,I);continue;case d.BEGIN_WHITESPACE:Te(h,I);continue;case d.TEXT:if(h.sawRoot&&!h.closedRoot){for(var ie=L-1;I&&I!=="<"&&I!=="&";)I=st(w,L++),I&&h.trackPosition&&(h.position++,I===`
`?(h.line++,h.column=0):h.column++);h.textNode+=w.substring(ie,L-1)}I==="<"&&!(h.sawRoot&&h.closedRoot&&!h.strict)?(h.state=d.OPEN_WAKA,h.startTagPosition=h.position):(!v(I)&&(!h.sawRoot||h.closedRoot)&&A(h,"Text data outside of root node."),I==="&"?h.state=d.TEXT_ENTITY:h.textNode+=I);continue;case d.SCRIPT:I==="<"?h.state=d.SCRIPT_ENDING:h.script+=I;continue;case d.SCRIPT_ENDING:I==="/"?h.state=d.CLOSE_TAG:(h.script+="<"+I,h.state=d.SCRIPT);continue;case d.OPEN_WAKA:if(I==="!")h.state=d.SGML_DECL,h.sgmlDecl="";else if(!v(I))if(E(b,I))h.state=d.OPEN_TAG,h.tagName=I;else if(I==="/")h.state=d.CLOSE_TAG,h.tagName="";else if(I==="?")h.state=d.PROC_INST,h.procInstName=h.procInstBody="";else{if(A(h,"Unencoded <"),h.startTagPosition+1<h.position){var Y=h.position-h.startTagPosition;I=new Array(Y).join(" ")+I}h.textNode+="<"+I,h.state=d.TEXT}continue;case d.SGML_DECL:if(h.sgmlDecl+I==="--"){h.state=d.COMMENT,h.comment="",h.sgmlDecl="";continue}h.doctype&&h.doctype!==!0&&h.sgmlDecl?(h.state=d.DOCTYPE_DTD,h.doctype+="<!"+h.sgmlDecl+I,h.sgmlDecl=""):(h.sgmlDecl+I).toUpperCase()===x?(T(h,"onopencdata"),h.state=d.CDATA,h.sgmlDecl="",h.cdata=""):(h.sgmlDecl+I).toUpperCase()===m?(h.state=d.DOCTYPE,(h.doctype||h.sawRoot)&&A(h,"Inappropriately located doctype declaration"),h.doctype="",h.sgmlDecl=""):I===">"?(T(h,"onsgmldeclaration",h.sgmlDecl),h.sgmlDecl="",h.state=d.TEXT):(l(I)&&(h.state=d.SGML_DECL_QUOTED),h.sgmlDecl+=I);continue;case d.SGML_DECL_QUOTED:I===h.q&&(h.state=d.SGML_DECL,h.q=""),h.sgmlDecl+=I;continue;case d.DOCTYPE:I===">"?(h.state=d.TEXT,T(h,"ondoctype",h.doctype),h.doctype=!0):(h.doctype+=I,I==="["?h.state=d.DOCTYPE_DTD:l(I)&&(h.state=d.DOCTYPE_QUOTED,h.q=I));continue;case d.DOCTYPE_QUOTED:h.doctype+=I,I===h.q&&(h.q="",h.state=d.DOCTYPE);continue;case d.DOCTYPE_DTD:I==="]"?(h.doctype+=I,h.state=d.DOCTYPE):I==="<"?(h.state=d.OPEN_WAKA,h.startTagPosition=h.position):l(I)?(h.doctype+=I,h.state=d.DOCTYPE_DTD_QUOTED,h.q=I):h.doctype+=I;continue;case d.DOCTYPE_DTD_QUOTED:h.doctype+=I,I===h.q&&(h.state=d.DOCTYPE_DTD,h.q="");continue;case d.COMMENT:I==="-"?h.state=d.COMMENT_ENDING:h.comment+=I;continue;case d.COMMENT_ENDING:I==="-"?(h.state=d.COMMENT_ENDED,h.comment=_(h.opt,h.comment),h.comment&&T(h,"oncomment",h.comment),h.comment=""):(h.comment+="-"+I,h.state=d.COMMENT);continue;case d.COMMENT_ENDED:I!==">"?(A(h,"Malformed comment"),h.comment+="--"+I,h.state=d.COMMENT):h.doctype&&h.doctype!==!0?h.state=d.DOCTYPE_DTD:h.state=d.TEXT;continue;case d.CDATA:for(var ie=L-1;I&&I!=="]";)I=st(w,L++),I&&h.trackPosition&&(h.position++,I===`
`?(h.line++,h.column=0):h.column++);h.cdata+=w.substring(ie,L-1),I==="]"&&(h.state=d.CDATA_ENDING);continue;case d.CDATA_ENDING:I==="]"?h.state=d.CDATA_ENDING_2:(h.cdata+="]"+I,h.state=d.CDATA);continue;case d.CDATA_ENDING_2:I===">"?(h.cdata&&T(h,"oncdata",h.cdata),T(h,"onclosecdata"),h.cdata="",h.state=d.TEXT):I==="]"?h.cdata+="]":(h.cdata+="]]"+I,h.state=d.CDATA);continue;case d.PROC_INST:I==="?"?h.state=d.PROC_INST_ENDING:v(I)?h.state=d.PROC_INST_BODY:h.procInstName+=I;continue;case d.PROC_INST_BODY:if(!h.procInstBody&&v(I))continue;I==="?"?h.state=d.PROC_INST_ENDING:h.procInstBody+=I;continue;case d.PROC_INST_ENDING:I===">"?(T(h,"onprocessinginstruction",{name:h.procInstName,body:h.procInstBody}),h.procInstName=h.procInstBody="",h.state=d.TEXT):(h.procInstBody+="?"+I,h.state=d.PROC_INST_BODY);continue;case d.OPEN_TAG:E(R,I)?h.tagName+=I:(X(h),I===">"?Z(h):I==="/"?h.state=d.OPEN_TAG_SLASH:(v(I)||A(h,"Invalid character in tag name"),h.state=d.ATTRIB));continue;case d.OPEN_TAG_SLASH:I===">"?(Z(h,!0),ue(h)):(A(h,"Forward-slash in opening tag not followed by >"),h.state=d.ATTRIB);continue;case d.ATTRIB:if(v(I))continue;I===">"?Z(h):I==="/"?h.state=d.OPEN_TAG_SLASH:E(b,I)?(h.attribName=I,h.attribValue="",h.state=d.ATTRIB_NAME):A(h,"Invalid attribute name");continue;case d.ATTRIB_NAME:I==="="?h.state=d.ATTRIB_VALUE:I===">"?(A(h,"Attribute without value"),h.attribValue=h.attribName,Q(h),Z(h)):v(I)?h.state=d.ATTRIB_NAME_SAW_WHITE:E(R,I)?h.attribName+=I:A(h,"Invalid attribute name");continue;case d.ATTRIB_NAME_SAW_WHITE:if(I==="=")h.state=d.ATTRIB_VALUE;else{if(v(I))continue;A(h,"Attribute without value"),h.tag.attributes[h.attribName]="",h.attribValue="",T(h,"onattribute",{name:h.attribName,value:""}),h.attribName="",I===">"?Z(h):E(b,I)?(h.attribName=I,h.state=d.ATTRIB_NAME):(A(h,"Invalid attribute name"),h.state=d.ATTRIB)}continue;case d.ATTRIB_VALUE:if(v(I))continue;l(I)?(h.q=I,h.state=d.ATTRIB_VALUE_QUOTED):(h.opt.unquotedAttributeValues||M(h,"Unquoted attribute value"),h.state=d.ATTRIB_VALUE_UNQUOTED,h.attribValue=I);continue;case d.ATTRIB_VALUE_QUOTED:if(I!==h.q){I==="&"?h.state=d.ATTRIB_VALUE_ENTITY_Q:h.attribValue+=I;continue}Q(h),h.q="",h.state=d.ATTRIB_VALUE_CLOSED;continue;case d.ATTRIB_VALUE_CLOSED:v(I)?h.state=d.ATTRIB:I===">"?Z(h):I==="/"?h.state=d.OPEN_TAG_SLASH:E(b,I)?(A(h,"No whitespace between attributes"),h.attribName=I,h.attribValue="",h.state=d.ATTRIB_NAME):A(h,"Invalid attribute name");continue;case d.ATTRIB_VALUE_UNQUOTED:if(!f(I)){I==="&"?h.state=d.ATTRIB_VALUE_ENTITY_U:h.attribValue+=I;continue}Q(h),I===">"?Z(h):h.state=d.ATTRIB;continue;case d.CLOSE_TAG:if(h.tagName)I===">"?ue(h):E(R,I)?h.tagName+=I:h.script?(h.script+="</"+h.tagName,h.tagName="",h.state=d.SCRIPT):(v(I)||A(h,"Invalid tagname in closing tag"),h.state=d.CLOSE_TAG_SAW_WHITE);else{if(v(I))continue;N(b,I)?h.script?(h.script+="</"+I,h.state=d.SCRIPT):A(h,"Invalid tagname in closing tag."):h.tagName=I}continue;case d.CLOSE_TAG_SAW_WHITE:if(v(I))continue;I===">"?ue(h):A(h,"Invalid characters in closing tag");continue;case d.TEXT_ENTITY:case d.ATTRIB_VALUE_ENTITY_Q:case d.ATTRIB_VALUE_ENTITY_U:var xe,Le;switch(h.state){case d.TEXT_ENTITY:xe=d.TEXT,Le="textNode";break;case d.ATTRIB_VALUE_ENTITY_Q:xe=d.ATTRIB_VALUE_QUOTED,Le="attribValue";break;case d.ATTRIB_VALUE_ENTITY_U:xe=d.ATTRIB_VALUE_UNQUOTED,Le="attribValue";break}if(I===";"){var Me=de(h);h.opt.unparsedEntities&&!Object.values(n.XML_ENTITIES).includes(Me)?(h.entity="",h.state=xe,h.write(Me)):(h[Le]+=Me,h.entity="",h.state=xe)}else E(h.entity.length?S:P,I)?h.entity+=I:(A(h,"Invalid character in entity name"),h[Le]+="&"+h.entity+I,h.entity="",h.state=xe);continue;default:throw new Error(h,"Unknown state: "+h.state)}return h.position>=h.bufferCheckPosition&&r(h),h}String.fromCodePoint||function(){var w=String.fromCharCode,h=Math.floor,L=function(){var I=16384,Y=[],ie,xe,Le=-1,Me=arguments.length;if(!Me)return"";for(var or="";++Le<Me;){var ve=Number(arguments[Le]);if(!isFinite(ve)||ve<0||ve>1114111||h(ve)!==ve)throw RangeError("Invalid code point: "+ve);ve<=65535?Y.push(ve):(ve-=65536,ie=(ve>>10)+55296,xe=ve%1024+56320,Y.push(ie,xe)),(Le+1===Me||Y.length>I)&&(or+=w.apply(null,Y),Y.length=0)}return or};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(typeof Ei>"u"?Ei.sax={}:Ei)});var jl=F(pa=>{(function(){"use strict";pa.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(pa)});var ha=F(er=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),er.normalize=function(e){return e.toLowerCase()},er.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},er.stripPrefix=function(e){return e.replace(n,"")},er.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},er.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(er)});var Xl=F(St=>{(function(){"use strict";var n,e,t,r,i,s,o,a,c,u=function(g,p){return function(){return g.apply(p,arguments)}},x=function(g,p){for(var y in p)m.call(p,y)&&(g[y]=p[y]);function b(){this.constructor=g}return b.prototype=p.prototype,g.prototype=new b,g.__super__=p.prototype,g},m={}.hasOwnProperty;a=ql(),r=require("events"),n=jl(),o=ha(),c=require("timers").setImmediate,e=ai().defaults,i=function(g){return typeof g=="object"&&g!=null&&Object.keys(g).length===0},s=function(g,p,y){var b,R,P;for(b=0,R=g.length;b<R;b++)P=g[b],p=P(p,y);return p},t=function(g,p,y){var b;return b=Object.create(null),b.value=y,b.writable=!0,b.enumerable=!0,b.configurable=!0,Object.defineProperty(g,p,b)},St.Parser=function(g){x(p,g);function p(y){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var b,R,P;if(!(this instanceof St.Parser))return new St.Parser(y);this.options={},R=e["0.2"];for(b in R)m.call(R,b)&&(P=R[b],this.options[b]=P);for(b in y)m.call(y,b)&&(P=y[b],this.options[b]=P);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return p.prototype.processAsync=function(){var y,b;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),c(this.processAsync))}catch(R){if(b=R,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(b)}},p.prototype.assignOrPush=function(y,b,R){return b in y?(y[b]instanceof Array||t(y,b,[y[b]]),y[b].push(R)):this.options.explicitArray?t(y,b,[R]):t(y,b,R)},p.prototype.reset=function(){var y,b,R,P;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(S){return function(v){if(S.saxParser.resume(),!S.saxParser.errThrown)return S.saxParser.errThrown=!0,S.emit("error",v)}}(this),this.saxParser.onend=function(S){return function(){if(!S.saxParser.ended)return S.saxParser.ended=!0,S.emit("end",S.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,P=[],y=this.options.attrkey,b=this.options.charkey,this.saxParser.onopentag=function(S){return function(v){var l,f,E,N,d;if(E={},E[b]="",!S.options.ignoreAttrs){d=v.attributes;for(l in d)m.call(d,l)&&(!(y in E)&&!S.options.mergeAttrs&&(E[y]={}),f=S.options.attrValueProcessors?s(S.options.attrValueProcessors,v.attributes[l],l):v.attributes[l],N=S.options.attrNameProcessors?s(S.options.attrNameProcessors,l):l,S.options.mergeAttrs?S.assignOrPush(E,N,f):t(E[y],N,f))}return E["#name"]=S.options.tagNameProcessors?s(S.options.tagNameProcessors,v.name):v.name,S.options.xmlns&&(E[S.options.xmlnskey]={uri:v.uri,local:v.local}),P.push(E)}}(this),this.saxParser.onclosetag=function(S){return function(){var v,l,f,E,N,d,D,C,T,O;if(d=P.pop(),N=d["#name"],(!S.options.explicitChildren||!S.options.preserveChildrenOrder)&&delete d["#name"],d.cdata===!0&&(v=d.cdata,delete d.cdata),T=P[P.length-1],d[b].match(/^\s*$/)&&!v?(l=d[b],delete d[b]):(S.options.trim&&(d[b]=d[b].trim()),S.options.normalize&&(d[b]=d[b].replace(/\s{2,}/g," ").trim()),d[b]=S.options.valueProcessors?s(S.options.valueProcessors,d[b],N):d[b],Object.keys(d).length===1&&b in d&&!S.EXPLICIT_CHARKEY&&(d=d[b])),i(d)&&(typeof S.options.emptyTag=="function"?d=S.options.emptyTag():d=S.options.emptyTag!==""?S.options.emptyTag:l),S.options.validator!=null&&(O="/"+function(){var _,M,k;for(k=[],_=0,M=P.length;_<M;_++)E=P[_],k.push(E["#name"]);return k}().concat(N).join("/"),function(){var _;try{return d=S.options.validator(O,T&&T[N],d)}catch(M){return _=M,S.emit("error",_)}}()),S.options.explicitChildren&&!S.options.mergeAttrs&&typeof d=="object"){if(!S.options.preserveChildrenOrder)E={},S.options.attrkey in d&&(E[S.options.attrkey]=d[S.options.attrkey],delete d[S.options.attrkey]),!S.options.charsAsChildren&&S.options.charkey in d&&(E[S.options.charkey]=d[S.options.charkey],delete d[S.options.charkey]),Object.getOwnPropertyNames(d).length>0&&(E[S.options.childkey]=d),d=E;else if(T){T[S.options.childkey]=T[S.options.childkey]||[],D={};for(f in d)m.call(d,f)&&t(D,f,d[f]);T[S.options.childkey].push(D),delete d["#name"],Object.keys(d).length===1&&b in d&&!S.EXPLICIT_CHARKEY&&(d=d[b])}}return P.length>0?S.assignOrPush(T,N,d):(S.options.explicitRoot&&(C=d,d={},t(d,N,C)),S.resultObject=d,S.saxParser.ended=!0,S.emit("end",S.resultObject))}}(this),R=function(S){return function(v){var l,f;if(f=P[P.length-1],f)return f[b]+=v,S.options.explicitChildren&&S.options.preserveChildrenOrder&&S.options.charsAsChildren&&(S.options.includeWhiteChars||v.replace(/\\n/g,"").trim()!=="")&&(f[S.options.childkey]=f[S.options.childkey]||[],l={"#name":"__text__"},l[b]=v,S.options.normalize&&(l[b]=l[b].replace(/\s{2,}/g," ").trim()),f[S.options.childkey].push(l)),f}}(this),this.saxParser.ontext=R,this.saxParser.oncdata=function(S){return function(v){var l;if(l=R(v),l)return l.cdata=!0}}(this)},p.prototype.parseString=function(y,b){var R;b!=null&&typeof b=="function"&&(this.on("end",function(P){return this.reset(),b(null,P)}),this.on("error",function(P){return this.reset(),b(P)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=n.stripBOM(y),this.options.async?(this.remaining=y,c(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(P){if(R=P,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw R}else return this.emit("error",R),this.saxParser.errThrown=!0}},p.prototype.parseStringPromise=function(y){return new Promise(function(b){return function(R,P){return b.parseString(y,function(S,v){return S?P(S):R(v)})}}(this))},p}(r),St.parseString=function(g,p,y){var b,R,P;return y!=null?(typeof y=="function"&&(b=y),typeof p=="object"&&(R=p)):(typeof p=="function"&&(b=p),R={}),P=new St.Parser(R),P.parseString(g,b)},St.parseStringPromise=function(g,p){var y,b;return typeof p=="object"&&(y=p),b=new St.Parser(y),b.parseStringPromise(g)}}).call(St)});var wr=F(Dt=>{(function(){"use strict";var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;e=ai(),n=Bl(),t=Xl(),r=ha(),Dt.defaults=e.defaults,Dt.processors=r,Dt.ValidationError=function(o){i(a,o);function a(c){this.message=c}return a}(Error),Dt.Builder=n.Builder,Dt.Parser=t.Parser,Dt.parseString=t.parseString,Dt.parseStringPromise=t.parseStringPromise}).call(Dt)});var lf=F((o6,Pt)=>{var te=require("fs"),Ii=require("os"),be=require("path"),Gl=require("crypto"),ht={fs:te.constants,os:Ii.constants},zl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Kl=/XXXXXX/,fm=3,Zl=(ht.O_CREAT||ht.fs.O_CREAT)|(ht.O_EXCL||ht.fs.O_EXCL)|(ht.O_RDWR||ht.fs.O_RDWR),pm=Ii.platform()==="win32",hm=ht.EBADF||ht.os.errno.EBADF,xm=ht.ENOENT||ht.os.errno.ENOENT,Jl=448,ef=384,dm="exit",vr=[],tf=te.rmdirSync.bind(te),rf=!1;function mm(n,e){return te.rm(n,{recursive:!0},e)}function nf(n){return te.rmSync(n,{recursive:!0})}function ma(n,e){let t=br(n,e),r=t[0],i=t[1];Dm(r,function(s,o){if(s)return i(s);let a=o.tries;(function c(){try{let u=of(o);te.stat(u,function(x){if(!x)return a-- >0?c():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()})}function ga(n){let e=br(n),t=e[0],r=Rm(t),i=r.tries;do{let s=of(r);try{te.statSync(s)}catch{return s}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function gm(n,e){let t=br(n,e),r=t[0],i=t[1];ma(r,function(o,a){if(o)return i(o);te.open(a,Zl,r.mode||ef,function(u,x){if(u)return i(u);if(r.discardDescriptor)return te.close(x,function(g){return i(g,a,void 0,xa(a,-1,r,!1))});{let m=r.discardDescriptor||r.detachDescriptor;i(null,a,x,xa(a,m?-1:x,r,!1))}})})}function ym(n){let e=br(n),t=e[0],r=t.discardDescriptor||t.detachDescriptor,i=ga(t),s=te.openSync(i,Zl,t.mode||ef);return t.discardDescriptor&&(te.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:xa(i,r?-1:s,t,!0)}}function wm(n,e){let t=br(n,e),r=t[0],i=t[1];ma(r,function(o,a){if(o)return i(o);te.mkdir(a,r.mode||Jl,function(u){if(u)return i(u);i(null,a,sf(a,r,!1))})})}function vm(n){let e=br(n),t=e[0],r=ga(t);return te.mkdirSync(r,t.mode||Jl),{name:r,removeCallback:sf(r,t,!0)}}function bm(n,e){let t=function(r){if(r&&!da(r))return e(r);e()};0<=n[0]?te.close(n[0],function(){te.unlink(n[1],t)}):te.unlink(n[1],t)}function Em(n){let e=null;try{0<=n[0]&&te.closeSync(n[0])}catch(t){if(!Tm(t)&&!da(t))throw t}finally{try{te.unlinkSync(n[1])}catch(t){da(t)||(e=t)}}if(e!==null)throw e}function xa(n,e,t,r){let i=Ci(Em,[e,n],r),s=Ci(bm,[e,n],r,i);return t.keep||vr.unshift(i),r?i:s}function sf(n,e,t){let r=e.unsafeCleanup?mm:te.rmdir.bind(te),i=e.unsafeCleanup?nf:tf,s=Ci(i,n,t),o=Ci(r,n,t,s);return e.keep||vr.unshift(s),t?s:o}function Ci(n,e,t,r){let i=!1;return function s(o){if(!i){let a=r||s,c=vr.indexOf(a);return c>=0&&vr.splice(c,1),i=!0,t||n===tf||n===nf?n(e):n(e,o||function(){})}}}function Cm(){if(rf)for(;vr.length;)try{vr[0]()}catch{}}function Hl(n){let e=[],t=null;try{t=Gl.randomBytes(n)}catch{t=Gl.pseudoRandomBytes(n)}for(let r=0;r<n;r++)e.push(zl[t[r]%zl.length]);return e.join("")}function We(n){return typeof n>"u"}function br(n,e){if(typeof n=="function")return[{},n];if(We(n))return[{},e];let t={};for(let r of Object.getOwnPropertyNames(n))t[r]=n[r];return[t,e]}function Im(n,e,t){let r=be.isAbsolute(n)?n:be.join(e,n);te.stat(r,function(i){i?te.realpath(be.dirname(r),function(s,o){if(s)return t(s);t(null,be.join(o,be.basename(r)))}):te.realpath(r,t)})}function Sm(n,e){let t=be.isAbsolute(n)?n:be.join(e,n);try{return te.statSync(t),te.realpathSync(t)}catch{let i=te.realpathSync(be.dirname(t));return be.join(i,be.basename(t))}}function of(n){let e=n.tmpdir;if(!We(n.name))return be.join(e,n.dir,n.name);if(!We(n.template))return be.join(e,n.dir,n.template).replace(Kl,Hl(6));let t=[n.prefix?n.prefix:"tmp","-",process.pid,"-",Hl(12),n.postfix?"-"+n.postfix:""].join("");return be.join(e,n.dir,t)}function af(n){if(!We(n.name)){let e=n.name;if(be.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let t=be.basename(e);if(t===".."||t==="."||t!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!We(n.template)&&!n.template.match(Kl))throw new Error(`Invalid template, found "${n.template}".`);if(!We(n.tries)&&isNaN(n.tries)||n.tries<0)throw new Error(`Invalid tries, found "${n.tries}".`);n.tries=We(n.name)?n.tries||fm:1,n.keep=!!n.keep,n.detachDescriptor=!!n.detachDescriptor,n.discardDescriptor=!!n.discardDescriptor,n.unsafeCleanup=!!n.unsafeCleanup,n.prefix=We(n.prefix)?"":n.prefix,n.postfix=We(n.postfix)?"":n.postfix}function Yl(n,e,t,r){if(We(e))return r(null);Im(e,t,function(i,s){if(i)return r(i);let o=be.relative(t,s);if(!s.startsWith(t))return r(new Error(`${n} option must be relative to "${t}", found "${o}".`));r(null,o)})}function Ql(n,e,t){if(We(e))return;let r=Sm(e,t),i=be.relative(t,r);if(!r.startsWith(t))throw new Error(`${n} option must be relative to "${t}", found "${i}".`);return i}function Dm(n,e){Nm(n,function(t,r){if(t)return e(t);n.tmpdir=r;try{af(n,r)}catch(i){return e(i)}Yl("dir",n.dir,r,function(i,s){if(i)return e(i);n.dir=We(s)?"":s,Yl("template",n.template,r,function(o,a){if(o)return e(o);n.template=a,e(null,n)})})})}function Rm(n){let e=n.tmpdir=uf(n);af(n,e);let t=Ql("dir",n.dir,e);return n.dir=We(t)?"":t,n.template=Ql("template",n.template,e),n}function Tm(n){return cf(n,-hm,"EBADF")}function da(n){return cf(n,-xm,"ENOENT")}function cf(n,e,t){return pm?n.code===t:n.code===t&&n.errno===e}function Pm(){rf=!0}function Nm(n,e){return te.realpath(n&&n.tmpdir||Ii.tmpdir(),e)}function uf(n){return te.realpathSync(n&&n.tmpdir||Ii.tmpdir())}process.addListener(dm,Cm);Object.defineProperty(Pt.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return uf()}});Pt.exports.dir=wm;Pt.exports.dirSync=vm;Pt.exports.file=gm;Pt.exports.fileSync=ym;Pt.exports.tmpName=ma;Pt.exports.tmpNameSync=ga;Pt.exports.setGracefulCleanup=Pm});var up=F(($a,Ba)=>{(function(n,e){typeof $a=="object"&&typeof Ba<"u"?Ba.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})($a,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",i="second",s="minute",o="hour",a="day",c="week",u="month",x="quarter",m="year",g="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var _=["th","st","nd","rd"],M=O%100;return"["+O+(_[(M-20)%10]||_[M]||_[0])+"]"}},P=function(O,_,M){var k=String(O);return!k||k.length>=_?O:""+Array(_+1-k.length).join(M)+O},S={s:P,z:function(O){var _=-O.utcOffset(),M=Math.abs(_),k=Math.floor(M/60),A=M%60;return(_<=0?"+":"-")+P(k,2,"0")+":"+P(A,2,"0")},m:function O(_,M){if(_.date()<M.date())return-O(M,_);var k=12*(M.year()-_.year())+(M.month()-_.month()),A=_.clone().add(k,u),X=M-A<0,B=_.clone().add(k+(X?-1:1),u);return+(-(k+(M-A)/(X?A-B:B-A))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:u,y:m,w:c,d:a,D:g,h:o,m:s,s:i,ms:r,Q:x}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},v="en",l={};l[v]=R;var f="$isDayjsObject",E=function(O){return O instanceof C||!(!O||!O[f])},N=function O(_,M,k){var A;if(!_)return v;if(typeof _=="string"){var X=_.toLowerCase();l[X]&&(A=X),M&&(l[X]=M,A=X);var B=_.split("-");if(!A&&B.length>1)return O(B[0])}else{var Q=_.name;l[Q]=_,A=Q}return!k&&A&&(v=A),A||!k&&v},d=function(O,_){if(E(O))return O.clone();var M=typeof _=="object"?_:{};return M.date=O,M.args=arguments,new C(M)},D=S;D.l=N,D.i=E,D.w=function(O,_){return d(O,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var C=function(){function O(M){this.$L=N(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[f]=!0}var _=O.prototype;return _.parse=function(M){this.$d=function(k){var A=k.date,X=k.utc;if(A===null)return new Date(NaN);if(D.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var B=A.match(y);if(B){var Q=B[2]-1||0,Z=(B[7]||"0").substring(0,3);return X?new Date(Date.UTC(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)):new Date(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)}}return new Date(A)}(M),this.init()},_.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},_.$utils=function(){return D},_.isValid=function(){return this.$d.toString()!==p},_.isSame=function(M,k){var A=d(M);return this.startOf(k)<=A&&A<=this.endOf(k)},_.isAfter=function(M,k){return d(M)<this.startOf(k)},_.isBefore=function(M,k){return this.endOf(k)<d(M)},_.$g=function(M,k,A){return D.u(M)?this[k]:this.set(A,M)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(M,k){var A=this,X=!!D.u(k)||k,B=D.p(M),Q=function(h,L){var I=D.w(A.$u?Date.UTC(A.$y,L,h):new Date(A.$y,L,h),A);return X?I:I.endOf(a)},Z=function(h,L){return D.w(A.toDate()[h].apply(A.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(L)),A)},ue=this.$W,de=this.$M,Te=this.$D,st="set"+(this.$u?"UTC":"");switch(B){case m:return X?Q(1,0):Q(31,11);case u:return X?Q(1,de):Q(0,de+1);case c:var gt=this.$locale().weekStart||0,w=(ue<gt?ue+7:ue)-gt;return Q(X?Te-w:Te+(6-w),de);case a:case g:return Z(st+"Hours",0);case o:return Z(st+"Minutes",1);case s:return Z(st+"Seconds",2);case i:return Z(st+"Milliseconds",3);default:return this.clone()}},_.endOf=function(M){return this.startOf(M,!1)},_.$set=function(M,k){var A,X=D.p(M),B="set"+(this.$u?"UTC":""),Q=(A={},A[a]=B+"Date",A[g]=B+"Date",A[u]=B+"Month",A[m]=B+"FullYear",A[o]=B+"Hours",A[s]=B+"Minutes",A[i]=B+"Seconds",A[r]=B+"Milliseconds",A)[X],Z=X===a?this.$D+(k-this.$W):k;if(X===u||X===m){var ue=this.clone().set(g,1);ue.$d[Q](Z),ue.init(),this.$d=ue.set(g,Math.min(this.$D,ue.daysInMonth())).$d}else Q&&this.$d[Q](Z);return this.init(),this},_.set=function(M,k){return this.clone().$set(M,k)},_.get=function(M){return this[D.p(M)]()},_.add=function(M,k){var A,X=this;M=Number(M);var B=D.p(k),Q=function(de){var Te=d(X);return D.w(Te.date(Te.date()+Math.round(de*M)),X)};if(B===u)return this.set(u,this.$M+M);if(B===m)return this.set(m,this.$y+M);if(B===a)return Q(1);if(B===c)return Q(7);var Z=(A={},A[s]=e,A[o]=t,A[i]=n,A)[B]||1,ue=this.$d.getTime()+M*Z;return D.w(ue,this)},_.subtract=function(M,k){return this.add(-1*M,k)},_.format=function(M){var k=this,A=this.$locale();if(!this.isValid())return A.invalidDate||p;var X=M||"YYYY-MM-DDTHH:mm:ssZ",B=D.z(this),Q=this.$H,Z=this.$m,ue=this.$M,de=A.weekdays,Te=A.months,st=A.meridiem,gt=function(L,I,Y,ie){return L&&(L[I]||L(k,X))||Y[I].slice(0,ie)},w=function(L){return D.s(Q%12||12,L,"0")},h=st||function(L,I,Y){var ie=L<12?"AM":"PM";return Y?ie.toLowerCase():ie};return X.replace(b,function(L,I){return I||function(Y){switch(Y){case"YY":return String(k.$y).slice(-2);case"YYYY":return D.s(k.$y,4,"0");case"M":return ue+1;case"MM":return D.s(ue+1,2,"0");case"MMM":return gt(A.monthsShort,ue,Te,3);case"MMMM":return gt(Te,ue);case"D":return k.$D;case"DD":return D.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return gt(A.weekdaysMin,k.$W,de,2);case"ddd":return gt(A.weekdaysShort,k.$W,de,3);case"dddd":return de[k.$W];case"H":return String(Q);case"HH":return D.s(Q,2,"0");case"h":return w(1);case"hh":return w(2);case"a":return h(Q,Z,!0);case"A":return h(Q,Z,!1);case"m":return String(Z);case"mm":return D.s(Z,2,"0");case"s":return String(k.$s);case"ss":return D.s(k.$s,2,"0");case"SSS":return D.s(k.$ms,3,"0");case"Z":return B}return null}(L)||B.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(M,k,A){var X,B=this,Q=D.p(k),Z=d(M),ue=(Z.utcOffset()-this.utcOffset())*e,de=this-Z,Te=function(){return D.m(B,Z)};switch(Q){case m:X=Te()/12;break;case u:X=Te();break;case x:X=Te()/3;break;case c:X=(de-ue)/6048e5;break;case a:X=(de-ue)/864e5;break;case o:X=de/t;break;case s:X=de/e;break;case i:X=de/n;break;default:X=de}return A?X:D.a(X)},_.daysInMonth=function(){return this.endOf(u).$D},_.$locale=function(){return l[this.$L]},_.locale=function(M,k){if(!M)return this.$L;var A=this.clone(),X=N(M,k,!0);return X&&(A.$L=X),A},_.clone=function(){return D.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},O}(),T=C.prototype;return d.prototype=T,[["$ms",r],["$s",i],["$m",s],["$H",o],["$W",a],["$M",u],["$y",m],["$D",g]].forEach(function(O){T[O[1]]=function(_){return this.$g(_,O[0],O[1])}}),d.extend=function(O,_){return O.$i||(O(_,C,d),O.$i=!0),d},d.locale=N,d.isDayjs=E,d.unix=function(O){return d(1e3*O)},d.en=l[v],d.Ls=l,d.p={},d})});var lp=F((qa,ja)=>{(function(n,e){typeof qa=="object"&&typeof ja<"u"?ja.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_relativeTime=e()})(qa,function(){"use strict";return function(n,e,t){n=n||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(a,c,u,x){return r.fromToBase(a,c,u,x)}t.en.relativeTime=i,r.fromToBase=function(a,c,u,x,m){for(var g,p,y,b=u.$locale().relativeTime||i,R=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],P=R.length,S=0;S<P;S+=1){var v=R[S];v.d&&(g=x?t(a).diff(u,v.d,!0):u.diff(a,v.d,!0));var l=(n.rounding||Math.round)(Math.abs(g));if(y=g>0,l<=v.r||!v.r){l<=1&&S>0&&(v=R[S-1]);var f=b[v.l];m&&(l=m(""+l)),p=typeof f=="string"?f.replace("%d",l):f(l,c,v.l,y);break}}if(c)return p;var E=y?b.future:b.past;return typeof E=="function"?E(p):E.replace("%s",p)},r.to=function(a,c){return s(a,c,this,!0)},r.from=function(a,c){return s(a,c,this)};var o=function(a){return a.$u?t.utc():t()};r.toNow=function(a){return this.to(o(this),a)},r.fromNow=function(a){return this.from(o(this),a)}}})});var Yg={};Ya(Yg,{activate:()=>zg,deactivate:()=>Hg});module.exports=Op(Yg);var Sp=W(require("path")),ze=require("vscode");var hc=require("vscode");var Ct=W(require("path")),z=require("vscode");var $r=(i=>(i.empty="only the target itself",i.files="the target and any immediate file children thereof",i.immediates="the target and any immediate children thereof",i.infinity="the target and all of its descendants\u2014full recursion",i))($r||{});var ee={};Ya(ee,{default:()=>Qa.default});Gs(ee,require("fs"));var Qa=W(require("fs"),1);function le(n){return new Promise((e,t)=>{(0,ee.access)(n,r=>e(!r))})}var Ka=require("util"),He=(0,Ka.promisify)(ee.lstat);var Za=require("util"),zs=(0,Za.promisify)(ee.readFile);var Ja=require("util"),zt=(0,Ja.promisify)(ee.readdir);var ec=require("util"),Hs=(0,ec.promisify)(ee.rmdir);var tc=require("util"),wt=(0,tc.promisify)(ee.stat);var rc=require("util"),Ht=(0,rc.promisify)(ee.unlink);var nc=require("util"),Ys=(0,nc.promisify)(ee.writeFile);var cr=W(require("path")),Qs=require("vscode"),ar=class{constructor(e,t=!1){this.expression=e;this.recursive=t}get label(){let e=this.recursive?" (Recursive)":"";return`${this.expression}${e}`}get description(){let e=this.recursive?" (Recursive)":"";return`Add '${this.expression}' to 'svn:ignore'${e}`}};async function ic(n,e){if(e.length===0)return!1;let t=new RegExp("\\.[^\\.]+(\\.map)?$","i");if(e.length===1){let y=e[0],b=y.fsPath.match(t),R=b&&b[0]?b[0]:"",P=cr.basename(y.fsPath),S=cr.dirname(y.fsPath),v=[];v.push(new ar(P)),R&&v.push(new ar("*"+R)),v.push(new ar(P,!0)),R&&v.push(new ar("*"+R,!0));let l=await Qs.window.showQuickPick(v);return l?n.addToIgnore([l.expression],S,l.recursive):!1}let r=e.length,i="(Recursive)",s=`Ignore ${r} by filename`,o=`Ignore ${r} by extension`,a=`Ignore ${r} by filename ${i}`,c=`Ignore ${r} by extension ${i}`,u=[s,o,a,c],x=await Qs.window.showQuickPick(u);if(!x)return!1;let m=x.startsWith(s),g=x.endsWith(i),p={};for(let y of e){let b=cr.dirname(y.fsPath),R=cr.basename(y.fsPath),P=y.fsPath.match(t),S=P&&P[0]?P[0]:"";typeof p[b]>"u"&&(p[b]=[]),m?p[b].push(R):S&&p[b].push("*"+S)}for(let y in p)if(p.hasOwnProperty(y)){let b=[...new Set(p[y])];await n.addToIgnore(b,y,g)}return!0}var _n=require("vscode");function sc(n,e,t){let r=[],i=0;for(let s of t){let o=s.originalEndLineNumber===0,a=s.modifiedEndLineNumber===0;if(r.push(n.getText(new _n.Range(i,0,o?s.originalStartLineNumber:s.originalStartLineNumber-1,0))),!a){let c=s.modifiedStartLineNumber-1,u=0;o&&s.originalStartLineNumber===n.lineCount&&(c=n.lineCount-1,u=n.lineAt(c).range.end.character),r.push(e.getText(new _n.Range(c,u,s.modifiedEndLineNumber,0)))}i=o?s.originalStartLineNumber:s.originalEndLineNumber}return r.push(n.getText(new _n.Range(i,0,n.lineCount,0))),r.join("")}var so=W(require("path")),_t=require("vscode");var Fe=W(require("path")),oc=require("vscode");function Ks(n){return n.then(()=>{})}function Ie(n){return n.forEach(e=>e.dispose()),[]}function Be(n){return{dispose:n}}function _p(n){return Be(()=>Ie(n))}function ot(...n){return(e,t=null,r)=>{let i=_p(n.map(s=>s(o=>e.call(t,o))));return r&&r.push(i),i}}function me(n,e){return(t,r=null,i)=>n(s=>e(s)&&t.call(r,s),null,i)}function Ap(n){return(e,t=null,r)=>{let i=n(s=>(i.dispose(),e.call(t,s)),null,r);return i}}function Yt(n){return new Promise(e=>Ap(n)(e))}var Lp=new RegExp(Fe.sep==="/"?"\\\\":"/","g"),Mp=new RegExp("^\\\\(\\w:)","g");function nt(n){return n=n.replace(Lp,Fe.sep),n=n.replace(Mp,"$1"),Fe.sep==="\\"&&(n=n.charAt(0).toLowerCase()+n.slice(1)),n}function at(n){return n=nt(n),Fe.sep==="\\"&&(n=n.toLowerCase()),n}function Pe(n,e){return n.trim()===""||e.trim()===""?!1:(n=n.replace(/[\\\/]/g,Fe.sep),e=e.replace(/[\\\/]/g,Fe.sep),Fe.sep==="\\"&&(n=n.replace(/^\\/,"").toLowerCase(),e=e.replace(/^\\/,"").toLowerCase()),n===e?!0:(n.charAt(n.length-1)!==Fe.sep&&(n+=Fe.sep),e.startsWith(n)))}function Zs(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>t===0?e.toLowerCase():e.toUpperCase()).replace(/[\s\-]+/g,"")}function Js(n){return new Promise(e=>setTimeout(e,n))}function An(n){switch(n){case"CurrentBranch":case"Log":case"Show":case"Info":case"Changes":return!0;default:return!1}}async function eo(n){await le(n)&&(await He(n)).isDirectory()&&(await Promise.all((await zt(n)).map(async e=>{let t=Fe.join(n,e);(await He(t)).isDirectory()?await eo(t):await Ht(t)})),await Hs(n))}function Ye(n){if(n===void 0)throw new Error("undefined unwrap");return n}function Ln(n){return/@/.test(n)&&(n+="@"),n}function vt(){return process.env.SVN_ASP_DOT_NET_HACK?"_svn":".svn"}async function to(n,e=!0){let t=vt(),r=await le(`${n}/${t}`);if(r||!e)return r;let i=Fe.dirname(n);return i===n||i==="."?!1:to(i,!0)}function Ot(n,e){oc.commands.executeCommand("setContext",n,e)}function Fp(n){return/^[a-zA-Z]:\\/.test(n)}function ac(n,e){return Fp(n)&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e}var cc=Be(()=>null);function Br(n){return(e,t,r)=>{let i=null,s=null;if(typeof r.value=="function"?(i="value",s=r.value):typeof r.get=="function"&&(i="get",s=r.get),!s||!i)throw new Error("not supported");r[i]=n(s,t)}}function Up(n,e){let t=`$memoize$${e}`;return function(...r){return this.hasOwnProperty(t)||Object.defineProperty(this,t,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[t]}}var ge=Br(Up);function kp(n,e){let t=`$throttle$current$${e}`,r=`$throttle$next$${e}`,i=function(...s){if(this[r])return this[r];if(this[t])return this[r]=Ks(this[t]).then(()=>(this[r]=void 0,i.apply(this,s))),this[r];this[t]=n.apply(this,s);let o=()=>this[t]=void 0;return Ks(this[t]).then(o,o),this[t]};return i}var ur=Br(kp);function $p(n,e){let t=`__$sequence$${e}`;return function(...r){let i=this[t]||Promise.resolve(null),s=async()=>n.apply(this,r);return this[t]=i.then(s,s),this[t]}}var uc=Br($p);function Ne(n){return Br((e,t)=>{let r=`$debounce$${t}`;return function(...i){clearTimeout(this[r]),this[r]=setTimeout(()=>e.apply(this,i),n)}})}var ro={};function lc(n){return Br((e,t)=>function(...r){let i=ro[n]||Promise.resolve(null),s=async()=>e.apply(this,r);return ro[n]=i.then(s,s),ro[n]})}var lr=require("vscode"),no="svn",io=class{constructor(){this._onDidChange=new lr.EventEmitter;this.configuration=lr.workspace.getConfiguration(no),lr.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}get onDidChange(){return this._onDidChange.event}onConfigurationChanged(e){e.affectsConfiguration(no)&&(this.configuration=lr.workspace.getConfiguration(no),this._onDidChange.fire(e))}get(e,t){return this.configuration.get(e,t)}update(e,t,r){return this.configuration.update(e,t,r)}inspect(e){return this.configuration.inspect(e)}},$=new io;var Bp=so.join(__dirname,"..","icons");function ye(n,e){return _t.Uri.file(so.join(Bp,e,`${n}.svg`))}var bt=class bt{constructor(e,t,r,i,s=!1){this._resourceUri=e;this._type=t;this._renameResourceUri=r;this._props=i;this._remote=s}get resourceUri(){return this._resourceUri}get type(){return this._type}get renameResourceUri(){return this._renameResourceUri}get props(){return this._props}get remote(){return this._remote}get decorations(){let e={iconPath:this.getIconPath("light")},t={iconPath:this.getIconPath("dark")},r=this.tooltip,i=this.strikeThrough,s=this.faded;return{strikeThrough:i,faded:s,tooltip:r,light:e,dark:t}}get command(){let e=$.get("diff.withHead",!0),t=$.get("sourceControl.changesLeftClick","open diff");return!this.remote&&t==="open"?{command:"svn.openFile",title:"Open file",arguments:[this]}:this.remote||e?{command:"svn.openResourceHead",title:"Open Diff With Head",arguments:[this]}:{command:"svn.openResourceBase",title:"Open Diff With Base",arguments:[this]}}getIconPath(e){if(this.type==="added"&&this.renameResourceUri)return bt.icons[e].Renamed;let t=this.type.charAt(0).toUpperCase()+this.type.slice(1);if(typeof bt.icons[e][t]<"u")return bt.icons[e][t]}get tooltip(){return this.type==="added"&&this.renameResourceUri?"Renamed from "+this.renameResourceUri.fsPath:this.type==="normal"&&this.props&&this.props!=="none"?"Property "+this.props.charAt(0).toUpperCase()+this.props.slice(1):this.type.charAt(0).toUpperCase()+this.type.slice(1)}get strikeThrough(){return this.type==="deleted"}get faded(){return!1}get letter(){switch(this.type){case"added":return this.renameResourceUri?"R":"A";case"conflicted":return"C";case"deleted":return"D";case"external":return"E";case"ignored":return"I";case"modified":return"M";case"replaced":return"R";case"unversioned":return"U";case"missing":return"!";default:return}}get color(){switch(this.type){case"modified":case"replaced":return new _t.ThemeColor("gitDecoration.modifiedResourceForeground");case"deleted":case"missing":return new _t.ThemeColor("gitDecoration.deletedResourceForeground");case"added":case"unversioned":return new _t.ThemeColor("gitDecoration.untrackedResourceForeground");case"external":case"ignored":return new _t.ThemeColor("gitDecoration.ignoredResourceForeground");case"conflicted":return new _t.ThemeColor("gitDecoration.conflictingResourceForeground");default:return}}get priority(){switch(this.type){case"modified":return 2;case"ignored":return 3;case"deleted":case"added":case"replaced":case"missing":return 4;default:return 1}}};bt.icons={light:{Added:ye("status-added","light"),Conflicted:ye("status-conflicted","light"),Deleted:ye("status-deleted","light"),Ignored:ye("status-ignored","light"),Missing:ye("status-missing","light"),Modified:ye("status-modified","light"),Renamed:ye("status-renamed","light"),Replaced:ye("status-replaced","light"),Unversioned:ye("status-unversioned","light")},dark:{Added:ye("status-added","dark"),Conflicted:ye("status-conflicted","dark"),Deleted:ye("status-deleted","dark"),Ignored:ye("status-ignored","dark"),Missing:ye("status-missing","dark"),Modified:ye("status-modified","dark"),Renamed:ye("status-renamed","dark"),Replaced:ye("status-replaced","dark"),Unversioned:ye("status-unversioned","dark")}},H([ge],bt.prototype,"resourceUri",1),H([ge],bt.prototype,"type",1),H([ge],bt.prototype,"command",1);var re=bt;var pc=W(require("path")),Mn=require("vscode");var oo=W(require("path")),fc=require("vscode");function At(n){return JSON.parse(n.query)}function Qe(n,e,t={},r=!1){let i={action:e,fsPath:n.fsPath,extra:t};return n.with({scheme:"svn",path:r?n.path+vt():n.path,query:JSON.stringify(i)})}function Et(n,e){let t=oo.join(__dirname,"..","icons");return fc.Uri.file(oo.join(t,e,`${n}.svg`))}var qe=class{constructor(e,t,r){this.uri=e;this.type=t;this.repository=r}get props(){}get label(){return pc.relative(this.repository.workspaceRoot,this.uri.fsPath)}get contextValue(){return`incomingChange:${this.type}`}getTreeItem(){let e=new Mn.TreeItem(this.label,Mn.TreeItemCollapsibleState.None);return e.iconPath={dark:Et(`status-${this.type}`,"dark"),light:Et(`status-${this.type}`,"light")},e.contextValue=this.contextValue,e.command=this.getCommand(),e}getChildren(){return Promise.resolve([])}getCommand(){switch(this.type){case"modified":return{command:"svn.openChangeHead",title:"Open Changes with HEAD",arguments:[new re(this.uri,this.type,void 0,"none",!0)]};case"deleted":return{command:"svn.openFile",title:"Open File",arguments:[this.uri]};case"added":return{command:"svn.openHEADFile",title:"Open File (HEAD)",arguments:[new re(this.uri,this.type,void 0,"none",!0)]};default:console.error(`No command returned for type ${this.type}`);return}}};var U=class{constructor(e,t={}){if(t.repository){let r=this.createRepositoryCommand(this.execute);this._disposable=z.commands.registerCommand(e,r);return}if(!t.repository){this._disposable=z.commands.registerCommand(e,(...r)=>this.execute(...r));return}}dispose(){var e;(e=this._disposable)==null||e.dispose()}createRepositoryCommand(e){return async(...r)=>{let i=await z.commands.executeCommand("svn.getSourceControlManager",""),s=i.getRepository(r[0]),o;return s?o=Promise.resolve(s):i.repositories.length===1?o=Promise.resolve(i.repositories[0]):o=i.pickRepository(),o.then(c=>c?Promise.resolve(e.apply(this,[c,...r])):Promise.resolve()).catch(c=>{console.error(c)})}}async getResourceStates(e){if(e.length===0||!(e[0].resourceUri instanceof z.Uri)){let t=await this.getSCMResource();if(!t)return[];e=[t]}return e.filter(t=>t instanceof re)}async runByRepository(e,t){let r=e instanceof z.Uri?[e]:e,i=e instanceof z.Uri,s=await z.commands.executeCommand("svn.getSourceControlManager",""),o=[];for(let c of r){let u=s.getRepository(c);if(!u){console.warn("Could not find Svn repository for ",c);continue}let x=o.filter(m=>m.repository===u)[0];x?x.resources.push(c):o.push({repository:u,resources:[c]})}let a=o.map(({repository:c,resources:u})=>i?t(c,u[0]):t(c,u));return Promise.all(a)}async getSCMResource(e){if(e=e||z.window.activeTextEditor&&z.window.activeTextEditor.document.uri,!!e){if(e.scheme==="svn"){let{fsPath:t}=At(e);e=z.Uri.file(t)}if(e.scheme==="file"){let r=(await z.commands.executeCommand("svn.getSourceControlManager","")).getRepository(e);return r?r.getResourceFromFile(e):void 0}}}async _openResource(e,t,r,i,s){let o=await this.getLeftResource(e,t),a=this.getRightResource(e,t),c=this.getTitle(e,t);if(e.remote&&o&&([o,a]=[a,o]),!a){console.error("oh no");return}if(await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())return;let u={preserveFocus:i,preview:r,viewColumn:z.ViewColumn.Active},x=z.window.activeTextEditor;return s&&x&&x.document.uri.toString()===a.toString()&&(u.selection=x.selection),o?z.commands.executeCommand("vscode.diff",o,a,c,u):z.commands.executeCommand("vscode.open",a,u)}async getLeftResource(e,t=""){if(e.remote)return e.type!=="deleted"?Qe(e.resourceUri,"SHOW",{ref:t}):void 0;if(e.type==="added"&&e.renameResourceUri)return Qe(e.renameResourceUri,"SHOW",{ref:t});if(e.type==="conflicted"&&await le(e.resourceUri.fsPath)){let r=await zs(e.resourceUri.fsPath,{encoding:"utf8"});if(/^<{7}[^]+^={7}[^]+^>{7}/m.test(r))return}switch(e.type){case"conflicted":case"modified":case"replaced":return Qe(e.resourceUri,"SHOW",{ref:t})}}getRightResource(e,t=""){if(e.remote)return e.type!=="added"?e.resourceUri:void 0;switch(e.type){case"added":case"conflicted":case"ignored":case"modified":case"unversioned":case"replaced":return e.resourceUri;case"deleted":case"missing":return Qe(e.resourceUri,"SHOW",{ref:t})}}getTitle(e,t){if(e.type==="added"&&e.renameResourceUri){let i=Ct.basename(e.renameResourceUri.fsPath),s=Ct.relative(Ct.dirname(e.renameResourceUri.fsPath),e.resourceUri.fsPath);return t?`${i} -> ${s} (${t})`:`${i} -> ${s}`}let r=Ct.basename(e.resourceUri.fsPath);return t?`${r} (${t})`:""}async openChange(e,t,r){let i=e instanceof re,s=e instanceof z.Uri||!e,o;if(e instanceof z.Uri){let c=await this.getSCMResource(e);c!==void 0&&(o=[c])}else if(e instanceof qe)o=[new re(e.uri,e.type,void 0,e.props,!0)];else{let c;e instanceof re?c=e:c=await this.getSCMResource(),c&&(o=[...r,c])}if(!o)return;let a=o.length===1?void 0:!1;for(let c of o)await this._openResource(c,t,a,i,s)}async showDiffPath(e,t){try{let r=Ct.join(e.root,vt(),"tmp","svn.patch");if(await le(r))try{await Ht(r)}catch{}let i=z.Uri.file(r).with({scheme:"untitled"}),s=await z.workspace.openTextDocument(i);await(await z.window.showTextDocument(s)).edit(a=>{a.delete(new z.Range(new z.Position(0,0),new z.Position(Number.MAX_SAFE_INTEGER,0))),a.insert(new z.Position(0,0),t)})}catch(r){console.error(r),z.window.showErrorMessage("Unable to patch")}}async _revertChanges(e,t){let r=e.document,i=r.uri;if(i.scheme!=="file")return;let s=Qe(i,"SHOW",{ref:"BASE"}),o=await z.workspace.openTextDocument(s),a=sc(o,r,t),c=new z.WorkspaceEdit;c.replace(i,new z.Range(new z.Position(0,0),r.lineAt(r.lineCount-1).range.end),a),z.workspace.applyEdit(c),await r.save()}async addToIgnore(e){await this.runByRepository(e,async(t,r)=>{if(t)try{await ic(t,r)&&z.window.showInformationMessage("File(s) is now being ignored")}catch(i){console.log(i),z.window.showErrorMessage("Unable to set property ignore")}})}};var Fn=class extends U{constructor(){super("svn.add")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(a=>a.fsPath);try{await i.addFiles(o)}catch(a){console.log(a),hc.window.showErrorMessage("Unable to add file")}})}};var Un=class extends U{constructor(){super("svn.addToIgnoreExplorer")}async execute(e,t){if(!(!t||t.length===0))return this.addToIgnore(t)}};var kn=class extends U{constructor(){super("svn.addToIgnoreSCM")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);return this.addToIgnore(r)}};var je=require("vscode");var Mt=require("vscode");var Lt=class{constructor(e){this.group=e}get label(){return this.group.id.replace(/^changelist-/,"")}get id(){return this.group.id}get description(){return this.group.label}get resourceGroup(){return this.group}};var qr=class{constructor(e){this._id=e}get label(){return this._id}get description(){return"Ignored on commit"}};var fr=class{get label(){return"$(plus) New changelist"}get description(){return"Create a new change list"}};var pr=class{get label(){return"$(dash) Remove changelist"}get description(){return"Remove changelist of file(s)"}};var $n=class{constructor(e,t,r=!1){this._repository=e;this._state=t;this.picked=r}get label(){return this._repository.repository.removeAbsolutePath(this._state.resourceUri.fsPath)}get description(){return this._state.resourceUri.fsPath}get state(){return this._state}};function qp(n,e=!1){let t=[];t.push(new fr),n.changelists.forEach((i,s)=>{i.resourceStates.length&&t.push(new Lt(i))});let r=$.get("sourceControl.ignoreOnCommit");for(let i of r)t.some(s=>s.label===i)||t.push(new qr(i));return e&&t.push(new pr),t}function jp(n){let e=[];n.changes.resourceStates.length&&e.push(new Lt(n.changes));let t=$.get("sourceControl.ignoreOnCommit");return n.changelists.forEach((r,i)=>{r.resourceStates.length&&!t.includes(i)&&e.push(new Lt(r))}),e}async function xc(n,e=!1){let t=qp(n,e),r=await Mt.window.showQuickPick(t,{placeHolder:"Select an existing changelist or create a new"});if(!r)return;let i;if(r instanceof pr)return!1;if(r instanceof fr){let s=await Mt.window.showInputBox({placeHolder:"Changelist name",prompt:"Please enter a changelist name"});if(!s)return;i=s}else i=r.label;return i}async function Xp(n){let e=jp(n);if(e.length===0){Mt.window.showInformationMessage("There are no changes to commit.");return}let t;return e.length===1&&n.changes.resourceStates.length?t=e[0]:t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist to commit"}),t}async function dc(n){let e=await Xp(n);if(e){if(e.id==="changes"&&e.resourceGroup.resourceStates.length>1){let t=$.get("commit.changes.selectedAll",!0),r=e.resourceGroup.resourceStates.map(s=>new $n(n,s,t)),i=await Mt.window.showQuickPick(r,{placeHolder:"Select files to commit",canPickMany:!0});return i!==void 0&&i.length>0?i.map(s=>s.state):void 0}return e.resourceGroup.resourceStates}}function Wp(n){let e=[];return n.changelists.forEach((t,r)=>{t.resourceStates.length&&e.push(new Lt(t))}),e}async function mc(n){let e=Wp(n);if(!e.length){Mt.window.showErrorMessage("No changelists to pick from");return}let t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist"});if(t)return t.label}var Bn=class extends U{constructor(){super("svn.changelist")}async execute(...e){let t;if(e[0]instanceof re)t=e.map(m=>m.resourceUri);else if(e[0]instanceof je.Uri)t=e[1];else if(je.window.activeTextEditor)t=[je.window.activeTextEditor.document.uri];else{console.error("Unhandled type for changelist command");return}let r=await je.commands.executeCommand("svn.getSourceControlManager",""),i=t.map(async m=>r.getRepositoryFromUri(m)),s=await Promise.all(i);if(s=s.filter(m=>m),s.length===0){je.window.showErrorMessage("Files are not under version control and cannot be added to a change list");return}if(Array.from(new Set(s)).length!==1){je.window.showErrorMessage("Unable to add files from different repositories to change list");return}if(s.length!==t.length){je.window.showErrorMessage("Some Files are not under version control and cannot be added to a change list");return}let a=s[0];if(!a)return;let c=t.map(m=>m.fsPath),u=!1;a.changelists.forEach((m,g)=>{if(m.resourceStates.some(p=>c.some(y=>at(y)===at(p.resourceUri.path))))return u=!0,!1});let x=await xc(a,u);if(!(!x&&x!==!1))if(x===!1)try{await a.removeChangelist(c)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to remove file "${c.join(",")}" from changelist`)}else try{await a.addChangelist(c,x),je.window.showInformationMessage(`Added files "${c.join(",")}" to changelist "${x}"`)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to add file "${c.join(",")}" to changelist "${x}"`)}}};var Ra=W(require("os")),Ni=W(require("path")),ce=require("vscode");var dr=require("vscode");var Qt=class{constructor(e,t){this.dir=e;this.parent=t}get label(){return this.branch?`$(git-branch) ${this.dir.name}`:`$(file-directory) ${this.dir.name}`}get description(){return`r${this.dir.commit.revision} | ${this.dir.commit.author} | ${new Date(this.dir.commit.date).toLocaleString()}`}get path(){return this.parent?`${this.parent}/${this.dir.name}`:this.dir.name}get branch(){return It(this.path)}};H([ge],Qt.prototype,"branch",1);var hr=class{constructor(e){this._parent=e}get label(){return"$(plus) Create new branch"}get description(){return`Create new branch in "${this._parent}"`}};var xr=class{constructor(e){this.path=e}get label(){return`$(arrow-left) back to /${this.path}`}get description(){return"Back to parent"}};function It(n){let e=["layout.trunkRegex","layout.branchesRegex","layout.tagsRegex"];for(let t of e){let r=$.get(t);if(!r)continue;let i=$.get(`${t}Name`,1)+2,s=new RegExp(`(^|/)(${r})$`),o=n.match(s);if(o&&o[2]&&o[i])return{name:o[i],path:o[2]}}}async function mr(n,e=!1,t){let r=n.repository.list(t);dr.window.withProgress({location:dr.ProgressLocation.Window,title:"Checking remote branches"},()=>r);let s=(await r).filter(c=>c.kind==="dir"),o=[];if(t){let c=t.split("/");c.pop();let u=c.join("/");o.push(new xr(u))}e&&t&&It(`${t}/test`)&&o.push(new hr(t)),o.push(...s.map(c=>new Qt(c,t)));let a=await dr.window.showQuickPick(o);if(a){if(a instanceof xr)return mr(n,e,a.path);if(a instanceof Qt)return a.branch?a.branch:mr(n,e,a.path);if(a instanceof hr){let c=await dr.window.showInputBox({prompt:"Please provide a branch name",ignoreFocusOut:!0});if(!c)return;let u=c.replace(/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$|\.$/g,"-"),x=It(`${t}/${u}`);return x&&(x.isNew=!0),x}}}function gc(n){let e="layout.trunkRegex",t=$.get(e),r=new RegExp(`(^|/)(${t})$`),i=n.match(r),s=$.get(`${e}Name`,1)+2;return!!(i&&i[2]&&i[s])}var Da=W(require("child_process")),Bf=require("events"),fn=W(require("process")),qf=W(yr());var vu=W(yu());function um(n){if(!n||n.length<2)return null;let e=n.readUInt8(0),t=n.readUInt8(1);if(e===254&&t===255)return"utf16be";if(e===255&&t===254)return"utf16le";if(n.length<3)return null;let r=n.readUInt8(2);return e===239&&t===187&&r===191?"utf8":null}var lm=["ascii","utf-8","utf-16","utf-32"],wu={ibm866:"cp866",big5:"cp950"};function si(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function oi(n){let e=um(n);if(e)return e;let t=(0,vu.analyse)(n);if(!t||t.length===0)return null;let r=$.get("experimental.encoding_priority",[]);if(r.length>0)for(let c of r){let u=t.find(x=>si(c)===si(x.name));if(u&&u.confidence>60){let x=si(u.name);return wu[x]||x}}let i=t[0];if(i.confidence<80)return null;let s=i.name;if(0<=lm.indexOf(s.toLowerCase()))return null;let o=si(s);return wu[o]||o}var Wl=W(wr());var pt={mergeAttrs:!0,explicitRoot:!1,explicitArray:!1,attrNameProcessors:[Zs],tagNameProcessors:[Zs],doctype:!1};async function tn(n){return new Promise((e,t)=>{Wl.parseString(n,pt,(r,i)=>{(r||typeof i.entry>"u")&&t(),e(i.entry)})})}function Rt(n){if(!n)return n;let e=n;return e=e.replace(/[A-Z]:\\(?:[^\\/:*?"<>|\r\n]+\\)*[^\\/:*?"<>|\r\n]*/gi,"[PATH]"),e=e.replace(/\/(?:[a-zA-Z0-9._\-~]+\/)*[a-zA-Z0-9._\-~]*/g,"[PATH]"),e=e.replace(/https?:\/\/(?:(?:[a-zA-Z0-9\-._~:/?#\[\]@!$&'()*+,;=])+)/gi,"[DOMAIN]"),e=e.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,"[IP]"),e=e.replace(/\b(?:[0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}\b/g,"[IP]"),e=e.replace(/(?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s,;]+/gi,"$&=[REDACTED]"),e=e.replace(/[?&](?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s&;]+/gi,t=>{let[r]=t.split("=");return r+"=[REDACTED]"}),e=e.replace(/Bearer\s+[A-Za-z0-9._\-~+/=]+/g,"Bearer [REDACTED]"),e=e.replace(/Basic\s+[A-Za-z0-9+/=]+/g,"Basic [REDACTED]"),e=e.replace(/"([A-Za-z0-9+/=_\-]{32,})"/g,'"[REDACTED]"'),e=e.replace(/'([A-Za-z0-9+/=_\-]{32,})'/g,"'[REDACTED]'"),e=e.replace(/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/gi,"[UUID]"),e=e.replace(/AKIA[0-9A-Z]{16}/g,"[AWS_KEY]"),e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,"[EMAIL]"),e}function Vl(n){if(!n)return{};let e={};return n.message&&(e.message=Rt(n.message)),n.name&&(e.name=n.name),n.code&&(e.code=n.code),n.exitCode&&(e.exitCode=n.exitCode),n.svnErrorCode&&(e.svnErrorCode=n.svnErrorCode),n.svnCommand&&(e.svnCommand=Rt(n.svnCommand)),n.stdout&&(e.stdout=Rt(n.stdout)),n.stderr&&(e.stderr=Rt(n.stderr)),n.stderrFormated&&(e.stderrFormated=Rt(n.stderrFormated)),n.stack&&(e.stack=Rt(n.stack)),e}var Tt=class{constructor(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=void 0,this.message=e.message||"SVN error",this.stdout=e.stdout,this.stderr=e.stderr,this.stderrFormated=e.stderrFormated,this.exitCode=e.exitCode,this.svnErrorCode=e.svnErrorCode,this.svnCommand=e.svnCommand}toString(){let e=Vl(this),t=Rt(this.message)+" "+JSON.stringify(e,null,2);return this.error&&(t+=Rt(this.error.stack||"")),t}};var Nt=W(require("path")),Ri=W(lf()),ke=require("vscode");var ff=W(wr());async function ya(n){return new Promise((e,t)=>{ff.parseString(n,pt,(r,i)=>{r&&t(),i.list&&i.list.entry?(Array.isArray(i.list.entry)||(i.list.entry=[i.list.entry]),e(i.list.entry)):e([])})})}var pf=W(wr());async function Si(n){return new Promise((e,t)=>{pf.parseString(n,pt,(r,i)=>{r&&t();let s=[];Array.isArray(i.logentry)?s=i.logentry:typeof i.logentry=="object"&&(s=[i.logentry]);for(let o of s)o.paths===void 0?o.paths=[]:Array.isArray(o.paths.path)?o.paths=o.paths.path:o.paths=[o.paths.path];e(s)})})}var hf=W(wr());function wa(n,e){if(Array.isArray(n)){let i=[];return n.forEach(s=>{let o=wa(s,e);o&&i.push(...o)}),i}let t={locked:!!n.wcStatus.wcLocked&&n.wcStatus.wcLocked==="true"||!!(n.reposStatus&&n.reposStatus.lock),switched:!!n.wcStatus.switched&&n.wcStatus.switched==="true"},r={changelist:e,path:n.path,status:n.wcStatus.item,props:n.wcStatus.props,wcStatus:t,reposStatus:n.reposStatus};return n.wcStatus.movedTo&&r.status==="deleted"?[]:(n.wcStatus.movedFrom&&r.status==="added"&&(r.rename=n.wcStatus.movedFrom),n.wcStatus.commit&&(r.commit={revision:n.wcStatus.commit.revision,author:n.wcStatus.commit.author,date:n.wcStatus.commit.date}),[r])}function Om(n){let e=[];return n.target&&n.target.entry&&e.push(...wa(n.target.entry)),n.changelist&&(Array.isArray(n.changelist)||(n.changelist=[n.changelist]),n.changelist.forEach(t=>{e.push(...wa(t.entry,t.name))})),e}async function xf(n){return new Promise((e,t)=>{hf.parseString(n,pt,(r,i)=>{r&&t();let s=Om(i);e(s)})})}var va=(n,e,t)=>{let r=n instanceof RegExp?df(n,t):n,i=e instanceof RegExp?df(e,t):e,s=r!==null&&i!=null&&_m(r,i,t);return s&&{start:s[0],end:s[1],pre:t.slice(0,s[0]),body:t.slice(s[0]+r.length,s[1]),post:t.slice(s[1]+i.length)}},df=(n,e)=>{let t=e.match(n);return t?t[0]:null},_m=(n,e,t)=>{let r,i,s,o,a,c=t.indexOf(n),u=t.indexOf(e,c+1),x=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],s=t.length;x>=0&&!a;){if(x===c)r.push(x),c=t.indexOf(n,x+1);else if(r.length===1){let m=r.pop();m!==void 0&&(a=[m,u])}else i=r.pop(),i!==void 0&&i<s&&(s=i,o=u),u=t.indexOf(e,x+1);x=c<u&&c>=0?c:u}r.length&&o!==void 0&&(a=[s,o])}return a};var mf="\0SLASH"+Math.random()+"\0",gf="\0OPEN"+Math.random()+"\0",Ea="\0CLOSE"+Math.random()+"\0",yf="\0COMMA"+Math.random()+"\0",wf="\0PERIOD"+Math.random()+"\0",Am=new RegExp(mf,"g"),Lm=new RegExp(gf,"g"),Mm=new RegExp(Ea,"g"),Fm=new RegExp(yf,"g"),Um=new RegExp(wf,"g"),km=/\\\\/g,$m=/\\{/g,Bm=/\\}/g,qm=/\\,/g,jm=/\\./g;function ba(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function Xm(n){return n.replace(km,mf).replace($m,gf).replace(Bm,Ea).replace(qm,yf).replace(jm,wf)}function Wm(n){return n.replace(Am,"\\").replace(Lm,"{").replace(Mm,"}").replace(Fm,",").replace(Um,".")}function vf(n){if(!n)return[""];let e=[],t=va("{","}",n);if(!t)return n.split(",");let{pre:r,body:i,post:s}=t,o=r.split(",");o[o.length-1]+="{"+i+"}";let a=vf(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function bf(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),rn(Xm(n),!0).map(Wm)):[]}function Vm(n){return"{"+n+"}"}function Gm(n){return/^-?0\d/.test(n)}function zm(n,e){return n<=e}function Hm(n,e){return n>=e}function rn(n,e){let t=[],r=va("{","}",n);if(!r)return[n];let i=r.pre,s=r.post.length?rn(r.post,!1):[""];if(/\$$/.test(r.pre))for(let o=0;o<s.length;o++){let a=i+"{"+r.body+"}"+s[o];t.push(a)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=o||a,u=r.body.indexOf(",")>=0;if(!c&&!u)return r.post.match(/,(?!,).*\}/)?(n=r.pre+"{"+r.body+Ea+r.post,rn(n)):[n];let x;if(c)x=r.body.split(/\.\./);else if(x=vf(r.body),x.length===1&&x[0]!==void 0&&(x=rn(x[0],!1).map(Vm),x.length===1))return s.map(g=>r.pre+x[0]+g);let m;if(c&&x[0]!==void 0&&x[1]!==void 0){let g=ba(x[0]),p=ba(x[1]),y=Math.max(x[0].length,x[1].length),b=x.length===3&&x[2]!==void 0?Math.abs(ba(x[2])):1,R=zm;p<g&&(b*=-1,R=Hm);let S=x.some(Gm);m=[];for(let v=g;R(v,p);v+=b){let l;if(a)l=String.fromCharCode(v),l==="\\"&&(l="");else if(l=String(v),S){let f=y-l.length;if(f>0){let E=new Array(f+1).join("0");v<0?l="-"+E+l.slice(1):l=E+l}}m.push(l)}}else{m=[];for(let g=0;g<x.length;g++)m.push.apply(m,rn(x[g],!1))}for(let g=0;g<m.length;g++)for(let p=0;p<s.length;p++){let y=i+m[g]+s[p];(!e||c||y)&&t.push(y)}}return t}var nn=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var Ym={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},sn=n=>n.replace(/[[\]\\-]/g,"\\$&"),Qm=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ef=n=>n.join(""),Cf=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],i=[],s=t+1,o=!1,a=!1,c=!1,u=!1,x=t,m="";e:for(;s<n.length;){let b=n.charAt(s);if((b==="!"||b==="^")&&s===t+1){u=!0,s++;continue}if(b==="]"&&o&&!c){x=s+1;break}if(o=!0,b==="\\"&&!c){c=!0,s++;continue}if(b==="["&&!c){for(let[R,[P,S,v]]of Object.entries(Ym))if(n.startsWith(R,s)){if(m)return["$.",!1,n.length-t,!0];s+=R.length,v?i.push(P):r.push(P),a=a||S;continue e}}if(c=!1,m){b>m?r.push(sn(m)+"-"+sn(b)):b===m&&r.push(sn(b)),m="",s++;continue}if(n.startsWith("-]",s+1)){r.push(sn(b+"-")),s+=2;continue}if(n.startsWith("-",s+1)){m=b,s+=2;continue}r.push(sn(b)),s++}if(x<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let b=r[0].length===2?r[0].slice(-1):r[0];return[Qm(b),!1,x-t,!1]}let g="["+(u?"^":"")+Ef(r)+"]",p="["+(u?"":"^")+Ef(i)+"]";return[r.length&&i.length?"("+g+"|"+p+")":r.length?g:p,a,x-t,!0]};var kt=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!0}={})=>t?e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");var Km=new Set(["!","?","+","*","@"]),If=n=>Km.has(n),Zm="(?!(?:^|/)\\.\\.?(?:$|/))",Di="(?!\\.)",Jm=new Set(["[","."]),eg=new Set(["..","."]),tg=new Set("().*{}+?[]^$\\!"),rg=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ca="[^/]",Sf=Ca+"*?",Df=Ca+"+?",Er=class n{type;#r;#n;#s=!1;#e=[];#t;#o;#c;#a=!1;#i;#u;#f=!1;constructor(e,t,r={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#r=this.#t?this.#t.#r:this,this.#i=this.#r===this?r:this.#r.#i,this.#c=this.#r===this?[]:this.#r.#c,e==="!"&&!this.#r.#a&&this.#c.push(this),this.#o=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#o+1;!r.type&&i<r.#e.length;i++)for(let s of e.#e){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){var t;let e=this.type===null?this.#e.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#e.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#a&&((t=this.#t)==null?void 0:t.type)==="!")&&e.push({}),e}isStart(){var t;if(this.#r===this)return!0;if(!((t=this.#t)!=null&&t.isStart()))return!1;if(this.#o===0)return!0;let e=this.#t;for(let r=0;r<this.#o;r++){let i=e.#e[r];if(!(i instanceof n&&i.type==="!"))return!1}return!0}isEnd(){var t,r,i;if(this.#r===this||((t=this.#t)==null?void 0:t.type)==="!")return!0;if(!((r=this.#t)!=null&&r.isEnd()))return!1;if(!this.type)return(i=this.#t)==null?void 0:i.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let r of this.#e)t.copyIn(r);return t}static#l(e,t,r,i){let s=!1,o=!1,a=-1,c=!1;if(t.type===null){let p=r,y="";for(;p<e.length;){let b=e.charAt(p++);if(s||b==="\\"){s=!s,y+=b;continue}if(o){p===a+1?(b==="^"||b==="!")&&(c=!0):b==="]"&&!(p===a+2&&c)&&(o=!1),y+=b;continue}else if(b==="["){o=!0,a=p,c=!1,y+=b;continue}if(!i.noext&&If(b)&&e.charAt(p)==="("){t.push(y),y="";let R=new n(b,t);p=n.#l(e,R,p,i),t.push(R);continue}y+=b}return t.push(y),p}let u=r+1,x=new n(null,t),m=[],g="";for(;u<e.length;){let p=e.charAt(u++);if(s||p==="\\"){s=!s,g+=p;continue}if(o){u===a+1?(p==="^"||p==="!")&&(c=!0):p==="]"&&!(u===a+2&&c)&&(o=!1),g+=p;continue}else if(p==="["){o=!0,a=u,c=!1,g+=p;continue}if(If(p)&&e.charAt(u)==="("){x.push(g),g="";let y=new n(p,x);x.push(y),u=n.#l(e,y,u,i);continue}if(p==="|"){x.push(g),g="",m.push(x),x=new n(null,t);continue}if(p===")")return g===""&&t.#e.length===0&&(t.#f=!0),x.push(g),g="",t.push(...m,x),u;g+=p}return t.type=null,t.#n=void 0,t.#e=[e.substring(r-1)],u}static fromGlob(e,t={}){let r=new n(null,void 0,t);return n.#l(e,r,0,t),r}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[t,r,i,s]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#i.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){var c;let t=e??!!this.#i.dot;if(this.#r===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd()&&!this.#e.some(y=>typeof y!="string"),x=this.#e.map(y=>{let[b,R,P,S]=typeof y=="string"?n.#x(y,this.#n,u):y.toRegExpSource(e);return this.#n=this.#n||P,this.#s=this.#s||S,b}).join(""),m="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&eg.has(this.#e[0]))){let b=Jm,R=t&&b.has(x.charAt(0))||x.startsWith("\\.")&&b.has(x.charAt(2))||x.startsWith("\\.\\.")&&b.has(x.charAt(4)),P=!t&&!e&&b.has(x.charAt(0));m=R?Zm:P?Di:""}let g="";return this.isEnd()&&this.#r.#a&&((c=this.#t)==null?void 0:c.type)==="!"&&(g="(?:$|\\/)"),[m+x+g,kt(x),this.#n=!!this.#n,this.#s]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#p(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#e=[u],this.type=null,this.#n=void 0,[u,kt(this.toString()),!1,!1]}let o=!r||e||t||!Di?"":this.#p(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#f)a=(this.isStart()&&!t?Di:"")+Df;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?Di:"")+Sf+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+u}return[a,kt(s),this.#n=!!this.#n,this.#s]}#p(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[r,i,s,o]=t.toRegExpSource(e);return this.#s=this.#s||o,r}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#x(e,t,r=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,s+=(tg.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(c==="["){let[u,x,m,g]=Cf(e,a);if(m){s+=u,o=o||x,a+=m-1,t=t||g;continue}}if(c==="*"){s+=r&&e==="*"?Df:Sf,t=!0;continue}if(c==="?"){s+=Ca,t=!0;continue}s+=rg(c)}return[s,kt(e),!!t,o]}};var Ia=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!1}={})=>t?e?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Ee=(n,e,t={})=>(nn(e),!t.nocomment&&e.charAt(0)==="#"?!1:new $t(e,t).match(n)),ng=/^\*+([^+@!?\*\[\(]*)$/,ig=n=>e=>!e.startsWith(".")&&e.endsWith(n),sg=n=>e=>e.endsWith(n),og=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),ag=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),cg=/^\*+\.\*+$/,ug=n=>!n.startsWith(".")&&n.includes("."),lg=n=>n!=="."&&n!==".."&&n.includes("."),fg=/^\.\*+$/,pg=n=>n!=="."&&n!==".."&&n.startsWith("."),hg=/^\*+$/,xg=n=>n.length!==0&&!n.startsWith("."),dg=n=>n.length!==0&&n!=="."&&n!=="..",mg=/^\?+([^+@!?\*\[\(]*)?$/,gg=([n,e=""])=>{let t=Pf([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},yg=([n,e=""])=>{let t=Nf([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},wg=([n,e=""])=>{let t=Nf([n]);return e?r=>t(r)&&r.endsWith(e):t},vg=([n,e=""])=>{let t=Pf([n]);return e?r=>t(r)&&r.endsWith(e):t},Pf=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},Nf=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},Of=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Rf={win32:{sep:"\\"},posix:{sep:"/"}},bg=Of==="win32"?Rf.win32.sep:Rf.posix.sep;Ee.sep=bg;var rt=Symbol("globstar **");Ee.GLOBSTAR=rt;var Eg="[^/]",Cg=Eg+"*?",Ig="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Sg="(?:(?!(?:\\/|^)\\.).)*?",Dg=(n,e={})=>t=>Ee(t,n,e);Ee.filter=Dg;var tt=(n,e={})=>Object.assign({},n,e),Rg=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Ee;let e=Ee;return Object.assign((r,i,s={})=>e(r,i,tt(n,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,tt(n,s))}static defaults(i){return e.defaults(tt(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,tt(n,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,tt(n,s))}},unescape:(r,i={})=>e.unescape(r,tt(n,i)),escape:(r,i={})=>e.escape(r,tt(n,i)),filter:(r,i={})=>e.filter(r,tt(n,i)),defaults:r=>e.defaults(tt(n,r)),makeRe:(r,i={})=>e.makeRe(r,tt(n,i)),braceExpand:(r,i={})=>e.braceExpand(r,tt(n,i)),match:(r,i,s={})=>e.match(r,i,tt(n,s)),sep:e.sep,GLOBSTAR:rt})};Ee.defaults=Rg;var _f=(n,e={})=>(nn(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:bf(n));Ee.braceExpand=_f;var Tg=(n,e={})=>new $t(n,e).makeRe();Ee.makeRe=Tg;var Pg=(n,e,t={})=>{let r=new $t(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};Ee.match=Pg;var Tf=/[?*]|[+@!]\(.*?\)|\[|\]/,Ng=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$t=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){nn(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Of,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=s[0]===""&&s[1]===""&&(s[2]==="?"||!Tf.test(s[2]))&&!Tf.test(s[3]),u=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(x=>this.parse(x))];if(u)return[s[0],...s.slice(1).map(x=>this.parse(x))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,i)=>{let s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let o=i;for(;r[o+1]==="**";)o++;o>i&&r.splice(i+1,o-i);let a=r[i+1],c=r[i+2],u=r[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;t=!0,r.splice(i,1);let x=r.slice(0);x[i]="**",e.push(x),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<r.length-1;o++){let a=r[o];o===1&&a===""&&r[0]===""||(a==="."||a==="")&&(t=!0,r.splice(o,1),o--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){let o=r[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;let c=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...c),r.length===0&&r.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<t.length;)if(e[i]===t[s])o.push(a==="b"?t[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&t[s]===e[i+1])o.push(e[i]),i++;else if(r&&t[s]==="**"&&e[i]===t[s+1])o.push(t[s]),s++;else if(e[i]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(t[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(t[s]),i++,s++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let i=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),R=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),P=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),S=!P&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),v=R?3:b?0:void 0,l=S?3:P?0:void 0;if(typeof v=="number"&&typeof l=="number"){let[f,E]=[e[v],t[l]];f.toLowerCase()===E.toLowerCase()&&(t[l]=f,l>v?t=t.slice(l):v>l&&(e=e.slice(v)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,c=e.length,u=t.length;o<c&&a<u;o++,a++){this.debug("matchOne loop");var x=t[a],m=e[o];if(this.debug(t,x,m),x===!1)return!1;if(x===rt){this.debug("GLOBSTAR",[t,x,m]);var g=o,p=a+1;if(p===u){for(this.debug("** at the end");o<c;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;g<c;){var y=e[g];if(this.debug(`
globstar while`,e,g,t,p,y),this.matchOne(e.slice(g),t.slice(p),r))return this.debug("globstar found match!",g,c,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,g,t,p);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,g,t,p),g===c))}let b;if(typeof x=="string"?(b=m===x,this.debug("string match",x,m,b)):(b=x.test(m),this.debug("pattern match",x,m,b)),!b)return!1}if(o===c&&a===u)return!0;if(o===c)return r;if(a===u)return o===c-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return _f(this.pattern,this.options)}parse(e){nn(e);let t=this.options;if(e==="**")return rt;if(e==="")return"";let r,i=null;(r=e.match(hg))?i=t.dot?dg:xg:(r=e.match(ng))?i=(t.nocase?t.dot?ag:og:t.dot?sg:ig)(r[1]):(r=e.match(mg))?i=(t.nocase?t.dot?yg:gg:t.dot?wg:vg)(r):(r=e.match(cg))?i=t.dot?lg:ug:(r=e.match(fg))&&(i=pg);let s=Er.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?Cg:t.dot?Ig:Sg,i=new Set(t.nocase?["i"]:[]),s=e.map(c=>{let u=c.map(m=>{if(m instanceof RegExp)for(let g of m.flags.split(""))i.add(g);return typeof m=="string"?Ng(m):m===rt?rt:m._src});u.forEach((m,g)=>{let p=u[g+1],y=u[g-1];m!==rt||y===rt||(y===void 0?p!==void 0&&p!==rt?u[g+1]="(?:\\/|"+r+"\\/)?"+p:u[g]=r:p===void 0?u[g-1]=y+"(?:\\/|\\/"+r+")?":p!==rt&&(u[g-1]=y+"(?:\\/|\\/"+r+"\\/)"+p,u[g+1]=rt))});let x=u.filter(m=>m!==rt);if(this.partial&&x.length>=1){let m=[];for(let g=1;g<=x.length;g++)m.push(x.slice(0,g).join("/"));return"(?:"+m.join("|")+")"}return x.join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.partial&&(s="^(?:\\/|"+o+s.slice(1,-1)+a+")$"),this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let c=s[a],u=i;if(r.matchBase&&c.length===1&&(u=[o]),this.matchOne(u,c,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ee.defaults(e).Minimatch}};Ee.AST=Er;Ee.Minimatch=$t;Ee.escape=Ia;Ee.unescape=kt;function tr(n,e,t={}){let r=!1;return e.forEach(i=>{let s=i[0]==="!";r===s&&(r=Ee(n,i,t))}),r}function Af(n){return new $t(n)}var Lf=W(wr());async function Mf(n){return new Promise((e,t)=>{Lf.parseString(n,pt,(r,i)=>{(r||!i.paths||!i.paths.path)&&t(),Array.isArray(i.paths.path)||(i.paths.path=[i.paths.path]),e(i.paths.path)})})}function Ff(n){return!n||typeof n!="string"?!1:/^[a-zA-Z0-9_-]+$/.test(n)}var Og=["postpone","base","mine-conflict","theirs-conflict","mine-full","theirs-full","edit","launch","working"];function Uf(n){return!n||typeof n!="string"?!1:Og.includes(n)}function on(n){return!n||typeof n!="string"?!1:!/[|;$()[\]{}`\\]/.test(n)}var _g=["HEAD","PREV","BASE","COMMITTED"];function Cr(n){return!n||typeof n!="string"?!1:_g.includes(n)?!0:/^\+?(0|[1-9]\d*)$/.test(n)}function an(n){return!n||typeof n!="string"?!1:!n.includes("..")&&!n.startsWith("/")&&!n.startsWith("\\")}function kf(n){if(!n||typeof n!="string")return!1;try{let e=new URL(n);if(!["http:","https:","svn:","svn+ssh:"].includes(e.protocol))return!1;let r=e.hostname.toLowerCase();if(r==="localhost"||r==="127.0.0.1"||r==="::1")return!1;let i=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,s=r.match(i);if(s){let[,o,a,c,u]=s.map(Number);if(o>255||a>255||c>255||u>255||o===10||o===172&&a>=16&&a<=31||o===192&&a===168||o===169&&a===254||o===127)return!1}return!0}catch{return!1}}var cn=class{constructor(e,t,r,i){this.svn=e;this.root=t;this.workspaceRoot=r;this._infoCache={};return i===1?(async()=>this)():(async()=>(await this.updateInfo(),this))()}async updateInfo(){let e=await this.exec(["info","--xml",Ln(this.workspaceRoot?this.workspaceRoot:this.root)]);this._info=await tn(e.stdout)}async exec(e,t={}){return t.username=this.username,t.password=this.password,this.svn.exec(this.workspaceRoot,e,t)}async execBuffer(e,t={}){return t.username=this.username,t.password=this.password,this.svn.execBuffer(this.workspaceRoot,e,t)}removeAbsolutePath(e){return e=nt(e),e=Nt.relative(this.workspaceRoot,e),e===""&&(e="."),Ln(e)}validateFilePaths(e){for(let t of e){let r=this.removeAbsolutePath(t);if(!an(r))throw new Error(`Invalid file path detected: ${r}`)}}validateSinglePath(e){let t=this.removeAbsolutePath(e);if(!an(t))throw new Error(`Invalid file path detected: ${t}`)}async getStatus(e){var s;e=Object.assign({},{includeIgnored:!1,includeExternals:!0,checkRemoteChanges:!1},e);let t=["stat","--xml"];e.includeIgnored&&t.push("--no-ignore"),e.includeExternals||t.push("--ignore-externals"),e.checkRemoteChanges&&t.push("--show-updates");let r=await this.exec(t),i=await xf(r.stdout);for(let o of i)if(o.status==="external")try{let a=await this.getInfo(o.path);o.repositoryUuid=(s=a.repository)==null?void 0:s.uuid}catch(a){console.error(a)}return i}get info(){return Ye(this._info)}resetInfoCache(e=""){delete this._infoCache[e]}async getInfo(e="",t,r=!1,i=!1){if(!r&&this._infoCache[e])return this._infoCache[e];let s=["info","--xml"];if(t){if(!Cr(t))throw new Error("Invalid revision parameter");s.push("-r",t)}e&&(i||(e=nt(e)),s.push(e));let o=await this.exec(s);return this._infoCache[e]=await tn(o.stdout),setTimeout(()=>{this.resetInfoCache(e)},2*60*1e3),this._infoCache[e]}async getChanges(){var b;let e=["log","-r1:HEAD","--limit=1","--stop-on-copy","--xml","--with-all-revprops","--verbose"],t=await this.exec(e),r=await Si(t.stdout);if(r.length===0||((b=r[0])==null?void 0:b.paths.length)===0)return[];let i=r[0].paths[0];if(i.copyfromRev===void 0||i.copyfromPath===void 0||i._===void 0||i.copyfromRev.trim().length===0||i.copyfromPath.trim().length===0||i._.trim().length===0)return[];let s=i.copyfromPath,o=i.copyfromRev,a=i._,c=this.info.repository.root+s,u=this.info.repository.root+a;e=["mergeinfo","--show-revs=merged",c,u],t=await this.exec(e);let x=t.stdout.trim().split(`
`),m="";x.length&&(m=x[x.length-1]),m.trim().length===0&&(m=o);let g=await this.getInfo(u,void 0,!0,!0);e=["diff",`${c}@${m}`,u,"--ignore-properties","--xml","--summarize"],t=await this.exec(e);let p;try{p=await Mf(t.stdout)}catch{return[]}let y=[];for(let R of p)y.push({oldPath:ke.Uri.parse(R._),newPath:ke.Uri.parse(R._.replace(c,u)),oldRevision:m.replace("r",""),newRevision:g.revision,item:R.item,props:R.props,kind:R.kind,repo:ke.Uri.parse(this.info.repository.root),localPath:ke.Uri.parse(R._.replace(c,""))});return y}async show(e,t){let r=["cat"],i,s;e instanceof ke.Uri?(i=e,s=e.toString(!0)):(i=ke.Uri.file(e),s=e);let o=i.scheme==="file"&&Pe(this.workspaceRoot,i.fsPath),a=s;if(o&&(this.validateSinglePath(a),a=this.removeAbsolutePath(a)),t){if(!Cr(t))throw new Error("Invalid revision parameter");r.push("-r",t),o&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))}r.push(a);let c=ke.workspace.getConfiguration("files",i),u=c.get("encoding"),x=c.get("autoGuessEncoding",!1),m=ke.workspace.textDocuments.find(y=>at(y.uri.fsPath)===at(s));if(m){let y=ke.workspace.getConfiguration(`[${m.languageId}]`,i);if(y["files.encoding"]!==void 0&&(u=y["files.encoding"]),y["files.autoGuessEncoding"]!==void 0&&(x=y["files.autoGuessEncoding"]),x){let b=Buffer.from(m.getText(),"utf-8"),R=oi(b);R&&(u=R)}}else{let y=$.get("default.encoding");y&&(u=y)}return $.get("experimental.detect_encoding",!1)&&(u=null),(await this.exec(r,{encoding:u})).stdout}async showBuffer(e,t){let r=["cat"],i,s;e instanceof ke.Uri?(i=e,s=e.toString(!0)):(i=ke.Uri.file(e),s=e);let o=i.scheme==="file"&&Pe(this.workspaceRoot,i.fsPath),a=s;if(o&&(this.validateSinglePath(a),a=this.removeAbsolutePath(a)),t){if(!Cr(t))throw new Error("Invalid revision parameter");r.push("-r",t),o&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))}return r.push(a),(await this.execBuffer(r)).stdout}async commitFiles(e,t){this.validateFilePaths(t),t=t.map(a=>this.removeAbsolutePath(a));let r=["commit",...t];await le(Nt.join(this.workspaceRoot,e))&&r.push("--force-log");let i;if(/\n|[^\x00-\x7F\x80-\xFF]/.test(e)){if(Ri.setGracefulCleanup(),i=Ri.fileSync({prefix:"svn-commit-message-",mode:384}),(await He(i.name)).isSymbolicLink())throw i.removeCallback(),new Error("Security: Temp file is a symlink");await Ys(i.name,e,{encoding:"utf-8",mode:384}),r.push("-F",i.name),r.push("--encoding","UTF-8")}else r.push("-m",e);r.push("--depth","empty");let s=await this.exec(r);i&&i.removeCallback();let o=s.stdout.match(/Committed revision (.*)\./i);if(o&&o[0]){let a=(s.stdout.match(/(Sending|Adding|Deleting)\s+/g)??[]).length;return`${`${a} ${a===1?"file":"files"} commited`}: revision ${o[1]}.`}return s.stdout}async addFilesByIgnore(e,t){this.validateFilePaths(e);let r=async i=>(await wt(i)).isDirectory()?(await Promise.all((await zt(i)).map(s=>{let o=Nt.resolve(i+Nt.sep+s),a=this.removeAbsolutePath(o);return tr(Nt.sep+a,t,{dot:!0,matchBase:!0})?[]:r(o)}))).reduce((s,o)=>s.concat(o),[i]):[i];return e=(await Promise.all(e.map(i=>r(i)))).flat(),e=e.map(i=>this.removeAbsolutePath(i)),this.exec(["add","--depth=empty",...e])}addFiles(e){this.validateFilePaths(e);let t=$.get("sourceControl.ignore");return t.length>0?this.addFilesByIgnore(e,t):(e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["add",...e]))}addChangelist(e,t){if(!Ff(t))throw new Error("Invalid changelist name");return this.validateFilePaths(e),e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["changelist",t,...e])}removeChangelist(e){return this.validateFilePaths(e),e=e.map(t=>this.removeAbsolutePath(t)),this.exec(["changelist","--remove",...e])}async getCurrentBranch(){let e=await this.getInfo(),t=It(e.url);return t?$.get("layout.showFullName")?t.path:t.name:""}async getRepositoryUuid(){return(await this.getInfo()).repository.uuid}async getRepoUrl(){let e=await this.getInfo(),t=It(e.url);if(!t)return e.repository.root;let r=new RegExp(t.path+"$");return e.url.replace(r,"").replace(/\/$/,"")}async getBranches(){let e=$.get("layout.trunk"),t=$.get("layout.branches"),r=$.get("layout.tags"),i=await this.getRepoUrl(),s=[],o=[];e&&o.push(new Promise(async u=>{try{await this.exec(["ls",i+"/"+e,"--depth","empty"]),u([e])}catch{u([])}}));let a=[];t&&a.push(t),r&&a.push(r);for(let u of a)o.push(new Promise(async x=>{let m=i+"/"+u;try{let p=(await this.exec(["ls",m])).stdout.trim().replace(/\/|\\/g,"").split(/[\r\n]+/).filter(y=>!!y).map(y=>u+"/"+y);x(p)}catch{x([])}}));return(await Promise.all(o)).forEach(u=>{s.push(...u)}),s}async newBranch(e,t="Created new branch"){let i=await this.getRepoUrl()+"/"+e,o=(await this.getInfo()).url;return await this.exec(["copy",o,i,"-m",t]),await this.switchBranch(e),!0}async switchBranch(e,t=!1){let i=await this.getRepoUrl()+"/"+e;return await this.exec(["switch",i].concat(t?["--ignore-ancestry"]:[])),this.resetInfoCache(),!0}async merge(e,t=!1,r="postpone"){if(!Uf(r))throw new Error("Invalid accept action");let s=await this.getRepoUrl()+"/"+e,o=["merge","--accept",r];return o=o.concat(t?["--reintegrate"]:[]),o=o.concat([s]),await this.exec(o),this.resetInfoCache(),!0}async revert(e,t){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["revert","--depth",t,...e])).stdout}async update(e=!0){let t=["update"];e&&t.push("--ignore-externals");let r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async pullIncomingChange(e){this.validateSinglePath(e);let t=["update",e],r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async patch(e){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["diff","--internal-diff",...e])).stdout}async patchBuffer(e){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.execBuffer(["diff","--internal-diff",...e])).stdout}async patchChangelist(e){return(await this.exec(["diff","--internal-diff","--changelist",e])).stdout}async removeFiles(e,t){this.validateFilePaths(e),e=e.map(s=>this.removeAbsolutePath(s));let r=["remove"];return t&&r.push("--keep-local"),r.push(...e),(await this.exec(r)).stdout}async resolve(e,t){return this.validateFilePaths(e),e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["resolve","--accept",t,...e])).stdout}async plainLog(){let e=$.get("log.length")??"50";return(await this.exec(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogBuffer(){let e=$.get("log.length")??"50";return(await this.execBuffer(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogByRevision(e){return(await this.exec(["log","-r",e.toString()])).stdout}async plainLogByRevisionBuffer(e){return(await this.execBuffer(["log","-r",e.toString()])).stdout}async plainLogByText(e){if(!on(e))throw new Error("Invalid search pattern");return(await this.exec(["log","--search",e])).stdout}async plainLogByTextBuffer(e){if(!on(e))throw new Error("Invalid search pattern");return(await this.execBuffer(["log","--search",e])).stdout}async log(e,t,r,i){let s=["log","-r",`${e}:${t}`,`--limit=${r}`,"--xml","-v"];i!==void 0&&s.push(Ln(i instanceof ke.Uri?i.toString(!0):i));let o=await this.exec(s);return Si(o.stdout)}async logByUser(e){let t=await this.exec(["log","--xml","-v","--search",e]);return Si(t.stdout)}async countNewCommit(e="BASE:HEAD"){let r=(await this.exec(["log","-r",e,"-q","--xml"])).stdout.match(/<logentry/g);return r&&r.length>0?r.length-1:0}async cleanup(){return(await this.exec(["cleanup"])).stdout}async removeUnversioned(){let e=await this.exec(["cleanup","--remove-unversioned"]);return this.svn.logOutput(e.stdout),e.stdout}async finishCheckout(){let e=await this.getInfo();return(await this.exec(["switch",e.url])).stdout}async list(e){let t=await this.getRepoUrl();e&&(t+="/"+e);let r=await this.exec(["list",t,"--xml"]);return ya(r.stdout)}async ls(e){this.validateSinglePath(e);let t=await this.exec(["list",e,"--xml"]);return ya(t.stdout)}async getCurrentIgnore(e){this.validateSinglePath(e),e=this.removeAbsolutePath(e);let t="";try{let i=["propget","svn:ignore"];e&&i.push(e),t=(await this.exec(i)).stdout.trim()}catch(i){console.error(i)}return t.split(/[\r\n]+/)}async addToIgnore(e,t,r=!1){this.validateSinglePath(t);let i=await this.getCurrentIgnore(t);t=this.removeAbsolutePath(t),i.push(...e);let o=["propset","svn:ignore",[...new Set(i)].filter(c=>!!c).sort().join(`
`)];return t?o.push(t):o.push("."),r&&o.push("--recursive"),(await this.exec(o)).stdout}async rename(e,t){this.validateSinglePath(e),this.validateSinglePath(t),e=this.removeAbsolutePath(e),t=this.removeAbsolutePath(t);let r=["rename",e,t];return(await this.exec(r)).stdout}};H([uc],cn.prototype,"getInfo",1);var un=require("vscode");function $f(n,e=!0){let t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[`${un.env.appRoot}/node_modules.asar/${n}`,`${un.env.appRoot}/node_modules/${n}`,n];for(let i of r)try{return t(i)}catch{}e&&un.window.showErrorMessage(`Missing dependency: ${n}`)}var Sa=$f("@vscode/iconv-lite-umd",!1);Sa||(Sa=$f("iconv-lite"));var ln=Sa;var Ve={AuthorizationFailed:"E170001",RepositoryIsLocked:"E155004",NotASvnRepository:"E155007",NotShareCommonAncestry:"E195012",WorkingCopyIsTooOld:"E155036"};function Ag(n){for(let e in Ve)if(Ve.hasOwnProperty(e)){let t=Ve[e];if(new RegExp(`svn: ${t}`).test(n))return t}if(/No more credentials or we tried too many times/.test(n))return Ve.AuthorizationFailed}function jf(n){return e=>{/ENOENT/.test(e.message)&&(e=new Tt({error:e,message:"Failed to execute svn (ENOENT)",svnErrorCode:"NotASvnRepository"})),n(e)}}var Ti=class{constructor(e){this.lastCwd="";this.supportsStdinPassword=!1;this._onOutput=new Bf.EventEmitter;this.svnPath=e.svnPath,this.version=e.version,this.supportsStdinPassword=qf.satisfies(e.version,">= 1.9")}get onOutput(){return this._onOutput}logOutput(e){this._onOutput.emit("log",e)}async exec(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let b=t.map(R=>/ |^$/.test(R)?`'${R}'`:R);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${b.join(" ")}
`)}r.username&&t.push("--username",r.username);let i;r.password&&(this.supportsStdinPassword?(t.push("--password-from-stdin"),i=r.password):t.push("--password",r.password)),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let s=r.encoding;delete r.encoding,t.includes("--xml")&&(s="utf8");let o={env:fn.env};e&&(o.cwd=e),o.env=Object.assign({},fn.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let a=Da.spawn(this.svnPath,t,o);i&&a.stdin&&(a.stdin.write(i+`
`),a.stdin.end());let c=[],u=(b,R,P)=>{b.once(R,P),c.push(Be(()=>b.removeListener(R,P)))},x=(b,R,P)=>{b.on(R,P),c.push(Be(()=>b.removeListener(R,P)))},[m,g,p]=await Promise.all([new Promise((b,R)=>{u(a,"error",R),u(a,"exit",b)}),new Promise(b=>{let R=[];x(a.stdout,"data",P=>R.push(P)),u(a.stdout,"close",()=>b(Buffer.concat(R)))}),new Promise(b=>{let R=[];x(a.stderr,"data",P=>R.push(P)),u(a.stderr,"close",()=>b(Buffer.concat(R).toString()))})]);Ie(c),s||(s=oi(g)),s||(s=$.get("default.encoding")),ln.encodingExists(s)||(s&&console.warn(`SVN: The encoding "${s}" is invalid`),s="utf8");let y=ln.decode(g,s);if(r.log!==!1&&p.length>0){let b=this.lastCwd.split(/[\\\/]+/).pop(),R=p.split(`
`).filter(P=>P).map(P=>`[${b}]$ ${P}`).join(`
`);this.logOutput(R)}return m?Promise.reject(new Tt({message:"Failed to execute svn",stdout:y,stderr:p,stderrFormated:p.replace(/^svn: E\d+: +/gm,""),exitCode:m,svnErrorCode:Ag(p),svnCommand:t[0]})):{exitCode:m,stdout:y,stderr:p}}async execBuffer(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let p=t.map(y=>/ |^$/.test(y)?`'${y}'`:y);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${p.join(" ")}
`)}r.username&&t.push("--username",r.username);let i;r.password&&(this.supportsStdinPassword?(t.push("--password-from-stdin"),i=r.password):t.push("--password",r.password)),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let s={env:fn.env};e&&(s.cwd=e),s.env=Object.assign({},fn.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let o=Da.spawn(this.svnPath,t,s);i&&o.stdin&&(o.stdin.write(i+`
`),o.stdin.end());let a=[],c=(p,y,b)=>{p.once(y,b),a.push(Be(()=>p.removeListener(y,b)))},u=(p,y,b)=>{p.on(y,b),a.push(Be(()=>p.removeListener(y,b)))},[x,m,g]=await Promise.all([new Promise((p,y)=>{c(o,"error",y),c(o,"exit",p)}),new Promise(p=>{let y=[];u(o.stdout,"data",b=>y.push(b)),c(o.stdout,"close",()=>p(Buffer.concat(y)))}),new Promise(p=>{let y=[];u(o.stderr,"data",b=>y.push(b)),c(o.stderr,"close",()=>p(Buffer.concat(y).toString()))})]);if(Ie(a),r.log!==!1&&g.length>0){let p=this.lastCwd.split(/[\\\/]+/).pop(),y=g.split(`
`).filter(b=>b).map(b=>`[${p}]$ ${b}`).join(`
`);this.logOutput(y)}return{exitCode:x,stdout:m,stderr:g}}async getRepositoryRoot(e){try{let t=await this.exec(e,["info","--xml"]),r=await tn(t.stdout);return r&&r.wcInfo&&r.wcInfo.wcrootAbspath?r.wcInfo.wcrootAbspath:e}catch(t){throw t instanceof Tt?t:(console.error(t),new Error("Unable to find repository root path"))}}async open(e,t){return new cn(this,e,t,0)}};var Pi=class extends U{constructor(){super("svn.checkout")}async execute(e){if(e||(e=await ce.window.showInputBox({prompt:"Repository URL",ignoreFocusOut:!0})),!e)return;if(!kf(e)){ce.window.showErrorMessage("Invalid repository URL. Only http, https, svn, and svn+ssh protocols are allowed. URLs pointing to localhost, private IP addresses, or using file:// protocol are blocked for security reasons.");return}let t=$.get("defaultCheckoutDirectory")||Ra.homedir();t=t.replace(/^~/,Ra.homedir());let r=await ce.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:ce.Uri.file(t),openLabel:"Select Repository Location"});if(!r||r.length===0)return;let s=r[0].fsPath,o,a=It(e);if(a){let v=e.replace(/\//g,"/").replace(a.path,"");o=Ni.basename(v)}if(o=await ce.window.showInputBox({prompt:"Folder name",value:o,ignoreFocusOut:!0}),!o)return;let c=Ni.join(s,o),u=ce.ProgressLocation.Window;ce.ProgressLocation.Notification&&(u=ce.ProgressLocation.Notification);let x={location:u,title:`Checkout svn repository '${e}'...`,cancellable:!0},m=0,g={};for(;;){m++;try{await ce.window.withProgress(x,async()=>{let v=await ce.commands.executeCommand("svn.getSourceControlManager",""),l=["checkout",e,c];await v.svn.exec(s,l,g)});break}catch(v){if(v.svnErrorCode===Ve.AuthorizationFailed&&m<=3){let f=await ce.commands.executeCommand("svn.promptAuth",g.username);if(f){g.username=f.username,g.password=f.password;continue}}throw v}}let p=[],y="Would you like to open the checked out repository?",b="Open Repository";p.push(b);let R="Add to Workspace";ce.workspace.workspaceFolders&&ce.workspace.updateWorkspaceFolders&&(y="Would you like to open the checked out repository, or add it to the current workspace?",p.push(R));let P=await ce.window.showInformationMessage(y,...p);P===b?ce.commands.executeCommand("vscode.openFolder",ce.Uri.file(c)):P===R&&ce.workspace.updateWorkspaceFolders(ce.workspace.workspaceFolders.length,0,{uri:ce.Uri.file(c)})}};var Oi=class extends U{constructor(){super("svn.cleanup",{repository:!0})}async execute(e){await e.cleanup()}};var Xf=require("vscode");var _i=class extends U{constructor(){super("svn.close",{repository:!0})}async execute(e){(await Xf.commands.executeCommand("svn.getSourceControlManager","")).close(e)}};var Pa=W(require("path")),pn=require("vscode");var Wf=W(require("path")),Ge=require("vscode");var Ce,Ta;Ge.commands.registerCommand("svn.forceCommitMessageTest",n=>{if(Ta)return Ta(n)});function Vf(){Ce&&Ce.dispose()}async function Lg(n,e){return new Promise(r=>{Ce&&Ce.dispose(),Ta=u=>{r(u),Ce.dispose()},Ce=Ge.window.createWebviewPanel("svnCommitMessage","Commit Message",{preserveFocus:!1,viewColumn:Ge.ViewColumn.Active},{enableScripts:!0,retainContextWhenHidden:!0});let i=Ge.Uri.file(Wf.join(__dirname,"..","css","commit-message.css")),s=Ce.webview.asWebviewUri(i),o="";if(e&&e.length){let u=e.sort().map(x=>`<li>${x}</li>`);u.length&&(o=`
<div class="file-list">
  <h3 class="title">Files to commit</h3>
  <ul>
    ${u.join(`
`)}
  </ul>
</div>`)}let a=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  Use a content security policy to only allow loading images from https or from our extension directory,
  and only allow scripts that have a specific nonce.
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${Ce.webview.cspSource} https:; script-src ${Ce.webview.cspSource} 'unsafe-inline'; style-src ${Ce.webview.cspSource};">

  <title>Commit Message</title>
  <link rel="stylesheet" href="${s}">
</head>
<body>
  <section class="container">
    ${o}
    <form>
      <fieldset>
        <div class="float-right">
          <a href="#" id="pickCommitMessage">Pick a previous commit message</a>
        </div>
        <label for="message">Commit message</label>
        <textarea id="message" rows="3" placeholder="Message (press Ctrl+Enter to commit)"></textarea>
        <button id="commit" class="button-primary">Commit</button>
        <div class="float-right">
          <button id="cancel" class="button button-outline">Cancel</button>
        </div>
      </fieldset>
    </form>
  </section>
  <script>
    const vscode = acquireVsCodeApi();

    const txtMessage = document.getElementById("message");
    const btnCommit = document.getElementById("commit");
    const btnCancel = document.getElementById("cancel");
    const linkPickCommitMessage = document.getElementById("pickCommitMessage");

    // load current message
    txtMessage.value = ${JSON.stringify(n)};

    btnCommit.addEventListener("click", function() {
      vscode.postMessage({
        command: "commit",
        message: txtMessage.value
      });
    });

    btnCancel.addEventListener("click", function() {
      vscode.postMessage({
        command: "cancel"
      });
    });

    // Allow CTRL + Enter
    txtMessage.addEventListener("keydown", function(e) {
      if (event.ctrlKey && event.keyCode === 13) {
        btnCommit.click();
      }
    });

    // Auto resize the height of message
    txtMessage.addEventListener("input", function(e) {
      txtMessage.style.height = "auto";
      txtMessage.style.height = (txtMessage.scrollHeight) + "px";
    });

    window.addEventListener("load", function() {
      setTimeout(() => {
        txtMessage.focus();
      }, 1000);
    });

    linkPickCommitMessage.addEventListener("click", function() {
      vscode.postMessage({
        command: "pickCommitMessage"
      });
    });

    // Message from VSCode
    window.addEventListener("message", function(event) {
      const message = event.data;
      switch (message.command) {
        case "setMessage":
          txtMessage.value = message.message;
          txtMessage.dispatchEvent(new Event("input"));
          break;
      }
    });
  </script>
</body>
</html>`;Ce.webview.html=a,Ce.onDidDispose(()=>{r(void 0)});let c=async()=>{let u;e&&e[0]&&(u=await(await Ge.commands.executeCommand("svn.getSourceControlManager","")).getRepositoryFromUri(Ge.Uri.file(e[0])));let x=await Ge.commands.executeCommand("svn.pickCommitMessage",u);x!==void 0&&Ce.webview.postMessage({command:"setMessage",message:x})};Ce.webview.onDidReceiveMessage(u=>{switch(u.command){case"commit":r(u.message),Ce.dispose();break;case"pickCommitMessage":c();break;default:r(void 0),Ce.dispose()}}),Ce.reveal(Ge.ViewColumn.Active,!1)})}async function Ai(n,e=!0,t){e&&(n=await Lg(n,t));let r=$.get("commit.checkEmptyMessage",!0);return n===""&&r?await Ge.window.showWarningMessage("Do you really want to commit an empty message?",{modal:!0},"Yes")==="Yes"?"":void 0:n}var Li=class extends U{constructor(){super("svn.commit")}async execute(...e){if(e.length===0||!(e[0].resourceUri instanceof pn.Uri)){let i=await this.getSCMResource();if(!i)return;e=[i]}let t=e.filter(i=>i instanceof re),r=t.map(i=>i.resourceUri);t.forEach(i=>{i.type==="added"&&i.renameResourceUri&&r.push(i.renameResourceUri)}),await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(a=>a.fsPath);for(let a of s){let c=Pa.dirname(a.fsPath),u=i.getResourceFromFile(c);for(;u;)u.type==="added"&&o.push(c),c=Pa.dirname(c),u=i.getResourceFromFile(c)}try{let a=await Ai(i.inputBox.value,!0,o);if(a===void 0)return;i.inputBox.value=a;let c=await i.commitFiles(a,o);pn.window.showInformationMessage(c),i.inputBox.value=""}catch(a){console.error(a);let c=a;pn.window.showErrorMessage(c.stderrFormated||String(a))}})}};var Na=W(require("path")),Oa=require("vscode");var Mi=class extends U{constructor(){super("svn.commitWithMessage",{repository:!0})}async execute(e){let t=await dc(e);if(!t||t.length===0)return;let r=t.map(s=>s.resourceUri.fsPath),i=await Ai(e.inputBox.value,!1,r);if(i!==void 0){t.forEach(s=>{if(s instanceof re){s.type==="added"&&s.renameResourceUri&&r.push(s.renameResourceUri.fsPath);let o=Na.dirname(s.resourceUri.fsPath),a=e.getResourceFromFile(o);for(;a;)a.type==="added"&&r.push(o),o=Na.dirname(o),a=e.getResourceFromFile(o)}});try{let s=await e.commitFiles(i,r);Oa.window.showInformationMessage(s),e.inputBox.value=""}catch(s){console.error(s);let o=s;Oa.window.showErrorMessage(o.stderrFormated||String(s))}}}};var Gf=require("vscode");var Fi=class extends U{constructor(){super("svn.deleteUnversioned")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(s=>s.resourceUri);if(await Gf.window.showWarningMessage("Would you like to delete selected files?",{modal:!0},"Yes","No")==="Yes")for(let s of r){let o=s.fsPath;try{if(!await le(o))continue;(await He(o)).isDirectory()?eo(o):await Ht(o)}catch{}}}};var zf=require("vscode");var Ui=class extends U{constructor(){super("svn.fileOpen")}async execute(e){await zf.commands.executeCommand("vscode.open",e)}};var ki=class extends U{constructor(){super("svn.finishCheckout",{repository:!0})}async execute(e){await e.finishCheckout()}};var $i=class extends U{constructor(t){super("svn.getSourceControlManager");this.sourceControlManager=t}async execute(){return this.sourceControlManager}};var Hf=require("path"),Ir=require("vscode");var Bi=class extends U{constructor(){super("svn.log",{repository:!0})}async execute(e){try{let t=Qe(Ir.Uri.file(e.workspaceRoot),"LOG"),r=t.with({path:Hf.posix.join(t.path,"svn.log")});await Ir.commands.executeCommand("vscode.open",r)}catch(t){console.error(t),Ir.window.showErrorMessage("Unable to log")}}};var qi=class extends U{constructor(){super("svn.openChangeBase",{})}async execute(e,...t){return this.openChange(e,"BASE",t)}};var ji=class extends U{constructor(){super("svn.openChangeHead")}async execute(e,...t){return this.openChange(e,"HEAD",t)}};var Xi=class extends U{constructor(){super("svn.openChangePrev",{})}async execute(e,...t){return this.openChange(e,"PREV",t)}};var xt=require("vscode");var Wi=class extends U{constructor(){super("svn.openFile")}async execute(e,...t){let r=e instanceof re,i;if(e instanceof xt.Uri)e.scheme==="svn"?i=[xt.Uri.file(At(e).fsPath)]:e.scheme==="file"&&(i=[e]);else if(e instanceof qe)i=[new re(e.uri,e.type,void 0,e.props,!0).resourceUri];else{let a=e;a instanceof re,a&&(i=[...t.map(c=>c.resourceUri),a.resourceUri])}if(!i)return;let s=i.length===1,o=xt.window.activeTextEditor;for(let a of i){if(!a||await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())continue;let c={preserveFocus:r,preview:s,viewColumn:xt.ViewColumn.Active};o&&o.document.uri.toString()===a.toString()&&(c.selection=o.selection);let u=await xt.workspace.openTextDocument(a);await xt.window.showTextDocument(u,c)}}};var Vi=require("path"),Sr=require("vscode");var Gi=class extends U{constructor(){super("svn.openHEADFile")}async execute(e){let t;if(e instanceof re?t=e:e instanceof Sr.Uri?t=await this.getSCMResource(e):e instanceof qe?t=new re(e.uri,e.type,void 0,e.props,!0):t=await this.getSCMResource(),!t)return;let r=await this.getLeftResource(t,"HEAD"),i=Vi.posix.basename(t.resourceUri.path);if(!r){Sr.window.showWarningMessage(`"HEAD version of '${i}' is not available."`);return}let s=Vi.posix.dirname(t.resourceUri.path),o=r.with({path:Vi.posix.join(s,`(HEAD) ${i}`)});return Sr.commands.executeCommand("vscode.open",o,{preview:!0})}};var zi=class extends U{constructor(){super("svn.openResourceBase")}async execute(e){await this._openResource(e,"BASE",void 0,!0,!1)}};var Hi=class extends U{constructor(){super("svn.openResourceHead")}async execute(e){await this._openResource(e,"HEAD",void 0,!0,!1)}};var Yi=class extends U{constructor(){super("svn.patch")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(c=>c.fsPath),a=await i.patch(o);await this.showDiffPath(i,a)})}};var Qi=class extends U{constructor(){super("svn.patchAll",{repository:!0})}async execute(e){let t=await e.patch([]);await this.showDiffPath(e,t)}};var Ki=class extends U{constructor(){super("svn.patchChangeList",{repository:!0})}async execute(e){let t=await mc(e);if(!t)return;let r=await e.patchChangelist(t);await this.showDiffPath(e,r)}};var Yf=require("vscode");var Qf=W(yr()),Zi=class extends U{constructor(t){super("svn.pickCommitMessage",{repository:!0});this.svnVersion=t}async execute(t){let r=Qf.satisfies(this.svnVersion,">= 1.8"),i=[],s=$.get("previousCommitsUser",null);if(s&&r?i=await t.logByUser(s):i=await t.log("HEAD","0",20),!i.length)return;let o=i.map(u=>({label:u.msg,description:`r${u.revision} | ${u.author} | ${new Date(u.date).toLocaleString()}`})),a=await Yf.window.showQuickPick(o);if(a===void 0)return;let c=a.label;return t.inputBox.value=c,c}};var _a=require("vscode");var Ji=class extends U{constructor(){super("svn.promptAuth")}async execute(e,t){let r=await _a.window.showInputBox({placeHolder:"Svn repository username",prompt:"Please enter your username",ignoreFocusOut:!0,value:e});if(r===void 0)return;let i=await _a.window.showInputBox({placeHolder:"Svn repository password",prompt:"Please enter your password",value:t,ignoreFocusOut:!0,password:!0});return i===void 0?void 0:{username:r,password:i}}};var Kf=require("vscode");var es=class extends U{constructor(){super("svn.promptRemove",{repository:!0})}async execute(e,...t){let r=t.map(a=>a.fsPath),i=r.map(a=>e.repository.removeAbsolutePath(a)).sort(),s="Add to ignored list",o=await Kf.window.showInformationMessage(`The file(s) "${i.join(", ")}" are removed from disk.
Would you like remove from SVN?`,{modal:!1},"Yes",s,"No");if(o==="Yes")await e.removeFiles(r,!1);else if(o===s){let a=$.get("delete.ignoredRulesForDeletedFiles",[]);a.push(...i),a=[...new Set(a)],$.update("delete.ignoredRulesForDeletedFiles",a)}}};var ts=require("vscode");var rs=class extends U{constructor(){super("svn.treeview.pullIncomingChange")}async execute(...e){let t=$.get("showUpdateMessage",!0);if(e[0]instanceof qe){try{let i=e[0],s=await i.repository.pullIncomingChange(i.uri.fsPath);t&&ts.window.showInformationMessage(s)}catch(i){console.error(i),ts.window.showErrorMessage("Unable to update")}return}let r=e.map(i=>i.resourceUri);await this.runByRepository(r,async(i,s)=>{if(!i)return;s.map(a=>a.fsPath).forEach(async a=>{let c=await i.pullIncomingChange(a);t&&ts.window.showInformationMessage(c)})})}};var ns=class extends U{constructor(){super("svn.refresh",{repository:!0})}async execute(e){let t=$.get("refresh.remoteChanges",!1);await e.status(),t&&await e.updateRemoteChangedFiles()}};var is=class extends U{constructor(){super("svn.refreshRemoteChanges",{repository:!0})}async execute(e){await e.updateRemoteChangedFiles()}};var Aa=require("vscode");var ss=class extends U{constructor(){super("svn.remove")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r,i=await Aa.window.showWarningMessage("Would you like to keep a local copy of the files?",{modal:!0},"Yes","No");if(!i)return;i==="Yes"?r=!0:r=!1;let s=t.map(o=>o.resourceUri);await this.runByRepository(s,async(o,a)=>{if(!o)return;let c=a.map(u=>u.fsPath);try{await o.removeFiles(c,r)}catch(u){console.log(u),Aa.window.showErrorMessage("Unable to remove files")}})}};var Zf=require("vscode"),os=class extends U{constructor(){super("svn.removeUnversioned",{repository:!0})}async execute(e){await Zf.window.showWarningMessage("Are you sure? This will remove all unversioned files except for ignored.",{modal:!0},"Yes","No")==="Yes"&&await e.removeUnversioned()}};var Bt=W(require("path")),La=require("vscode");var as=class extends U{constructor(){super("svn.renameExplorer",{repository:!0})}async execute(e,t,r){if(!t)return;let i=t.fsPath;return this.rename(e,i)}async rename(e,t,r){if(t=nt(t),!r){let s=nt(e.workspaceRoot),o=Bt.relative(s,t);r=await La.window.showInputBox({value:Bt.basename(t),prompt:`New name name for ${o}`})}if(!r)return;if(!an(r)){La.window.showErrorMessage("Invalid file name: path traversal attempts are not allowed");return}let i=Bt.dirname(t);r=Bt.join(i,r),await e.rename(t,r)}};var Jf=require("vscode");var Fg=[{label:"base",description:"Choose the file that was the (unmodified) BASE revision before you tried to integrate changes"},{label:"working",description:"Assuming that you've manually handled the conflict resolution, choose the version of the file as it currently stands in your working copy."},{label:"mine-full",description:"Preserve all local modifications and discarding all changes fetched"},{label:"theirs-full",description:"Discard all local modifications and integrating all changes fetched"},{label:"mine-conflict",description:"Resolve conflicted files by preferring local modifications over the changes fetched"},{label:"theirs-conflict",description:"Resolve conflicted files by preferring the changes fetched from the server over local modifications"}],Ma=class{constructor(e){this.option=e}get label(){return this.option.label}get description(){return this.option.description}};function cs(){return Fg.map(n=>new Ma(n))}var us=class extends U{constructor(){super("svn.resolve")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=cs(),i=await Jf.window.showQuickPick(r,{placeHolder:"Select conflict option"});if(!i)return;let s=t.map(o=>o.resourceUri);await this.runByRepository(s,async(o,a)=>{if(!o)return;let c=a.map(u=>u.fsPath);await o.resolve(c,i.label)})}};var hn=require("vscode");var ls=class extends U{constructor(){super("svn.resolveAll",{repository:!0})}async execute(e){let t=e.conflicts.resourceStates;t.length||hn.window.showInformationMessage("No Conflicts");for(let r of t){let i=`Select conflict option for ${r.resourceUri.path}`,s=cs(),o=await hn.window.showQuickPick(s,{placeHolder:i});if(!o)return;try{let a=await e.resolve([r.resourceUri.path],o.label);hn.window.showInformationMessage(a)}catch(a){let c=a;hn.window.showErrorMessage(c.stderr||String(a))}}}};var ep=W(require("path")),tp=require("vscode");var fs=class extends U{constructor(){super("svn.resolved")}async execute(e){if(!e)return;if(!$.get("conflict.autoResolve")){let i=ep.basename(e.fsPath);if(await tp.window.showWarningMessage(`Mark the conflict as resolved for "${i}"?`,{modal:!0},"Yes","No")!=="Yes")return}let r=[e];await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(a=>a.fsPath);await i.resolve(o,"working")})}};var rp=require("vscode");var Fa=require("vscode");async function Dr(){let n="Yes I'm sure";return await Fa.window.showWarningMessage("Are you sure? This will wipe all local changes.",{modal:!0},n)===n}async function Ug(){let n=[];for(let r in $r)$r.hasOwnProperty(r)&&n.push({label:r,description:$r[r]});let t=await Fa.window.showQuickPick(n,{placeHolder:"Select revert depth"});if(t)return t.label}async function Rr(n,e="empty"){let t=n.length===0;for(let r of n)if(r.scheme==="file")try{if((await He(r.fsPath)).isDirectory()){t=!0;break}}catch{}return t?Ug():e}var ps=class extends U{constructor(){super("svn.revert")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0||!await Dr())return;let r=t.map(s=>s.resourceUri),i=await Rr(r);i&&await this.runByRepository(r,async(s,o)=>{if(!s)return;let a=o.map(c=>c.fsPath).reverse();try{await s.revert(a,i)}catch(c){console.log(c),rp.window.showErrorMessage("Unable to revert")}})}};var np=require("vscode");var hs=class extends U{constructor(){super("svn.revertAll")}async execute(e){let t=e.resourceStates;if(t.length===0||!await Dr())return;let r=t.map(s=>s.resourceUri),i=await Rr(r);i&&await this.runByRepository(r,async(s,o)=>{if(!s)return;let a=o.map(c=>c.fsPath).reverse();try{await s.revert(a,i)}catch(c){console.log(c),np.window.showErrorMessage("Unable to revert")}})}};var ip=require("vscode");var xs=class extends U{constructor(){super("svn.revertChange")}async execute(e,t,r){let i=ip.window.visibleTextEditors.filter(s=>s.document.uri.toString()===e.toString())[0];i&&await this._revertChanges(i,[...t.slice(0,r),...t.slice(r+1)])}};var sp=require("vscode");var ds=class extends U{constructor(){super("svn.revertExplorer")}async execute(e,t){if(!t)return;let r=t;if(r.length===0||!await Dr())return;let i=await Rr(r);i&&await this.runByRepository(r,async(s,o)=>{if(!s)return;let a=o.map(c=>c.fsPath);try{await s.revert(a,i)}catch(c){console.log(c),sp.window.showErrorMessage("Unable to revert")}})}};var xn=require("vscode");var ms=class extends U{constructor(){super("svn.switchBranch",{repository:!0})}async execute(e){let t=await mr(e,!0);if(t)try{if(t.isNew){let r=await xn.window.showInputBox({value:`Created new branch ${t.name}`,prompt:`Commit message for create branch ${t.name}`});if(r===void 0)return;await e.newBranch(t.path,r)}else try{await e.switchBranch(t.path)}catch(r){let i=r;if(i.stderrFormated&&i.stderrFormated.includes("ignore-ancestry"))await xn.window.showErrorMessage("Seems like these branches don't have a common ancestor.  Do you want to retry with '--ignore-ancestry' option?","Yes","No")==="Yes"&&await e.switchBranch(t.path,!0);else throw r}}catch(r){console.log(r),t.isNew?xn.window.showErrorMessage("Unable to create new branch"):xn.window.showErrorMessage("Unable to switch branch")}}};var Ua=require("vscode");var gs=class extends U{constructor(){super("svn.update",{repository:!0})}async execute(e){try{let t=$.get("update.ignoreExternals",!1),r=$.get("showUpdateMessage",!0),i=await e.updateRevision(t);r&&Ua.window.showInformationMessage(i)}catch(t){console.error(t),Ua.window.showErrorMessage("Unable to update")}}};var Tr=require("vscode");var ys=class extends U{constructor(){super("svn.upgrade")}async execute(e){if(!e||$.get("ignoreWorkingCopyIsTooOld",!1))return;e=nt(e);let t="Yes",r="No",i="Don't Show Again",s=await Tr.window.showWarningMessage("You want upgrade the working copy (svn upgrade)?",t,r,i),o=await Tr.commands.executeCommand("svn.getSourceControlManager","");if(s===t)await o.upgradeWorkingCopy(e)?(Tr.window.showInformationMessage(`Working copy "${e}" upgraded`),o.tryOpenRepository(e)):Tr.window.showErrorMessage(`Error on upgrading working copy "${e}". See log for more detail`);else if(s===i)return $.update("ignoreWorkingCopyIsTooOld",!0)}};var op=require("path");var qt=require("vscode");var ws=class extends U{constructor(){super("svn.searchLogByRevision",{repository:!0})}async execute(e){let t=await qt.window.showInputBox({prompt:"Revision?"});if(!t)return;let r=parseInt(t,10);if(!r||!Cr(t)){qt.window.showErrorMessage("Invalid revision");return}try{let i=Qe(qt.Uri.file(e.workspaceRoot),"LOG_REVISION",{revision:r}),s=i.with({path:op.posix.join(i.path,"svn.log")});await qt.commands.executeCommand("vscode.open",s)}catch(i){console.error(i),qt.window.showErrorMessage("Unable to log")}}};var it=require("vscode");var K=require("vscode"),dt=W(require("path")),ap=W(require("crypto"));var vs=class{constructor(e){this.type=K.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},rr=class{constructor(e){this.type=K.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},ka=class{constructor(){this._emitter=new K.EventEmitter;this._bufferedEvents=[];this._root=new rr("");this._disposables=[];this.onDidChangeFile=this._emitter.event;this._disposables.push(K.workspace.registerFileSystemProvider("tempsvnfs",this,{isCaseSensitive:!0}),K.workspace.onDidCloseTextDocument(e=>{e.uri.scheme==="tempsvnfs"&&this.delete(e.uri)}))}watch(e){return new K.Disposable(()=>{})}stat(e){return this._lookup(e,!1)}readDirectory(e){let t=this._lookupAsDirectory(e,!1),r=[];for(let[i,s]of t.entries)r.push([i,s.type]);return r}createDirectory(e){let t=dt.posix.basename(e.path),r=e.with({path:dt.posix.dirname(e.path)}),i=this._lookupAsDirectory(r,!1),s=new rr(t);i.entries.set(s.name,s),i.mtime=Date.now(),i.size+=1,this._fireSoon({type:K.FileChangeType.Changed,uri:r},{type:K.FileChangeType.Created,uri:e})}readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw K.FileSystemError.FileNotFound()}writeFile(e,t,r){let i=dt.posix.basename(e.path),s=this._lookupParentDirectory(e),o=s.entries.get(i);if(o instanceof rr)throw K.FileSystemError.FileIsADirectory(e);if(!o&&!r.create)throw K.FileSystemError.FileNotFound(e);if(o&&r.create&&!r.overwrite)throw K.FileSystemError.FileExists(e);o||(o=new vs(i),s.entries.set(i,o),this._fireSoon({type:K.FileChangeType.Created,uri:e})),o.mtime=Date.now(),o.size=t.byteLength,o.data=t,this._fireSoon({type:K.FileChangeType.Changed,uri:e})}delete(e){let t=e.with({path:dt.posix.dirname(e.path)}),r=dt.posix.basename(e.path),i=this._lookupAsDirectory(t,!1);if(!i.entries.has(r))throw K.FileSystemError.FileNotFound(e);i.entries.delete(r),i.mtime=Date.now(),i.size-=1,this._fireSoon({type:K.FileChangeType.Changed,uri:t},{type:K.FileChangeType.Deleted,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw K.FileSystemError.FileExists(t);let i=this._lookup(e,!1),s=this._lookupParentDirectory(e),o=this._lookupParentDirectory(t),a=dt.posix.basename(t.path);s.entries.delete(i.name),i.name=a,o.entries.set(a,i),this._fireSoon({type:K.FileChangeType.Deleted,uri:e},{type:K.FileChangeType.Created,uri:t})}async createTempSvnRevisionFile(e,t,r){let i=`r${t}_${dt.basename(e.fsPath)}`,o=ap.createHash("md5").update(e.path).digest("hex"),a=$.get("default.encoding"),c;a?c=Buffer.from(ln.encode(r,a)):c=Buffer.from(r),this._root.entries.has(o)||this.createDirectory(K.Uri.parse(`tempsvnfs:/${o}`));let u=K.Uri.parse(`tempsvnfs:/${o}/${i}`,!0);return this.writeFile(u,c,{create:!0,overwrite:!0}),u}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[];for(let[e]of this.readDirectory(K.Uri.parse("tempsvnfs:/")))this.delete(K.Uri.parse(`tempsvnfs:/${e}`))}_lookup(e,t){let r=e.path.split("/"),i=this._root;for(let s of r){if(!s)continue;let o;if(i instanceof rr&&(o=i.entries.get(s)),!o){if(t)return;throw K.FileSystemError.FileNotFound(e)}i=o}return i}_lookupAsDirectory(e,t){let r=this._lookup(e,t);if(r instanceof rr)return r;throw K.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let r=this._lookup(e,t);if(r instanceof vs)return r;throw K.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let t=e.with({path:dt.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandler&&clearTimeout(this._fireSoonHandler),this._fireSoonHandler=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},1)}},jt=new ka;var bs=class extends U{constructor(){super("svn.searchLogByText",{repository:!0})}async execute(e){let t=await it.window.showInputBox({prompt:"Search query"});if(!t)return;if(!on(t)){it.window.showErrorMessage("Invalid search pattern: contains forbidden characters");return}let r=it.Uri.parse("tempsvnfs:/svn.log");jt.writeFile(r,Buffer.from(""),{create:!0,overwrite:!0}),await it.commands.executeCommand("vscode.open",r);try{let i=await it.window.withProgress({cancellable:!1,location:it.ProgressLocation.Notification,title:"Searching Log"},async()=>e.plainLogByText(t));jt.writeFile(r,Buffer.from(i),{create:!0,overwrite:!0})}catch(i){it.window.showErrorMessage(`Search failed: ${i instanceof Error?i.message:String(i)}`),console.error(i)}}};var Pr=require("vscode");var Es=class extends U{constructor(){super("svn.merge",{repository:!0})}async execute(e){let t=await mr(e);t&&await this.merge(e,t)}async merge(e,t){let r=!1;gc(e.currentBranch)&&(r=!0);try{await e.merge(t.path,r)}catch(i){let s=i;s.stderrFormated?s.stderrFormated.includes("try updating first")?await Pr.window.showErrorMessage("Seems like you need to update first prior to merging. Would you like to update now and try merging again?","Yes","No")==="Yes"&&(await Pr.commands.executeCommand("svn.update"),await this.merge(e,t)):Pr.window.showErrorMessage("Unable to merge branch: "+s.stderrFormated):(console.log(i),Pr.window.showErrorMessage("Unable to merge branch"))}}};function cp(n,e){e.push(new $i(n)),e.push(new Ui),e.push(new Wi),e.push(new Ji),e.push(new Mi),e.push(new Fn),e.push(new Bn),e.push(new ns),e.push(new Li),e.push(new zi),e.push(new Hi),e.push(new qi),e.push(new ms),e.push(new Es),e.push(new ps),e.push(new gs),e.push(new rs),e.push(new Qi),e.push(new Yi),e.push(new Ki),e.push(new ss),e.push(new ls),e.push(new us),e.push(new fs),e.push(new Bi),e.push(new xs),e.push(new _i),e.push(new Oi),e.push(new os),e.push(new ki),e.push(new kn),e.push(new Un),e.push(new as),e.push(new ys),e.push(new Xi),e.push(new es),e.push(new Pi),e.push(new is),e.push(new Fi),e.push(new ji),e.push(new Gi),e.push(new hs),e.push(new Zi(n.svn.version)),e.push(new ds),e.push(new ws),e.push(new bs)}var Cs=require("vscode");var dn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidChangeStatusRepository(this.checkHasChangesOnActiveEditor,this,this.disposables),Cs.window.onDidChangeActiveTextEditor(()=>this.checkHasChangesOnActiveEditor(),this,this.disposables)}checkHasChangesOnActiveEditor(){Ot("svnActiveEditorHasChanges",this.hasChangesOnActiveEditor())}hasChangesOnActiveEditor(){if(!Cs.window.activeTextEditor)return!1;let e=Cs.window.activeTextEditor.document.uri,t=this.sourceControlManager.getRepository(e);if(!t)return!1;let r=t.getResourceFromFile(e);if(!r)return!1;switch(r.type){case"added":case"deleted":case"external":case"ignored":case"none":case"normal":case"unversioned":return!1;case"conflicted":case"incomplete":case"merged":case"missing":case"modified":case"obstructed":case"replaced":return!0}return!0}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(100)],dn.prototype,"checkHasChangesOnActiveEditor",1);var mn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidOpenRepository(this.checkOpened,this,this.disposables),e.onDidCloseRepository(this.checkOpened,this,this.disposables),this.checkOpened()}checkOpened(){Ot("svnOpenRepositoryCount",this.sourceControlManager.repositories.length)}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(100)],mn.prototype,"checkOpened",1);var vn=W(require("path")),se=require("vscode");var hp=require("crypto"),gn=W(require("path")),Xa=W(up()),xp=W(lp()),he=require("vscode");Xa.default.extend(xp.default);var yn=class{constructor(e){this.path=e}toString(){return this.path}};function Nr(n,e,t){return n.map(r=>({kind:e,data:r,parent:t}))}function Is(n){let e=gn.join(__dirname,"..","icons"),t=r=>he.Uri.file(gn.join(e,r,`${n}.svg`));return{light:t("light"),dark:t("dark")}}async function Or(n,e){let t=he.env.clipboard;if(t===void 0){he.window.showErrorMessage("Clipboard is supported in VS Code 1.30 and newer");return}if(e.kind===2){let r=e.data;switch(n){case"msg":case"revision":await t.writeText(r[n])}}}function kg(n,e,t){return!(n.length&&n[n.length-1].revision==="1"||e.length===0||e[e.length-1].revision==="1"||e.length<t)}function Ss(n,e,t){let r=n.persisted.baseRevision;if(e.length&&r&&parseInt(e[0].revision,10)>r){let i=1;for(;e.length>i&&parseInt(e[i].revision,10)>r;)i++;let s=new he.TreeItem("BASE");s.tooltip="Log entries above do not exist in working copy",t.splice(i,0,{kind:4,data:s})}}async function Wa(n,e){if(n.localFullPath===void 0){e&&he.window.showErrorMessage("No working copy for this path");return}let t;try{t=await He(n.localFullPath.fsPath)}catch{return he.window.showWarningMessage("Not available from this working copy: "+n.localFullPath),!1}return t.isFile()?!0:(he.window.showErrorMessage("This target is not a file"),!1)}function wn(){let n=Number.parseInt($.get("log.length")||"50",10);if(isNaN(n)||n<=0)throw new Error("Invalid log.length setting value");return n}async function _r(n){let e=n.persisted.commitFrom,t=n.entries;t.length&&(e=t[t.length-1].revision,e=(Number.parseInt(e,10)-1).toString());let r=[],i=wn();try{r=await n.repo.log(e,"1",i,n.svnTarget)}catch{}kg(t,r,i)||(n.isComplete=!0),t.push(...r)}var fp=new Map;function $g(n){let e=(0,hp.createHash)("md5");return e.write(n),e.digest().toString("hex")}function Ds(n,e=16){if(!$.get("gravatars.enabled",!0)||n===void 0)return new he.ThemeIcon("git-commit");let t=fp.get(n);if(t!==void 0)return t;let r=$.get("gravatar.icon_url","").replace("<AUTHOR>",n).replace("<AUTHOR_MD5>",$g(n)).replace("<SIZE>",e.toString());return t=he.Uri.parse(r),fp.set(n,t),t}function Rs(n){let e=(0,Xa.default)(n.date).fromNow();return`r${n.revision}, ${e} by ${n.author}`}function Ts(n){return n.msg?n.msg.split(/\r?\n/,1)[0]:"<blank>"}function Ps(n){let e=n.date;return isNaN(Date.parse(e))||(e=new Date(e).toString()),`Author: ${n.author}
${e}
Revision: ${n.revision}
Message: ${n.msg}`}async function pp(n,e,t){if(t==="BASE"){let o=n.getPathNormalizer().parse(e.toString(!0)).localFullPath;if(o===void 0||!await le(o.path)){let a="BASE revision doesn't exist for "+(o?o.path:"remote path");throw he.window.showErrorMessage(a),new Error(a)}return o}let r;try{r=await n.show(e,t)}catch(i){throw he.window.showErrorMessage("Failed to open path"),i}return jt.createTempSvnRevisionFile(e,t,r)}async function nr(n,e,t,r,i){let s=await pp(n,e,t),o=await pp(n,i||e,r),a={preview:!0},c=`${gn.basename(e.path)} (${t} : ${r})`;return he.commands.executeCommand("vscode.diff",s,o,c,a)}async function Ar(n,e,t){let r;try{r=await n.show(e,t)}catch{he.window.showErrorMessage("Failed to open path");return}let i=await jt.createTempSvnRevisionFile(e,t,r),s={preview:!0};return he.commands.executeCommand("vscode.open",i,s)}var Ns=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new se.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose=[];this._dispose.push(se.window.onDidChangeActiveTextEditor(this.editorChanged,this),se.window.registerTreeDataProvider("itemlog",this),se.commands.registerCommand("svn.itemlog.copymsg",async t=>Or("msg",t)),se.commands.registerCommand("svn.itemlog.copyrevision",async t=>Or("revision",t)),se.commands.registerCommand("svn.itemlog.openFileRemote",this.openFileRemoteCmd,this),se.commands.registerCommand("svn.itemlog.openDiff",this.openDiffCmd,this),se.commands.registerCommand("svn.itemlog.openDiffBase",this.openDiffBaseCmd,this),se.commands.registerCommand("svn.itemlog.refresh",this.refresh,this)),this.refresh()}dispose(){Ie(this._dispose)}async openFileRemoteCmd(e){let t=e.data,r=Ye(this.currentItem);return Ar(r.repo,r.svnTarget,t.revision)}async openDiffBaseCmd(e){let t=e.data,r=Ye(this.currentItem);return nr(r.repo,r.svnTarget,t.revision,"BASE")}async openDiffCmd(e){let t=e.data,r=Ye(this.currentItem),i=r.entries.findIndex(o=>o===t);if(i===r.entries.length-1){se.window.showWarningMessage("Cannot diff last commit");return}let s=r.entries[i+1].revision;return nr(r.repo,r.svnTarget,s,t.revision)}async editorChanged(e){return this.refresh(void 0,e)}async refresh(e,t,r){if(r){await _r(Ye(this.currentItem)),this._onDidChangeTreeData.fire(e);return}if(t===void 0&&(t=se.window.activeTextEditor),t){let i=t.document.uri;if(i.scheme==="file"){let s=this.sourceControlManager.getRepository(i);if(s!==null)try{let o=await s.getInfo(i.fsPath);this.currentItem={isComplete:!1,entries:[],repo:s,svnTarget:se.Uri.parse(o.url),persisted:{commitFrom:"HEAD",baseRevision:parseInt(o.revision,10)},order:0}}catch{}}this._onDidChangeTreeData.fire(e)}}async getTreeItem(e){let t;if(e.kind===2){let r=e.data;t=new se.TreeItem(Ts(r),se.TreeItemCollapsibleState.None),t.description=Rs(r),t.iconPath=Ds(r.author),t.tooltip=Ps(r),t.contextValue="diffable",t.command={command:"svn.itemlog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Shouldn't happen");return t}async getChildren(e){if(this.currentItem===void 0)return[];if(e===void 0){let t=vn.basename(this.currentItem.svnTarget.fsPath),r=new se.TreeItem(t,se.TreeItemCollapsibleState.Expanded);return r.tooltip=vn.dirname(this.currentItem.svnTarget.fsPath),r.description=vn.dirname(this.currentItem.svnTarget.fsPath),r.iconPath=new se.ThemeIcon("history"),[{kind:4,data:r}]}else{let t=this.currentItem.entries;t.length===0&&await _r(this.currentItem);let r=Nr(t,2);if(Ss(this.currentItem,t,r),!this.currentItem.isComplete){let i=new se.TreeItem(`Load another ${wn()} revisions`),s={kind:4,data:i};i.tooltip="Paging size may be adjusted using log.length setting",i.command={command:"svn.itemlog.refresh",arguments:[e,void 0,!0],title:"refresh element"},i.iconPath=new se.ThemeIcon("unfold"),r.push(s)}return r}}};var Gt=W(require("path")),G=require("vscode");var Lr=W(require("path")),Sn=require("timers"),J=require("vscode");var bn=class{constructor(){this.operations=new Map}start(e){this.operations.set(e,(this.operations.get(e)||0)+1)}end(e){let t=(this.operations.get(e)||0)-1;t<=0?this.operations.delete(e):this.operations.set(e,t)}isRunning(e){return this.operations.has(e)}isIdle(){let e=this.operations.keys();for(let t of e)if(!An(t))return!1;return!0}};var Wt=require("path"),dp=W(require("path")),Cn=require("vscode");var En=require("path"),Va=require("vscode");function Xt(n){return n.path||"/"}var mt=class{constructor(e,t,r,i,s){this.remoteRoot=e;this.branchRoot=t;this.checkoutRoot=r;this._path=i;this._revision=s;if(i.length===0||i.charAt(0)==="/")throw new Error("Invalid _path "+i)}get remoteFullPath(){return Va.Uri.parse(this.remoteRoot.toString()+"/"+this._path)}get localFullPath(){if(this.checkoutRoot!==void 0)return Va.Uri.file(En.posix.join(this.checkoutRoot.path,En.posix.relative(this.fromRepoToBranch,this._path)))}get relativeFromBranch(){return En.posix.relative(this.fromRepoToBranch,this._path)}get fromRepoToBranch(){return En.posix.relative(Xt(this.remoteRoot),Xt(this.branchRoot))}get revision(){return this._revision}toString(e){return this.remoteFullPath+(e&&this._revision||"")}};H([ge],mt.prototype,"remoteFullPath",1),H([ge],mt.prototype,"localFullPath",1),H([ge],mt.prototype,"relativeFromBranch",1),H([ge],mt.prototype,"fromRepoToBranch",1),H([ge],mt.prototype,"revision",1),H([ge],mt.prototype,"toString",1);var Vt=class{constructor(e){this.repoInfo=e;this.repoRoot=Cn.Uri.parse(e.repository.root),this.branchRoot=Cn.Uri.parse(e.url),e.wcInfo&&e.wcInfo.wcrootAbspath&&(this.checkoutRoot=Cn.Uri.file(e.wcInfo.wcrootAbspath))}getFullRepoPathFromUrl(e){if(e.startsWith("/"))return e.substr(1);if(e.startsWith("svn://")||e.startsWith("file://")){let t=Cn.Uri.parse(e).path;return Wt.posix.relative(Xt(this.repoRoot),t)}else throw new Error("unknown path")}parse(e,t=2,r){let i;if(t===2)i=this.getFullRepoPathFromUrl(e);else if(t===1){if(!Wt.posix.isAbsolute(e))throw new Error("Path isn't absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=dp.relative(this.checkoutRoot.fsPath,e),i=Wt.posix.join(this.fromRootToBranch(),i)}else if(t===0){if(Wt.posix.isAbsolute(e))throw new Error("Path is absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=Wt.posix.join(this.fromRootToBranch(),e)}else throw new Error("unsupported kind");return new mt(this.repoRoot,this.branchRoot,this.checkoutRoot,i,r)}fromRootToBranch(){return Wt.posix.relative(Xt(this.repoRoot),Xt(this.branchRoot))}fromBranchToRoot(){return Wt.posix.relative(Xt(this.branchRoot),Xt(this.repoRoot))}};H([ge],Vt.prototype,"fromRootToBranch",1),H([ge],Vt.prototype,"fromBranchToRoot",1);var mp=require("vscode");var Os=class{constructor(e){this.repository=e;this._onDidChange=new mp.EventEmitter;this.disposables=[];e.onDidChangeStatus(this._onDidChange.fire,this._onDidChange,this.disposables),e.onDidChangeOperations(this._onDidChange.fire,this._onDidChange,this.disposables)}get onDidChange(){return this._onDidChange.event}get command(){if(!this.repository.currentBranch)return;let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch");return{command:"svn.switchBranch",tooltip:"Switch Branch...",title:`$(git-branch) ${this.repository.currentBranch}${e?" (Switching)":""}`,arguments:[this.repository.sourceControl]}}dispose(){this.disposables.forEach(e=>e.dispose())}};var gp=require("vscode");var As=class As{constructor(e){this.repository=e;this._onDidChange=new gp.EventEmitter;this.disposables=[];this._state=As.startState;e.onDidChangeStatus(this.onModelChange,this,this.disposables),e.onDidChangeOperations(this.onOperationsChange,this,this.disposables),this._onDidChange.fire()}get onDidChange(){return this._onDidChange.event}get state(){return this._state}set state(e){this._state=e,this._onDidChange.fire()}onOperationsChange(){let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch")||this.repository.operations.isRunning("Update")||this.repository.operations.isRunning("Merge"),t=this.repository.operations.isRunning("StatusRemote"),r=!this.repository.operations.isIdle();this.state={...this.state,isStatusRemoteRunning:t,isOperationRunning:r,isSyncRunning:e}}onModelChange(){this.state={...this.state,remoteChangedFiles:this.repository.remoteChangedFiles}}get command(){let e="$(sync)",t="",r="",i="";return this.state.isSyncRunning?(r="",e="$(sync~spin)",t="",i="Updating Revision..."):this.state.isStatusRemoteRunning?(r="",e="$(sync~spin)",t="",i="Checking remote updates..."):this.state.isOperationRunning?(r="",e="$(sync~spin)",t="Running",i="Running..."):this.state.needCleanUp?(r="svn.cleanup",e="$(alert)",t="Need cleanup",i="Run cleanup command"):this.state.isIncomplete?(r="svn.finishCheckout",e="$(issue-reopened)",t="Incomplete (Need finish checkout)",i="Run update to complete"):this.state.remoteChangedFiles>0?(e="$(cloud-download)",r="svn.update",i="Update Revision",t=`${this.state.remoteChangedFiles}\u2193`):(r="svn.update",i="Update Revision"),{command:r,title:[e,t].join(" ").trim(),tooltip:i,arguments:[this.repository]}}dispose(){this.disposables.forEach(e=>e.dispose())}};As.startState={isIncomplete:!1,isOperationRunning:!1,isStatusRemoteRunning:!1,isSyncRunning:!1,needCleanUp:!1,remoteChangedFiles:0};var _s=As;var Ls=class{constructor(e){this.disposables=[];this.checkoutStatusBar=new Os(e),this.syncStatusBar=new _s(e),this.disposables.push(this.checkoutStatusBar,this.syncStatusBar)}get onDidChange(){return ot(this.syncStatusBar.onDidChange,this.checkoutStatusBar.onDidChange)}get commands(){let e=[],t=this.checkoutStatusBar.command;t&&e.push(t);let r=this.syncStatusBar.command;return r&&e.push(r),e}dispose(){this.disposables.forEach(e=>e.dispose())}};var $e=require("vscode"),yp=require("fs");var wp=require("path");var In=class{constructor(e){this.root=e;this.disposables=[];let t=$e.workspace.createFileSystemWatcher(new $e.RelativePattern(nt(e),"**"));this._onRepoChange=new $e.EventEmitter,this._onRepoCreate=new $e.EventEmitter,this._onRepoDelete=new $e.EventEmitter;let r,i,s;typeof $e.workspace.workspaceFolders<"u"&&!$e.workspace.workspaceFolders.filter(m=>Pe(m.uri.fsPath,e)).length&&((0,yp.watch)((0,wp.join)(e,vt()),this.repoWatch.bind(this)).on("error",g=>{throw g}),r=this._onRepoChange.event,i=this._onRepoCreate.event,s=this._onRepoDelete.event),this.disposables.push(t);let o=m=>/[\\\/](\.svn|_svn)[\\\/]tmp/.test(m.path),a=m=>!o(m);this.onDidChange=me(t.onDidChange,a),this.onDidCreate=me(t.onDidCreate,a),this.onDidDelete=me(t.onDidDelete,a),this.onDidAny=ot(this.onDidChange,this.onDidCreate,this.onDidDelete);let c=/[\\\/](\.svn|_svn)[\\\/]/,u=m=>!c.test(m.path);this.onDidWorkspaceChange=me(this.onDidChange,u),this.onDidWorkspaceCreate=me(this.onDidCreate,u),this.onDidWorkspaceDelete=me(this.onDidDelete,u),this.onDidWorkspaceAny=ot(this.onDidWorkspaceChange,this.onDidWorkspaceCreate,this.onDidWorkspaceDelete);let x=m=>c.test(m.path);this.onDidSvnChange=me(this.onDidChange,x),this.onDidSvnCreate=me(this.onDidCreate,x),this.onDidSvnDelete=me(this.onDidDelete,x),r&&i&&s&&(this.onDidSvnChange=r,this.onDidSvnCreate=i,this.onDidSvnDelete=s),this.onDidSvnAny=ot(this.onDidSvnChange,this.onDidSvnCreate,this.onDidSvnDelete)}repoWatch(e,t){t&&(e==="change"?this._onRepoChange.fire($e.Uri.parse(t)):e==="rename"&&le(t).then(r=>{r?this._onRepoCreate.fire($e.Uri.parse(t)):this._onRepoDelete.fire($e.Uri.parse(t))}))}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(1e3)],In.prototype,"repoWatch",1);function qg(n){switch(n){case"CurrentBranch":case"Show":case"Info":return!1;default:return!0}}var Re=class{constructor(e,t){this.repository=e;this.secrets=t;this.changelists=new Map;this.statusIgnored=[];this.statusExternal=[];this.disposables=[];this.currentBranch="";this.remoteChangedFiles=0;this.isIncomplete=!1;this.needCleanUp=!1;this.deletedUris=[];this.canSaveAuth=!1;this._onDidChangeRepository=new J.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeState=new J.EventEmitter;this.onDidChangeState=this._onDidChangeState.event;this._onDidChangeStatus=new J.EventEmitter;this.onDidChangeStatus=this._onDidChangeStatus.event;this._onDidChangeRemoteChangedFiles=new J.EventEmitter;this.onDidChangeRemoteChangedFile=this._onDidChangeRemoteChangedFiles.event;this._onRunOperation=new J.EventEmitter;this.onRunOperation=this._onRunOperation.event;this._onDidRunOperation=new J.EventEmitter;this.onDidRunOperation=this._onDidRunOperation.event;this._operations=new bn;this._state=0;this._fsWatcher=new In(e.root),this.disposables.push(this._fsWatcher),this._fsWatcher.onDidAny(this.onFSChange,this,this.disposables),this._fsWatcher.onDidSvnAny(async r=>{await this.onDidAnyFileChanged(r)},this,this.disposables),this.sourceControl=J.scm.createSourceControl("svn","SVN",J.Uri.file(e.workspaceRoot)),this.sourceControl.count=0,this.sourceControl.inputBox.placeholder="Message (press Ctrl+Enter to commit)",this.sourceControl.acceptInputCommand={command:"svn.commitWithMessage",title:"commit",arguments:[this.sourceControl]},this.sourceControl.quickDiffProvider=this,this.disposables.push(this.sourceControl),this.statusBar=new Ls(this),this.disposables.push(this.statusBar),this.statusBar.onDidChange(()=>this.sourceControl.statusBarCommands=this.statusBar.commands,null,this.disposables),this.changes=this.sourceControl.createResourceGroup("changes","Changes"),this.conflicts=this.sourceControl.createResourceGroup("conflicts","Conflicts"),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.changes.hideWhenEmpty=!0,this.unversioned.hideWhenEmpty=!0,this.conflicts.hideWhenEmpty=!0,this.disposables.push(this.changes),this.disposables.push(this.conflicts),this.disposables.push(Be(()=>this.unversioned.dispose())),this.disposables.push(Be(()=>{this.remoteChangedUpdateInterval&&(0,Sn.clearInterval)(this.remoteChangedUpdateInterval)})),this._fsWatcher.onDidWorkspaceDelete(r=>this.deletedUris.push(r),this,this.disposables),this.onDidChangeStatus(this.actionForDeletedFiles,this,this.disposables),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles(),$.onDidChange(r=>{r.affectsConfiguration("svn.remoteChanges.checkFrequency")&&(this.remoteChangedUpdateInterval&&(0,Sn.clearInterval)(this.remoteChangedUpdateInterval),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles())}),this.status(),this.disposables.push(J.workspace.onDidSaveTextDocument(r=>{this.onDidSaveTextDocument(r)}))}get fsWatcher(){return this._fsWatcher}get onDidChangeOperations(){return ot(this.onRunOperation,this.onDidRunOperation)}get operations(){return this._operations}get state(){return this._state}set state(e){var t;this._state=e,this._onDidChangeState.fire(e),this.changes.resourceStates=[],this.unversioned.resourceStates=[],this.conflicts.resourceStates=[],this.changelists.forEach((r,i)=>{r.resourceStates=[]}),(t=this.remoteChanges)==null||t.dispose(),this.isIncomplete=!1,this.needCleanUp=!1}get root(){return this.repository.root}get workspaceRoot(){return this.repository.workspaceRoot}get branchRoot(){return J.Uri.parse(this.repository.info.url)}get inputBox(){return this.sourceControl.inputBox}get username(){return this.repository.username}set username(e){this.repository.username=e}get password(){return this.repository.password}set password(e){this.repository.password=e}async onDidAnyFileChanged(e){await this.repository.updateInfo(),this._onDidChangeRepository.fire(e)}createRemoteChangedInterval(){let e=$.get("remoteChanges.checkFrequency",300);e&&(this.remoteChangedUpdateInterval=(0,Sn.setInterval)(()=>{this.updateRemoteChangedFiles()},1e3*e))}async actionForDeletedFiles(){if(!this.deletedUris.length)return;let e=this.deletedUris;this.deletedUris=[];let t=$.get("delete.actionForDeletedFiles","prompt");if(t==="none")return;let i=e.map(a=>this.getResourceFromFile(a)).filter(a=>a&&a.type==="missing").map(a=>a.resourceUri);if(!i.length)return;let o=$.get("delete.ignoredRulesForDeletedFiles",[]).map(a=>Af(a));if(o.length&&(i=i.filter(a=>{let c=this.repository.removeAbsolutePath(a.fsPath);return!o.some(u=>u.match(c)||u.match(a.fsPath))})),!!i.length){if(t==="remove")return this.removeFiles(i.map(a=>a.fsPath),!1);if(t==="prompt")return J.commands.executeCommand("svn.promptRemove",...i)}}async updateRemoteChangedFiles(){var t;$.get("remoteChanges.checkFrequency",300)?this.run("StatusRemote"):((t=this.remoteChanges)==null||t.dispose(),this.remoteChanges=void 0)}onFSChange(e){$.get("autorefresh")&&this.operations.isIdle()&&this.eventuallyUpdateWhenIdleAndWait()}eventuallyUpdateWhenIdleAndWait(){this.updateWhenIdleAndWait()}async updateWhenIdleAndWait(){await this.whenIdleAndFocused(),await this.status(),await Js(5e3)}async whenIdleAndFocused(){for(;;){if(!this.operations.isIdle()){await Yt(this.onDidRunOperation);continue}if(!J.window.state.focused){let e=me(J.window.onDidChangeWindowState,t=>t.focused);await Yt(e);continue}return}}async updateModelState(e=!1){var S,v;let t=[],r=[],i=[],s=new Map,o=[];this.statusExternal=[],this.statusIgnored=[],this.isIncomplete=!1,this.needCleanUp=!1;let a=$.get("sourceControl.combineExternalIfSameServer",!1),c=await this.retryRun(async()=>this.repository.getStatus({includeIgnored:!0,includeExternals:a,checkRemoteChanges:e}))??[],x=J.workspace.getConfiguration("files",J.Uri.file(this.root)).get("exclude"),m=[];for(let l in x)if(x.hasOwnProperty(l)){let f=!x[l];m.push((f?"!":"")+l)}if(this.statusExternal=c.filter(l=>l.status==="external"),a&&this.statusExternal.length){let l=await this.repository.getRepositoryUuid();this.statusExternal=this.statusExternal.filter(f=>l!==f.repositoryUuid)}let g=c.filter(l=>l.status==="external"?!1:!this.statusExternal.some(f=>Pe(f.path,l.path))),p=$.get("sourceControl.hideUnversioned"),y=$.get("sourceControl.ignore");for(let l of g){if(l.path==="."&&(this.isIncomplete=l.status==="incomplete",this.needCleanUp=l.wcStatus.locked),l.wcStatus.switched&&(this.isIncomplete=!0),l.wcStatus.locked||l.wcStatus.switched||l.status==="incomplete"||tr(l.path,m,{dot:!0}))continue;let f=J.Uri.file(Lr.join(this.workspaceRoot,l.path)),E=l.rename?J.Uri.file(Lr.join(this.workspaceRoot,l.rename)):void 0;l.reposStatus&&o.push(new re(f,l.reposStatus.item,void 0,l.reposStatus.props,!0));let N=new re(f,l.status,E,l.props);if(!((l.status==="normal"||l.status==="none")&&(l.props==="normal"||l.props==="none")&&!l.changelist))if(l.status==="ignored")this.statusIgnored.push(l);else if(l.status==="conflicted")i.push(N);else if(l.status==="unversioned"){if(p)continue;let d=l.path.match(/(.+?)\.(mine|working|merge-\w+\.r\d+|r\d+)$/);if(d&&d[1]&&c.some(D=>D.path===d[1])||y.length>0&&tr(Lr.sep+l.path,y,{dot:!0,matchBase:!0}))continue;r.push(N)}else if(l.changelist){let d=s.get(l.changelist);d||(d=[]),d.push(N),s.set(l.changelist,d)}else t.push(N)}this.changes.resourceStates=t,this.conflicts.resourceStates=i;let b=this.changelists.size;this.changelists.forEach((l,f)=>{l.resourceStates=[]});let R=[this.changes,this.conflicts],P=$.get("sourceControl.ignoreOnStatusCount");if(s.forEach((l,f)=>{let E=this.changelists.get(f);E||(E=this.sourceControl.createResourceGroup(`changelist-${f}`,`Changelist "${f}"`),E.hideWhenEmpty=!0,this.disposables.push(E),this.changelists.set(f,E)),E.resourceStates=l,P.includes(f)||R.push(E)}),b!==this.changelists.size&&(this.unversioned.dispose(),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.unversioned.hideWhenEmpty=!0),this.unversioned.resourceStates=r,$.get("sourceControl.countUnversioned",!1)&&R.push(this.unversioned),this.sourceControl.count=R.reduce((l,f)=>l+f.resourceStates.length,0),!this.remoteChanges||b!==this.changelists.size){let l=((S=this.remoteChanges)==null?void 0:S.resourceStates)??[];(v=this.remoteChanges)==null||v.dispose(),this.remoteChanges=this.sourceControl.createResourceGroup("remotechanges","Remote Changes"),this.remoteChanges.repository=this,this.remoteChanges.hideWhenEmpty=!0,this.remoteChanges.resourceStates=l}return e&&(this.remoteChanges.resourceStates=o,o.length!==this.remoteChangedFiles&&(this.remoteChangedFiles=o.length,this._onDidChangeRemoteChangedFiles.fire())),this._onDidChangeStatus.fire(),this.currentBranch=await this.getCurrentBranch(),Promise.resolve()}getResourceFromFile(e){typeof e=="string"&&(e=J.Uri.file(e));let t=[this.changes,this.conflicts,this.unversioned,...this.changelists.values()],r=e.toString();for(let i of t)for(let s of i.resourceStates)if(r===s.resourceUri.toString()&&s instanceof re)return s}provideOriginalResource(e){if(e.scheme==="file"&&!Pe(Lr.join(this.root,vt()),e.fsPath))return Qe(e,"SHOW",{},!0)}async getBranches(){try{return await this.repository.getBranches()}catch{return[]}}async status(){return this.run("Status")}async show(e,t){return this.run("Show",()=>this.repository.show(e,t))}async showBuffer(e,t){return this.run("Show",()=>this.repository.showBuffer(e,t))}async addFiles(e){return this.run("Add",()=>this.repository.addFiles(e))}async addChangelist(e,t){return this.run("AddChangelist",()=>this.repository.addChangelist(e,t))}async removeChangelist(e){return this.run("RemoveChangelist",()=>this.repository.removeChangelist(e))}async getCurrentBranch(){return this.run("CurrentBranch",async()=>this.repository.getCurrentBranch())}async newBranch(e,t="Created new branch"){return this.run("NewBranch",async()=>{await this.repository.newBranch(e,t),this.updateRemoteChangedFiles()})}async switchBranch(e,t=!1){await this.run("SwitchBranch",async()=>{await this.repository.switchBranch(e,t),this.updateRemoteChangedFiles()})}async merge(e,t=!1,r="postpone"){await this.run("Merge",async()=>{await this.repository.merge(e,t,r),this.updateRemoteChangedFiles()})}async updateRevision(e=!1){return this.run("Update",async()=>{let t=await this.repository.update(e);return this.updateRemoteChangedFiles(),t})}async pullIncomingChange(e){return this.run("Update",async()=>{let t=await this.repository.pullIncomingChange(e);return this.updateRemoteChangedFiles(),t})}async resolve(e,t){return this.run("Resolve",()=>this.repository.resolve(e,t))}async commitFiles(e,t){return this.run("Commit",()=>this.repository.commitFiles(e,t))}async revert(e,t){return this.run("Revert",()=>this.repository.revert(e,t))}async info(e){return this.run("Info",()=>this.repository.getInfo(e))}async patch(e){return this.run("Patch",()=>this.repository.patch(e))}async patchBuffer(e){return this.run("Patch",()=>this.repository.patchBuffer(e))}async patchChangelist(e){return this.run("Patch",()=>this.repository.patchChangelist(e))}async removeFiles(e,t){return this.run("Remove",()=>this.repository.removeFiles(e,t))}async plainLog(){return this.run("Log",()=>this.repository.plainLog())}async plainLogBuffer(){return this.run("Log",()=>this.repository.plainLogBuffer())}async plainLogByRevision(e){return this.run("Log",()=>this.repository.plainLogByRevision(e))}async plainLogByRevisionBuffer(e){return this.run("Log",()=>this.repository.plainLogByRevisionBuffer(e))}async plainLogByText(e){return this.run("Log",()=>this.repository.plainLogByText(e))}async plainLogByTextBuffer(e){return this.run("Log",()=>this.repository.plainLogByTextBuffer(e))}async log(e,t,r,i){return this.run("Log",()=>this.repository.log(e,t,r,i))}async logByUser(e){return this.run("Log",()=>this.repository.logByUser(e))}async cleanup(){return this.run("CleanUp",()=>this.repository.cleanup())}async removeUnversioned(){return this.run("CleanUp",()=>this.repository.removeUnversioned())}async getInfo(e,t){return this.run("Info",()=>this.repository.getInfo(e,t,!0))}async getChanges(){return this.run("Changes",()=>this.repository.getChanges())}async finishCheckout(){return this.run("SwitchBranch",()=>this.repository.finishCheckout())}async addToIgnore(e,t,r=!1){return this.run("Ignore",()=>this.repository.addToIgnore(e,t,r))}async rename(e,t){return this.run("Rename",()=>this.repository.rename(e,t))}async list(e){return this.run("List",()=>this.repository.ls(e))}getPathNormalizer(){return new Vt(this.repository.info)}getCredentialServiceName(){var r;let e="vscode.positron-svn",t=this.repository.info;return(r=t.repository)!=null&&r.root?e+=":"+t.repository.root:t.url&&(e+=":"+t.url),e}async loadStoredAuths(){this.lastPromptAuth&&await this.lastPromptAuth;let e=await this.secrets.get(this.getCredentialServiceName());return e===void 0?[]:JSON.parse(e)}async saveAuth(){if(this.canSaveAuth&&this.username&&this.password){let e=await this.secrets.get(this.getCredentialServiceName()),t=[];typeof e=="string"&&(t=JSON.parse(e)),t.push({account:this.username,password:this.password}),await this.secrets.store(this.getCredentialServiceName(),JSON.stringify(t)),this.canSaveAuth=!1}}async promptAuth(){if(this.lastPromptAuth)return this.lastPromptAuth;this.lastPromptAuth=J.commands.executeCommand("svn.promptAuth");let e=await this.lastPromptAuth;return e&&(this.username=e.username,this.password=e.password,this.canSaveAuth=!0),this.lastPromptAuth=void 0,e}onDidSaveTextDocument(e){let t=e.uri.toString(),r=this.conflicts.resourceStates.find(s=>s.resourceUri.toString()===t);if(!r)return;let i=e.getText();/^<{7}[^]+^={7}[^]+^>{7}/m.test(i)||J.commands.executeCommand("svn.resolved",r.resourceUri)}async run(e,t=()=>Promise.resolve(null)){if(this.state!==0)throw new Error("Repository not initialized");let r=async()=>{this._operations.start(e),this._onRunOperation.fire(e);try{let i=await this.retryRun(t),s=e==="StatusRemote";return An(e)||await this.updateModelState(s),i}catch(i){throw i.svnErrorCode===Ve.NotASvnRepository&&(this.state=1),await le(this.workspaceRoot)||await J.commands.executeCommand("svn.close",this),i}finally{this._operations.end(e),this._onDidRunOperation.fire(e)}};return qg(e)?J.window.withProgress({location:J.ProgressLocation.SourceControl},r):r()}async retryRun(e=()=>Promise.resolve(null)){let t=0,r=[];for(;;)try{t++;let i=await e();return this.saveAuth(),i}catch(i){let s=i;if(s.svnErrorCode===Ve.RepositoryIsLocked&&t<=10)await Js(Math.pow(t,2)*50);else if(s.svnErrorCode===Ve.AuthorizationFailed&&t<=1+r.length){t===1&&(r=await this.loadStoredAuths());let o=r.length-1;typeof r[o]<"u"&&(this.username=r[o].account,this.password=r[o].password)}else if(s.svnErrorCode===Ve.AuthorizationFailed&&t<=3+r.length){if(!await this.promptAuth())throw i}else throw i}}dispose(){this.disposables=Ie(this.disposables)}};H([ge],Re.prototype,"onDidChangeOperations",1),H([Ne(1e3)],Re.prototype,"onDidAnyFileChanged",1),H([Ne(1e3)],Re.prototype,"actionForDeletedFiles",1),H([Ne(1e3)],Re.prototype,"updateRemoteChangedFiles",1),H([Ne(1e3)],Re.prototype,"eventuallyUpdateWhenIdleAndWait",1),H([ur],Re.prototype,"updateWhenIdleAndWait",1),H([ur,lc("updateModelState")],Re.prototype,"updateModelState",1),H([ur],Re.prototype,"status",1);function jg(n){let e;switch(n){case"A":e="status-added";break;case"D":e="status-deleted";break;case"M":e="status-modified";break;case"R":e="status-renamed";break}if(e!==void 0)return Is(e)}var Ms=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new G.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.logCache=new Map;this._dispose=[];this.refresh(),this._dispose.push(G.window.registerTreeDataProvider("repolog",this),G.commands.registerCommand("svn.repolog.copymsg",async t=>Or("msg",t)),G.commands.registerCommand("svn.repolog.copyrevision",async t=>Or("revision",t)),G.commands.registerCommand("svn.repolog.addrepolike",this.addRepolikeGui,this),G.commands.registerCommand("svn.repolog.remove",this.removeRepo,this),G.commands.registerCommand("svn.repolog.openFileRemote",this.openFileRemoteCmd,this),G.commands.registerCommand("svn.repolog.openDiff",this.openDiffCmd,this),G.commands.registerCommand("svn.repolog.openFileLocal",this.openFileLocal,this),G.commands.registerCommand("svn.repolog.refresh",this.refresh,this),this.sourceControlManager.onDidChangeRepository(async t=>this.refresh()))}getCached(e){let t=Ye(e);return t.data instanceof yn?Ye(this.logCache.get(t.data.toString())):this.getCached(t.parent)}dispose(){Ie(this._dispose)}removeRepo(e){this.logCache.delete(e.data.toString()),this.refresh()}async addRepolike(e,t){let r={entries:[],isComplete:!1,svnTarget:{},repo:{},persisted:{commitFrom:t,userAdded:!0},order:this.logCache.size};if(this.logCache.has(e)){G.window.showWarningMessage("This path is already added");return}let i=this.sourceControlManager.getRepository(e);if(i===null)try{let o;if(e.startsWith("^")){let c=this.sourceControlManager.getRepository(Ye(G.workspace.workspaceFolders)[0].uri);if(!c)throw new Error("No repository in workspace root");let u=await c.getInfo(e);o=G.Uri.parse(u.url)}else o=G.Uri.parse(e);if(t!=="HEAD"&&isNaN(parseInt(t,10)))throw new Error("erroneous revision");let a=await this.sourceControlManager.getRemoteRepository(o);r.repo=a,r.svnTarget=o}catch(o){G.window.showWarningMessage("Failed to add repo: "+(o instanceof Error?o.message:""));return}else try{let o=await i.getInfo(e,t);r.repo=i,r.svnTarget=G.Uri.parse(o.url),r.persisted.baseRevision=parseInt(o.revision,10)}catch{G.window.showErrorMessage("Failed to resolve svn path");return}let s=r.svnTarget.toString(!0);if(this.logCache.has(s)){G.window.showWarningMessage("Repository with this name already exists");return}this.logCache.set(s,r),this._onDidChangeTreeData.fire(void 0)}addRepolikeGui(){let e=G.window.createInputBox();e.prompt="Enter SVN URL or local path",e.onDidAccept(async()=>{let t=e.value;if(!Gt.isAbsolute(t)&&G.workspace.workspaceFolders&&!t.startsWith("^")&&!/^[a-z]+?:\/\//.test(t))for(let i of G.workspace.workspaceFolders){let s=Gt.join(i.uri.fsPath,t);if(await le(s)){t=s;break}}e.dispose();let r=G.window.createInputBox();r.prompt="Enter starting revision (optional)",r.onDidAccept(async()=>{let i=r.value;return r.dispose(),this.addRepolike(t,i||"HEAD")},void 0),r.show()}),e.show()}async openFileRemoteCmd(e){let t=e.data,r=this.getCached(e),i=r.repo.getPathNormalizer().parse(t._);if(await Wa(i,!1)===!1)return;let s=e.parent.data;return Ar(r.repo,i.remoteFullPath,s.revision)}openFileLocal(e){let t=e.data,i=this.getCached(e).repo.getPathNormalizer().parse(t._);Wa(i,!0)&&G.commands.executeCommand("vscode.open",Ye(i.localFullPath))}async openDiffCmd(e){let t=e.data,r=this.getCached(e),i=e.parent.data,s=r.repo.getPathNormalizer().parse(t._).remoteFullPath,o,a=await r.repo.log(i.revision,"1",2,s);if(a.length===2)o=a[1];else{G.window.showWarningMessage("Cannot find previous commit");return}return nr(r.repo,s,o.revision,i.revision)}async refresh(e,t){if(e===void 0){for(let[r,i]of this.logCache)i.persisted.userAdded||this.logCache.delete(r);for(let r of this.sourceControlManager.repositories){let i=r.branchRoot,s=i.toString(!0),o={commitFrom:"HEAD",baseRevision:parseInt(r.repository.info.revision,10)},a=this.logCache.get(s);a&&(o=a.persisted),this.logCache.set(s,{entries:[],isComplete:!1,repo:r,svnTarget:i,persisted:o,order:this.logCache.size})}}else if(e.kind===1){let r=this.getCached(e);t?await _r(r):(r.entries=[],r.isComplete=!1)}this._onDidChangeTreeData.fire(e)}async getTreeItem(e){let t;if(e.kind===1){let r=e.data,i=this.getCached(e);t=new G.TreeItem(r.toString(),G.TreeItemCollapsibleState.Collapsed),i.persisted.userAdded?(t.label="\u2218 "+t.label,t.contextValue="userrepo"):t.contextValue="repo",i.repo instanceof Re?t.iconPath=new G.ThemeIcon("folder-opened"):t.iconPath=new G.ThemeIcon("repo");let s=i.persisted.commitFrom||"HEAD";t.tooltip=`${r} since ${s}`}else if(e.kind===2){let r=e.data;t=new G.TreeItem(Ts(r),G.TreeItemCollapsibleState.Collapsed),t.description=Rs(r),t.tooltip=Ps(r),t.iconPath=Ds(r.author),t.contextValue="commit"}else if(e.kind===3){let r=e.data,i=Gt.basename(r._);t=new G.TreeItem(i,G.TreeItemCollapsibleState.None),t.description=Gt.dirname(r._);let o=this.getCached(e).repo.getPathNormalizer();t.tooltip=o.parse(r._).relativeFromBranch,t.iconPath=jg(r.action),t.contextValue="diffable",t.command={command:"svn.repolog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Unknown tree elem");return t}async getChildren(e){if(e===void 0)return Nr(Array.from(this.logCache.entries()).sort(([t,r],[i,s])=>r.persisted.userAdded!==s.persisted.userAdded?r.persisted.userAdded?1:-1:r.order-s.order).map(([t,r])=>new yn(t)),1);if(e.kind===1){let t=wn(),r=this.getCached(e),i=r.entries;i.length===0&&await _r(r);let s=Nr(i,2,e);if(Ss(r,i,s),!r.isComplete){let o=new G.TreeItem(`Load another ${t} revisions`);o.tooltip="Paging size may be adjusted using log.length setting",o.command={command:"svn.repolog.refresh",arguments:[e,!0],title:"refresh element"},o.iconPath=new G.ThemeIcon("unfold"),s.push({kind:4,data:o})}return s}else if(e.kind===2){let t=e.data;return Nr(t.paths,3,e)}return[]}};var ir=W(require("path")),pe=require("vscode");var vp=require("vscode");var Fs=class n{constructor(e){this.repo=e;this.info=e.info}static async open(e,t){let r=await e.open(t.toString(!0),"");return new n(r)}getPathNormalizer(){return new Vt(this.info)}get branchRoot(){return vp.Uri.parse(this.info.url)}async log(e,t,r,i){return this.repo.log(e,t,r,i)}async show(e,t){return this.repo.show(e,t)}};var Dn=class{constructor(e,t,r){this._svn=e;this.extensionContact=r;this._onDidOpenRepository=new pe.EventEmitter;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new pe.EventEmitter;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidChangeRepository=new pe.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeStatusRepository=new pe.EventEmitter;this.onDidChangeStatusRepository=this._onDidChangeStatusRepository.event;this.openRepositories=[];this.disposables=[];this.enabled=!1;this.possibleSvnRepositoryPaths=new Set;this.ignoreList=[];this.maxDepth=0;this._onDidChangeState=new pe.EventEmitter;this.onDidchangeState=this._onDidChangeState.event;this._state="uninitialized";if(t!==0)throw new Error("Unsopported policy");return this.enabled=$.get("enabled")===!0,this.configurationChangeDisposable=pe.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this),(async()=>(this.enabled&&await this.enable(),this))()}get state(){return this._state}setState(e){this._state=e,this._onDidChangeState.fire(e)}get isInitialized(){return this._state==="initialized"?Promise.resolve():Yt(me(this.onDidchangeState,e=>e==="initialized"))}get repositories(){return this.openRepositories.map(e=>e.repository)}get svn(){return this._svn}openRepositoriesSorted(){return this.openRepositories.sort((e,t)=>t.repository.workspaceRoot.length-e.repository.workspaceRoot.length)}onDidChangeConfiguration(){let e=$.get("enabled")===!0;this.maxDepth=$.get("multipleFolders.depth",0),e!==this.enabled&&(this.enabled=e,e?this.enable():this.disable())}async enable(){$.get("multipleFolders.enabled",!1)&&(this.maxDepth=$.get("multipleFolders.depth",0),this.ignoreList=$.get("multipleFolders.ignore",[])),pe.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,this.disposables);let t=pe.workspace.createFileSystemWatcher("**");this.disposables.push(t);let r=ot(t.onDidChange,t.onDidCreate,t.onDidDelete);me(r,s=>s.scheme==="file"&&!this.getRepository(s))(this.onPossibleSvnRepositoryChange,this,this.disposables),this.setState("initialized"),await this.scanWorkspaceFolders()}onPossibleSvnRepositoryChange(e){let t=e.fsPath.replace(/\.svn.*$/,"");this.eventuallyScanPossibleSvnRepository(t)}eventuallyScanPossibleSvnRepository(e){this.possibleSvnRepositoryPaths.add(e),this.eventuallyScanPossibleSvnRepositories()}eventuallyScanPossibleSvnRepositories(){for(let e of this.possibleSvnRepositoryPaths)this.tryOpenRepository(e,1);this.possibleSvnRepositoryPaths.clear()}scanExternals(e){$.get("detectExternals")===!0&&e.statusExternal.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}scanIgnored(e){$.get("detectIgnored")===!0&&e.statusIgnored.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}disable(){this.repositories.forEach(e=>e.dispose()),this.openRepositories=[],this.possibleSvnRepositoryPaths.clear(),this.disposables=Ie(this.disposables)}async onDidChangeWorkspaceFolders({added:e,removed:t}){let r=e.filter(s=>!this.getOpenRepository(s.uri)),i=t.map(s=>this.getOpenRepository(s.uri.fsPath)).filter(s=>!!s).filter(s=>!(pe.workspace.workspaceFolders||[]).some(o=>s.repository.workspaceRoot.startsWith(o.uri.fsPath)));r.forEach(s=>this.tryOpenRepository(s.uri.fsPath)),i.forEach(s=>s.repository.dispose())}async scanWorkspaceFolders(){for(let e of pe.workspace.workspaceFolders||[]){let t=e.uri.fsPath;await this.tryOpenRepository(t)}}async tryOpenRepository(e,t=0){if(this.getRepository(e))return;if(await to(e,t===0)){let s=pe.workspace.getConfiguration("svn",pe.Uri.file(e));if(new Set((s.get("ignoreRepositories")||[]).map(a=>at(a))).has(at(e)))return;try{let a=await this.svn.getRepositoryRoot(e),c=new Re(await this.svn.open(a,e),this.extensionContact.secrets);this.open(c)}catch(a){if(a instanceof Tt&&a.svnErrorCode===Ve.WorkingCopyIsTooOld){await pe.commands.executeCommand("svn.upgrade",e);return}console.error(a)}return}let i=t+1;if(i<=this.maxDepth){let s=[];try{s=await zt(e)}catch{return}for(let o of s){let a=e+"/"+o,c;try{c=await wt(a)}catch{continue}c.isDirectory()&&!tr(a,this.ignoreList,{dot:!0})&&await this.tryOpenRepository(a,i)}}}async getRemoteRepository(e){return Fs.open(this.svn,e)}getRepository(e){let t=this.getOpenRepository(e);return t&&t.repository?t.repository:null}getOpenRepository(e){if(e){if(e instanceof Re)return this.openRepositories.find(t=>t.repository===e);if(e.repository instanceof Re)return this.openRepositories.find(t=>t.repository===e.repository);if(typeof e=="string"&&(e=pe.Uri.file(e)),e instanceof pe.Uri)return this.openRepositoriesSorted().find(t=>{if(!Pe(t.repository.workspaceRoot,e.fsPath))return!1;for(let r of t.repository.statusExternal){let i=ir.join(t.repository.workspaceRoot,r.path);if(Pe(i,e.fsPath))return!1}for(let r of t.repository.statusIgnored){let i=ir.join(t.repository.workspaceRoot,r.path);if(Pe(i,e.fsPath))return!1}return!0});for(let t of this.openRepositories){let r=t.repository;if(e===r.sourceControl||e===r.changes)return t}}}async getRepositoryFromUri(e){for(let t of this.openRepositoriesSorted()){let r=t.repository;if(Pe(r.workspaceRoot,e.fsPath))try{let i=at(e.fsPath);return await r.info(i),r}catch{}}return null}open(e){let r=me(e.onDidChangeState,u=>u===1)(()=>a()),i=e.onDidChangeRepository(u=>this._onDidChangeRepository.fire({repository:e,uri:u})),s=e.onDidChangeStatus(()=>{this._onDidChangeStatusRepository.fire(e)}),o=e.onDidChangeStatus(()=>{this.scanExternals(e),this.scanIgnored(e)});this.scanExternals(e),this.scanIgnored(e);let a=()=>{r.dispose(),i.dispose(),s.dispose(),o.dispose(),e.dispose(),this.openRepositories=this.openRepositories.filter(u=>u!==c),this._onDidCloseRepository.fire(e)},c={repository:e,dispose:a};this.openRepositories.push(c),this._onDidOpenRepository.fire(e)}close(e){let t=this.getOpenRepository(e);t&&t.dispose()}async pickRepository(){if(this.openRepositories.length===0)throw new Error("There are no available repositories");let e=this.repositories.map(i=>({label:ir.basename(i.root),repository:i})),r=await pe.window.showQuickPick(e,{placeHolder:"Choose a repository"});return r&&r.repository}async upgradeWorkingCopy(e){try{return(await this.svn.exec(e,["upgrade"])).exitCode===0}catch(t){console.log(t)}return!1}dispose(){this.disable(),this.configurationChangeDisposable.dispose()}};H([Ne(500)],Dn.prototype,"eventuallyScanPossibleSvnRepositories",1);var Mr=W(require("child_process")),bp=W(require("path")),ks=W(yr());var Us=class{findSvn(e){return(e?this.findSpecificSvn(e):Promise.reject(null)).then(void 0,()=>{switch(process.platform){case"darwin":return this.findSvnDarwin();case"win32":return this.findSvnWin32();default:return this.findSpecificSvn("svn")}}).then(r=>this.checkSvnVersion(r)).then(null,()=>Promise.reject(new Error("Svn installation not found.")))}findSvnWin32(){return this.findSystemSvnWin32(process.env.ProgramW6432).then(void 0,()=>this.findSystemSvnWin32(process.env["ProgramFiles(x86)"])).then(void 0,()=>this.findSystemSvnWin32(process.env.ProgramFiles)).then(void 0,()=>this.findSpecificSvn("svn"))}findSystemSvnWin32(e){return e?this.findSpecificSvn(bp.join(e,"TortoiseSVN","bin","svn.exe")):Promise.reject("Not found")}findSvnDarwin(){return new Promise((e,t)=>{Mr.exec("which svn",(r,i)=>{if(r)return t("svn not found");let s=i.toString().replace(/^\s+|\s+$/g,"");function o(a){Mr.exec("svn --version --quiet",(c,u)=>c?t("svn not found"):e({path:a,version:u.trim()}))}if(s!=="/usr/bin/svn")return o(s);Mr.exec("xcode-select -p",a=>{if(a&&a.code===2)return t("svn not found");o(s)})})})}findSpecificSvn(e){return new Promise((t,r)=>{let i=[],s=Mr.spawn(e,["--version","--quiet"]);s.stdout.on("data",o=>i.push(o)),s.on("error",jf(r)),s.on("close",o=>o?r(new Error("Not found")):t({path:e,version:Buffer.concat(i).toString("utf8").trim()}))})}checkSvnVersion(e){return new Promise((t,r)=>{let i=e.version.replace(/^(\d+\.\d+\.\d+).*/,"$1");ks.valid(i)?ks.gte(i,"1.6.0")?t(e):r(new Error("Required svn version must be >= 1.6")):r(new Error("Invalid svn version"))})}};var Fr=require("vscode");var Ep=W(require("path")),qs=require("vscode");var Bs=require("vscode");var $s=require("vscode"),Rn=class{getTreeItem(){return new $s.TreeItem("No Incoming Changes",$s.TreeItemCollapsibleState.None)}async getChildren(){return[]}};var Tn=class{constructor(e){this.repository=e}getTreeItem(){let e=new Bs.TreeItem("Incoming Changes",Bs.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("download","dark"),light:Et("download","light")},e}async getChildren(){if(!this.repository.remoteChanges)return[];let e=this.repository.remoteChanges.resourceStates.map(t=>new qe(t.resourceUri,t.type,this.repository));return e.length===0?[new Rn]:e}};var Pn=class{constructor(e,t){this.repository=e;this.svnProvider=t;e.onDidChangeStatus(()=>{this.svnProvider.update(this)})}get label(){return Ep.basename(this.repository.workspaceRoot)}getTreeItem(){let e=new qs.TreeItem(this.label,qs.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("repo","dark"),light:Et("repo","light")},e}async getChildren(){return[new Tn(this.repository)]}};var Nn=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new Fr.EventEmitter;this._dispose=[];this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(Fr.window.registerTreeDataProvider("svn",this),Fr.commands.registerCommand("svn.treeview.refreshProvider",()=>this.refresh()))}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e.getTreeItem()}async getChildren(e){return!this.sourceControlManager||this.sourceControlManager.openRepositories.length===0?Promise.resolve([]):e?e.getChildren():this.sourceControlManager.openRepositories.map(r=>new Pn(r.repository,this))}update(e){this._onDidChangeTreeData.fire(e)}dispose(){Ie(this._dispose)}};var sr=require("vscode");var js=class{constructor(e){this.model=e;this._dispose=[];this._onDidChangeTreeData=new sr.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(sr.window.registerTreeDataProvider("branchchanges",this),sr.commands.registerCommand("svn.branchchanges.openDiff",this.openDiffCmd,this),sr.commands.registerCommand("svn.branchchanges.refresh",()=>this._onDidChangeTreeData.fire(void 0),this),this.model.onDidChangeRepository(()=>this._onDidChangeTreeData.fire(void 0)))}dispose(){Ie(this._dispose)}getTreeItem(e){let t="";e.item==="added"?t="status-added":e.item==="deleted"?t="status-deleted":e.item==="modified"&&(t="status-modified");let r=Is(t);return{label:e.localPath.fsPath,command:{command:"svn.branchchanges.openDiff",title:"Open diff",arguments:[e]},iconPath:r,tooltip:`${e.oldPath.fsPath.replace(e.repo.fsPath,"")}@r${e.oldRevision} \u2192 ${e.newPath.fsPath.replace(e.repo.fsPath,"")}@r${e.newRevision}`}}getChildren(e){if(e!==void 0)return Promise.resolve([]);let t=[];for(let r of this.model.repositories)t.push(r.getChanges());return Promise.all(t).then(r=>r.reduce((i,s)=>i.concat(s),[]))}async openDiffCmd(e){let t=await this.model.getRemoteRepository(e.repo);if(e.item==="modified")return nr(t,e.oldPath,e.oldRevision,e.newRevision,e.newPath);if(e.item==="added")return Ar(t,e.newPath,e.newRevision)}};var Cp=W(yr());var Xs=class{constructor(e){let t=Cp.satisfies(e,">= 1.9");Ot("isSvn19orGreater",t)}dispose(){}};var Ip=W(yr());var Ws=class{constructor(e){let t=Ip.satisfies(e,">= 1.8");Ot("isSvn18orGreater",t)}dispose(){}};var Ae=require("vscode");var Xg=1e3*60*3,Wg=1e3*60*5,Ur=class{constructor(e){this.sourceControlManager=e;this.disposables=[];this.cache=new Map;this._onDidChangeFile=new Ae.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event;this.changedRepositoryRoots=new Set;this.disposables.push(e.onDidChangeRepository(this.onDidChangeRepository,this),Ae.workspace.registerFileSystemProvider("svn",this,{isReadonly:!0,isCaseSensitive:!0})),setInterval(()=>this.cleanup(),Wg)}onDidChangeRepository({repository:e}){this.changedRepositoryRoots.add(e.root),this.eventuallyFireChangeEvents()}eventuallyFireChangeEvents(){this.fireChangeEvents()}async fireChangeEvents(){if(!Ae.window.state.focused){let t=me(Ae.window.onDidChangeWindowState,r=>r.focused);await Yt(t)}let e=[];for(let{uri:t}of this.cache.values()){let r=t.fsPath;for(let i of this.changedRepositoryRoots)if(Pe(i,r)){e.push({type:Ae.FileChangeType.Changed,uri:t});break}}e.length>0&&this._onDidChangeFile.fire(e),this.changedRepositoryRoots.clear()}watch(){return cc}async stat(e){await this.sourceControlManager.isInitialized;let{fsPath:t}=At(e),r=this.sourceControlManager.getRepository(t);if(!r)throw Ae.FileSystemError.FileNotFound;let i=0,s=new Date().getTime();try{let o=await r.list(t);o.length&&(i=Number(o[0].size),s=Date.parse(o[0].commit.date))}catch(o){console.error("Failed to list SVN file:",o)}return{type:Ae.FileType.File,size:i,mtime:s,ctime:0}}readDirectory(){throw new Error("readDirectory is not implemented")}createDirectory(){throw new Error("createDirectory is not implemented")}async readFile(e){await this.sourceControlManager.isInitialized;let{fsPath:t,extra:r,action:i}=At(e),s=this.sourceControlManager.getRepository(t);if(!s)throw Ae.FileSystemError.FileNotFound();let o=e.toString(),a=new Date().getTime(),c={uri:e,timestamp:a};this.cache.set(o,c);try{if(i==="SHOW")return await s.showBuffer(t,r.ref);if(i==="LOG")return await s.plainLogBuffer();if(i==="LOG_REVISION"&&r.revision)return await s.plainLogByRevisionBuffer(r.revision);if(i==="LOG_SEARCH"&&r.search)return await s.plainLogByTextBuffer(r.search);if(i==="PATCH")return console.log("here"),await s.patchBuffer([t])}catch(u){console.error("Failed to read SVN file:",u)}return new Uint8Array(0)}writeFile(){throw new Error("writeFile is not implemented")}delete(){throw new Error("delete is not implemented")}rename(){throw new Error("rename is not implemented")}cleanup(){let e=new Date().getTime(),t=new Map;for(let r of this.cache.values()){let{fsPath:i}=At(r.uri);(Ae.workspace.textDocuments.filter(o=>o.uri.scheme==="file").some(o=>ac(o.uri.fsPath,i))||e-r.timestamp<Xg)&&t.set(r.uri.toString(),r)}this.cache=t}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(1100)],Ur.prototype,"eventuallyFireChangeEvents",1),H([ur],Ur.prototype,"fireChangeEvents",1);async function Vg(n,e,t){console.log("SVN Extension: init() started");let r=$.get("path"),i=new Us;console.log("SVN Extension: Finding SVN executable...");let s=await i.findSvn(r);console.log(`SVN Extension: Found SVN ${s.version} at ${s.path}`);let o=new Ti({svnPath:s.path,version:s.version}),a=await new Dn(o,0,n);console.log("SVN Extension: Registering commands..."),cp(a,t),console.log("SVN Extension: Creating providers..."),t.push(a,jt,new Ur(a),new Nn(a),new Ms(a),new Ns(a),new js(a),new dn(a),new mn(a),new Ws(s.version),new Xs(s.version)),e.appendLine(`Using svn "${s.version}" from "${s.path}"`),console.log("SVN Extension: Providers created successfully");let c=u=>e.append(u);o.onOutput.addListener("log",c),t.push(Be(()=>o.onOutput.removeListener("log",c))),t.push(Be(Vf)),console.log("SVN Extension: init() complete")}async function Gg(n,e){let t=ze.window.createOutputChannel("Svn");ze.commands.registerCommand("svn.showOutput",()=>t.show()),e.push(t),$.get("showOutput")&&t.show();let i=async()=>{try{await Vg(n,t,e)}catch(s){let o=s;if(!/Svn installation not found/.test(o.message||""))throw s;if($.get("ignoreMissingSvnWarning")===!0)return;console.warn(o.message),t.appendLine(o.message),t.show();let c="Find SVN executable",u="Download SVN",x="Don't Show Again",m=await ze.window.showWarningMessage("SVN not found. Install it or configure it using the 'svn.path' setting.",c,u,x);if(m===c){let g;Sp.sep==="\\"&&(g={svn:["exe","bat"]});let p=await ze.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:g});if(p&&p[0]){let y=p[0].fsPath;t.appendLine(`Updated "svn.path" with "${y}"`),await $.update("path",y),await i()}}else m===u?ze.commands.executeCommand("vscode.open",ze.Uri.parse("https://subversion.apache.org/packages.html")):m===x&&await $.update("ignoreMissingSvnWarning",!0)}};await i()}async function zg(n){console.log("SVN Extension: activate() called");let e=[];n.subscriptions.push(new ze.Disposable(()=>ze.Disposable.from(...e).dispose())),await Gg(n,e).catch(t=>{console.error("SVN Extension: Activation failed",t),ze.window.showErrorMessage(`SVN Extension activation failed: ${t.message||t}`)}),console.log("SVN Extension: activation complete")}function Hg(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/
//# sourceMappingURL=extension.js.map
