"use strict";var Op=Object.create;var Fr=Object.defineProperty;var Ha=Object.getOwnPropertyDescriptor;var Np=Object.getOwnPropertyNames;var _p=Object.getPrototypeOf,Ap=Object.prototype.hasOwnProperty;var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Ya=(n,e)=>{for(var t in e)Fr(n,t,{get:e[t],enumerable:!0})},Pn=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Np(e))!Ap.call(n,i)&&i!==t&&Fr(n,i,{get:()=>e[i],enumerable:!(r=Ha(e,i))||r.enumerable});return n},Ho=(n,e,t)=>(Pn(n,e,"default"),t&&Pn(t,e,"default")),W=(n,e,t)=>(t=n!=null?Op(_p(n)):{},Pn(e||!n||!n.__esModule?Fr(t,"default",{value:n,enumerable:!0}):t,n)),Lp=n=>Pn(Fr({},"__esModule",{value:!0}),n),H=(n,e,t,r)=>{for(var i=r>1?void 0:r?Ha(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Fr(e,t,i),i};var yc=F((ls,us)=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});var $n;ls.default=()=>{if(typeof us=="object"&&typeof us.exports=="object")return $n=$n||require("fs"),$n;throw new Error("File system is not available")}});var Kt=F(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.default=(n,e,t)=>({confidence:t,name:e.name(n),lang:e.language?e.language():void 0})});var vc=F(Br=>{"use strict";var Hp=Br&&Br.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Br,"__esModule",{value:!0});var wc=Hp(Kt()),ps=class{name(){return"ASCII"}match(e){let t=e.rawInput;for(let r=0;r<e.rawLen;r++){let i=t[r];if(i<32||i>126)return(0,wc.default)(e,this,0)}return(0,wc.default)(e,this,100)}};Br.default=ps});var bc=F(qr=>{"use strict";var Yp=qr&&qr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qr,"__esModule",{value:!0});var Qp=Yp(Kt()),hs=class{name(){return"UTF-8"}match(e){let t=!1,r=0,i=0,o=0,s,a=e.rawInput;e.rawLen>=3&&(a[0]&255)==239&&(a[1]&255)==187&&(a[2]&255)==191&&(t=!0);for(let c=0;c<e.rawLen;c++){let u=a[c];if(u&128){if((u&224)==192)o=1;else if((u&240)==224)o=2;else if((u&248)==240)o=3;else{if(i++,i>5)break;o=0}for(;c++,!(c>=e.rawLen);){if((a[c]&192)!=128){i++;break}if(--o==0){r++;break}}}}if(s=0,t&&i==0)s=100;else if(t&&r>i*10)s=80;else if(r>3&&i==0)s=100;else if(r>0&&i==0)s=80;else if(r==0&&i==0)s=10;else if(r>i*10)s=25;else return null;return(0,Qp.default)(e,this,s)}};qr.default=hs});var Ec=F(Qe=>{"use strict";var Kp=Qe&&Qe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.UTF_32LE=Qe.UTF_32BE=Qe.UTF_16LE=Qe.UTF_16BE=void 0;var ys=Kp(Kt()),xs=class{name(){return"UTF-16BE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==254&&(t[1]&255)==255?(0,ys.default)(e,this,100):null}};Qe.UTF_16BE=xs;var ds=class{name(){return"UTF-16LE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==255&&(t[1]&255)==254?t.length>=4&&t[2]==0&&t[3]==0?null:(0,ys.default)(e,this,100):null}};Qe.UTF_16LE=ds;var Bn=class{name(){return"UTF-32"}getChar(e,t){return-1}match(e){let t=0,r=0,i=!1,o=0,s=e.rawLen/4*4,a=e.rawInput;if(s==0)return null;this.getChar(a,0)==65279&&(i=!0);for(let c=0;c<s;c+=4){let u=this.getChar(a,c);u<0||u>=1114111||u>=55296&&u<=57343?r+=1:t+=1}return i&&r==0?o=100:i&&t>r*10?o=80:t>3&&r==0?o=100:t>0&&r==0?o=80:t>r*10&&(o=25),o==0?null:(0,ys.default)(e,this,o)}},ms=class extends Bn{name(){return"UTF-32BE"}getChar(e,t){return(e[t+0]&255)<<24|(e[t+1]&255)<<16|(e[t+2]&255)<<8|e[t+3]&255}};Qe.UTF_32BE=ms;var gs=class extends Bn{name(){return"UTF-32LE"}getChar(e,t){return(e[t+3]&255)<<24|(e[t+2]&255)<<16|(e[t+1]&255)<<8|e[t+0]&255}};Qe.UTF_32LE=gs});var Ic=F(ke=>{"use strict";var Zp=ke&&ke.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ke,"__esModule",{value:!0});ke.gb_18030=ke.euc_kr=ke.euc_jp=ke.big5=ke.sjis=void 0;var Jp=Zp(Kt());function eh(n,e){let t=(r,i,o,s)=>{if(s<o)return-1;let a=Math.floor(o+s>>>1);return i>r[a]?t(r,i,a+1,s):i<r[a]?t(r,i,o,a-1):a};return t(n,e,0,n.length-1)}var ws=class{constructor(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1}reset(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1}nextByte(e){return this.nextIndex>=e.rawLen?(this.done=!0,-1):e.rawInput[this.nextIndex++]&255}},Zt=class{constructor(){this.commonChars=[]}name(){return"mbcs"}match(e){let t=0,r=0,i=0,o=0,s=0,a=new ws;e:{for(a.reset();this.nextChar(a,e);){if(o++,a.error)i++;else{let c=a.charValue&4294967295;c>255&&(t++,this.commonChars!=null&&eh(this.commonChars,c)>=0&&r++)}if(i>=2&&i*5>=t)break e}if(t<=10&&i==0){t==0&&o<10?s=0:s=10;break e}if(t<20*i){s=0;break e}if(this.commonChars==null)s=30+t-20*i,s>100&&(s=100);else{let u=90/Math.log(t/4);s=Math.floor(Math.log(r+1)*u+10),s=Math.min(s,100)}}return s==0?null:(0,Jp.default)(e,this,s)}nextChar(e,t){return!0}},vs=class extends Zt{constructor(){super(...arguments),this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314]}name(){return"Shift_JIS"}language(){return"ja"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r>160&&r<=223)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=r<<8|i,i>=64&&i<=127||i>=128&&i<=255||(e.error=!0),!0)}};ke.sjis=vs;var bs=class extends Zt{constructor(){super(...arguments),this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271]}name(){return"Big5"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r==255)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=e.charValue<<8|i,(i<64||i==127||i==255)&&(e.error=!0),!0)}};ke.big5=bs;function Cc(n,e){n.index=n.nextIndex,n.error=!1;let t=0,r=0,i=0;e:{if(t=n.charValue=n.nextByte(e),t<0){n.done=!0;break e}if(t<=141)break e;if(r=n.nextByte(e),n.charValue=n.charValue<<8|r,t>=161&&t<=254){r<161&&(n.error=!0);break e}if(t==142){r<161&&(n.error=!0);break e}t==143&&(i=n.nextByte(e),n.charValue=n.charValue<<8|i,i<161&&(n.error=!0))}return n.done==!1}var Es=class extends Zt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=Cc}name(){return"EUC-JP"}language(){return"ja"}};ke.euc_jp=Es;var Cs=class extends Zt{constructor(){super(...arguments),this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=Cc}name(){return"EUC-KR"}language(){return"ko"}};ke.euc_kr=Cs;var Is=class extends Zt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]}name(){return"GB18030"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=0,i=0,o=0,s=0;e:{if(r=e.charValue=e.nextByte(t),r<0){e.done=!0;break e}if(r<=128)break e;if(i=e.nextByte(t),e.charValue=e.charValue<<8|i,r>=129&&r<=254){if(i>=64&&i<=126||i>=80&&i<=254)break e;if(i>=48&&i<=57&&(o=e.nextByte(t),o>=129&&o<=254&&(s=e.nextByte(t),s>=48&&s<=57))){e.charValue=e.charValue<<16|o<<8|s;break e}e.error=!0;break e}}return e.done==!1}};ke.gb_18030=Is});var Dc=F(ae=>{"use strict";var th=ae&&ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ae,"__esModule",{value:!0});ae.KOI8_R=ae.windows_1256=ae.windows_1251=ae.ISO_8859_9=ae.ISO_8859_8=ae.ISO_8859_7=ae.ISO_8859_6=ae.ISO_8859_5=ae.ISO_8859_2=ae.ISO_8859_1=void 0;var Sc=th(Kt()),rh=16777215,qn=class{constructor(e,t){this.byteIndex=0,this.ngram=0,this.ngramCount=0,this.hitCount=0,this.spaceChar=32,this.ngramList=e,this.byteMap=t}search(e,t){let r=0;return e[r+32]<=t&&(r+=32),e[r+16]<=t&&(r+=16),e[r+8]<=t&&(r+=8),e[r+4]<=t&&(r+=4),e[r+2]<=t&&(r+=2),e[r+1]<=t&&(r+=1),e[r]>t&&(r-=1),r<0||e[r]!=t?-1:r}lookup(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)}addByte(e){this.ngram=(this.ngram<<8)+(e&255)&rh,this.lookup(this.ngram)}nextByte(e){return this.byteIndex>=e.inputLen?-1:e.inputBytes[this.byteIndex++]&255}parse(e,t){let r,i=!1;for(this.spaceChar=t;(r=this.nextByte(e))>=0;){let s=this.byteMap[r];s!=0&&(s==this.spaceChar&&i||this.addByte(s),i=s==this.spaceChar)}this.addByte(this.spaceChar);let o=this.hitCount/this.ngramCount;return o>.33?98:Math.floor(o*300)}},we=class{constructor(e,t){this.fLang=e,this.fNGrams=t}},nh=n=>Array.isArray(n)&&isFinite(n[0]),Ke=class{constructor(){this.spaceChar=32,this.nGramLang=void 0}ngrams(){return[]}byteMap(){return[]}name(e){return"sbcs"}language(){return this.nGramLang}match(e){this.nGramLang=void 0;let t=this.ngrams();if(nh(t)){let o=new qn(t,this.byteMap()).parse(e,this.spaceChar);return o<=0?null:(0,Sc.default)(e,this,o)}let r=-1;for(let i=t.length-1;i>=0;i--){let o=t[i],a=new qn(o.fNGrams,this.byteMap()).parse(e,this.spaceChar);a>r&&(r=a,this.nGramLang=o.fLang)}return r<=0?null:(0,Sc.default)(e,this,r)}},Ss=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[new we("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new we("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new we("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new we("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new we("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new we("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new we("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new we("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new we("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new we("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]}name(e){return e&&e.c1Bytes?"windows-1252":"ISO-8859-1"}};ae.ISO_8859_1=Ss;var Ds=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]}ngrams(){return[new we("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new we("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new we("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new we("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]}name(e){return e&&e.c1Bytes?"windows-1250":"ISO-8859-2"}};ae.ISO_8859_2=Ds;var Rs=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]}ngrams(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]}name(){return"ISO-8859-5"}language(){return"ru"}};ae.ISO_8859_5=Rs;var Ts=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]}ngrams(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]}name(){return"ISO-8859-6"}language(){return"ar"}};ae.ISO_8859_6=Ts;var Ps=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]}ngrams(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]}name(e){return e&&e.c1Bytes?"windows-1253":"ISO-8859-7"}language(){return"el"}};ae.ISO_8859_7=Ps;var Os=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]}ngrams(){return[new we("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new we("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]}name(e){return e&&e.c1Bytes?"windows-1255":"ISO-8859-8"}language(){return"he"}};ae.ISO_8859_8=Os;var Ns=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]}name(e){return e&&e.c1Bytes?"windows-1254":"ISO-8859-9"}language(){return"tr"}};ae.ISO_8859_9=Ns;var _s=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}ngrams(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]}name(){return"windows-1251"}language(){return"ru"}};ae.windows_1251=_s;var As=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]}ngrams(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]}name(){return"windows-1256"}language(){return"ar"}};ae.windows_1256=As;var Ls=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}ngrams(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]}name(){return"KOI8-R"}language(){return"ru"}};ae.KOI8_R=Ls});var Rc=F(ct=>{"use strict";var ih=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ct,"__esModule",{value:!0});ct.ISO_2022_CN=ct.ISO_2022_KR=ct.ISO_2022_JP=void 0;var oh=ih(Kt()),jr=class{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,r,i,o=0,s=0,a=0,c,u=e.inputBytes,d=e.inputLen;e:for(t=0;t<d;t++){if(u[t]==27){t:for(i=0;i<this.escapeSequences.length;i++){let m=this.escapeSequences[i];if(d-t<m.length)continue t;for(r=1;r<m.length;r++)if(m[r]!=u[t+r])continue t;o++,t+=m.length-1;continue e}s++}(u[t]==14||u[t]==15)&&a++}return o==0?null:(c=(100*o-100*s)/(o+s),o+a<5&&(c-=(5-(o+a))*10),c<=0?null:(0,oh.default)(e,this,c))}},Ms=class extends jr{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}};ct.ISO_2022_JP=Ms;var Fs=class extends jr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}};ct.ISO_2022_KR=Fs;var Us=class extends jr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}};ct.ISO_2022_CN=Us});var Tc=F(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.isByteArray=void 0;var sh=n=>n==null||typeof n!="object"?!1:isFinite(n.length)&&n.length>=0;jn.isByteArray=sh});var Oc=F(re=>{"use strict";var ah=re&&re.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ch=re&&re.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Wn=re&&re.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},n(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=n(e),i=0;i<r.length;i++)r[i]!=="default"&&ah(t,e,r[i]);return ch(t,e),t}}(),$s=re&&re.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(re,"__esModule",{value:!0});re.detectFileSync=re.detectFile=re.analyse=re.detect=void 0;var Pc=$s(yc()),uh=$s(vc()),lh=$s(bc()),Xn=Wn(Ec()),Xr=Wn(Ic()),ut=Wn(Dc()),ks=Wn(Rc()),fh=Tc(),ph=[new lh.default,new Xn.UTF_16BE,new Xn.UTF_16LE,new Xn.UTF_32BE,new Xn.UTF_32LE,new Xr.sjis,new Xr.big5,new Xr.euc_jp,new Xr.euc_kr,new Xr.gb_18030,new ks.ISO_2022_JP,new ks.ISO_2022_KR,new ks.ISO_2022_CN,new ut.ISO_8859_1,new ut.ISO_8859_2,new ut.ISO_8859_5,new ut.ISO_8859_6,new ut.ISO_8859_7,new ut.ISO_8859_8,new ut.ISO_8859_9,new ut.windows_1251,new ut.windows_1256,new ut.KOI8_R,new uh.default],hh=n=>{let e=(0,re.analyse)(n);return e.length>0?e[0].name:null};re.detect=hh;var xh=n=>{if(!(0,fh.isByteArray)(n))throw new Error("Input must be a byte array, e.g. Buffer or Uint8Array");let e=[];for(let o=0;o<256;o++)e[o]=0;for(let o=n.length-1;o>=0;o--)e[n[o]&255]++;let t=!1;for(let o=128;o<=159;o+=1)if(e[o]!==0){t=!0;break}let r={byteStats:e,c1Bytes:t,rawInput:n,rawLen:n.length,inputBytes:n,inputLen:n.length};return ph.map(o=>o.match(r)).filter(o=>!!o).sort((o,s)=>s.confidence-o.confidence)};re.analyse=xh;var dh=(n,e={})=>new Promise((t,r)=>{let i,o=(0,Pc.default)(),s=(c,u)=>{i&&o.closeSync(i),c?r(c):u?t((0,re.detect)(u)):r(new Error("No error and no buffer received"))},a=(e==null?void 0:e.sampleSize)||0;if(a>0){i=o.openSync(n,"r");let c=Buffer.allocUnsafe(a);o.read(i,c,0,a,e.offset,(u,d)=>{u?s(u,null):(d<a&&(c=c.subarray(0,d)),s(null,c))});return}o.readFile(n,s)});re.detectFile=dh;var mh=(n,e={})=>{let t=(0,Pc.default)();if(e&&e.sampleSize){let r=t.openSync(n,"r"),i=Buffer.allocUnsafe(e.sampleSize),o=t.readSync(r,i,0,e.sampleSize,e.offset);return o<e.sampleSize&&(i=i.subarray(0,o)),t.closeSync(r),(0,re.detect)(i)}return(0,re.detect)(t.readFileSync(n))};re.detectFileSync=mh;re.default={analyse:re.analyse,detect:re.detect,detectFileSync:re.detectFileSync,detectFile:re.detectFile}});var zn=F(Bs=>{(function(){Bs.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Bs)});var lt=F((Lc,Ft)=>{(function(){var n,e,t,r,i,o,s,a=[].slice,c={}.hasOwnProperty;n=function(){var u,d,m,h,l,y;if(y=arguments[0],l=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,m=l.length;u<m;u++)if(h=l[u],h!=null)for(d in h)c.call(h,d)&&(y[d]=h[d]);return y},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},o=function(u){var d;return!!u&&((d=typeof u)=="function"||d==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var d;if(t(u))return!u.length;for(d in u)if(c.call(u,d))return!1;return!0},s=function(u){var d,m;return o(u)&&(m=Object.getPrototypeOf(u))&&(d=m.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Ft.exports.assign=n,Ft.exports.isFunction=i,Ft.exports.isObject=o,Ft.exports.isArray=t,Ft.exports.isEmpty=r,Ft.exports.isPlainObject=s,Ft.exports.getValue=e}).call(Lc)});var qs=F((Mc,Fc)=>{(function(){var n;Fc.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Mc)});var $c=F((Uc,kc)=>{(function(){var n;kc.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Uc)});var jc=F((Bc,qc)=>{(function(){var n;qc.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Bc)});var Vc=F((Xc,Wc)=>{(function(){var n,e,t;e=$c(),t=jc(),Wc.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,o){return!0},r.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},r}()}).call(Xc)});var fe=F((Gc,zc)=>{(function(){zc.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Gc)});var js=F((Hc,Yc)=>{(function(){var n,e,t;n=fe(),t=Xe(),Yc.exports=e=function(){function r(i,o,s){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(Hc)});var Hn=F((Qc,Kc)=>{(function(){var n;Kc.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Qc)});var Yn=F((Zc,Jc)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(m,h){for(var l in h)d.call(h,l)&&(m[l]=h[l]);function y(){this.constructor=m}return y.prototype=h.prototype,m.prototype=new y,m.__super__=h.prototype,m},d={}.hasOwnProperty;c=lt(),a=c.isObject,s=c.isFunction,o=c.getValue,i=Xe(),n=fe(),e=js(),r=Hn(),Jc.exports=t=function(m){u(h,m);function h(l,y,b){var R,_,S,v;if(h.__super__.constructor.call(this,l),y==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(y),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,b!=null&&this.attribute(b),l.type===n.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(v=l.children,_=0,S=v.length;_<S;_++)if(R=v[_],R.type===n.DocType){R.name=this.name;break}}}return Object.defineProperty(h.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(h.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(h.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),h.prototype.clone=function(){var l,y,b,R;b=Object.create(this),b.isRoot&&(b.documentObject=null),b.attribs={},R=this.attribs;for(y in R)d.call(R,y)&&(l=R[y],b.attribs[y]=l.clone());return b.children=[],this.children.forEach(function(_){var S;return S=_.clone(),S.parent=b,b.children.push(S)}),b},h.prototype.attribute=function(l,y){var b,R;if(l!=null&&(l=o(l)),a(l))for(b in l)d.call(l,b)&&(R=l[b],this.attribute(b,R));else s(y)&&(y=y.apply()),this.options.keepNullAttributes&&y==null?this.attribs[l]=new e(this,l,""):y!=null&&(this.attribs[l]=new e(this,l,y));return this},h.prototype.removeAttribute=function(l){var y,b,R;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=o(l),Array.isArray(l))for(b=0,R=l.length;b<R;b++)y=l[b],delete this.attribs[y];else delete this.attribs[l];return this},h.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},h.prototype.att=function(l,y){return this.attribute(l,y)},h.prototype.a=function(l,y){return this.attribute(l,y)},h.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},h.prototype.setAttribute=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},h.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNS=function(l,y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNodeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},h.prototype.hasAttributeNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttribute=function(l,y){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:y},h.prototype.setIdAttributeNS=function(l,y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttributeNode=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(l){var y,b,R;if(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(y=b=0,R=this.attribs.length-1;0<=R?b<=R:b>=R;y=0<=R?++b:--b)if(!this.attribs[y].isEqualNode(l.attribs[y]))return!1;return!0},h}(i)}).call(Zc)});var Wr=F((e0,t0)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=Xe(),t0.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(e0)});var Qn=F((r0,n0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),t=Wr(),n0.exports=e=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},s}(t)}).call(r0)});var Kn=F((i0,o0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Wr(),o0.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},s}(e)}).call(i0)});var Zn=F((s0,a0)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=lt().isObject,t=Xe(),n=fe(),a0.exports=e=function(s){i(a,s);function a(c,u,d,m){var h;a.__super__.constructor.call(this,c),r(u)&&(h=u,u=h.version,d=h.encoding,m=h.standalone),u||(u="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(u),d!=null&&(this.encoding=this.stringify.xmlEncoding(d)),m!=null&&(this.standalone=this.stringify.xmlStandalone(m))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(s0)});var Jn=F((c0,u0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),u0.exports=e=function(o){r(s,o);function s(a,c,u,d,m,h){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!d)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!m)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(m.indexOf("#")!==0&&(m="#"+m),!m.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(h&&!m.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(d),h&&(this.defaultValue=this.stringify.dtdAttDefault(h)),this.defaultValueType=m}return s.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},s}(t)}).call(c0)});var ei=F((l0,f0)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=lt().isObject,t=Xe(),n=fe(),f0.exports=e=function(s){i(a,s);function a(c,u,d,m){if(a.__super__.constructor.call(this,c),d==null)throw new Error("Missing DTD entity name. "+this.debugInfo(d));if(m==null)throw new Error("Missing DTD entity value. "+this.debugInfo(d));if(this.pe=!!u,this.name=this.stringify.name(d),this.type=n.EntityDeclaration,!r(m))this.value=this.stringify.dtdEntityValue(m),this.internal=!0;else{if(!m.pubID&&!m.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(d));if(m.pubID&&!m.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(d));if(this.internal=!1,m.pubID!=null&&(this.pubID=this.stringify.dtdPubID(m.pubID)),m.sysID!=null&&(this.sysID=this.stringify.dtdSysID(m.sysID)),m.nData!=null&&(this.nData=this.stringify.dtdNData(m.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(d))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(l0)});var ti=F((p0,h0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),h0.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return s.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},s}(t)}).call(p0)});var ri=F((x0,d0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),d0.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=n.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},s}(t)}).call(x0)});var ni=F((m0,g0)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(m,h){for(var l in h)d.call(h,l)&&(m[l]=h[l]);function y(){this.constructor=m}return y.prototype=h.prototype,m.prototype=new y,m.__super__=h.prototype,m},d={}.hasOwnProperty;c=lt().isObject,a=Xe(),n=fe(),e=Jn(),r=ei(),t=ti(),i=ri(),s=Hn(),g0.exports=o=function(m){u(h,m);function h(l,y,b){var R,_,S,v,p,x;if(h.__super__.constructor.call(this,l),this.type=n.DocType,l.children){for(v=l.children,_=0,S=v.length;_<S;_++)if(R=v[_],R.type===n.Element){this.name=R.name;break}}this.documentObject=l,c(y)&&(p=y,y=p.pubID,b=p.sysID),b==null&&(x=[y,b],b=x[0],y=x[1]),y!=null&&(this.pubID=this.stringify.dtdPubID(y)),b!=null&&(this.sysID=this.stringify.dtdSysID(b))}return Object.defineProperty(h.prototype,"entities",{get:function(){var l,y,b,R,_;for(R={},_=this.children,y=0,b=_.length;y<b;y++)l=_[y],l.type===n.EntityDeclaration&&!l.pe&&(R[l.name]=l);return new s(R)}}),Object.defineProperty(h.prototype,"notations",{get:function(){var l,y,b,R,_;for(R={},_=this.children,y=0,b=_.length;y<b;y++)l=_[y],l.type===n.NotationDeclaration&&(R[l.name]=l);return new s(R)}}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.element=function(l,y){var b;return b=new t(this,l,y),this.children.push(b),this},h.prototype.attList=function(l,y,b,R,_){var S;return S=new e(this,l,y,b,R,_),this.children.push(S),this},h.prototype.entity=function(l,y){var b;return b=new r(this,!1,l,y),this.children.push(b),this},h.prototype.pEntity=function(l,y){var b;return b=new r(this,!0,l,y),this.children.push(b),this},h.prototype.notation=function(l,y){var b;return b=new i(this,l,y),this.children.push(b),this},h.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},h.prototype.ele=function(l,y){return this.element(l,y)},h.prototype.att=function(l,y,b,R,_){return this.attList(l,y,b,R,_)},h.prototype.ent=function(l,y){return this.entity(l,y)},h.prototype.pent=function(l,y){return this.pEntity(l,y)},h.prototype.not=function(l,y){return this.notation(l,y)},h.prototype.up=function(){return this.root()||this.documentObject},h.prototype.isEqualNode=function(l){return!(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},h}(a)}).call(m0)});var ii=F((y0,w0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Xe(),w0.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},s}(e)}).call(y0)});var oi=F((v0,b0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Wr(),b0.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(c)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},s.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(v0)});var si=F((E0,C0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Wr(),C0.exports=t=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},s.prototype.isEqualNode=function(a){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},s}(e)}).call(E0)});var Xs=F((I0,S0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),S0.exports=e=function(o){r(s,o);function s(a){s.__super__.constructor.call(this,a),this.type=n.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return""},s}(t)}).call(I0)});var T0=F((D0,R0)=>{(function(){var n;R0.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(D0)});var N0=F((P0,O0)=>{(function(){O0.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(P0)});var Xe=F((_0,A0)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,h,l,y,b,R,_,S,v={}.hasOwnProperty;S=lt(),_=S.isObject,R=S.isFunction,b=S.isEmpty,y=S.getValue,a=null,t=null,r=null,i=null,o=null,h=null,l=null,m=null,s=null,e=null,d=null,c=null,n=null,A0.exports=u=function(){function p(x){this.parent=x,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Yn(),t=Qn(),r=Kn(),i=Zn(),o=ni(),h=ii(),l=oi(),m=si(),s=Xs(),e=fe(),d=T0(),c=Hn(),n=N0())}return Object.defineProperty(p.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(p.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(p.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(p.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new d(this.children)),this.childNodeList}}),Object.defineProperty(p.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(p.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(p.prototype,"previousSibling",{get:function(){var x;return x=this.parent.children.indexOf(this),this.parent.children[x-1]||null}}),Object.defineProperty(p.prototype,"nextSibling",{get:function(){var x;return x=this.parent.children.indexOf(this),this.parent.children[x+1]||null}}),Object.defineProperty(p.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(p.prototype,"textContent",{get:function(){var x,E,N,g,D;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(D="",g=this.children,E=0,N=g.length;E<N;E++)x=g[E],x.textContent&&(D+=x.textContent);return D}else return null},set:function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),p.prototype.setParent=function(x){var E,N,g,D,C;for(this.parent=x,x&&(this.options=x.options,this.stringify=x.stringify),D=this.children,C=[],N=0,g=D.length;N<g;N++)E=D[N],C.push(E.setParent(this));return C},p.prototype.element=function(x,E,N){var g,D,C,T,P,O,M,k,A,X,B;if(O=null,E===null&&N==null&&(A=[{},null],E=A[0],N=A[1]),E==null&&(E={}),E=y(E),_(E)||(X=[E,N],N=X[0],E=X[1]),x!=null&&(x=y(x)),Array.isArray(x))for(C=0,M=x.length;C<M;C++)D=x[C],O=this.element(D);else if(R(x))O=this.element(x.apply());else if(_(x)){for(P in x)if(v.call(x,P))if(B=x[P],R(B)&&(B=B.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&P.indexOf(this.stringify.convertAttKey)===0)O=this.attribute(P.substr(this.stringify.convertAttKey.length),B);else if(!this.options.separateArrayItems&&Array.isArray(B)&&b(B))O=this.dummy();else if(_(B)&&b(B))O=this.element(P);else if(!this.options.keepNullNodes&&B==null)O=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(B))for(T=0,k=B.length;T<k;T++)D=B[T],g={},g[P]=D,O=this.element(g);else _(B)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&P.indexOf(this.stringify.convertTextKey)===0?O=this.element(B):(O=this.element(P),O.element(B)):O=this.element(P,B)}else!this.options.keepNullNodes&&N===null?O=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&x.indexOf(this.stringify.convertTextKey)===0?O=this.text(N):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&x.indexOf(this.stringify.convertCDataKey)===0?O=this.cdata(N):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&x.indexOf(this.stringify.convertCommentKey)===0?O=this.comment(N):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&x.indexOf(this.stringify.convertRawKey)===0?O=this.raw(N):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&x.indexOf(this.stringify.convertPIKey)===0?O=this.instruction(x.substr(this.stringify.convertPIKey.length),N):O=this.node(x,E,N);if(O==null)throw new Error("Could not create any elements with: "+x+". "+this.debugInfo());return O},p.prototype.insertBefore=function(x,E,N){var g,D,C,T,P;if(x!=null&&x.type)return C=x,T=E,C.setParent(this),T?(D=children.indexOf(T),P=children.splice(D),children.push(C),Array.prototype.push.apply(children,P)):children.push(C),C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(x));return D=this.parent.children.indexOf(this),P=this.parent.children.splice(D),g=this.parent.element(x,E,N),Array.prototype.push.apply(this.parent.children,P),g},p.prototype.insertAfter=function(x,E,N){var g,D,C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(x));return D=this.parent.children.indexOf(this),C=this.parent.children.splice(D+1),g=this.parent.element(x,E,N),Array.prototype.push.apply(this.parent.children,C),g},p.prototype.remove=function(){var x,E;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return x=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[x,x-x+1].concat(E=[])),this.parent},p.prototype.node=function(x,E,N){var g,D;return x!=null&&(x=y(x)),E||(E={}),E=y(E),_(E)||(D=[E,N],N=D[0],E=D[1]),g=new a(this,x,E),N!=null&&g.text(N),this.children.push(g),g},p.prototype.text=function(x){var E;return _(x)&&this.element(x),E=new l(this,x),this.children.push(E),this},p.prototype.cdata=function(x){var E;return E=new t(this,x),this.children.push(E),this},p.prototype.comment=function(x){var E;return E=new r(this,x),this.children.push(E),this},p.prototype.commentBefore=function(x){var E,N,g;return N=this.parent.children.indexOf(this),g=this.parent.children.splice(N),E=this.parent.comment(x),Array.prototype.push.apply(this.parent.children,g),this},p.prototype.commentAfter=function(x){var E,N,g;return N=this.parent.children.indexOf(this),g=this.parent.children.splice(N+1),E=this.parent.comment(x),Array.prototype.push.apply(this.parent.children,g),this},p.prototype.raw=function(x){var E;return E=new h(this,x),this.children.push(E),this},p.prototype.dummy=function(){var x;return x=new s(this),x},p.prototype.instruction=function(x,E){var N,g,D,C,T;if(x!=null&&(x=y(x)),E!=null&&(E=y(E)),Array.isArray(x))for(C=0,T=x.length;C<T;C++)N=x[C],this.instruction(N);else if(_(x))for(N in x)v.call(x,N)&&(g=x[N],this.instruction(N,g));else R(E)&&(E=E.apply()),D=new m(this,x,E),this.children.push(D);return this},p.prototype.instructionBefore=function(x,E){var N,g,D;return g=this.parent.children.indexOf(this),D=this.parent.children.splice(g),N=this.parent.instruction(x,E),Array.prototype.push.apply(this.parent.children,D),this},p.prototype.instructionAfter=function(x,E){var N,g,D;return g=this.parent.children.indexOf(this),D=this.parent.children.splice(g+1),N=this.parent.instruction(x,E),Array.prototype.push.apply(this.parent.children,D),this},p.prototype.declaration=function(x,E,N){var g,D;return g=this.document(),D=new i(g,x,E,N),g.children.length===0?g.children.unshift(D):g.children[0].type===e.Declaration?g.children[0]=D:g.children.unshift(D),g.root()||g},p.prototype.dtd=function(x,E){var N,g,D,C,T,P,O,M,k,A;for(g=this.document(),D=new o(g,x,E),k=g.children,C=T=0,O=k.length;T<O;C=++T)if(N=k[C],N.type===e.DocType)return g.children[C]=D,D;for(A=g.children,C=P=0,M=A.length;P<M;C=++P)if(N=A[C],N.isRoot)return g.children.splice(C,0,D),D;return g.children.push(D),D},p.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},p.prototype.root=function(){var x;for(x=this;x;){if(x.type===e.Document)return x.rootObject;if(x.isRoot)return x;x=x.parent}},p.prototype.document=function(){var x;for(x=this;x;){if(x.type===e.Document)return x;x=x.parent}},p.prototype.end=function(x){return this.document().end(x)},p.prototype.prev=function(){var x;if(x=this.parent.children.indexOf(this),x<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[x-1]},p.prototype.next=function(){var x;if(x=this.parent.children.indexOf(this),x===-1||x===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[x+1]},p.prototype.importDocument=function(x){var E;return E=x.root().clone(),E.parent=this,E.isRoot=!1,this.children.push(E),this},p.prototype.debugInfo=function(x){var E,N;return x=x||this.name,x==null&&!((E=this.parent)!=null&&E.name)?"":x==null?"parent: <"+this.parent.name+">":(N=this.parent)!=null&&N.name?"node: <"+x+">, parent: <"+this.parent.name+">":"node: <"+x+">"},p.prototype.ele=function(x,E,N){return this.element(x,E,N)},p.prototype.nod=function(x,E,N){return this.node(x,E,N)},p.prototype.txt=function(x){return this.text(x)},p.prototype.dat=function(x){return this.cdata(x)},p.prototype.com=function(x){return this.comment(x)},p.prototype.ins=function(x,E){return this.instruction(x,E)},p.prototype.doc=function(){return this.document()},p.prototype.dec=function(x,E,N){return this.declaration(x,E,N)},p.prototype.e=function(x,E,N){return this.element(x,E,N)},p.prototype.n=function(x,E,N){return this.node(x,E,N)},p.prototype.t=function(x){return this.text(x)},p.prototype.d=function(x){return this.cdata(x)},p.prototype.c=function(x){return this.comment(x)},p.prototype.r=function(x){return this.raw(x)},p.prototype.i=function(x,E){return this.instruction(x,E)},p.prototype.u=function(){return this.up()},p.prototype.importXMLBuilder=function(x){return this.importDocument(x)},p.prototype.replaceChild=function(x,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeChild=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.appendChild=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasChildNodes=function(){return this.children.length!==0},p.prototype.cloneNode=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isSupported=function(x,E){return!0},p.prototype.hasAttributes=function(){return this.attribs.length!==0},p.prototype.compareDocumentPosition=function(x){var E,N;return E=this,E===x?0:this.document()!==x.document()?(N=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?N|=n.Preceding:N|=n.Following,N):E.isAncestor(x)?n.Contains|n.Preceding:E.isDescendant(x)?n.Contains|n.Following:E.isPreceding(x)?n.Preceding:n.Following},p.prototype.isSameNode=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.lookupPrefix=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isDefaultNamespace=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.lookupNamespaceURI=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(x){var E,N,g;if(x.nodeType!==this.nodeType||x.children.length!==this.children.length)return!1;for(E=N=0,g=this.children.length-1;0<=g?N<=g:N>=g;E=0<=g?++N:--N)if(!this.children[E].isEqualNode(x.children[E]))return!1;return!0},p.prototype.getFeature=function(x,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setUserData=function(x,E,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getUserData=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.contains=function(x){return x?x===this||this.isDescendant(x):!1},p.prototype.isDescendant=function(x){var E,N,g,D,C;for(C=this.children,g=0,D=C.length;g<D;g++)if(E=C[g],x===E||(N=E.isDescendant(x),N))return!0;return!1},p.prototype.isAncestor=function(x){return x.isDescendant(this)},p.prototype.isPreceding=function(x){var E,N;return E=this.treePosition(x),N=this.treePosition(this),E===-1||N===-1?!1:E<N},p.prototype.isFollowing=function(x){var E,N;return E=this.treePosition(x),N=this.treePosition(this),E===-1||N===-1?!1:E>N},p.prototype.treePosition=function(x){var E,N;return N=0,E=!1,this.foreachTreeNode(this.document(),function(g){if(N++,!E&&g===x)return E=!0}),E?N:-1},p.prototype.foreachTreeNode=function(x,E){var N,g,D,C,T;for(x||(x=this.document()),C=x.children,g=0,D=C.length;g<D;g++){if(N=C[g],T=E(N))return T;if(T=this.foreachTreeNode(N,E),T)return T}},p}()}).call(_0)});var Ws=F((L0,M0)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;M0.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(o in s)t.call(s,o)&&(a=s[o],this[o]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var o,s;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},r.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(L0)});var Vr=F((F0,U0)=>{(function(){U0.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(F0)});var Vs=F((k0,$0)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,h,l,y,b,R,_={}.hasOwnProperty;R=lt().assign,n=fe(),c=Zn(),u=ni(),t=Qn(),r=Kn(),m=Yn(),l=ii(),y=oi(),h=si(),d=Xs(),i=Jn(),o=ti(),s=ei(),a=ri(),e=Vr(),$0.exports=b=function(){function S(v){var p,x,E;v||(v={}),this.options=v,x=v.writer||{};for(p in x)_.call(x,p)&&(E=x[p],this["_"+p]=this[p],this[p]=E)}return S.prototype.filterOptions=function(v){var p,x,E,N,g,D,C,T;return v||(v={}),v=R({},this.options,v),p={writer:this},p.pretty=v.pretty||!1,p.allowEmpty=v.allowEmpty||!1,p.indent=(x=v.indent)!=null?x:"  ",p.newline=(E=v.newline)!=null?E:`
`,p.offset=(N=v.offset)!=null?N:0,p.dontPrettyTextNodes=(g=(D=v.dontPrettyTextNodes)!=null?D:v.dontprettytextnodes)!=null?g:0,p.spaceBeforeSlash=(C=(T=v.spaceBeforeSlash)!=null?T:v.spacebeforeslash)!=null?C:"",p.spaceBeforeSlash===!0&&(p.spaceBeforeSlash=" "),p.suppressPrettyCount=0,p.user={},p.state=e.None,p},S.prototype.indent=function(v,p,x){var E;return!p.pretty||p.suppressPrettyCount?"":p.pretty&&(E=(x||0)+p.offset+1,E>0)?new Array(E).join(p.indent):""},S.prototype.endline=function(v,p,x){return!p.pretty||p.suppressPrettyCount?"":p.newline},S.prototype.attribute=function(v,p,x){var E;return this.openAttribute(v,p,x),E=" "+v.name+'="'+v.value+'"',this.closeAttribute(v,p,x),E},S.prototype.cdata=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<![CDATA[",p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+="]]>"+this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.comment=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<!-- ",p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+=" -->"+this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.declaration=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<?xml",p.state=e.InsideTag,E+=' version="'+v.version+'"',v.encoding!=null&&(E+=' encoding="'+v.encoding+'"'),v.standalone!=null&&(E+=' standalone="'+v.standalone+'"'),p.state=e.CloseTag,E+=p.spaceBeforeSlash+"?>",E+=this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.docType=function(v,p,x){var E,N,g,D,C;if(x||(x=0),this.openNode(v,p,x),p.state=e.OpenTag,D=this.indent(v,p,x),D+="<!DOCTYPE "+v.root().name,v.pubID&&v.sysID?D+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(D+=' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(D+=" [",D+=this.endline(v,p,x),p.state=e.InsideTag,C=v.children,N=0,g=C.length;N<g;N++)E=C[N],D+=this.writeChildNode(E,p,x+1);p.state=e.CloseTag,D+="]"}return p.state=e.CloseTag,D+=p.spaceBeforeSlash+">",D+=this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),D},S.prototype.element=function(v,p,x){var E,N,g,D,C,T,P,O,M,k,A,X,B,Q;x||(x=0),k=!1,A="",this.openNode(v,p,x),p.state=e.OpenTag,A+=this.indent(v,p,x)+"<"+v.name,X=v.attribs;for(M in X)_.call(X,M)&&(E=X[M],A+=this.attribute(E,p,x));if(g=v.children.length,D=g===0?null:v.children[0],g===0||v.children.every(function(Z){return(Z.type===n.Text||Z.type===n.Raw)&&Z.value===""}))p.allowEmpty?(A+=">",p.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,p,x)):(p.state=e.CloseTag,A+=p.spaceBeforeSlash+"/>"+this.endline(v,p,x));else if(p.pretty&&g===1&&(D.type===n.Text||D.type===n.Raw)&&D.value!=null)A+=">",p.state=e.InsideTag,p.suppressPrettyCount++,k=!0,A+=this.writeChildNode(D,p,x+1),p.suppressPrettyCount--,k=!1,p.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,p,x);else{if(p.dontPrettyTextNodes){for(B=v.children,C=0,P=B.length;C<P;C++)if(N=B[C],(N.type===n.Text||N.type===n.Raw)&&N.value!=null){p.suppressPrettyCount++,k=!0;break}}for(A+=">"+this.endline(v,p,x),p.state=e.InsideTag,Q=v.children,T=0,O=Q.length;T<O;T++)N=Q[T],A+=this.writeChildNode(N,p,x+1);p.state=e.CloseTag,A+=this.indent(v,p,x)+"</"+v.name+">",k&&p.suppressPrettyCount--,A+=this.endline(v,p,x),p.state=e.None}return this.closeNode(v,p,x),A},S.prototype.writeChildNode=function(v,p,x){switch(v.type){case n.CData:return this.cdata(v,p,x);case n.Comment:return this.comment(v,p,x);case n.Element:return this.element(v,p,x);case n.Raw:return this.raw(v,p,x);case n.Text:return this.text(v,p,x);case n.ProcessingInstruction:return this.processingInstruction(v,p,x);case n.Dummy:return"";case n.Declaration:return this.declaration(v,p,x);case n.DocType:return this.docType(v,p,x);case n.AttributeDeclaration:return this.dtdAttList(v,p,x);case n.ElementDeclaration:return this.dtdElement(v,p,x);case n.EntityDeclaration:return this.dtdEntity(v,p,x);case n.NotationDeclaration:return this.dtdNotation(v,p,x);default:throw new Error("Unknown XML node type: "+v.constructor.name)}},S.prototype.processingInstruction=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<?",p.state=e.InsideTag,E+=v.target,v.value&&(E+=" "+v.value),p.state=e.CloseTag,E+=p.spaceBeforeSlash+"?>",E+=this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.raw=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x),p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+=this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.text=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x),p.state=e.InsideTag,E+=v.value,p.state=e.CloseTag,E+=this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.dtdAttList=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<!ATTLIST",p.state=e.InsideTag,E+=" "+v.elementName+" "+v.attributeName+" "+v.attributeType,v.defaultValueType!=="#DEFAULT"&&(E+=" "+v.defaultValueType),v.defaultValue&&(E+=' "'+v.defaultValue+'"'),p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.dtdElement=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<!ELEMENT",p.state=e.InsideTag,E+=" "+v.name+" "+v.value,p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.dtdEntity=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<!ENTITY",p.state=e.InsideTag,v.pe&&(E+=" %"),E+=" "+v.name,v.value?E+=' "'+v.value+'"':(v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),v.nData&&(E+=" NDATA "+v.nData)),p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.dtdNotation=function(v,p,x){var E;return this.openNode(v,p,x),p.state=e.OpenTag,E=this.indent(v,p,x)+"<!NOTATION",p.state=e.InsideTag,E+=" "+v.name,v.pubID&&v.sysID?E+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.pubID?E+=' PUBLIC "'+v.pubID+'"':v.sysID&&(E+=' SYSTEM "'+v.sysID+'"'),p.state=e.CloseTag,E+=p.spaceBeforeSlash+">"+this.endline(v,p,x),p.state=e.None,this.closeNode(v,p,x),E},S.prototype.openNode=function(v,p,x){},S.prototype.closeNode=function(v,p,x){},S.prototype.openAttribute=function(v,p,x){},S.prototype.closeAttribute=function(v,p,x){},S}()}).call(k0)});var ai=F((B0,q0)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=Vs(),q0.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,a){var c,u,d,m,h;for(a=this.filterOptions(a),m="",h=s.children,u=0,d=h.length;u<d;u++)c=h[u],m+=this.writeChildNode(c,a,0);return a.pretty&&m.slice(-a.newline.length)===a.newline&&(m=m.slice(0,-a.newline.length)),m},o}(e)}).call(B0)});var Gs=F((j0,X0)=>{(function(){var n,e,t,r,i,o,s,a,c=function(d,m){for(var h in m)u.call(m,h)&&(d[h]=m[h]);function l(){this.constructor=d}return l.prototype=m.prototype,d.prototype=new l,d.__super__=m.prototype,d},u={}.hasOwnProperty;a=lt().isPlainObject,t=qs(),e=Vc(),i=Xe(),n=fe(),s=Ws(),o=ai(),X0.exports=r=function(d){c(m,d);function m(h){m.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,h||(h={}),h.writer||(h.writer=new o),this.options=h,this.stringify=new s(h)}return Object.defineProperty(m.prototype,"implementation",{value:new t}),Object.defineProperty(m.prototype,"doctype",{get:function(){var h,l,y,b;for(b=this.children,l=0,y=b.length;l<y;l++)if(h=b[l],h.type===n.DocType)return h;return null}}),Object.defineProperty(m.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(m.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(m.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(m.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(m.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(m.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(m.prototype,"origin",{get:function(){return null}}),Object.defineProperty(m.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(m.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(m.prototype,"contentType",{get:function(){return null}}),m.prototype.end=function(h){var l;return l={},h?a(h)&&(l=h,h=this.options.writer):h=this.options.writer,h.document(this,h.filterOptions(l))},m.prototype.toString=function(h){return this.options.writer.document(this,this.options.writer.filterOptions(h))},m.prototype.createElement=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTextNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createComment=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createCDATASection=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createProcessingInstruction=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttribute=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEntityReference=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.importNode=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createElementNS=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttributeNS=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(h,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementById=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.adoptNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.renameNode=function(h,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEvent=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createNodeIterator=function(h,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTreeWalker=function(h,l,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m}(i)}).call(j0)});var G0=F((W0,V0)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,h,l,y,b,R,_,S,v,p,x,E,N,g={}.hasOwnProperty;N=lt(),x=N.isObject,p=N.isFunction,E=N.isPlainObject,v=N.getValue,n=fe(),m=Gs(),l=Yn(),r=Qn(),i=Kn(),b=ii(),S=oi(),y=si(),u=Zn(),d=ni(),o=Jn(),a=ei(),s=ti(),c=ri(),t=js(),_=Ws(),R=ai(),e=Vr(),V0.exports=h=function(){function D(C,T,P){var O;this.name="?xml",this.type=n.Document,C||(C={}),O={},C.writer?E(C.writer)&&(O=C.writer,C.writer=new R):C.writer=new R,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(O),this.stringify=new _(C),this.onDataCallback=T||function(){},this.onEndCallback=P||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return D.prototype.createChildNode=function(C){var T,P,O,M,k,A,X,B;switch(C.type){case n.CData:this.cdata(C.value);break;case n.Comment:this.comment(C.value);break;case n.Element:O={},X=C.attribs;for(P in X)g.call(X,P)&&(T=X[P],O[P]=T.value);this.node(C.name,O);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(C.value);break;case n.Text:this.text(C.value);break;case n.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(B=C.children,k=0,A=B.length;k<A;k++)M=B[k],this.createChildNode(M),M.type===n.Element&&this.up();return this},D.prototype.dummy=function(){return this},D.prototype.node=function(C,T,P){var O;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=v(C),T==null&&(T={}),T=v(T),x(T)||(O=[T,P],P=O[0],T=O[1]),this.currentNode=new l(this,C,T),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,P!=null&&this.text(P),this},D.prototype.element=function(C,T,P){var O,M,k,A,X,B;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||x(C)||p(C))for(A=this.options.noValidation,this.options.noValidation=!0,B=new m(this.options).element("TEMP_ROOT"),B.element(C),this.options.noValidation=A,X=B.children,M=0,k=X.length;M<k;M++)O=X[M],this.createChildNode(O),O.type===n.Element&&this.up();else this.node(C,T,P);return this},D.prototype.attribute=function(C,T){var P,O;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=v(C)),x(C))for(P in C)g.call(C,P)&&(O=C[P],this.attribute(P,O));else p(T)&&(T=T.apply()),this.options.keepNullAttributes&&T==null?this.currentNode.attribs[C]=new t(this,C,""):T!=null&&(this.currentNode.attribs[C]=new t(this,C,T));return this},D.prototype.text=function(C){var T;return this.openCurrent(),T=new S(this,C),this.onData(this.writer.text(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.cdata=function(C){var T;return this.openCurrent(),T=new r(this,C),this.onData(this.writer.cdata(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.comment=function(C){var T;return this.openCurrent(),T=new i(this,C),this.onData(this.writer.comment(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.raw=function(C){var T;return this.openCurrent(),T=new b(this,C),this.onData(this.writer.raw(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.instruction=function(C,T){var P,O,M,k,A;if(this.openCurrent(),C!=null&&(C=v(C)),T!=null&&(T=v(T)),Array.isArray(C))for(P=0,k=C.length;P<k;P++)O=C[P],this.instruction(O);else if(x(C))for(O in C)g.call(C,O)&&(M=C[O],this.instruction(O,M));else p(T)&&(T=T.apply()),A=new y(this,C,T),this.onData(this.writer.processingInstruction(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},D.prototype.declaration=function(C,T,P){var O;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return O=new u(this,C,T,P),this.onData(this.writer.declaration(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.doctype=function(C,T,P){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,T,P),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},D.prototype.dtdElement=function(C,T){var P;return this.openCurrent(),P=new s(this,C,T),this.onData(this.writer.dtdElement(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.attList=function(C,T,P,O,M){var k;return this.openCurrent(),k=new o(this,C,T,P,O,M),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.entity=function(C,T){var P;return this.openCurrent(),P=new a(this,!1,C,T),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.pEntity=function(C,T){var P;return this.openCurrent(),P=new a(this,!0,C,T),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.notation=function(C,T){var P;return this.openCurrent(),P=new c(this,C,T),this.onData(this.writer.dtdNotation(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},D.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},D.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},D.prototype.openNode=function(C){var T,P,O,M;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===n.Element&&(this.root=C),P="",C.type===n.Element){this.writerOptions.state=e.OpenTag,P=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,M=C.attribs;for(O in M)g.call(M,O)&&(T=M[O],P+=this.writer.attribute(T,this.writerOptions,this.currentLevel));P+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,P=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?P+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(P+=' SYSTEM "'+C.sysID+'"'),C.children?(P+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,P+=">"),P+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(P,this.currentLevel),C.isOpen=!0}},D.prototype.closeNode=function(C){var T;if(!C.isClosed)return T="",this.writerOptions.state=e.CloseTag,C.type===n.Element?T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(T,this.currentLevel),C.isClosed=!0},D.prototype.onData=function(C,T){return this.documentStarted=!0,this.onDataCallback(C,T+1)},D.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},D.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},D.prototype.ele=function(){return this.element.apply(this,arguments)},D.prototype.nod=function(C,T,P){return this.node(C,T,P)},D.prototype.txt=function(C){return this.text(C)},D.prototype.dat=function(C){return this.cdata(C)},D.prototype.com=function(C){return this.comment(C)},D.prototype.ins=function(C,T){return this.instruction(C,T)},D.prototype.dec=function(C,T,P){return this.declaration(C,T,P)},D.prototype.dtd=function(C,T,P){return this.doctype(C,T,P)},D.prototype.e=function(C,T,P){return this.element(C,T,P)},D.prototype.n=function(C,T,P){return this.node(C,T,P)},D.prototype.t=function(C){return this.text(C)},D.prototype.d=function(C){return this.cdata(C)},D.prototype.c=function(C){return this.comment(C)},D.prototype.r=function(C){return this.raw(C)},D.prototype.i=function(C,T){return this.instruction(C,T)},D.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.ent=function(C,T){return this.entity(C,T)},D.prototype.pent=function(C,T){return this.pEntity(C,T)},D.prototype.not=function(C,T){return this.notation(C,T)},D}()}).call(W0)});var Y0=F((z0,H0)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;n=fe(),r=Vs(),e=Vr(),H0.exports=t=function(s){i(a,s);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,d){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,d)},a.prototype.document=function(c,u){var d,m,h,l,y,b,R,_,S;for(R=c.children,m=h=0,y=R.length;h<y;m=++h)d=R[m],d.isLastRootNode=m===c.children.length-1;for(u=this.filterOptions(u),_=c.children,S=[],l=0,b=_.length;l<b;l++)d=_[l],S.push(this.writeChildNode(d,u,0));return S},a.prototype.attribute=function(c,u,d){return this.stream.write(a.__super__.attribute.call(this,c,u,d))},a.prototype.cdata=function(c,u,d){return this.stream.write(a.__super__.cdata.call(this,c,u,d))},a.prototype.comment=function(c,u,d){return this.stream.write(a.__super__.comment.call(this,c,u,d))},a.prototype.declaration=function(c,u,d){return this.stream.write(a.__super__.declaration.call(this,c,u,d))},a.prototype.docType=function(c,u,d){var m,h,l,y;if(d||(d=0),this.openNode(c,u,d),u.state=e.OpenTag,this.stream.write(this.indent(c,u,d)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,d)),u.state=e.InsideTag,y=c.children,h=0,l=y.length;h<l;h++)m=y[h],this.writeChildNode(m,u,d+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,d)),u.state=e.None,this.closeNode(c,u,d)},a.prototype.element=function(c,u,d){var m,h,l,y,b,R,_,S,v,p;d||(d=0),this.openNode(c,u,d),u.state=e.OpenTag,this.stream.write(this.indent(c,u,d)+"<"+c.name),v=c.attribs;for(_ in v)o.call(v,_)&&(m=v[_],this.attribute(m,u,d));if(l=c.children.length,y=l===0?null:c.children[0],l===0||c.children.every(function(x){return(x.type===n.Text||x.type===n.Raw)&&x.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(y.type===n.Text||y.type===n.Raw)&&y.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,S=!0,this.writeChildNode(y,u,d+1),u.suppressPrettyCount--,S=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,d)),u.state=e.InsideTag,p=c.children,b=0,R=p.length;b<R;b++)h=p[b],this.writeChildNode(h,u,d+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,d)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,d)),u.state=e.None,this.closeNode(c,u,d)},a.prototype.processingInstruction=function(c,u,d){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,d))},a.prototype.raw=function(c,u,d){return this.stream.write(a.__super__.raw.call(this,c,u,d))},a.prototype.text=function(c,u,d){return this.stream.write(a.__super__.text.call(this,c,u,d))},a.prototype.dtdAttList=function(c,u,d){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,d))},a.prototype.dtdElement=function(c,u,d){return this.stream.write(a.__super__.dtdElement.call(this,c,u,d))},a.prototype.dtdEntity=function(c,u,d){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,d))},a.prototype.dtdNotation=function(c,u,d){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,d))},a}(r)}).call(z0)});var K0=F((Q0,Ut)=>{(function(){var n,e,t,r,i,o,s,a,c,u;u=lt(),a=u.assign,c=u.isFunction,t=qs(),r=Gs(),i=G0(),s=ai(),o=Y0(),n=fe(),e=Vr(),Ut.exports.create=function(d,m,h,l){var y,b;if(d==null)throw new Error("Root element needs a name.");return l=a({},m,h,l),y=new r(l),b=y.element(d),l.headless||(y.declaration(l),(l.pubID!=null||l.sysID!=null)&&y.dtd(l)),b},Ut.exports.begin=function(d,m,h){var l;return c(d)&&(l=[d,m],m=l[0],h=l[1],d={}),m?new i(d,m,h):new r(d)},Ut.exports.stringWriter=function(d){return new s(d)},Ut.exports.streamWriter=function(d,m){return new o(d,m)},Ut.exports.implementation=new t,Ut.exports.nodeType=n,Ut.exports.writerState=e}).call(Q0)});var Z0=F(zs=>{(function(){"use strict";var n,e,t,r,i,o={}.hasOwnProperty;n=K0(),e=zn().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},i=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},zs.Builder=function(){function s(a){var c,u,d;this.options={},u=e["0.2"];for(c in u)o.call(u,c)&&(d=u[c],this.options[c]=d);for(c in a)o.call(a,c)&&(d=a[c],this.options[c]=d)}return s.prototype.buildObject=function(a){var c,u,d,m,h;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(h=Object.keys(a)[0],a=a[h]):h=this.options.rootName,d=function(l){return function(y,b){var R,_,S,v,p,x;if(typeof b!="object")l.options.cdata&&r(b)?y.raw(i(b)):y.txt(b);else if(Array.isArray(b)){for(v in b)if(o.call(b,v)){_=b[v];for(p in _)S=_[p],y=d(y.ele(p),S).up()}}else for(p in b)if(o.call(b,p))if(_=b[p],p===c){if(typeof _=="object")for(R in _)x=_[R],y=y.att(R,x)}else if(p===u)l.options.cdata&&r(_)?y=y.raw(i(_)):y=y.txt(_);else if(Array.isArray(_))for(v in _)o.call(_,v)&&(S=_[v],typeof S=="string"?l.options.cdata&&r(S)?y=y.ele(p).raw(i(S)).up():y=y.ele(p,S).up():y=d(y.ele(p),S).up());else typeof _=="object"?y=d(y.ele(p),_).up():typeof _=="string"&&l.options.cdata&&r(_)?y=y.ele(p).raw(i(_)).up():(_==null&&(_=""),y=y.ele(p,_.toString()).up());return y}}(this),m=n.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(m,a).end(this.options.renderOpts)},s}()}).call(zs)});var J0=F(ci=>{(function(n){n.parser=function(w,f){return new t(w,f)},n.SAXParser=t,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(w,f){if(!(this instanceof t))return new t(w,f);var L=this;i(L),L.q=L.c="",L.bufferCheckPosition=n.MAX_BUFFER_LENGTH,L.opt=f||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!w,L.noscript=!!(w||L.opt.noscript),L.state=g.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(y)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!w),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),C(L,"onready")}Object.create||(Object.create=function(w){function f(){}f.prototype=w;var L=new f;return L}),Object.keys||(Object.keys=function(w){var f=[];for(var L in w)w.hasOwnProperty(L)&&f.push(L);return f});function r(w){for(var f=Math.max(n.MAX_BUFFER_LENGTH,10),L=0,I=0,Y=e.length;I<Y;I++){var ne=w[e[I]].length;if(ne>f)switch(e[I]){case"textNode":P(w);break;case"cdata":T(w,"oncdata",w.cdata),w.cdata="";break;case"script":T(w,"onscript",w.script),w.script="";break;default:M(w,"Max buffer length exceeded: "+e[I])}L=Math.max(L,ne)}var xe=n.MAX_BUFFER_LENGTH-L;w.bufferCheckPosition=xe+w.position}function i(w){for(var f=0,L=e.length;f<L;f++)w[e[f]]=""}function o(w){P(w),w.cdata!==""&&(T(w,"oncdata",w.cdata),w.cdata=""),w.script!==""&&(T(w,"onscript",w.script),w.script="")}t.prototype={end:function(){k(this)},write:gt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var a=n.EVENTS.filter(function(w){return w!=="error"&&w!=="end"});function c(w,f){return new u(w,f)}function u(w,f){if(!(this instanceof u))return new u(w,f);s.apply(this),this._parser=new t(w,f),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(I){L.emit("error",I),L._parser.error=null},this._decoder=null,a.forEach(function(I){Object.defineProperty(L,"on"+I,{get:function(){return L._parser["on"+I]},set:function(Y){if(!Y)return L.removeAllListeners(I),L._parser["on"+I]=Y,Y;L.on(I,Y)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(w){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(w)){if(!this._decoder){var f=require("string_decoder").StringDecoder;this._decoder=new f("utf8")}w=this._decoder.write(w)}return this._parser.write(w.toString()),this.emit("data",w),!0},u.prototype.end=function(w){return w&&w.length&&this.write(w),this._parser.end(),!0},u.prototype.on=function(w,f){var L=this;return!L._parser["on"+w]&&a.indexOf(w)!==-1&&(L._parser["on"+w]=function(){var I=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,w),L.emit.apply(L,I)}),s.prototype.on.call(L,w,f)};var d="[CDATA[",m="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:l},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(w){return w===" "||w===`
`||w==="\r"||w==="	"}function p(w){return w==='"'||w==="'"}function x(w){return w===">"||v(w)}function E(w,f){return w.test(f)}function N(w,f){return!E(w,f)}var g=0;n.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(w){var f=n.ENTITIES[w],L=typeof f=="number"?String.fromCharCode(f):f;n.ENTITIES[w]=L});for(var D in n.STATE)n.STATE[n.STATE[D]]=D;g=n.STATE;function C(w,f,L){w[f]&&w[f](L)}function T(w,f,L){w.textNode&&P(w),C(w,f,L)}function P(w){w.textNode=O(w.opt,w.textNode),w.textNode&&C(w,"ontext",w.textNode),w.textNode=""}function O(w,f){return w.trim&&(f=f.trim()),w.normalize&&(f=f.replace(/\s+/g," ")),f}function M(w,f){return P(w),w.trackPosition&&(f+=`
Line: `+w.line+`
Column: `+w.column+`
Char: `+w.c),f=new Error(f),w.error=f,C(w,"onerror",f),w}function k(w){return w.sawRoot&&!w.closedRoot&&A(w,"Unclosed root tag"),w.state!==g.BEGIN&&w.state!==g.BEGIN_WHITESPACE&&w.state!==g.TEXT&&M(w,"Unexpected end"),P(w),w.c="",w.closed=!0,C(w,"onend"),t.call(w,w.strict,w.opt),w}function A(w,f){if(typeof w!="object"||!(w instanceof t))throw new Error("bad call to strictFail");w.strict&&M(w,f)}function X(w){w.strict||(w.tagName=w.tagName[w.looseCase]());var f=w.tags[w.tags.length-1]||w,L=w.tag={name:w.tagName,attributes:{}};w.opt.xmlns&&(L.ns=f.ns),w.attribList.length=0,T(w,"onopentagstart",L)}function B(w,f){var L=w.indexOf(":"),I=L<0?["",w]:w.split(":"),Y=I[0],ne=I[1];return f&&w==="xmlns"&&(Y="xmlns",ne=""),{prefix:Y,local:ne}}function Q(w){if(w.strict||(w.attribName=w.attribName[w.looseCase]()),w.attribList.indexOf(w.attribName)!==-1||w.tag.attributes.hasOwnProperty(w.attribName)){w.attribName=w.attribValue="";return}if(w.opt.xmlns){var f=B(w.attribName,!0),L=f.prefix,I=f.local;if(L==="xmlns")if(I==="xml"&&w.attribValue!==h)A(w,"xml: prefix must be bound to "+h+`
Actual: `+w.attribValue);else if(I==="xmlns"&&w.attribValue!==l)A(w,"xmlns: prefix must be bound to "+l+`
Actual: `+w.attribValue);else{var Y=w.tag,ne=w.tags[w.tags.length-1]||w;Y.ns===ne.ns&&(Y.ns=Object.create(ne.ns)),Y.ns[I]=w.attribValue}w.attribList.push([w.attribName,w.attribValue])}else w.tag.attributes[w.attribName]=w.attribValue,T(w,"onattribute",{name:w.attribName,value:w.attribValue});w.attribName=w.attribValue=""}function Z(w,f){if(w.opt.xmlns){var L=w.tag,I=B(w.tagName);L.prefix=I.prefix,L.local=I.local,L.uri=L.ns[I.prefix]||"",L.prefix&&!L.uri&&(A(w,"Unbound namespace prefix: "+JSON.stringify(w.tagName)),L.uri=I.prefix);var Y=w.tags[w.tags.length-1]||w;L.ns&&Y.ns!==L.ns&&Object.keys(L.ns).forEach(function(za){T(w,"onopennamespace",{prefix:za,uri:L.ns[za]})});for(var ne=0,xe=w.attribList.length;ne<xe;ne++){var Le=w.attribList[ne],Me=Le[0],sr=Le[1],ve=B(Me,!0),yt=ve.prefix,Pp=ve.local,Ga=yt===""?"":L.ns[yt]||"",zo={name:Me,value:sr,prefix:yt,local:Pp,uri:Ga};yt&&yt!=="xmlns"&&!Ga&&(A(w,"Unbound namespace prefix: "+JSON.stringify(yt)),zo.uri=yt),w.tag.attributes[Me]=zo,T(w,"onattribute",zo)}w.attribList.length=0}w.tag.isSelfClosing=!!f,w.sawRoot=!0,w.tags.push(w.tag),T(w,"onopentag",w.tag),f||(!w.noscript&&w.tagName.toLowerCase()==="script"?w.state=g.SCRIPT:w.state=g.TEXT,w.tag=null,w.tagName=""),w.attribName=w.attribValue="",w.attribList.length=0}function ue(w){if(!w.tagName){A(w,"Weird empty close tag."),w.textNode+="</>",w.state=g.TEXT;return}if(w.script){if(w.tagName!=="script"){w.script+="</"+w.tagName+">",w.tagName="",w.state=g.SCRIPT;return}T(w,"onscript",w.script),w.script=""}var f=w.tags.length,L=w.tagName;w.strict||(L=L[w.looseCase]());for(var I=L;f--;){var Y=w.tags[f];if(Y.name!==I)A(w,"Unexpected close tag");else break}if(f<0){A(w,"Unmatched closing tag: "+w.tagName),w.textNode+="</"+w.tagName+">",w.state=g.TEXT;return}w.tagName=L;for(var ne=w.tags.length;ne-- >f;){var xe=w.tag=w.tags.pop();w.tagName=w.tag.name,T(w,"onclosetag",w.tagName);var Le={};for(var Me in xe.ns)Le[Me]=xe.ns[Me];var sr=w.tags[w.tags.length-1]||w;w.opt.xmlns&&xe.ns!==sr.ns&&Object.keys(xe.ns).forEach(function(ve){var yt=xe.ns[ve];T(w,"onclosenamespace",{prefix:ve,uri:yt})})}f===0&&(w.closedRoot=!0),w.tagName=w.attribValue=w.attribName="",w.attribList.length=0,w.state=g.TEXT}function de(w){var f=w.entity,L=f.toLowerCase(),I,Y="";return w.ENTITIES[f]?w.ENTITIES[f]:w.ENTITIES[L]?w.ENTITIES[L]:(f=L,f.charAt(0)==="#"&&(f.charAt(1)==="x"?(f=f.slice(2),I=parseInt(f,16),Y=I.toString(16)):(f=f.slice(1),I=parseInt(f,10),Y=I.toString(10))),f=f.replace(/^0+/,""),isNaN(I)||Y.toLowerCase()!==f||I<0||I>1114111?(A(w,"Invalid character entity"),"&"+w.entity+";"):String.fromCodePoint(I))}function Pe(w,f){f==="<"?(w.state=g.OPEN_WAKA,w.startTagPosition=w.position):v(f)||(A(w,"Non-whitespace before first tag."),w.textNode=f,w.state=g.TEXT)}function it(w,f){var L="";return f<w.length&&(L=w.charAt(f)),L}function gt(w){var f=this;if(this.error)throw this.error;if(f.closed)return M(f,"Cannot write after close. Assign an onready handler.");if(w===null)return k(f);typeof w=="object"&&(w=w.toString());for(var L=0,I="";I=it(w,L++),f.c=I,!!I;)switch(f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++),f.state){case g.BEGIN:if(f.state=g.BEGIN_WHITESPACE,I==="\uFEFF")continue;Pe(f,I);continue;case g.BEGIN_WHITESPACE:Pe(f,I);continue;case g.TEXT:if(f.sawRoot&&!f.closedRoot){for(var ne=L-1;I&&I!=="<"&&I!=="&";)I=it(w,L++),I&&f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++);f.textNode+=w.substring(ne,L-1)}I==="<"&&!(f.sawRoot&&f.closedRoot&&!f.strict)?(f.state=g.OPEN_WAKA,f.startTagPosition=f.position):(!v(I)&&(!f.sawRoot||f.closedRoot)&&A(f,"Text data outside of root node."),I==="&"?f.state=g.TEXT_ENTITY:f.textNode+=I);continue;case g.SCRIPT:I==="<"?f.state=g.SCRIPT_ENDING:f.script+=I;continue;case g.SCRIPT_ENDING:I==="/"?f.state=g.CLOSE_TAG:(f.script+="<"+I,f.state=g.SCRIPT);continue;case g.OPEN_WAKA:if(I==="!")f.state=g.SGML_DECL,f.sgmlDecl="";else if(!v(I))if(E(b,I))f.state=g.OPEN_TAG,f.tagName=I;else if(I==="/")f.state=g.CLOSE_TAG,f.tagName="";else if(I==="?")f.state=g.PROC_INST,f.procInstName=f.procInstBody="";else{if(A(f,"Unencoded <"),f.startTagPosition+1<f.position){var Y=f.position-f.startTagPosition;I=new Array(Y).join(" ")+I}f.textNode+="<"+I,f.state=g.TEXT}continue;case g.SGML_DECL:if(f.sgmlDecl+I==="--"){f.state=g.COMMENT,f.comment="",f.sgmlDecl="";continue}f.doctype&&f.doctype!==!0&&f.sgmlDecl?(f.state=g.DOCTYPE_DTD,f.doctype+="<!"+f.sgmlDecl+I,f.sgmlDecl=""):(f.sgmlDecl+I).toUpperCase()===d?(T(f,"onopencdata"),f.state=g.CDATA,f.sgmlDecl="",f.cdata=""):(f.sgmlDecl+I).toUpperCase()===m?(f.state=g.DOCTYPE,(f.doctype||f.sawRoot)&&A(f,"Inappropriately located doctype declaration"),f.doctype="",f.sgmlDecl=""):I===">"?(T(f,"onsgmldeclaration",f.sgmlDecl),f.sgmlDecl="",f.state=g.TEXT):(p(I)&&(f.state=g.SGML_DECL_QUOTED),f.sgmlDecl+=I);continue;case g.SGML_DECL_QUOTED:I===f.q&&(f.state=g.SGML_DECL,f.q=""),f.sgmlDecl+=I;continue;case g.DOCTYPE:I===">"?(f.state=g.TEXT,T(f,"ondoctype",f.doctype),f.doctype=!0):(f.doctype+=I,I==="["?f.state=g.DOCTYPE_DTD:p(I)&&(f.state=g.DOCTYPE_QUOTED,f.q=I));continue;case g.DOCTYPE_QUOTED:f.doctype+=I,I===f.q&&(f.q="",f.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:I==="]"?(f.doctype+=I,f.state=g.DOCTYPE):I==="<"?(f.state=g.OPEN_WAKA,f.startTagPosition=f.position):p(I)?(f.doctype+=I,f.state=g.DOCTYPE_DTD_QUOTED,f.q=I):f.doctype+=I;continue;case g.DOCTYPE_DTD_QUOTED:f.doctype+=I,I===f.q&&(f.state=g.DOCTYPE_DTD,f.q="");continue;case g.COMMENT:I==="-"?f.state=g.COMMENT_ENDING:f.comment+=I;continue;case g.COMMENT_ENDING:I==="-"?(f.state=g.COMMENT_ENDED,f.comment=O(f.opt,f.comment),f.comment&&T(f,"oncomment",f.comment),f.comment=""):(f.comment+="-"+I,f.state=g.COMMENT);continue;case g.COMMENT_ENDED:I!==">"?(A(f,"Malformed comment"),f.comment+="--"+I,f.state=g.COMMENT):f.doctype&&f.doctype!==!0?f.state=g.DOCTYPE_DTD:f.state=g.TEXT;continue;case g.CDATA:for(var ne=L-1;I&&I!=="]";)I=it(w,L++),I&&f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++);f.cdata+=w.substring(ne,L-1),I==="]"&&(f.state=g.CDATA_ENDING);continue;case g.CDATA_ENDING:I==="]"?f.state=g.CDATA_ENDING_2:(f.cdata+="]"+I,f.state=g.CDATA);continue;case g.CDATA_ENDING_2:I===">"?(f.cdata&&T(f,"oncdata",f.cdata),T(f,"onclosecdata"),f.cdata="",f.state=g.TEXT):I==="]"?f.cdata+="]":(f.cdata+="]]"+I,f.state=g.CDATA);continue;case g.PROC_INST:I==="?"?f.state=g.PROC_INST_ENDING:v(I)?f.state=g.PROC_INST_BODY:f.procInstName+=I;continue;case g.PROC_INST_BODY:if(!f.procInstBody&&v(I))continue;I==="?"?f.state=g.PROC_INST_ENDING:f.procInstBody+=I;continue;case g.PROC_INST_ENDING:I===">"?(T(f,"onprocessinginstruction",{name:f.procInstName,body:f.procInstBody}),f.procInstName=f.procInstBody="",f.state=g.TEXT):(f.procInstBody+="?"+I,f.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:E(R,I)?f.tagName+=I:(X(f),I===">"?Z(f):I==="/"?f.state=g.OPEN_TAG_SLASH:(v(I)||A(f,"Invalid character in tag name"),f.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:I===">"?(Z(f,!0),ue(f)):(A(f,"Forward-slash in opening tag not followed by >"),f.state=g.ATTRIB);continue;case g.ATTRIB:if(v(I))continue;I===">"?Z(f):I==="/"?f.state=g.OPEN_TAG_SLASH:E(b,I)?(f.attribName=I,f.attribValue="",f.state=g.ATTRIB_NAME):A(f,"Invalid attribute name");continue;case g.ATTRIB_NAME:I==="="?f.state=g.ATTRIB_VALUE:I===">"?(A(f,"Attribute without value"),f.attribValue=f.attribName,Q(f),Z(f)):v(I)?f.state=g.ATTRIB_NAME_SAW_WHITE:E(R,I)?f.attribName+=I:A(f,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if(I==="=")f.state=g.ATTRIB_VALUE;else{if(v(I))continue;A(f,"Attribute without value"),f.tag.attributes[f.attribName]="",f.attribValue="",T(f,"onattribute",{name:f.attribName,value:""}),f.attribName="",I===">"?Z(f):E(b,I)?(f.attribName=I,f.state=g.ATTRIB_NAME):(A(f,"Invalid attribute name"),f.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(v(I))continue;p(I)?(f.q=I,f.state=g.ATTRIB_VALUE_QUOTED):(f.opt.unquotedAttributeValues||M(f,"Unquoted attribute value"),f.state=g.ATTRIB_VALUE_UNQUOTED,f.attribValue=I);continue;case g.ATTRIB_VALUE_QUOTED:if(I!==f.q){I==="&"?f.state=g.ATTRIB_VALUE_ENTITY_Q:f.attribValue+=I;continue}Q(f),f.q="",f.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:v(I)?f.state=g.ATTRIB:I===">"?Z(f):I==="/"?f.state=g.OPEN_TAG_SLASH:E(b,I)?(A(f,"No whitespace between attributes"),f.attribName=I,f.attribValue="",f.state=g.ATTRIB_NAME):A(f,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!x(I)){I==="&"?f.state=g.ATTRIB_VALUE_ENTITY_U:f.attribValue+=I;continue}Q(f),I===">"?Z(f):f.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(f.tagName)I===">"?ue(f):E(R,I)?f.tagName+=I:f.script?(f.script+="</"+f.tagName,f.tagName="",f.state=g.SCRIPT):(v(I)||A(f,"Invalid tagname in closing tag"),f.state=g.CLOSE_TAG_SAW_WHITE);else{if(v(I))continue;N(b,I)?f.script?(f.script+="</"+I,f.state=g.SCRIPT):A(f,"Invalid tagname in closing tag."):f.tagName=I}continue;case g.CLOSE_TAG_SAW_WHITE:if(v(I))continue;I===">"?ue(f):A(f,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var xe,Le;switch(f.state){case g.TEXT_ENTITY:xe=g.TEXT,Le="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:xe=g.ATTRIB_VALUE_QUOTED,Le="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:xe=g.ATTRIB_VALUE_UNQUOTED,Le="attribValue";break}if(I===";"){var Me=de(f);f.opt.unparsedEntities&&!Object.values(n.XML_ENTITIES).includes(Me)?(f.entity="",f.state=xe,f.write(Me)):(f[Le]+=Me,f.entity="",f.state=xe)}else E(f.entity.length?S:_,I)?f.entity+=I:(A(f,"Invalid character in entity name"),f[Le]+="&"+f.entity+I,f.entity="",f.state=xe);continue;default:throw new Error(f,"Unknown state: "+f.state)}return f.position>=f.bufferCheckPosition&&r(f),f}String.fromCodePoint||function(){var w=String.fromCharCode,f=Math.floor,L=function(){var I=16384,Y=[],ne,xe,Le=-1,Me=arguments.length;if(!Me)return"";for(var sr="";++Le<Me;){var ve=Number(arguments[Le]);if(!isFinite(ve)||ve<0||ve>1114111||f(ve)!==ve)throw RangeError("Invalid code point: "+ve);ve<=65535?Y.push(ve):(ve-=65536,ne=(ve>>10)+55296,xe=ve%1024+56320,Y.push(ne,xe)),(Le+1===Me||Y.length>I)&&(sr+=w.apply(null,Y),Y.length=0)}return sr};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(typeof ci>"u"?ci.sax={}:ci)});var eu=F(Hs=>{(function(){"use strict";Hs.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(Hs)});var Ys=F(Jt=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),Jt.normalize=function(e){return e.toLowerCase()},Jt.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Jt.stripPrefix=function(e){return e.replace(n,"")},Jt.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Jt.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Jt)});var tu=F(St=>{(function(){"use strict";var n,e,t,r,i,o,s,a,c,u=function(h,l){return function(){return h.apply(l,arguments)}},d=function(h,l){for(var y in l)m.call(l,y)&&(h[y]=l[y]);function b(){this.constructor=h}return b.prototype=l.prototype,h.prototype=new b,h.__super__=l.prototype,h},m={}.hasOwnProperty;a=J0(),r=require("events"),n=eu(),s=Ys(),c=require("timers").setImmediate,e=zn().defaults,i=function(h){return typeof h=="object"&&h!=null&&Object.keys(h).length===0},o=function(h,l,y){var b,R,_;for(b=0,R=h.length;b<R;b++)_=h[b],l=_(l,y);return l},t=function(h,l,y){var b;return b=Object.create(null),b.value=y,b.writable=!0,b.enumerable=!0,b.configurable=!0,Object.defineProperty(h,l,b)},St.Parser=function(h){d(l,h);function l(y){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var b,R,_;if(!(this instanceof St.Parser))return new St.Parser(y);this.options={},R=e["0.2"];for(b in R)m.call(R,b)&&(_=R[b],this.options[b]=_);for(b in y)m.call(y,b)&&(_=y[b],this.options[b]=_);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return l.prototype.processAsync=function(){var y,b;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),c(this.processAsync))}catch(R){if(b=R,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(b)}},l.prototype.assignOrPush=function(y,b,R){return b in y?(y[b]instanceof Array||t(y,b,[y[b]]),y[b].push(R)):this.options.explicitArray?t(y,b,[R]):t(y,b,R)},l.prototype.reset=function(){var y,b,R,_;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(S){return function(v){if(S.saxParser.resume(),!S.saxParser.errThrown)return S.saxParser.errThrown=!0,S.emit("error",v)}}(this),this.saxParser.onend=function(S){return function(){if(!S.saxParser.ended)return S.saxParser.ended=!0,S.emit("end",S.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,_=[],y=this.options.attrkey,b=this.options.charkey,this.saxParser.onopentag=function(S){return function(v){var p,x,E,N,g;if(E={},E[b]="",!S.options.ignoreAttrs){g=v.attributes;for(p in g)m.call(g,p)&&(!(y in E)&&!S.options.mergeAttrs&&(E[y]={}),x=S.options.attrValueProcessors?o(S.options.attrValueProcessors,v.attributes[p],p):v.attributes[p],N=S.options.attrNameProcessors?o(S.options.attrNameProcessors,p):p,S.options.mergeAttrs?S.assignOrPush(E,N,x):t(E[y],N,x))}return E["#name"]=S.options.tagNameProcessors?o(S.options.tagNameProcessors,v.name):v.name,S.options.xmlns&&(E[S.options.xmlnskey]={uri:v.uri,local:v.local}),_.push(E)}}(this),this.saxParser.onclosetag=function(S){return function(){var v,p,x,E,N,g,D,C,T,P;if(g=_.pop(),N=g["#name"],(!S.options.explicitChildren||!S.options.preserveChildrenOrder)&&delete g["#name"],g.cdata===!0&&(v=g.cdata,delete g.cdata),T=_[_.length-1],g[b].match(/^\s*$/)&&!v?(p=g[b],delete g[b]):(S.options.trim&&(g[b]=g[b].trim()),S.options.normalize&&(g[b]=g[b].replace(/\s{2,}/g," ").trim()),g[b]=S.options.valueProcessors?o(S.options.valueProcessors,g[b],N):g[b],Object.keys(g).length===1&&b in g&&!S.EXPLICIT_CHARKEY&&(g=g[b])),i(g)&&(typeof S.options.emptyTag=="function"?g=S.options.emptyTag():g=S.options.emptyTag!==""?S.options.emptyTag:p),S.options.validator!=null&&(P="/"+function(){var O,M,k;for(k=[],O=0,M=_.length;O<M;O++)E=_[O],k.push(E["#name"]);return k}().concat(N).join("/"),function(){var O;try{return g=S.options.validator(P,T&&T[N],g)}catch(M){return O=M,S.emit("error",O)}}()),S.options.explicitChildren&&!S.options.mergeAttrs&&typeof g=="object"){if(!S.options.preserveChildrenOrder)E={},S.options.attrkey in g&&(E[S.options.attrkey]=g[S.options.attrkey],delete g[S.options.attrkey]),!S.options.charsAsChildren&&S.options.charkey in g&&(E[S.options.charkey]=g[S.options.charkey],delete g[S.options.charkey]),Object.getOwnPropertyNames(g).length>0&&(E[S.options.childkey]=g),g=E;else if(T){T[S.options.childkey]=T[S.options.childkey]||[],D={};for(x in g)m.call(g,x)&&t(D,x,g[x]);T[S.options.childkey].push(D),delete g["#name"],Object.keys(g).length===1&&b in g&&!S.EXPLICIT_CHARKEY&&(g=g[b])}}return _.length>0?S.assignOrPush(T,N,g):(S.options.explicitRoot&&(C=g,g={},t(g,N,C)),S.resultObject=g,S.saxParser.ended=!0,S.emit("end",S.resultObject))}}(this),R=function(S){return function(v){var p,x;if(x=_[_.length-1],x)return x[b]+=v,S.options.explicitChildren&&S.options.preserveChildrenOrder&&S.options.charsAsChildren&&(S.options.includeWhiteChars||v.replace(/\\n/g,"").trim()!=="")&&(x[S.options.childkey]=x[S.options.childkey]||[],p={"#name":"__text__"},p[b]=v,S.options.normalize&&(p[b]=p[b].replace(/\s{2,}/g," ").trim()),x[S.options.childkey].push(p)),x}}(this),this.saxParser.ontext=R,this.saxParser.oncdata=function(S){return function(v){var p;if(p=R(v),p)return p.cdata=!0}}(this)},l.prototype.parseString=function(y,b){var R;b!=null&&typeof b=="function"&&(this.on("end",function(_){return this.reset(),b(null,_)}),this.on("error",function(_){return this.reset(),b(_)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=n.stripBOM(y),this.options.async?(this.remaining=y,c(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(_){if(R=_,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw R}else return this.emit("error",R),this.saxParser.errThrown=!0}},l.prototype.parseStringPromise=function(y){return new Promise(function(b){return function(R,_){return b.parseString(y,function(S,v){return S?_(S):R(v)})}}(this))},l}(r),St.parseString=function(h,l,y){var b,R,_;return y!=null?(typeof y=="function"&&(b=y),typeof l=="object"&&(R=l)):(typeof l=="function"&&(b=l),R={}),_=new St.Parser(R),_.parseString(h,b)},St.parseStringPromise=function(h,l){var y,b;return typeof l=="object"&&(y=l),b=new St.Parser(y),b.parseStringPromise(h)}}).call(St)});var gr=F(Dt=>{(function(){"use strict";var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;e=zn(),n=Z0(),t=tu(),r=Ys(),Dt.defaults=e.defaults,Dt.processors=r,Dt.ValidationError=function(s){i(a,s);function a(c){this.message=c}return a}(Error),Dt.Builder=n.Builder,Dt.Parser=t.Parser,Dt.parseString=t.parseString,Dt.parseStringPromise=t.parseStringPromise}).call(Dt)});var bu=F((ww,Pt)=>{var te=require("fs"),li=require("os"),be=require("path"),iu=require("crypto"),pt={fs:te.constants,os:li.constants},ou="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",uu=/XXXXXX/,wh=3,lu=(pt.O_CREAT||pt.fs.O_CREAT)|(pt.O_EXCL||pt.fs.O_EXCL)|(pt.O_RDWR||pt.fs.O_RDWR),vh=li.platform()==="win32",bh=pt.EBADF||pt.os.errno.EBADF,Eh=pt.ENOENT||pt.os.errno.ENOENT,fu=448,pu=384,Ch="exit",yr=[],hu=te.rmdirSync.bind(te),xu=!1;function Ih(n,e){return te.rm(n,{recursive:!0},e)}function du(n){return te.rmSync(n,{recursive:!0})}function Zs(n,e){let t=wr(n,e),r=t[0],i=t[1];Lh(r,function(o,s){if(o)return i(o);let a=s.tries;(function c(){try{let u=gu(s);te.stat(u,function(d){if(!d)return a-- >0?c():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()})}function Js(n){let e=wr(n),t=e[0],r=Mh(t),i=r.tries;do{let o=gu(r);try{te.statSync(o)}catch{return o}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function Sh(n,e){let t=wr(n,e),r=t[0],i=t[1];Zs(r,function(s,a){if(s)return i(s);te.open(a,lu,r.mode||pu,function(u,d){if(u)return i(u);if(r.discardDescriptor)return te.close(d,function(h){return i(h,a,void 0,Qs(a,-1,r,!1))});{let m=r.discardDescriptor||r.detachDescriptor;i(null,a,d,Qs(a,m?-1:d,r,!1))}})})}function Dh(n){let e=wr(n),t=e[0],r=t.discardDescriptor||t.detachDescriptor,i=Js(t),o=te.openSync(i,lu,t.mode||pu);return t.discardDescriptor&&(te.closeSync(o),o=void 0),{name:i,fd:o,removeCallback:Qs(i,r?-1:o,t,!0)}}function Rh(n,e){let t=wr(n,e),r=t[0],i=t[1];Zs(r,function(s,a){if(s)return i(s);te.mkdir(a,r.mode||fu,function(u){if(u)return i(u);i(null,a,mu(a,r,!1))})})}function Th(n){let e=wr(n),t=e[0],r=Js(t);return te.mkdirSync(r,t.mode||fu),{name:r,removeCallback:mu(r,t,!0)}}function Ph(n,e){let t=function(r){if(r&&!Ks(r))return e(r);e()};0<=n[0]?te.close(n[0],function(){te.unlink(n[1],t)}):te.unlink(n[1],t)}function Oh(n){let e=null;try{0<=n[0]&&te.closeSync(n[0])}catch(t){if(!Fh(t)&&!Ks(t))throw t}finally{try{te.unlinkSync(n[1])}catch(t){Ks(t)||(e=t)}}if(e!==null)throw e}function Qs(n,e,t,r){let i=ui(Oh,[e,n],r),o=ui(Ph,[e,n],r,i);return t.keep||yr.unshift(i),r?i:o}function mu(n,e,t){let r=e.unsafeCleanup?Ih:te.rmdir.bind(te),i=e.unsafeCleanup?du:hu,o=ui(i,n,t),s=ui(r,n,t,o);return e.keep||yr.unshift(o),t?o:s}function ui(n,e,t,r){let i=!1;return function o(s){if(!i){let a=r||o,c=yr.indexOf(a);return c>=0&&yr.splice(c,1),i=!0,t||n===hu||n===du?n(e):n(e,s||function(){})}}}function Nh(){if(xu)for(;yr.length;)try{yr[0]()}catch{}}function su(n){let e=[],t=null;try{t=iu.randomBytes(n)}catch{t=iu.pseudoRandomBytes(n)}for(let r=0;r<n;r++)e.push(ou[t[r]%ou.length]);return e.join("")}function We(n){return typeof n>"u"}function wr(n,e){if(typeof n=="function")return[{},n];if(We(n))return[{},e];let t={};for(let r of Object.getOwnPropertyNames(n))t[r]=n[r];return[t,e]}function _h(n,e,t){let r=be.isAbsolute(n)?n:be.join(e,n);te.stat(r,function(i){i?te.realpath(be.dirname(r),function(o,s){if(o)return t(o);t(null,be.join(s,be.basename(r)))}):te.realpath(r,t)})}function Ah(n,e){let t=be.isAbsolute(n)?n:be.join(e,n);try{return te.statSync(t),te.realpathSync(t)}catch{let i=te.realpathSync(be.dirname(t));return be.join(i,be.basename(t))}}function gu(n){let e=n.tmpdir;if(!We(n.name))return be.join(e,n.dir,n.name);if(!We(n.template))return be.join(e,n.dir,n.template).replace(uu,su(6));let t=[n.prefix?n.prefix:"tmp","-",process.pid,"-",su(12),n.postfix?"-"+n.postfix:""].join("");return be.join(e,n.dir,t)}function yu(n){if(!We(n.name)){let e=n.name;if(be.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let t=be.basename(e);if(t===".."||t==="."||t!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!We(n.template)&&!n.template.match(uu))throw new Error(`Invalid template, found "${n.template}".`);if(!We(n.tries)&&isNaN(n.tries)||n.tries<0)throw new Error(`Invalid tries, found "${n.tries}".`);n.tries=We(n.name)?n.tries||wh:1,n.keep=!!n.keep,n.detachDescriptor=!!n.detachDescriptor,n.discardDescriptor=!!n.discardDescriptor,n.unsafeCleanup=!!n.unsafeCleanup,n.prefix=We(n.prefix)?"":n.prefix,n.postfix=We(n.postfix)?"":n.postfix}function au(n,e,t,r){if(We(e))return r(null);_h(e,t,function(i,o){if(i)return r(i);let s=be.relative(t,o);if(!o.startsWith(t))return r(new Error(`${n} option must be relative to "${t}", found "${s}".`));r(null,s)})}function cu(n,e,t){if(We(e))return;let r=Ah(e,t),i=be.relative(t,r);if(!r.startsWith(t))throw new Error(`${n} option must be relative to "${t}", found "${i}".`);return i}function Lh(n,e){kh(n,function(t,r){if(t)return e(t);n.tmpdir=r;try{yu(n,r)}catch(i){return e(i)}au("dir",n.dir,r,function(i,o){if(i)return e(i);n.dir=We(o)?"":o,au("template",n.template,r,function(s,a){if(s)return e(s);n.template=a,e(null,n)})})})}function Mh(n){let e=n.tmpdir=vu(n);yu(n,e);let t=cu("dir",n.dir,e);return n.dir=We(t)?"":t,n.template=cu("template",n.template,e),n}function Fh(n){return wu(n,-bh,"EBADF")}function Ks(n){return wu(n,-Eh,"ENOENT")}function wu(n,e,t){return vh?n.code===t:n.code===t&&n.errno===e}function Uh(){xu=!0}function kh(n,e){return te.realpath(n&&n.tmpdir||li.tmpdir(),e)}function vu(n){return te.realpathSync(n&&n.tmpdir||li.tmpdir())}process.addListener(Ch,Nh);Object.defineProperty(Pt.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return vu()}});Pt.exports.dir=Rh;Pt.exports.dirSync=Th;Pt.exports.file=Sh;Pt.exports.fileSync=Dh;Pt.exports.tmpName=Zs;Pt.exports.tmpNameSync=Js;Pt.exports.setGracefulCleanup=Uh});var rn=F((Lv,sl)=>{"use strict";var Wx="2.0.0",Vx=Number.MAX_SAFE_INTEGER||9007199254740991,Gx=16,zx=250,Hx=["major","premajor","minor","preminor","patch","prepatch","prerelease"];sl.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Gx,MAX_SAFE_BUILD_LENGTH:zx,MAX_SAFE_INTEGER:Vx,RELEASE_TYPES:Hx,SEMVER_SPEC_VERSION:Wx,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var nn=F((Mv,al)=>{"use strict";var Yx=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};al.exports=Yx});var Cr=F((xt,cl)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:xa,MAX_SAFE_BUILD_LENGTH:Qx,MAX_LENGTH:Kx}=rn(),Zx=nn();xt=cl.exports={};var Jx=xt.re=[],ed=xt.safeRe=[],q=xt.src=[],td=xt.safeSrc=[],j=xt.t={},rd=0,da="[a-zA-Z0-9-]",nd=[["\\s",1],["\\d",Kx],[da,Qx]],id=n=>{for(let[e,t]of nd)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},V=(n,e,t)=>{let r=id(e),i=rd++;Zx(n,i,e),j[n]=i,q[i]=e,td[i]=r,Jx[i]=new RegExp(e,t?"g":void 0),ed[i]=new RegExp(r,t?"g":void 0)};V("NUMERICIDENTIFIER","0|[1-9]\\d*");V("NUMERICIDENTIFIERLOOSE","\\d+");V("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${da}*`);V("MAINVERSION",`(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})`);V("MAINVERSIONLOOSE",`(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})`);V("PRERELEASEIDENTIFIER",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIER]})`);V("PRERELEASEIDENTIFIERLOOSE",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIERLOOSE]})`);V("PRERELEASE",`(?:-(${q[j.PRERELEASEIDENTIFIER]}(?:\\.${q[j.PRERELEASEIDENTIFIER]})*))`);V("PRERELEASELOOSE",`(?:-?(${q[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${q[j.PRERELEASEIDENTIFIERLOOSE]})*))`);V("BUILDIDENTIFIER",`${da}+`);V("BUILD",`(?:\\+(${q[j.BUILDIDENTIFIER]}(?:\\.${q[j.BUILDIDENTIFIER]})*))`);V("FULLPLAIN",`v?${q[j.MAINVERSION]}${q[j.PRERELEASE]}?${q[j.BUILD]}?`);V("FULL",`^${q[j.FULLPLAIN]}$`);V("LOOSEPLAIN",`[v=\\s]*${q[j.MAINVERSIONLOOSE]}${q[j.PRERELEASELOOSE]}?${q[j.BUILD]}?`);V("LOOSE",`^${q[j.LOOSEPLAIN]}$`);V("GTLT","((?:<|>)?=?)");V("XRANGEIDENTIFIERLOOSE",`${q[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);V("XRANGEIDENTIFIER",`${q[j.NUMERICIDENTIFIER]}|x|X|\\*`);V("XRANGEPLAIN",`[v=\\s]*(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:${q[j.PRERELEASE]})?${q[j.BUILD]}?)?)?`);V("XRANGEPLAINLOOSE",`[v=\\s]*(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:${q[j.PRERELEASELOOSE]})?${q[j.BUILD]}?)?)?`);V("XRANGE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAIN]}$`);V("XRANGELOOSE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAINLOOSE]}$`);V("COERCEPLAIN",`(^|[^\\d])(\\d{1,${xa}})(?:\\.(\\d{1,${xa}}))?(?:\\.(\\d{1,${xa}}))?`);V("COERCE",`${q[j.COERCEPLAIN]}(?:$|[^\\d])`);V("COERCEFULL",q[j.COERCEPLAIN]+`(?:${q[j.PRERELEASE]})?(?:${q[j.BUILD]})?(?:$|[^\\d])`);V("COERCERTL",q[j.COERCE],!0);V("COERCERTLFULL",q[j.COERCEFULL],!0);V("LONETILDE","(?:~>?)");V("TILDETRIM",`(\\s*)${q[j.LONETILDE]}\\s+`,!0);xt.tildeTrimReplace="$1~";V("TILDE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAIN]}$`);V("TILDELOOSE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAINLOOSE]}$`);V("LONECARET","(?:\\^)");V("CARETTRIM",`(\\s*)${q[j.LONECARET]}\\s+`,!0);xt.caretTrimReplace="$1^";V("CARET",`^${q[j.LONECARET]}${q[j.XRANGEPLAIN]}$`);V("CARETLOOSE",`^${q[j.LONECARET]}${q[j.XRANGEPLAINLOOSE]}$`);V("COMPARATORLOOSE",`^${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]})$|^$`);V("COMPARATOR",`^${q[j.GTLT]}\\s*(${q[j.FULLPLAIN]})$|^$`);V("COMPARATORTRIM",`(\\s*)${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]}|${q[j.XRANGEPLAIN]})`,!0);xt.comparatorTrimReplace="$1$2$3";V("HYPHENRANGE",`^\\s*(${q[j.XRANGEPLAIN]})\\s+-\\s+(${q[j.XRANGEPLAIN]})\\s*$`);V("HYPHENRANGELOOSE",`^\\s*(${q[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${q[j.XRANGEPLAINLOOSE]})\\s*$`);V("STAR","(<|>)?=?\\s*\\*");V("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");V("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ki=F((Fv,ul)=>{"use strict";var od=Object.freeze({loose:!0}),sd=Object.freeze({}),ad=n=>n?typeof n!="object"?od:n:sd;ul.exports=ad});var ma=F((Uv,pl)=>{"use strict";var ll=/^[0-9]+$/,fl=(n,e)=>{if(typeof n=="number"&&typeof e=="number")return n===e?0:n<e?-1:1;let t=ll.test(n),r=ll.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},cd=(n,e)=>fl(e,n);pl.exports={compareIdentifiers:fl,rcompareIdentifiers:cd}});var De=F((kv,xl)=>{"use strict";var $i=nn(),{MAX_LENGTH:hl,MAX_SAFE_INTEGER:Bi}=rn(),{safeRe:qi,t:ji}=Cr(),ud=ki(),{compareIdentifiers:ga}=ma(),ya=class n{constructor(e,t){if(t=ud(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>hl)throw new TypeError(`version is longer than ${hl} characters`);$i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?qi[ji.LOOSE]:qi[ji.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Bi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Bi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Bi||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Bi)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($i("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if($i("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ga(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if($i("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ga(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?qi[ji.PRERELEASELOOSE]:qi[ji.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];r===!1&&(o=[t]),ga(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};xl.exports=ya});var tr=F(($v,ml)=>{"use strict";var dl=De(),ld=(n,e,t=!1)=>{if(n instanceof dl)return n;try{return new dl(n,e)}catch(r){if(!t)return null;throw r}};ml.exports=ld});var yl=F((Bv,gl)=>{"use strict";var fd=tr(),pd=(n,e)=>{let t=fd(n,e);return t?t.version:null};gl.exports=pd});var vl=F((qv,wl)=>{"use strict";var hd=tr(),xd=(n,e)=>{let t=hd(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};wl.exports=xd});var Cl=F((jv,El)=>{"use strict";var bl=De(),dd=(n,e,t,r,i)=>{typeof t=="string"&&(i=r,r=t,t=void 0);try{return new bl(n instanceof bl?n.version:n,t).inc(e,r,i).version}catch{return null}};El.exports=dd});var Dl=F((Xv,Sl)=>{"use strict";var Il=tr(),md=(n,e)=>{let t=Il(n,null,!0),r=Il(e,null,!0),i=t.compare(r);if(i===0)return null;let o=i>0,s=o?t:r,a=o?r:t,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let d=c?"pre":"";return t.major!==r.major?d+"major":t.minor!==r.minor?d+"minor":t.patch!==r.patch?d+"patch":"prerelease"};Sl.exports=md});var Tl=F((Wv,Rl)=>{"use strict";var gd=De(),yd=(n,e)=>new gd(n,e).major;Rl.exports=yd});var Ol=F((Vv,Pl)=>{"use strict";var wd=De(),vd=(n,e)=>new wd(n,e).minor;Pl.exports=vd});var _l=F((Gv,Nl)=>{"use strict";var bd=De(),Ed=(n,e)=>new bd(n,e).patch;Nl.exports=Ed});var Ll=F((zv,Al)=>{"use strict";var Cd=tr(),Id=(n,e)=>{let t=Cd(n,e);return t&&t.prerelease.length?t.prerelease:null};Al.exports=Id});var et=F((Hv,Fl)=>{"use strict";var Ml=De(),Sd=(n,e,t)=>new Ml(n,t).compare(new Ml(e,t));Fl.exports=Sd});var kl=F((Yv,Ul)=>{"use strict";var Dd=et(),Rd=(n,e,t)=>Dd(e,n,t);Ul.exports=Rd});var Bl=F((Qv,$l)=>{"use strict";var Td=et(),Pd=(n,e)=>Td(n,e,!0);$l.exports=Pd});var Xi=F((Kv,jl)=>{"use strict";var ql=De(),Od=(n,e,t)=>{let r=new ql(n,t),i=new ql(e,t);return r.compare(i)||r.compareBuild(i)};jl.exports=Od});var Wl=F((Zv,Xl)=>{"use strict";var Nd=Xi(),_d=(n,e)=>n.sort((t,r)=>Nd(t,r,e));Xl.exports=_d});var Gl=F((Jv,Vl)=>{"use strict";var Ad=Xi(),Ld=(n,e)=>n.sort((t,r)=>Ad(r,t,e));Vl.exports=Ld});var on=F((eb,zl)=>{"use strict";var Md=et(),Fd=(n,e,t)=>Md(n,e,t)>0;zl.exports=Fd});var Wi=F((tb,Hl)=>{"use strict";var Ud=et(),kd=(n,e,t)=>Ud(n,e,t)<0;Hl.exports=kd});var wa=F((rb,Yl)=>{"use strict";var $d=et(),Bd=(n,e,t)=>$d(n,e,t)===0;Yl.exports=Bd});var va=F((nb,Ql)=>{"use strict";var qd=et(),jd=(n,e,t)=>qd(n,e,t)!==0;Ql.exports=jd});var Vi=F((ib,Kl)=>{"use strict";var Xd=et(),Wd=(n,e,t)=>Xd(n,e,t)>=0;Kl.exports=Wd});var Gi=F((ob,Zl)=>{"use strict";var Vd=et(),Gd=(n,e,t)=>Vd(n,e,t)<=0;Zl.exports=Gd});var ba=F((sb,Jl)=>{"use strict";var zd=wa(),Hd=va(),Yd=on(),Qd=Vi(),Kd=Wi(),Zd=Gi(),Jd=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return zd(n,t,r);case"!=":return Hd(n,t,r);case">":return Yd(n,t,r);case">=":return Qd(n,t,r);case"<":return Kd(n,t,r);case"<=":return Zd(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Jl.exports=Jd});var tf=F((ab,ef)=>{"use strict";var em=De(),tm=tr(),{safeRe:zi,t:Hi}=Cr(),rm=(n,e)=>{if(n instanceof em)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(e.includePrerelease?zi[Hi.COERCEFULL]:zi[Hi.COERCE]);else{let c=e.includePrerelease?zi[Hi.COERCERTLFULL]:zi[Hi.COERCERTL],u;for(;(u=c.exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(t===null)return null;let r=t[2],i=t[3]||"0",o=t[4]||"0",s=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return tm(`${r}.${i}.${o}${s}${a}`,e)};ef.exports=rm});var nf=F((cb,rf)=>{"use strict";var Ea=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};rf.exports=Ea});var tt=F((ub,cf)=>{"use strict";var nm=/\s+/g,Ca=class n{constructor(e,t){if(t=om(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof Ia)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(nm," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!sf(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&pm(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&lm)|(this.options.loose&&fm))+":"+e,i=of.get(r);if(i)return i;let o=this.options.loose,s=o?Ne[Re.HYPHENRANGELOOSE]:Ne[Re.HYPHENRANGE];e=e.replace(s,Em(this.options.includePrerelease)),oe("hyphen replace",e),e=e.replace(Ne[Re.COMPARATORTRIM],am),oe("comparator trim",e),e=e.replace(Ne[Re.TILDETRIM],cm),oe("tilde trim",e),e=e.replace(Ne[Re.CARETTRIM],um),oe("caret trim",e);let a=e.split(" ").map(m=>hm(m,this.options)).join(" ").split(/\s+/).map(m=>bm(m,this.options));o&&(a=a.filter(m=>(oe("loose invalid filter",m,this.options),!!m.match(Ne[Re.COMPARATORLOOSE])))),oe("range list",a);let c=new Map,u=a.map(m=>new Ia(m,this.options));for(let m of u){if(sf(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return of.set(r,d),d}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>af(r,t)&&e.set.some(i=>af(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new sm(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Cm(this.set[t],e,this.options))return!0;return!1}};cf.exports=Ca;var im=nf(),of=new im,om=ki(),Ia=sn(),oe=nn(),sm=De(),{safeRe:Ne,t:Re,comparatorTrimReplace:am,tildeTrimReplace:cm,caretTrimReplace:um}=Cr(),{FLAG_INCLUDE_PRERELEASE:lm,FLAG_LOOSE:fm}=rn(),sf=n=>n.value==="<0.0.0-0",pm=n=>n.value==="",af=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},hm=(n,e)=>(n=n.replace(Ne[Re.BUILD],""),oe("comp",n,e),n=mm(n,e),oe("caret",n),n=xm(n,e),oe("tildes",n),n=ym(n,e),oe("xrange",n),n=vm(n,e),oe("stars",n),n),_e=n=>!n||n.toLowerCase()==="x"||n==="*",xm=(n,e)=>n.trim().split(/\s+/).map(t=>dm(t,e)).join(" "),dm=(n,e)=>{let t=e.loose?Ne[Re.TILDELOOSE]:Ne[Re.TILDE];return n.replace(t,(r,i,o,s,a)=>{oe("tilde",n,r,i,o,s,a);let c;return _e(i)?c="":_e(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:_e(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(oe("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,oe("tilde return",c),c})},mm=(n,e)=>n.trim().split(/\s+/).map(t=>gm(t,e)).join(" "),gm=(n,e)=>{oe("caret",n,e);let t=e.loose?Ne[Re.CARETLOOSE]:Ne[Re.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{oe("caret",n,i,o,s,a,c);let u;return _e(o)?u="":_e(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:_e(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(oe("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(oe("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),oe("caret return",u),u})},ym=(n,e)=>(oe("replaceXRanges",n,e),n.split(/\s+/).map(t=>wm(t,e)).join(" ")),wm=(n,e)=>{n=n.trim();let t=e.loose?Ne[Re.XRANGELOOSE]:Ne[Re.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{oe("xRange",n,r,i,o,s,a,c);let u=_e(o),d=u||_e(s),m=d||_e(a),h=m;return i==="="&&h&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&h?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:m&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),oe("xRange return",r),r})},vm=(n,e)=>(oe("replaceStars",n,e),n.trim().replace(Ne[Re.STAR],"")),bm=(n,e)=>(oe("replaceGTE0",n,e),n.trim().replace(Ne[e.includePrerelease?Re.GTE0PRE:Re.GTE0],"")),Em=n=>(e,t,r,i,o,s,a,c,u,d,m,h)=>(_e(r)?t="":_e(i)?t=`>=${r}.0.0${n?"-0":""}`:_e(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,_e(u)?c="":_e(d)?c=`<${+u+1}.0.0-0`:_e(m)?c=`<${u}.${+d+1}.0-0`:h?c=`<=${u}.${d}.${m}-${h}`:n?c=`<${u}.${d}.${+m+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),Cm=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(oe(n[r].semver),n[r].semver!==Ia.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var sn=F((lb,xf)=>{"use strict";var an=Symbol("SemVer ANY"),Ra=class n{static get ANY(){return an}constructor(e,t){if(t=uf(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Da("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===an?this.value="":this.value=this.operator+this.semver.version,Da("comp",this)}parse(e){let t=this.options.loose?lf[ff.COMPARATORLOOSE]:lf[ff.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new pf(r[2],this.options.loose):this.semver=an}toString(){return this.value}test(e){if(Da("Comparator.test",e,this.options.loose),this.semver===an||e===an)return!0;if(typeof e=="string")try{e=new pf(e,this.options)}catch{return!1}return Sa(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new hf(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new hf(this.value,t).test(e.semver):(t=uf(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Sa(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Sa(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};xf.exports=Ra;var uf=ki(),{safeRe:lf,t:ff}=Cr(),Sa=ba(),Da=nn(),pf=De(),hf=tt()});var cn=F((fb,df)=>{"use strict";var Im=tt(),Sm=(n,e,t)=>{try{e=new Im(e,t)}catch{return!1}return e.test(n)};df.exports=Sm});var gf=F((pb,mf)=>{"use strict";var Dm=tt(),Rm=(n,e)=>new Dm(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));mf.exports=Rm});var wf=F((hb,yf)=>{"use strict";var Tm=De(),Pm=tt(),Om=(n,e,t)=>{let r=null,i=null,o=null;try{o=new Pm(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new Tm(r,t))}),r};yf.exports=Om});var bf=F((xb,vf)=>{"use strict";var Nm=De(),_m=tt(),Am=(n,e,t)=>{let r=null,i=null,o=null;try{o=new _m(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new Nm(r,t))}),r};vf.exports=Am});var If=F((db,Cf)=>{"use strict";var Ta=De(),Lm=tt(),Ef=on(),Mm=(n,e)=>{n=new Lm(n,e);let t=new Ta("0.0.0");if(n.test(t)||(t=new Ta("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=>{let a=new Ta(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||Ef(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!t||Ef(t,o))&&(t=o)}return t&&n.test(t)?t:null};Cf.exports=Mm});var Df=F((mb,Sf)=>{"use strict";var Fm=tt(),Um=(n,e)=>{try{return new Fm(n,e).range||"*"}catch{return null}};Sf.exports=Um});var Yi=F((gb,Of)=>{"use strict";var km=De(),Pf=sn(),{ANY:$m}=Pf,Bm=tt(),qm=cn(),Rf=on(),Tf=Wi(),jm=Gi(),Xm=Vi(),Wm=(n,e,t,r)=>{n=new km(n,r),e=new Bm(e,r);let i,o,s,a,c;switch(t){case">":i=Rf,o=jm,s=Tf,a=">",c=">=";break;case"<":i=Tf,o=Xm,s=Rf,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qm(n,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],m=null,h=null;if(d.forEach(l=>{l.semver===$m&&(l=new Pf(">=0.0.0")),m=m||l,h=h||l,i(l.semver,m.semver,r)?m=l:s(l.semver,h.semver,r)&&(h=l)}),m.operator===a||m.operator===c||(!h.operator||h.operator===a)&&o(n,h.semver))return!1;if(h.operator===c&&s(n,h.semver))return!1}return!0};Of.exports=Wm});var _f=F((yb,Nf)=>{"use strict";var Vm=Yi(),Gm=(n,e,t)=>Vm(n,e,">",t);Nf.exports=Gm});var Lf=F((wb,Af)=>{"use strict";var zm=Yi(),Hm=(n,e,t)=>zm(n,e,"<",t);Af.exports=Hm});var Uf=F((vb,Ff)=>{"use strict";var Mf=tt(),Ym=(n,e,t)=>(n=new Mf(n,t),e=new Mf(e,t),n.intersects(e,t));Ff.exports=Ym});var $f=F((bb,kf)=>{"use strict";var Qm=cn(),Km=et();kf.exports=(n,e,t)=>{let r=[],i=null,o=null,s=n.sort((d,m)=>Km(d,m,t));for(let d of s)Qm(d,e,t)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[d,m]of r)d===m?a.push(d):!m&&d===s[0]?a.push("*"):m?d===s[0]?a.push(`<=${m}`):a.push(`${d} - ${m}`):a.push(`>=${d}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var Vf=F((Eb,Wf)=>{"use strict";var Bf=tt(),Oa=sn(),{ANY:Pa}=Oa,un=cn(),Na=et(),Zm=(n,e,t={})=>{if(n===e)return!0;n=new Bf(n,t),e=new Bf(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=eg(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Jm=[new Oa(">=0.0.0-0")],qf=[new Oa(">=0.0.0")],eg=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Pa){if(e.length===1&&e[0].semver===Pa)return!0;t.includePrerelease?n=Jm:n=qf}if(e.length===1&&e[0].semver===Pa){if(t.includePrerelease)return!0;e=qf}let r=new Set,i,o;for(let l of n)l.operator===">"||l.operator===">="?i=jf(i,l,t):l.operator==="<"||l.operator==="<="?o=Xf(o,l,t):r.add(l.semver);if(r.size>1)return null;let s;if(i&&o){if(s=Na(i.semver,o.semver,t),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let l of r){if(i&&!un(l,String(i),t)||o&&!un(l,String(o),t))return null;for(let y of e)if(!un(l,String(y),t))return!1;return!0}let a,c,u,d,m=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&o.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let l of e){if(d=d||l.operator===">"||l.operator===">=",u=u||l.operator==="<"||l.operator==="<=",i){if(h&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===h.major&&l.semver.minor===h.minor&&l.semver.patch===h.patch&&(h=!1),l.operator===">"||l.operator===">="){if(a=jf(i,l,t),a===l&&a!==i)return!1}else if(i.operator===">="&&!un(i.semver,String(l),t))return!1}if(o){if(m&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===m.major&&l.semver.minor===m.minor&&l.semver.patch===m.patch&&(m=!1),l.operator==="<"||l.operator==="<="){if(c=Xf(o,l,t),c===l&&c!==o)return!1}else if(o.operator==="<="&&!un(o.semver,String(l),t))return!1}if(!l.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&d&&!i&&s!==0||h||m)},jf=(n,e,t)=>{if(!n)return e;let r=Na(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},Xf=(n,e,t)=>{if(!n)return e;let r=Na(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};Wf.exports=Zm});var ln=F((Cb,Hf)=>{"use strict";var _a=Cr(),Gf=rn(),tg=De(),zf=ma(),rg=tr(),ng=yl(),ig=vl(),og=Cl(),sg=Dl(),ag=Tl(),cg=Ol(),ug=_l(),lg=Ll(),fg=et(),pg=kl(),hg=Bl(),xg=Xi(),dg=Wl(),mg=Gl(),gg=on(),yg=Wi(),wg=wa(),vg=va(),bg=Vi(),Eg=Gi(),Cg=ba(),Ig=tf(),Sg=sn(),Dg=tt(),Rg=cn(),Tg=gf(),Pg=wf(),Og=bf(),Ng=If(),_g=Df(),Ag=Yi(),Lg=_f(),Mg=Lf(),Fg=Uf(),Ug=$f(),kg=Vf();Hf.exports={parse:rg,valid:ng,clean:ig,inc:og,diff:sg,major:ag,minor:cg,patch:ug,prerelease:lg,compare:fg,rcompare:pg,compareLoose:hg,compareBuild:xg,sort:dg,rsort:mg,gt:gg,lt:yg,eq:wg,neq:vg,gte:bg,lte:Eg,cmp:Cg,coerce:Ig,Comparator:Sg,Range:Dg,satisfies:Rg,toComparators:Tg,maxSatisfying:Pg,minSatisfying:Og,minVersion:Ng,validRange:_g,outside:Ag,gtr:Lg,ltr:Mg,intersects:Fg,simplifyRange:Ug,subset:kg,SemVer:tg,re:_a.re,src:_a.src,tokens:_a.t,SEMVER_SPEC_VERSION:Gf.SEMVER_SPEC_VERSION,RELEASE_TYPES:Gf.RELEASE_TYPES,compareIdentifiers:zf.compareIdentifiers,rcompareIdentifiers:zf.rcompareIdentifiers}});var lp=F(($a,Ba)=>{(function(n,e){typeof $a=="object"&&typeof Ba<"u"?Ba.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})($a,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",c="week",u="month",d="quarter",m="year",h="date",l="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var O=["th","st","nd","rd"],M=P%100;return"["+P+(O[(M-20)%10]||O[M]||O[0])+"]"}},_=function(P,O,M){var k=String(P);return!k||k.length>=O?P:""+Array(O+1-k.length).join(M)+P},S={s:_,z:function(P){var O=-P.utcOffset(),M=Math.abs(O),k=Math.floor(M/60),A=M%60;return(O<=0?"+":"-")+_(k,2,"0")+":"+_(A,2,"0")},m:function P(O,M){if(O.date()<M.date())return-P(M,O);var k=12*(M.year()-O.year())+(M.month()-O.month()),A=O.clone().add(k,u),X=M-A<0,B=O.clone().add(k+(X?-1:1),u);return+(-(k+(M-A)/(X?A-B:B-A))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:u,y:m,w:c,d:a,D:h,h:s,m:o,s:i,ms:r,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},v="en",p={};p[v]=R;var x="$isDayjsObject",E=function(P){return P instanceof C||!(!P||!P[x])},N=function P(O,M,k){var A;if(!O)return v;if(typeof O=="string"){var X=O.toLowerCase();p[X]&&(A=X),M&&(p[X]=M,A=X);var B=O.split("-");if(!A&&B.length>1)return P(B[0])}else{var Q=O.name;p[Q]=O,A=Q}return!k&&A&&(v=A),A||!k&&v},g=function(P,O){if(E(P))return P.clone();var M=typeof O=="object"?O:{};return M.date=P,M.args=arguments,new C(M)},D=S;D.l=N,D.i=E,D.w=function(P,O){return g(P,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var C=function(){function P(M){this.$L=N(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[x]=!0}var O=P.prototype;return O.parse=function(M){this.$d=function(k){var A=k.date,X=k.utc;if(A===null)return new Date(NaN);if(D.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var B=A.match(y);if(B){var Q=B[2]-1||0,Z=(B[7]||"0").substring(0,3);return X?new Date(Date.UTC(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)):new Date(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)}}return new Date(A)}(M),this.init()},O.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},O.$utils=function(){return D},O.isValid=function(){return this.$d.toString()!==l},O.isSame=function(M,k){var A=g(M);return this.startOf(k)<=A&&A<=this.endOf(k)},O.isAfter=function(M,k){return g(M)<this.startOf(k)},O.isBefore=function(M,k){return this.endOf(k)<g(M)},O.$g=function(M,k,A){return D.u(M)?this[k]:this.set(A,M)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(M,k){var A=this,X=!!D.u(k)||k,B=D.p(M),Q=function(f,L){var I=D.w(A.$u?Date.UTC(A.$y,L,f):new Date(A.$y,L,f),A);return X?I:I.endOf(a)},Z=function(f,L){return D.w(A.toDate()[f].apply(A.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(L)),A)},ue=this.$W,de=this.$M,Pe=this.$D,it="set"+(this.$u?"UTC":"");switch(B){case m:return X?Q(1,0):Q(31,11);case u:return X?Q(1,de):Q(0,de+1);case c:var gt=this.$locale().weekStart||0,w=(ue<gt?ue+7:ue)-gt;return Q(X?Pe-w:Pe+(6-w),de);case a:case h:return Z(it+"Hours",0);case s:return Z(it+"Minutes",1);case o:return Z(it+"Seconds",2);case i:return Z(it+"Milliseconds",3);default:return this.clone()}},O.endOf=function(M){return this.startOf(M,!1)},O.$set=function(M,k){var A,X=D.p(M),B="set"+(this.$u?"UTC":""),Q=(A={},A[a]=B+"Date",A[h]=B+"Date",A[u]=B+"Month",A[m]=B+"FullYear",A[s]=B+"Hours",A[o]=B+"Minutes",A[i]=B+"Seconds",A[r]=B+"Milliseconds",A)[X],Z=X===a?this.$D+(k-this.$W):k;if(X===u||X===m){var ue=this.clone().set(h,1);ue.$d[Q](Z),ue.init(),this.$d=ue.set(h,Math.min(this.$D,ue.daysInMonth())).$d}else Q&&this.$d[Q](Z);return this.init(),this},O.set=function(M,k){return this.clone().$set(M,k)},O.get=function(M){return this[D.p(M)]()},O.add=function(M,k){var A,X=this;M=Number(M);var B=D.p(k),Q=function(de){var Pe=g(X);return D.w(Pe.date(Pe.date()+Math.round(de*M)),X)};if(B===u)return this.set(u,this.$M+M);if(B===m)return this.set(m,this.$y+M);if(B===a)return Q(1);if(B===c)return Q(7);var Z=(A={},A[o]=e,A[s]=t,A[i]=n,A)[B]||1,ue=this.$d.getTime()+M*Z;return D.w(ue,this)},O.subtract=function(M,k){return this.add(-1*M,k)},O.format=function(M){var k=this,A=this.$locale();if(!this.isValid())return A.invalidDate||l;var X=M||"YYYY-MM-DDTHH:mm:ssZ",B=D.z(this),Q=this.$H,Z=this.$m,ue=this.$M,de=A.weekdays,Pe=A.months,it=A.meridiem,gt=function(L,I,Y,ne){return L&&(L[I]||L(k,X))||Y[I].slice(0,ne)},w=function(L){return D.s(Q%12||12,L,"0")},f=it||function(L,I,Y){var ne=L<12?"AM":"PM";return Y?ne.toLowerCase():ne};return X.replace(b,function(L,I){return I||function(Y){switch(Y){case"YY":return String(k.$y).slice(-2);case"YYYY":return D.s(k.$y,4,"0");case"M":return ue+1;case"MM":return D.s(ue+1,2,"0");case"MMM":return gt(A.monthsShort,ue,Pe,3);case"MMMM":return gt(Pe,ue);case"D":return k.$D;case"DD":return D.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return gt(A.weekdaysMin,k.$W,de,2);case"ddd":return gt(A.weekdaysShort,k.$W,de,3);case"dddd":return de[k.$W];case"H":return String(Q);case"HH":return D.s(Q,2,"0");case"h":return w(1);case"hh":return w(2);case"a":return f(Q,Z,!0);case"A":return f(Q,Z,!1);case"m":return String(Z);case"mm":return D.s(Z,2,"0");case"s":return String(k.$s);case"ss":return D.s(k.$s,2,"0");case"SSS":return D.s(k.$ms,3,"0");case"Z":return B}return null}(L)||B.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(M,k,A){var X,B=this,Q=D.p(k),Z=g(M),ue=(Z.utcOffset()-this.utcOffset())*e,de=this-Z,Pe=function(){return D.m(B,Z)};switch(Q){case m:X=Pe()/12;break;case u:X=Pe();break;case d:X=Pe()/3;break;case c:X=(de-ue)/6048e5;break;case a:X=(de-ue)/864e5;break;case s:X=de/t;break;case o:X=de/e;break;case i:X=de/n;break;default:X=de}return A?X:D.a(X)},O.daysInMonth=function(){return this.endOf(u).$D},O.$locale=function(){return p[this.$L]},O.locale=function(M,k){if(!M)return this.$L;var A=this.clone(),X=N(M,k,!0);return X&&(A.$L=X),A},O.clone=function(){return D.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},P}(),T=C.prototype;return g.prototype=T,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",u],["$y",m],["$D",h]].forEach(function(P){T[P[1]]=function(O){return this.$g(O,P[0],P[1])}}),g.extend=function(P,O){return P.$i||(P(O,C,g),P.$i=!0),g},g.locale=N,g.isDayjs=E,g.unix=function(P){return g(1e3*P)},g.en=p[v],g.Ls=p,g.p={},g})});var fp=F((qa,ja)=>{(function(n,e){typeof qa=="object"&&typeof ja<"u"?ja.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_relativeTime=e()})(qa,function(){"use strict";return function(n,e,t){n=n||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(a,c,u,d){return r.fromToBase(a,c,u,d)}t.en.relativeTime=i,r.fromToBase=function(a,c,u,d,m){for(var h,l,y,b=u.$locale().relativeTime||i,R=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=R.length,S=0;S<_;S+=1){var v=R[S];v.d&&(h=d?t(a).diff(u,v.d,!0):u.diff(a,v.d,!0));var p=(n.rounding||Math.round)(Math.abs(h));if(y=h>0,p<=v.r||!v.r){p<=1&&S>0&&(v=R[S-1]);var x=b[v.l];m&&(p=m(""+p)),l=typeof x=="string"?x.replace("%d",p):x(p,c,v.l,y);break}}if(c)return l;var E=y?b.future:b.past;return typeof E=="function"?E(l):E.replace("%s",l)},r.to=function(a,c){return o(a,c,this,!0)},r.from=function(a,c){return o(a,c,this)};var s=function(a){return a.$u?t.utc():t()};r.toNow=function(a){return this.to(s(this),a)},r.fromNow=function(a){return this.from(s(this),a)}}})});var Zg={};Ya(Zg,{activate:()=>Qg,deactivate:()=>Kg});module.exports=Lp(Zg);var Tp=W(require("path")),ze=require("vscode");var hc=require("vscode");var Ct=W(require("path")),z=require("vscode");var Ur=(i=>(i.empty="only the target itself",i.files="the target and any immediate file children thereof",i.immediates="the target and any immediate children thereof",i.infinity="the target and all of its descendants\u2014full recursion",i))(Ur||{});var J={};Ya(J,{default:()=>Qa.default});Ho(J,require("fs"));var Qa=W(require("fs"),1);function le(n){return new Promise((e,t)=>{(0,J.access)(n,r=>e(!r))})}var Ka=require("util"),ot=(0,Ka.promisify)(J.lstat);var Za=require("util"),Yo=(0,Za.promisify)(J.readFile);var Ja=require("util"),zt=(0,Ja.promisify)(J.readdir);var ec=require("util"),Qo=(0,ec.promisify)(J.rmdir);var tc=require("util"),wt=(0,tc.promisify)(J.stat);var rc=require("util"),Ht=(0,rc.promisify)(J.unlink);var nc=require("util"),Ko=(0,nc.promisify)(J.writeFile);var cr=W(require("path")),Zo=require("vscode"),ar=class{constructor(e,t=!1){this.expression=e;this.recursive=t}get label(){let e=this.recursive?" (Recursive)":"";return`${this.expression}${e}`}get description(){let e=this.recursive?" (Recursive)":"";return`Add '${this.expression}' to 'svn:ignore'${e}`}};async function ic(n,e){if(e.length===0)return!1;let t=new RegExp("\\.[^\\.]+(\\.map)?$","i");if(e.length===1){let y=e[0],b=y.fsPath.match(t),R=b&&b[0]?b[0]:"",_=cr.basename(y.fsPath),S=cr.dirname(y.fsPath),v=[];v.push(new ar(_)),R&&v.push(new ar("*"+R)),v.push(new ar(_,!0)),R&&v.push(new ar("*"+R,!0));let p=await Zo.window.showQuickPick(v);return p?n.addToIgnore([p.expression],S,p.recursive):!1}let r=e.length,i="(Recursive)",o=`Ignore ${r} by filename`,s=`Ignore ${r} by extension`,a=`Ignore ${r} by filename ${i}`,c=`Ignore ${r} by extension ${i}`,u=[o,s,a,c],d=await Zo.window.showQuickPick(u);if(!d)return!1;let m=d.startsWith(o),h=d.endsWith(i),l={};for(let y of e){let b=cr.dirname(y.fsPath),R=cr.basename(y.fsPath),_=y.fsPath.match(t),S=_&&_[0]?_[0]:"";typeof l[b]>"u"&&(l[b]=[]),m?l[b].push(R):S&&l[b].push("*"+S)}for(let y in l)if(l.hasOwnProperty(y)){let b=[...new Set(l[y])];await n.addToIgnore(b,y,h)}return!0}var On=require("vscode");function oc(n,e,t){let r=[],i=0;for(let o of t){let s=o.originalEndLineNumber===0,a=o.modifiedEndLineNumber===0;if(r.push(n.getText(new On.Range(i,0,s?o.originalStartLineNumber:o.originalStartLineNumber-1,0))),!a){let c=o.modifiedStartLineNumber-1,u=0;s&&o.originalStartLineNumber===n.lineCount&&(c=n.lineCount-1,u=n.lineAt(c).range.end.character),r.push(e.getText(new On.Range(c,u,o.modifiedEndLineNumber,0)))}i=s?o.originalStartLineNumber:o.originalEndLineNumber}return r.push(n.getText(new On.Range(i,0,n.lineCount,0))),r.join("")}var as=W(require("path")),_t=require("vscode");var Fe=W(require("path")),sc=require("vscode");function Jo(n){return n.then(()=>{})}function Ie(n){return n.forEach(e=>e.dispose()),[]}function Ue(n){return{dispose:n}}function Mp(n){return Ue(()=>Ie(n))}function st(...n){return(e,t=null,r)=>{let i=Mp(n.map(o=>o(s=>e.call(t,s))));return r&&r.push(i),i}}function me(n,e){return(t,r=null,i)=>n(o=>e(o)&&t.call(r,o),null,i)}function Fp(n){return(e,t=null,r)=>{let i=n(o=>(i.dispose(),e.call(t,o)),null,r);return i}}function Yt(n){return new Promise(e=>Fp(n)(e))}var Up=new RegExp(Fe.sep==="/"?"\\\\":"/","g"),kp=new RegExp("^\\\\(\\w:)","g");function rt(n){return n=n.replace(Up,Fe.sep),n=n.replace(kp,"$1"),Fe.sep==="\\"&&(n=n.charAt(0).toLowerCase()+n.slice(1)),n}function at(n){return n=rt(n),Fe.sep==="\\"&&(n=n.toLowerCase()),n}function Se(n,e){return n.trim()===""||e.trim()===""?!1:(n=n.replace(/[\\\/]/g,Fe.sep),e=e.replace(/[\\\/]/g,Fe.sep),Fe.sep==="\\"&&(n=n.replace(/^\\/,"").toLowerCase(),e=e.replace(/^\\/,"").toLowerCase()),n===e?!0:(n.charAt(n.length-1)!==Fe.sep&&(n+=Fe.sep),e.startsWith(n)))}function es(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>t===0?e.toLowerCase():e.toUpperCase()).replace(/[\s\-]+/g,"")}function ts(n){return new Promise(e=>setTimeout(e,n))}function Nn(n){switch(n){case"CurrentBranch":case"Log":case"Show":case"Info":case"Changes":return!0;default:return!1}}async function rs(n){await le(n)&&(await ot(n)).isDirectory()&&(await Promise.all((await zt(n)).map(async e=>{let t=Fe.join(n,e);(await ot(t)).isDirectory()?await rs(t):await Ht(t)})),await Qo(n))}function He(n){if(n===void 0)throw new Error("undefined unwrap");return n}function _n(n){return/@/.test(n)&&(n+="@"),n}function vt(){return process.env.SVN_ASP_DOT_NET_HACK?"_svn":".svn"}async function ns(n,e=!0){let t=vt(),r=await le(`${n}/${t}`);if(r||!e)return r;let i=Fe.dirname(n);return i===n||i==="."?!1:ns(i,!0)}function Nt(n,e){sc.commands.executeCommand("setContext",n,e)}function $p(n){return/^[a-zA-Z]:\\/.test(n)}function ac(n,e){return $p(n)&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e}var cc=Ue(()=>null);function kr(n){return(e,t,r)=>{let i=null,o=null;if(typeof r.value=="function"?(i="value",o=r.value):typeof r.get=="function"&&(i="get",o=r.get),!o||!i)throw new Error("not supported");r[i]=n(o,t)}}function Bp(n,e){let t=`$memoize$${e}`;return function(...r){return this.hasOwnProperty(t)||Object.defineProperty(this,t,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[t]}}var ge=kr(Bp);function qp(n,e){let t=`$throttle$current$${e}`,r=`$throttle$next$${e}`,i=function(...o){if(this[r])return this[r];if(this[t])return this[r]=Jo(this[t]).then(()=>(this[r]=void 0,i.apply(this,o))),this[r];this[t]=n.apply(this,o);let s=()=>this[t]=void 0;return Jo(this[t]).then(s,s),this[t]};return i}var ur=kr(qp);function jp(n,e){let t=`__$sequence$${e}`;return function(...r){let i=this[t]||Promise.resolve(null),o=async()=>n.apply(this,r);return this[t]=i.then(o,o),this[t]}}var uc=kr(jp);function Oe(n){return kr((e,t)=>{let r=`$debounce$${t}`;return function(...i){clearTimeout(this[r]),this[r]=setTimeout(()=>e.apply(this,i),n)}})}var is={};function lc(n){return kr((e,t)=>function(...r){let i=is[n]||Promise.resolve(null),o=async()=>e.apply(this,r);return is[n]=i.then(o,o),is[n]})}var lr=require("vscode"),os="svn",ss=class{constructor(){this._onDidChange=new lr.EventEmitter;this.configuration=lr.workspace.getConfiguration(os),lr.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}get onDidChange(){return this._onDidChange.event}onConfigurationChanged(e){e.affectsConfiguration(os)&&(this.configuration=lr.workspace.getConfiguration(os),this._onDidChange.fire(e))}get(e,t){return this.configuration.get(e,t)}update(e,t,r){return this.configuration.update(e,t,r)}inspect(e){return this.configuration.inspect(e)}},$=new ss;var Xp=as.join(__dirname,"..","icons");function ye(n,e){return _t.Uri.file(as.join(Xp,e,`${n}.svg`))}var bt=class bt{constructor(e,t,r,i,o=!1){this._resourceUri=e;this._type=t;this._renameResourceUri=r;this._props=i;this._remote=o}get resourceUri(){return this._resourceUri}get type(){return this._type}get renameResourceUri(){return this._renameResourceUri}get props(){return this._props}get remote(){return this._remote}get decorations(){let e={iconPath:this.getIconPath("light")},t={iconPath:this.getIconPath("dark")},r=this.tooltip,i=this.strikeThrough,o=this.faded;return{strikeThrough:i,faded:o,tooltip:r,light:e,dark:t}}get command(){let e=$.get("diff.withHead",!0),t=$.get("sourceControl.changesLeftClick","open diff");return!this.remote&&t==="open"?{command:"svn.openFile",title:"Open file",arguments:[this]}:this.remote||e?{command:"svn.openResourceHead",title:"Open Diff With Head",arguments:[this]}:{command:"svn.openResourceBase",title:"Open Diff With Base",arguments:[this]}}getIconPath(e){if(this.type==="added"&&this.renameResourceUri)return bt.icons[e].Renamed;let t=this.type.charAt(0).toUpperCase()+this.type.slice(1);if(typeof bt.icons[e][t]<"u")return bt.icons[e][t]}get tooltip(){return this.type==="added"&&this.renameResourceUri?"Renamed from "+this.renameResourceUri.fsPath:this.type==="normal"&&this.props&&this.props!=="none"?"Property "+this.props.charAt(0).toUpperCase()+this.props.slice(1):this.type.charAt(0).toUpperCase()+this.type.slice(1)}get strikeThrough(){return this.type==="deleted"}get faded(){return!1}get letter(){switch(this.type){case"added":return this.renameResourceUri?"R":"A";case"conflicted":return"C";case"deleted":return"D";case"external":return"E";case"ignored":return"I";case"modified":return"M";case"replaced":return"R";case"unversioned":return"U";case"missing":return"!";default:return}}get color(){switch(this.type){case"modified":case"replaced":return new _t.ThemeColor("gitDecoration.modifiedResourceForeground");case"deleted":case"missing":return new _t.ThemeColor("gitDecoration.deletedResourceForeground");case"added":case"unversioned":return new _t.ThemeColor("gitDecoration.untrackedResourceForeground");case"external":case"ignored":return new _t.ThemeColor("gitDecoration.ignoredResourceForeground");case"conflicted":return new _t.ThemeColor("gitDecoration.conflictingResourceForeground");default:return}}get priority(){switch(this.type){case"modified":return 2;case"ignored":return 3;case"deleted":case"added":case"replaced":case"missing":return 4;default:return 1}}};bt.icons={light:{Added:ye("status-added","light"),Conflicted:ye("status-conflicted","light"),Deleted:ye("status-deleted","light"),Ignored:ye("status-ignored","light"),Missing:ye("status-missing","light"),Modified:ye("status-modified","light"),Renamed:ye("status-renamed","light"),Replaced:ye("status-replaced","light"),Unversioned:ye("status-unversioned","light")},dark:{Added:ye("status-added","dark"),Conflicted:ye("status-conflicted","dark"),Deleted:ye("status-deleted","dark"),Ignored:ye("status-ignored","dark"),Missing:ye("status-missing","dark"),Modified:ye("status-modified","dark"),Renamed:ye("status-renamed","dark"),Replaced:ye("status-replaced","dark"),Unversioned:ye("status-unversioned","dark")}},H([ge],bt.prototype,"resourceUri",1),H([ge],bt.prototype,"type",1),H([ge],bt.prototype,"command",1);var ee=bt;var pc=W(require("path")),An=require("vscode");var cs=W(require("path")),fc=require("vscode");function At(n){return JSON.parse(n.query)}function Ye(n,e,t={},r=!1){let i={action:e,fsPath:n.fsPath,extra:t};return n.with({scheme:"svn",path:r?n.path+vt():n.path,query:JSON.stringify(i)})}function Et(n,e){let t=cs.join(__dirname,"..","icons");return fc.Uri.file(cs.join(t,e,`${n}.svg`))}var qe=class{constructor(e,t,r){this.uri=e;this.type=t;this.repository=r}get props(){}get label(){return pc.relative(this.repository.workspaceRoot,this.uri.fsPath)}get contextValue(){return`incomingChange:${this.type}`}getTreeItem(){let e=new An.TreeItem(this.label,An.TreeItemCollapsibleState.None);return e.iconPath={dark:Et(`status-${this.type}`,"dark"),light:Et(`status-${this.type}`,"light")},e.contextValue=this.contextValue,e.command=this.getCommand(),e}getChildren(){return Promise.resolve([])}getCommand(){switch(this.type){case"modified":return{command:"svn.openChangeHead",title:"Open Changes with HEAD",arguments:[new ee(this.uri,this.type,void 0,"none",!0)]};case"deleted":return{command:"svn.openFile",title:"Open File",arguments:[this.uri]};case"added":return{command:"svn.openHEADFile",title:"Open File (HEAD)",arguments:[new ee(this.uri,this.type,void 0,"none",!0)]};default:console.error(`No command returned for type ${this.type}`);return}}};var U=class{constructor(e,t={}){if(t.repository){let r=this.createRepositoryCommand(this.execute);this._disposable=z.commands.registerCommand(e,r);return}if(!t.repository){this._disposable=z.commands.registerCommand(e,(...r)=>this.execute(...r));return}}dispose(){var e;(e=this._disposable)==null||e.dispose()}createRepositoryCommand(e){return async(...r)=>{let i=await z.commands.executeCommand("svn.getSourceControlManager",""),o=i.getRepository(r[0]),s;return o?s=Promise.resolve(o):i.repositories.length===1?s=Promise.resolve(i.repositories[0]):s=i.pickRepository(),s.then(c=>c?Promise.resolve(e.apply(this,[c,...r])):Promise.resolve()).catch(c=>{console.error(c)})}}async getResourceStates(e){if(e.length===0||!(e[0].resourceUri instanceof z.Uri)){let t=await this.getSCMResource();if(!t)return[];e=[t]}return e.filter(t=>t instanceof ee)}async runByRepository(e,t){let r=e instanceof z.Uri?[e]:e,i=e instanceof z.Uri,o=await z.commands.executeCommand("svn.getSourceControlManager",""),s=[];for(let c of r){let u=o.getRepository(c);if(!u){console.warn("Could not find Svn repository for ",c);continue}let d=s.filter(m=>m.repository===u)[0];d?d.resources.push(c):s.push({repository:u,resources:[c]})}let a=s.map(({repository:c,resources:u})=>i?t(c,u[0]):t(c,u));return Promise.all(a)}async getSCMResource(e){if(e=e||z.window.activeTextEditor&&z.window.activeTextEditor.document.uri,!!e){if(e.scheme==="svn"){let{fsPath:t}=At(e);e=z.Uri.file(t)}if(e.scheme==="file"){let r=(await z.commands.executeCommand("svn.getSourceControlManager","")).getRepository(e);return r?r.getResourceFromFile(e):void 0}}}async _openResource(e,t,r,i,o){let s=await this.getLeftResource(e,t),a=this.getRightResource(e,t),c=this.getTitle(e,t);if(e.remote&&s&&([s,a]=[a,s]),!a){console.error("oh no");return}if(await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())return;let u={preserveFocus:i,preview:r,viewColumn:z.ViewColumn.Active},d=z.window.activeTextEditor;return o&&d&&d.document.uri.toString()===a.toString()&&(u.selection=d.selection),s?z.commands.executeCommand("vscode.diff",s,a,c,u):z.commands.executeCommand("vscode.open",a,u)}async getLeftResource(e,t=""){if(e.remote)return e.type!=="deleted"?Ye(e.resourceUri,"SHOW",{ref:t}):void 0;if(e.type==="added"&&e.renameResourceUri)return Ye(e.renameResourceUri,"SHOW",{ref:t});if(e.type==="conflicted"&&await le(e.resourceUri.fsPath)){let r=await Yo(e.resourceUri.fsPath,{encoding:"utf8"});if(/^<{7}[^]+^={7}[^]+^>{7}/m.test(r))return}switch(e.type){case"conflicted":case"modified":case"replaced":return Ye(e.resourceUri,"SHOW",{ref:t})}}getRightResource(e,t=""){if(e.remote)return e.type!=="added"?e.resourceUri:void 0;switch(e.type){case"added":case"conflicted":case"ignored":case"modified":case"unversioned":case"replaced":return e.resourceUri;case"deleted":case"missing":return Ye(e.resourceUri,"SHOW",{ref:t})}}getTitle(e,t){if(e.type==="added"&&e.renameResourceUri){let i=Ct.basename(e.renameResourceUri.fsPath),o=Ct.relative(Ct.dirname(e.renameResourceUri.fsPath),e.resourceUri.fsPath);return t?`${i} -> ${o} (${t})`:`${i} -> ${o}`}let r=Ct.basename(e.resourceUri.fsPath);return t?`${r} (${t})`:""}async openChange(e,t,r){let i=e instanceof ee,o=e instanceof z.Uri||!e,s;if(e instanceof z.Uri){let c=await this.getSCMResource(e);c!==void 0&&(s=[c])}else if(e instanceof qe)s=[new ee(e.uri,e.type,void 0,e.props,!0)];else{let c;e instanceof ee?c=e:c=await this.getSCMResource(),c&&(s=[...r,c])}if(!s)return;let a=s.length===1?void 0:!1;for(let c of s)await this._openResource(c,t,a,i,o)}async showDiffPath(e,t){try{let r=Ct.join(e.root,vt(),"tmp","svn.patch");if(await le(r))try{await Ht(r)}catch{}let i=z.Uri.file(r).with({scheme:"untitled"}),o=await z.workspace.openTextDocument(i);await(await z.window.showTextDocument(o)).edit(a=>{a.delete(new z.Range(new z.Position(0,0),new z.Position(Number.MAX_SAFE_INTEGER,0))),a.insert(new z.Position(0,0),t)})}catch(r){console.error(r),z.window.showErrorMessage("Unable to patch")}}async _revertChanges(e,t){let r=e.document,i=r.uri;if(i.scheme!=="file")return;let o=Ye(i,"SHOW",{ref:"BASE"}),s=await z.workspace.openTextDocument(o),a=oc(s,r,t),c=new z.WorkspaceEdit;c.replace(i,new z.Range(new z.Position(0,0),r.lineAt(r.lineCount-1).range.end),a),z.workspace.applyEdit(c),await r.save()}async addToIgnore(e){await this.runByRepository(e,async(t,r)=>{if(t)try{await ic(t,r)&&z.window.showInformationMessage("File(s) is now being ignored")}catch(i){console.log(i),z.window.showErrorMessage("Unable to set property ignore")}})}};var Ln=class extends U{constructor(){super("svn.add")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);try{await i.addFiles(s)}catch(a){console.log(a),hc.window.showErrorMessage("Unable to add file")}})}};var Mn=class extends U{constructor(){super("svn.addToIgnoreExplorer")}async execute(e,t){if(!(!t||t.length===0))return this.addToIgnore(t)}};var Fn=class extends U{constructor(){super("svn.addToIgnoreSCM")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);return this.addToIgnore(r)}};var je=require("vscode");var Mt=require("vscode");var Lt=class{constructor(e){this.group=e}get label(){return this.group.id.replace(/^changelist-/,"")}get id(){return this.group.id}get description(){return this.group.label}get resourceGroup(){return this.group}};var $r=class{constructor(e){this._id=e}get label(){return this._id}get description(){return"Ignored on commit"}};var fr=class{get label(){return"$(plus) New changelist"}get description(){return"Create a new change list"}};var pr=class{get label(){return"$(dash) Remove changelist"}get description(){return"Remove changelist of file(s)"}};var Un=class{constructor(e,t,r=!1){this._repository=e;this._state=t;this.picked=r}get label(){return this._repository.repository.removeAbsolutePath(this._state.resourceUri.fsPath)}get description(){return this._state.resourceUri.fsPath}get state(){return this._state}};function Wp(n,e=!1){let t=[];t.push(new fr),n.changelists.forEach((i,o)=>{i.resourceStates.length&&t.push(new Lt(i))});let r=$.get("sourceControl.ignoreOnCommit");for(let i of r)t.some(o=>o.label===i)||t.push(new $r(i));return e&&t.push(new pr),t}function Vp(n){let e=[];n.changes.resourceStates.length&&e.push(new Lt(n.changes));let t=$.get("sourceControl.ignoreOnCommit");return n.changelists.forEach((r,i)=>{r.resourceStates.length&&!t.includes(i)&&e.push(new Lt(r))}),e}async function xc(n,e=!1){let t=Wp(n,e),r=await Mt.window.showQuickPick(t,{placeHolder:"Select an existing changelist or create a new"});if(!r)return;let i;if(r instanceof pr)return!1;if(r instanceof fr){let o=await Mt.window.showInputBox({placeHolder:"Changelist name",prompt:"Please enter a changelist name"});if(!o)return;i=o}else i=r.label;return i}async function Gp(n){let e=Vp(n);if(e.length===0){Mt.window.showInformationMessage("There are no changes to commit.");return}let t;return e.length===1&&n.changes.resourceStates.length?t=e[0]:t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist to commit"}),t}async function dc(n){let e=await Gp(n);if(e){if(e.id==="changes"&&e.resourceGroup.resourceStates.length>1){let t=$.get("commit.changes.selectedAll",!0),r=e.resourceGroup.resourceStates.map(o=>new Un(n,o,t)),i=await Mt.window.showQuickPick(r,{placeHolder:"Select files to commit",canPickMany:!0});return i!==void 0&&i.length>0?i.map(o=>o.state):void 0}return e.resourceGroup.resourceStates}}function zp(n){let e=[];return n.changelists.forEach((t,r)=>{t.resourceStates.length&&e.push(new Lt(t))}),e}async function mc(n){let e=zp(n);if(!e.length){Mt.window.showErrorMessage("No changelists to pick from");return}let t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist"});if(t)return t.label}var kn=class extends U{constructor(){super("svn.changelist")}async execute(...e){let t;if(e[0]instanceof ee)t=e.map(m=>m.resourceUri);else if(e[0]instanceof je.Uri)t=e[1];else if(je.window.activeTextEditor)t=[je.window.activeTextEditor.document.uri];else{console.error("Unhandled type for changelist command");return}let r=await je.commands.executeCommand("svn.getSourceControlManager",""),i=t.map(async m=>r.getRepositoryFromUri(m)),o=await Promise.all(i);if(o=o.filter(m=>m),o.length===0){je.window.showErrorMessage("Files are not under version control and cannot be added to a change list");return}if(Array.from(new Set(o)).length!==1){je.window.showErrorMessage("Unable to add files from different repositories to change list");return}if(o.length!==t.length){je.window.showErrorMessage("Some Files are not under version control and cannot be added to a change list");return}let a=o[0];if(!a)return;let c=t.map(m=>m.fsPath),u=!1;a.changelists.forEach((m,h)=>{if(m.resourceStates.some(l=>c.some(y=>at(y)===at(l.resourceUri.path))))return u=!0,!1});let d=await xc(a,u);if(!(!d&&d!==!1))if(d===!1)try{await a.removeChangelist(c)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to remove file "${c.join(",")}" from changelist`)}else try{await a.addChangelist(c,d),je.window.showInformationMessage(`Added files "${c.join(",")}" to changelist "${d}"`)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to add file "${c.join(",")}" to changelist "${d}"`)}}};var ua=W(require("os")),mi=W(require("path")),ce=require("vscode");var dr=require("vscode");var Qt=class{constructor(e,t){this.dir=e;this.parent=t}get label(){return this.branch?`$(git-branch) ${this.dir.name}`:`$(file-directory) ${this.dir.name}`}get description(){return`r${this.dir.commit.revision} | ${this.dir.commit.author} | ${new Date(this.dir.commit.date).toLocaleString()}`}get path(){return this.parent?`${this.parent}/${this.dir.name}`:this.dir.name}get branch(){return It(this.path)}};H([ge],Qt.prototype,"branch",1);var hr=class{constructor(e){this._parent=e}get label(){return"$(plus) Create new branch"}get description(){return`Create new branch in "${this._parent}"`}};var xr=class{constructor(e){this.path=e}get label(){return`$(arrow-left) back to /${this.path}`}get description(){return"Back to parent"}};function It(n){let e=["layout.trunkRegex","layout.branchesRegex","layout.tagsRegex"];for(let t of e){let r=$.get(t);if(!r)continue;let i=$.get(`${t}Name`,1)+2,o=new RegExp(`(^|/)(${r})$`),s=n.match(o);if(s&&s[2]&&s[i])return{name:s[i],path:s[2]}}}async function mr(n,e=!1,t){let r=n.repository.list(t);dr.window.withProgress({location:dr.ProgressLocation.Window,title:"Checking remote branches"},()=>r);let o=(await r).filter(c=>c.kind==="dir"),s=[];if(t){let c=t.split("/");c.pop();let u=c.join("/");s.push(new xr(u))}e&&t&&It(`${t}/test`)&&s.push(new hr(t)),s.push(...o.map(c=>new Qt(c,t)));let a=await dr.window.showQuickPick(s);if(a){if(a instanceof xr)return mr(n,e,a.path);if(a instanceof Qt)return a.branch?a.branch:mr(n,e,a.path);if(a instanceof hr){let c=await dr.window.showInputBox({prompt:"Please provide a branch name",ignoreFocusOut:!0});if(!c)return;let u=c.replace(/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$|\.$/g,"-"),d=It(`${t}/${u}`);return d&&(d.isNew=!0),d}}}function gc(n){let e="layout.trunkRegex",t=$.get(e),r=new RegExp(`(^|/)(${t})$`),i=n.match(r),o=$.get(`${e}Name`,1)+2;return!!(i&&i[2]&&i[o])}var ca=W(require("child_process")),Zu=require("events"),en=W(require("process"));var _c=W(Oc());function gh(n){if(!n||n.length<2)return null;let e=n.readUInt8(0),t=n.readUInt8(1);if(e===254&&t===255)return"utf16be";if(e===255&&t===254)return"utf16le";if(n.length<3)return null;let r=n.readUInt8(2);return e===239&&t===187&&r===191?"utf8":null}var yh=["ascii","utf-8","utf-16","utf-32"],Nc={ibm866:"cp866",big5:"cp950"};function Vn(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function Gn(n){let e=gh(n);if(e)return e;let t=(0,_c.analyse)(n);if(!t||t.length===0)return null;let r=$.get("experimental.encoding_priority",[]);if(r.length>0)for(let c of r){let u=t.find(d=>Vn(c)===Vn(d.name));if(u&&u.confidence>60){let d=Vn(u.name);return Nc[d]||d}}let i=t[0];if(i.confidence<80)return null;let o=i.name;if(0<=yh.indexOf(o.toLowerCase()))return null;let s=Vn(o);return Nc[s]||s}var ru=W(gr());var ft={mergeAttrs:!0,explicitRoot:!1,explicitArray:!1,attrNameProcessors:[es],tagNameProcessors:[es],doctype:!1};async function Gr(n){return new Promise((e,t)=>{ru.parseString(n,ft,(r,i)=>{(r||typeof i.entry>"u")&&t(),e(i.entry)})})}function Rt(n){if(!n)return n;let e=n;return e=e.replace(/[A-Z]:\\(?:[^\\/:*?"<>|\r\n]+\\)*[^\\/:*?"<>|\r\n]*/gi,"[PATH]"),e=e.replace(/\/(?:[a-zA-Z0-9._\-~]+\/)*[a-zA-Z0-9._\-~]*/g,"[PATH]"),e=e.replace(/https?:\/\/(?:(?:[a-zA-Z0-9\-._~:/?#\[\]@!$&'()*+,;=])+)/gi,"[DOMAIN]"),e=e.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,"[IP]"),e=e.replace(/\b(?:[0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}\b/g,"[IP]"),e=e.replace(/(?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s,;]+/gi,"$&=[REDACTED]"),e=e.replace(/[?&](?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s&;]+/gi,t=>{let[r]=t.split("=");return r+"=[REDACTED]"}),e=e.replace(/Bearer\s+[A-Za-z0-9._\-~+/=]+/g,"Bearer [REDACTED]"),e=e.replace(/Basic\s+[A-Za-z0-9+/=]+/g,"Basic [REDACTED]"),e=e.replace(/"([A-Za-z0-9+/=_\-]{32,})"/g,'"[REDACTED]"'),e=e.replace(/'([A-Za-z0-9+/=_\-]{32,})'/g,"'[REDACTED]'"),e=e.replace(/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/gi,"[UUID]"),e=e.replace(/AKIA[0-9A-Z]{16}/g,"[AWS_KEY]"),e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,"[EMAIL]"),e}function nu(n){if(!n)return{};let e={};return n.message&&(e.message=Rt(n.message)),n.name&&(e.name=n.name),n.code&&(e.code=n.code),n.exitCode&&(e.exitCode=n.exitCode),n.svnErrorCode&&(e.svnErrorCode=n.svnErrorCode),n.svnCommand&&(e.svnCommand=Rt(n.svnCommand)),n.stdout&&(e.stdout=Rt(n.stdout)),n.stderr&&(e.stderr=Rt(n.stderr)),n.stderrFormated&&(e.stderrFormated=Rt(n.stderrFormated)),n.stack&&(e.stack=Rt(n.stack)),e}var Tt=class{constructor(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=void 0,this.message=e.message||"SVN error",this.stdout=e.stdout,this.stderr=e.stderr,this.stderrFormated=e.stderrFormated,this.exitCode=e.exitCode,this.svnErrorCode=e.svnErrorCode,this.svnCommand=e.svnCommand}toString(){let e=nu(this),t=Rt(this.message)+" "+JSON.stringify(e,null,2);return this.error&&(t+=Rt(this.error.stack||"")),t}};var Ot=W(require("path")),hi=W(bu()),$e=require("vscode");var Eu=W(gr());async function ea(n){return new Promise((e,t)=>{Eu.parseString(n,ft,(r,i)=>{r&&t(),i.list&&i.list.entry?(Array.isArray(i.list.entry)||(i.list.entry=[i.list.entry]),e(i.list.entry)):e([])})})}var Cu=W(gr());async function fi(n){return new Promise((e,t)=>{Cu.parseString(n,ft,(r,i)=>{r&&t();let o=[];Array.isArray(i.logentry)?o=i.logentry:typeof i.logentry=="object"&&(o=[i.logentry]);for(let s of o)s.paths===void 0?s.paths=[]:Array.isArray(s.paths.path)?s.paths=s.paths.path:s.paths=[s.paths.path];e(o)})})}var Iu=W(gr());function ta(n,e){if(Array.isArray(n)){let i=[];return n.forEach(o=>{let s=ta(o,e);s&&i.push(...s)}),i}let t={locked:!!n.wcStatus.wcLocked&&n.wcStatus.wcLocked==="true"||!!(n.reposStatus&&n.reposStatus.lock),switched:!!n.wcStatus.switched&&n.wcStatus.switched==="true"},r={changelist:e,path:n.path,status:n.wcStatus.item,props:n.wcStatus.props,wcStatus:t,reposStatus:n.reposStatus};return n.wcStatus.movedTo&&r.status==="deleted"?[]:(n.wcStatus.movedFrom&&r.status==="added"&&(r.rename=n.wcStatus.movedFrom),n.wcStatus.commit&&(r.commit={revision:n.wcStatus.commit.revision,author:n.wcStatus.commit.author,date:n.wcStatus.commit.date}),[r])}function $h(n){let e=[];return n.target&&n.target.entry&&e.push(...ta(n.target.entry)),n.changelist&&(Array.isArray(n.changelist)||(n.changelist=[n.changelist]),n.changelist.forEach(t=>{e.push(...ta(t.entry,t.name))})),e}async function Su(n){return new Promise((e,t)=>{Iu.parseString(n,ft,(r,i)=>{r&&t();let o=$h(i);e(o)})})}var ra=(n,e,t)=>{let r=n instanceof RegExp?Du(n,t):n,i=e instanceof RegExp?Du(e,t):e,o=r!==null&&i!=null&&Bh(r,i,t);return o&&{start:o[0],end:o[1],pre:t.slice(0,o[0]),body:t.slice(o[0]+r.length,o[1]),post:t.slice(o[1]+i.length)}},Du=(n,e)=>{let t=e.match(n);return t?t[0]:null},Bh=(n,e,t)=>{let r,i,o,s,a,c=t.indexOf(n),u=t.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],o=t.length;d>=0&&!a;){if(d===c)r.push(d),c=t.indexOf(n,d+1);else if(r.length===1){let m=r.pop();m!==void 0&&(a=[m,u])}else i=r.pop(),i!==void 0&&i<o&&(o=i,s=u),u=t.indexOf(e,d+1);d=c<u&&c>=0?c:u}r.length&&s!==void 0&&(a=[o,s])}return a};var Ru="\0SLASH"+Math.random()+"\0",Tu="\0OPEN"+Math.random()+"\0",ia="\0CLOSE"+Math.random()+"\0",Pu="\0COMMA"+Math.random()+"\0",Ou="\0PERIOD"+Math.random()+"\0",qh=new RegExp(Ru,"g"),jh=new RegExp(Tu,"g"),Xh=new RegExp(ia,"g"),Wh=new RegExp(Pu,"g"),Vh=new RegExp(Ou,"g"),Gh=/\\\\/g,zh=/\\{/g,Hh=/\\}/g,Yh=/\\,/g,Qh=/\\./g;function na(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function Kh(n){return n.replace(Gh,Ru).replace(zh,Tu).replace(Hh,ia).replace(Yh,Pu).replace(Qh,Ou)}function Zh(n){return n.replace(qh,"\\").replace(jh,"{").replace(Xh,"}").replace(Wh,",").replace(Vh,".")}function Nu(n){if(!n)return[""];let e=[],t=ra("{","}",n);if(!t)return n.split(",");let{pre:r,body:i,post:o}=t,s=r.split(",");s[s.length-1]+="{"+i+"}";let a=Nu(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function _u(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),zr(Kh(n),!0).map(Zh)):[]}function Jh(n){return"{"+n+"}"}function ex(n){return/^-?0\d/.test(n)}function tx(n,e){return n<=e}function rx(n,e){return n>=e}function zr(n,e){let t=[],r=ra("{","}",n);if(!r)return[n];let i=r.pre,o=r.post.length?zr(r.post,!1):[""];if(/\$$/.test(r.pre))for(let s=0;s<o.length;s++){let a=i+"{"+r.body+"}"+o[s];t.push(a)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=s||a,u=r.body.indexOf(",")>=0;if(!c&&!u)return r.post.match(/,(?!,).*\}/)?(n=r.pre+"{"+r.body+ia+r.post,zr(n)):[n];let d;if(c)d=r.body.split(/\.\./);else if(d=Nu(r.body),d.length===1&&d[0]!==void 0&&(d=zr(d[0],!1).map(Jh),d.length===1))return o.map(h=>r.pre+d[0]+h);let m;if(c&&d[0]!==void 0&&d[1]!==void 0){let h=na(d[0]),l=na(d[1]),y=Math.max(d[0].length,d[1].length),b=d.length===3&&d[2]!==void 0?Math.abs(na(d[2])):1,R=tx;l<h&&(b*=-1,R=rx);let S=d.some(ex);m=[];for(let v=h;R(v,l);v+=b){let p;if(a)p=String.fromCharCode(v),p==="\\"&&(p="");else if(p=String(v),S){let x=y-p.length;if(x>0){let E=new Array(x+1).join("0");v<0?p="-"+E+p.slice(1):p=E+p}}m.push(p)}}else{m=[];for(let h=0;h<d.length;h++)m.push.apply(m,zr(d[h],!1))}for(let h=0;h<m.length;h++)for(let l=0;l<o.length;l++){let y=i+m[h]+o[l];(!e||c||y)&&t.push(y)}}return t}var Hr=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var nx={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Yr=n=>n.replace(/[[\]\\-]/g,"\\$&"),ix=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Au=n=>n.join(""),Lu=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=t+1,s=!1,a=!1,c=!1,u=!1,d=t,m="";e:for(;o<n.length;){let b=n.charAt(o);if((b==="!"||b==="^")&&o===t+1){u=!0,o++;continue}if(b==="]"&&s&&!c){d=o+1;break}if(s=!0,b==="\\"&&!c){c=!0,o++;continue}if(b==="["&&!c){for(let[R,[_,S,v]]of Object.entries(nx))if(n.startsWith(R,o)){if(m)return["$.",!1,n.length-t,!0];o+=R.length,v?i.push(_):r.push(_),a=a||S;continue e}}if(c=!1,m){b>m?r.push(Yr(m)+"-"+Yr(b)):b===m&&r.push(Yr(b)),m="",o++;continue}if(n.startsWith("-]",o+1)){r.push(Yr(b+"-")),o+=2;continue}if(n.startsWith("-",o+1)){m=b,o+=2;continue}r.push(Yr(b)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let b=r[0].length===2?r[0].slice(-1):r[0];return[ix(b),!1,d-t,!1]}let h="["+(u?"^":"")+Au(r)+"]",l="["+(u?"":"^")+Au(i)+"]";return[r.length&&i.length?"("+h+"|"+l+")":r.length?h:l,a,d-t,!0]};var kt=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!0}={})=>t?e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");var ox=new Set(["!","?","+","*","@"]),Mu=n=>ox.has(n),sx="(?!(?:^|/)\\.\\.?(?:$|/))",pi="(?!\\.)",ax=new Set(["[","."]),cx=new Set(["..","."]),ux=new Set("().*{}+?[]^$\\!"),lx=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),oa="[^/]",Fu=oa+"*?",Uu=oa+"+?",vr=class n{type;#r;#n;#o=!1;#e=[];#t;#s;#c;#a=!1;#i;#u;#f=!1;constructor(e,t,r={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#r=this.#t?this.#t.#r:this,this.#i=this.#r===this?r:this.#r.#i,this.#c=this.#r===this?[]:this.#r.#c,e==="!"&&!this.#r.#a&&this.#c.push(this),this.#s=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#s+1;!r.type&&i<r.#e.length;i++)for(let o of e.#e){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){var t;let e=this.type===null?this.#e.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#e.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#a&&((t=this.#t)==null?void 0:t.type)==="!")&&e.push({}),e}isStart(){var t;if(this.#r===this)return!0;if(!((t=this.#t)!=null&&t.isStart()))return!1;if(this.#s===0)return!0;let e=this.#t;for(let r=0;r<this.#s;r++){let i=e.#e[r];if(!(i instanceof n&&i.type==="!"))return!1}return!0}isEnd(){var t,r,i;if(this.#r===this||((t=this.#t)==null?void 0:t.type)==="!")return!0;if(!((r=this.#t)!=null&&r.isEnd()))return!1;if(!this.type)return(i=this.#t)==null?void 0:i.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let r of this.#e)t.copyIn(r);return t}static#l(e,t,r,i){let o=!1,s=!1,a=-1,c=!1;if(t.type===null){let l=r,y="";for(;l<e.length;){let b=e.charAt(l++);if(o||b==="\\"){o=!o,y+=b;continue}if(s){l===a+1?(b==="^"||b==="!")&&(c=!0):b==="]"&&!(l===a+2&&c)&&(s=!1),y+=b;continue}else if(b==="["){s=!0,a=l,c=!1,y+=b;continue}if(!i.noext&&Mu(b)&&e.charAt(l)==="("){t.push(y),y="";let R=new n(b,t);l=n.#l(e,R,l,i),t.push(R);continue}y+=b}return t.push(y),l}let u=r+1,d=new n(null,t),m=[],h="";for(;u<e.length;){let l=e.charAt(u++);if(o||l==="\\"){o=!o,h+=l;continue}if(s){u===a+1?(l==="^"||l==="!")&&(c=!0):l==="]"&&!(u===a+2&&c)&&(s=!1),h+=l;continue}else if(l==="["){s=!0,a=u,c=!1,h+=l;continue}if(Mu(l)&&e.charAt(u)==="("){d.push(h),h="";let y=new n(l,d);d.push(y),u=n.#l(e,y,u,i);continue}if(l==="|"){d.push(h),h="",m.push(d),d=new n(null,t);continue}if(l===")")return h===""&&t.#e.length===0&&(t.#f=!0),d.push(h),h="",t.push(...m,d),u;h+=l}return t.type=null,t.#n=void 0,t.#e=[e.substring(r-1)],u}static fromGlob(e,t={}){let r=new n(null,void 0,t);return n.#l(e,r,0,t),r}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[t,r,i,o]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#i.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){var c;let t=e??!!this.#i.dot;if(this.#r===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd()&&!this.#e.some(y=>typeof y!="string"),d=this.#e.map(y=>{let[b,R,_,S]=typeof y=="string"?n.#x(y,this.#n,u):y.toRegExpSource(e);return this.#n=this.#n||_,this.#o=this.#o||S,b}).join(""),m="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&cx.has(this.#e[0]))){let b=ax,R=t&&b.has(d.charAt(0))||d.startsWith("\\.")&&b.has(d.charAt(2))||d.startsWith("\\.\\.")&&b.has(d.charAt(4)),_=!t&&!e&&b.has(d.charAt(0));m=R?sx:_?pi:""}let h="";return this.isEnd()&&this.#r.#a&&((c=this.#t)==null?void 0:c.type)==="!"&&(h="(?:$|\\/)"),[m+d+h,kt(d),this.#n=!!this.#n,this.#o]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#p(t);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#e=[u],this.type=null,this.#n=void 0,[u,kt(this.toString()),!1,!1]}let s=!r||e||t||!pi?"":this.#p(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#f)a=(this.isStart()&&!t?pi:"")+Uu;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?pi:"")+Fu+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+u}return[a,kt(o),this.#n=!!this.#n,this.#o]}#p(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[r,i,o,s]=t.toRegExpSource(e);return this.#o=this.#o||s,r}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#x(e,t,r=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(ux.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,m,h]=Lu(e,a);if(m){o+=u,s=s||d,a+=m-1,t=t||h;continue}}if(c==="*"){o+=r&&e==="*"?Uu:Fu,t=!0;continue}if(c==="?"){o+=oa,t=!0;continue}o+=lx(c)}return[o,kt(e),!!t,s]}};var sa=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!1}={})=>t?e?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Ee=(n,e,t={})=>(Hr(e),!t.nocomment&&e.charAt(0)==="#"?!1:new $t(e,t).match(n)),fx=/^\*+([^+@!?\*\[\(]*)$/,px=n=>e=>!e.startsWith(".")&&e.endsWith(n),hx=n=>e=>e.endsWith(n),xx=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),dx=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),mx=/^\*+\.\*+$/,gx=n=>!n.startsWith(".")&&n.includes("."),yx=n=>n!=="."&&n!==".."&&n.includes("."),wx=/^\.\*+$/,vx=n=>n!=="."&&n!==".."&&n.startsWith("."),bx=/^\*+$/,Ex=n=>n.length!==0&&!n.startsWith("."),Cx=n=>n.length!==0&&n!=="."&&n!=="..",Ix=/^\?+([^+@!?\*\[\(]*)?$/,Sx=([n,e=""])=>{let t=Bu([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},Dx=([n,e=""])=>{let t=qu([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},Rx=([n,e=""])=>{let t=qu([n]);return e?r=>t(r)&&r.endsWith(e):t},Tx=([n,e=""])=>{let t=Bu([n]);return e?r=>t(r)&&r.endsWith(e):t},Bu=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},qu=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},ju=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",ku={win32:{sep:"\\"},posix:{sep:"/"}},Px=ju==="win32"?ku.win32.sep:ku.posix.sep;Ee.sep=Px;var Je=Symbol("globstar **");Ee.GLOBSTAR=Je;var Ox="[^/]",Nx=Ox+"*?",_x="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ax="(?:(?!(?:\\/|^)\\.).)*?",Lx=(n,e={})=>t=>Ee(t,n,e);Ee.filter=Lx;var Ze=(n,e={})=>Object.assign({},n,e),Mx=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Ee;let e=Ee;return Object.assign((r,i,o={})=>e(r,i,Ze(n,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Ze(n,o))}static defaults(i){return e.defaults(Ze(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Ze(n,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Ze(n,o))}},unescape:(r,i={})=>e.unescape(r,Ze(n,i)),escape:(r,i={})=>e.escape(r,Ze(n,i)),filter:(r,i={})=>e.filter(r,Ze(n,i)),defaults:r=>e.defaults(Ze(n,r)),makeRe:(r,i={})=>e.makeRe(r,Ze(n,i)),braceExpand:(r,i={})=>e.braceExpand(r,Ze(n,i)),match:(r,i,o={})=>e.match(r,i,Ze(n,o)),sep:e.sep,GLOBSTAR:Je})};Ee.defaults=Mx;var Xu=(n,e={})=>(Hr(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:_u(n));Ee.braceExpand=Xu;var Fx=(n,e={})=>new $t(n,e).makeRe();Ee.makeRe=Fx;var Ux=(n,e,t={})=>{let r=new $t(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};Ee.match=Ux;var $u=/[?*]|[+@!]\(.*?\)|\[|\]/,kx=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$t=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){Hr(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||ju,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!$u.test(o[2]))&&!$u.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let s=i;for(;r[s+1]==="**";)s++;s>i&&r.splice(i+1,s-i);let a=r[i+1],c=r[i+2],u=r[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;t=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<r.length-1;s++){let a=r[s];s===1&&a===""&&r[0]===""||(a==="."||a==="")&&(t=!0,r.splice(s,1),s--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let s=r[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){t=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<t.length;)if(e[i]===t[o])s.push(a==="b"?t[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&t[o]===e[i+1])s.push(e[i]),i++;else if(r&&t[o]==="**"&&e[i]===t[o+1])s.push(t[o]),o++;else if(e[i]==="*"&&t[o]&&(this.options.dot||!t[o].startsWith("."))&&t[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(t[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(t[o]),i++,o++}else return!1;return e.length===t.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let i=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),R=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),_=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),S=!_&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),v=R?3:b?0:void 0,p=S?3:_?0:void 0;if(typeof v=="number"&&typeof p=="number"){let[x,E]=[e[v],t[p]];x.toLowerCase()===E.toLowerCase()&&(t[p]=x,p>v?t=t.slice(p):v>p&&(e=e.slice(v)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,c=e.length,u=t.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var d=t[a],m=e[s];if(this.debug(t,d,m),d===!1)return!1;if(d===Je){this.debug("GLOBSTAR",[t,d,m]);var h=s,l=a+1;if(l===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;h<c;){var y=e[h];if(this.debug(`
globstar while`,e,h,t,l,y),this.matchOne(e.slice(h),t.slice(l),r))return this.debug("globstar found match!",h,c,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,h,t,l);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,h,t,l),h===c))}let b;if(typeof d=="string"?(b=m===d,this.debug("string match",d,m,b)):(b=d.test(m),this.debug("pattern match",d,m,b)),!b)return!1}if(s===c&&a===u)return!0;if(s===c)return r;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Xu(this.pattern,this.options)}parse(e){Hr(e);let t=this.options;if(e==="**")return Je;if(e==="")return"";let r,i=null;(r=e.match(bx))?i=t.dot?Cx:Ex:(r=e.match(fx))?i=(t.nocase?t.dot?dx:xx:t.dot?hx:px)(r[1]):(r=e.match(Ix))?i=(t.nocase?t.dot?Dx:Sx:t.dot?Rx:Tx)(r):(r=e.match(mx))?i=t.dot?yx:gx:(r=e.match(wx))&&(i=vx);let o=vr.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?Nx:t.dot?_x:Ax,i=new Set(t.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(m=>{if(m instanceof RegExp)for(let h of m.flags.split(""))i.add(h);return typeof m=="string"?kx(m):m===Je?Je:m._src});u.forEach((m,h)=>{let l=u[h+1],y=u[h-1];m!==Je||y===Je||(y===void 0?l!==void 0&&l!==Je?u[h+1]="(?:\\/|"+r+"\\/)?"+l:u[h]=r:l===void 0?u[h-1]=y+"(?:\\/|\\/"+r+")?":l!==Je&&(u[h-1]=y+"(?:\\/|\\/"+r+"\\/)"+l,u[h+1]=Je))});let d=u.filter(m=>m!==Je);if(this.partial&&d.length>=1){let m=[];for(let h=1;h<=d.length;h++)m.push(d.slice(0,h).join("/"));return"(?:"+m.join("|")+")"}return d.join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.partial&&(o="^(?:\\/|"+s+o.slice(1,-1)+a+")$"),this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(r.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ee.defaults(e).Minimatch}};Ee.AST=vr;Ee.Minimatch=$t;Ee.escape=sa;Ee.unescape=kt;function er(n,e,t={}){let r=!1;return e.forEach(i=>{let o=i[0]==="!";r===o&&(r=Ee(n,i,t))}),r}function Wu(n){return new $t(n)}var Vu=W(gr());async function Gu(n){return new Promise((e,t)=>{Vu.parseString(n,ft,(r,i)=>{(r||!i.paths||!i.paths.path)&&t(),Array.isArray(i.paths.path)||(i.paths.path=[i.paths.path]),e(i.paths.path)})})}function zu(n){return!n||typeof n!="string"?!1:/^[a-zA-Z0-9_-]+$/.test(n)}var $x=["postpone","base","mine-conflict","theirs-conflict","mine-full","theirs-full","edit","launch","working"];function Hu(n){return!n||typeof n!="string"?!1:$x.includes(n)}function Qr(n){return!n||typeof n!="string"?!1:!/[|;$()[\]{}`\\]/.test(n)}var Bx=["HEAD","PREV","BASE","COMMITTED"];function Yu(n){return!n||typeof n!="string"?!1:Bx.includes(n)?!0:/^\+?(0|[1-9]\d*)$/.test(n)}function Qu(n){if(!n||typeof n!="string")return!1;let e=["http:","https:","svn:","svn+ssh:"];try{let t=new URL(n);return!(!e.includes(t.protocol)||/[;&|`$()]/.test(t.hostname)||/[;&|`$()]/.test(t.pathname))}catch{return!1}}var Kr=class{constructor(e,t,r,i){this.svn=e;this.root=t;this.workspaceRoot=r;this._infoCache={};return i===1?(async()=>this)():(async()=>(await this.updateInfo(),this))()}async updateInfo(){let e=await this.exec(["info","--xml",_n(this.workspaceRoot?this.workspaceRoot:this.root)]);this._info=await Gr(e.stdout)}async exec(e,t={}){return t.username=this.username,t.password=this.password,this.svn.exec(this.workspaceRoot,e,t)}async execBuffer(e,t={}){return t.username=this.username,t.password=this.password,this.svn.execBuffer(this.workspaceRoot,e,t)}removeAbsolutePath(e){return e=rt(e),e=Ot.relative(this.workspaceRoot,e),e===""&&(e="."),_n(e)}async getStatus(e){var o;e=Object.assign({},{includeIgnored:!1,includeExternals:!0,checkRemoteChanges:!1},e);let t=["stat","--xml"];e.includeIgnored&&t.push("--no-ignore"),e.includeExternals||t.push("--ignore-externals"),e.checkRemoteChanges&&t.push("--show-updates");let r=await this.exec(t),i=await Su(r.stdout);for(let s of i)if(s.status==="external")try{let a=await this.getInfo(s.path);s.repositoryUuid=(o=a.repository)==null?void 0:o.uuid}catch(a){console.error(a)}return i}get info(){return He(this._info)}resetInfoCache(e=""){delete this._infoCache[e]}async getInfo(e="",t,r=!1,i=!1){if(!r&&this._infoCache[e])return this._infoCache[e];let o=["info","--xml"];t&&o.push("-r",t),e&&(i||(e=rt(e)),o.push(e));let s=await this.exec(o);return this._infoCache[e]=await Gr(s.stdout),setTimeout(()=>{this.resetInfoCache(e)},2*60*1e3),this._infoCache[e]}async getChanges(){var b;let e=["log","-r1:HEAD","--limit=1","--stop-on-copy","--xml","--with-all-revprops","--verbose"],t=await this.exec(e),r=await fi(t.stdout);if(r.length===0||((b=r[0])==null?void 0:b.paths.length)===0)return[];let i=r[0].paths[0];if(i.copyfromRev===void 0||i.copyfromPath===void 0||i._===void 0||i.copyfromRev.trim().length===0||i.copyfromPath.trim().length===0||i._.trim().length===0)return[];let o=i.copyfromPath,s=i.copyfromRev,a=i._,c=this.info.repository.root+o,u=this.info.repository.root+a;e=["mergeinfo","--show-revs=merged",c,u],t=await this.exec(e);let d=t.stdout.trim().split(`
`),m="";d.length&&(m=d[d.length-1]),m.trim().length===0&&(m=s);let h=await this.getInfo(u,void 0,!0,!0);e=["diff",`${c}@${m}`,u,"--ignore-properties","--xml","--summarize"],t=await this.exec(e);let l;try{l=await Gu(t.stdout)}catch{return[]}let y=[];for(let R of l)y.push({oldPath:$e.Uri.parse(R._),newPath:$e.Uri.parse(R._.replace(c,u)),oldRevision:m.replace("r",""),newRevision:h.revision,item:R.item,props:R.props,kind:R.kind,repo:$e.Uri.parse(this.info.repository.root),localPath:$e.Uri.parse(R._.replace(c,""))});return y}async show(e,t){let r=["cat"],i,o;e instanceof $e.Uri?(i=e,o=e.toString(!0)):(i=$e.Uri.file(e),o=e);let s=i.scheme==="file"&&Se(this.workspaceRoot,i.fsPath),a=o;s&&(a=this.removeAbsolutePath(a)),t&&(r.push("-r",t),s&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))),r.push(a);let c=$e.workspace.getConfiguration("files",i),u=c.get("encoding"),d=c.get("autoGuessEncoding",!1),m=$e.workspace.textDocuments.find(y=>at(y.uri.fsPath)===at(o));if(m){let y=$e.workspace.getConfiguration(`[${m.languageId}]`,i);if(y["files.encoding"]!==void 0&&(u=y["files.encoding"]),y["files.autoGuessEncoding"]!==void 0&&(d=y["files.autoGuessEncoding"]),d){let b=Buffer.from(m.getText(),"utf-8"),R=Gn(b);R&&(u=R)}}else{let y=$.get("default.encoding");y&&(u=y)}return $.get("experimental.detect_encoding",!1)&&(u=null),(await this.exec(r,{encoding:u})).stdout}async showBuffer(e,t){let r=["cat"],i,o;e instanceof $e.Uri?(i=e,o=e.toString(!0)):(i=$e.Uri.file(e),o=e);let s=i.scheme==="file"&&Se(this.workspaceRoot,i.fsPath),a=o;return s&&(a=this.removeAbsolutePath(a)),t&&(r.push("-r",t),s&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))),r.push(a),(await this.execBuffer(r)).stdout}async commitFiles(e,t){t=t.map(a=>this.removeAbsolutePath(a));let r=["commit",...t];await le(Ot.join(this.workspaceRoot,e))&&r.push("--force-log");let i;/\n|[^\x00-\x7F\x80-\xFF]/.test(e)?(hi.setGracefulCleanup(),i=hi.fileSync({prefix:"svn-commit-message-"}),await Ko(i.name,e,{encoding:"utf-8"}),r.push("-F",i.name),r.push("--encoding","UTF-8")):r.push("-m",e),r.push("--depth","empty");let o=await this.exec(r);i&&i.removeCallback();let s=o.stdout.match(/Committed revision (.*)\./i);if(s&&s[0]){let a=(o.stdout.match(/(Sending|Adding|Deleting)\s+/g)??[]).length;return`${`${a} ${a===1?"file":"files"} commited`}: revision ${s[1]}.`}return o.stdout}async addFilesByIgnore(e,t){let r=async i=>(await wt(i)).isDirectory()?(await Promise.all((await zt(i)).map(o=>{let s=Ot.resolve(i+Ot.sep+o),a=this.removeAbsolutePath(s);return er(Ot.sep+a,t,{dot:!0,matchBase:!0})?[]:r(s)}))).reduce((o,s)=>o.concat(s),[i]):[i];return e=(await Promise.all(e.map(i=>r(i)))).flat(),e=e.map(i=>this.removeAbsolutePath(i)),this.exec(["add","--depth=empty",...e])}addFiles(e){let t=$.get("sourceControl.ignore");return t.length>0?this.addFilesByIgnore(e,t):(e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["add",...e]))}addChangelist(e,t){if(!zu(t))throw new Error("Invalid changelist name");return e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["changelist",t,...e])}removeChangelist(e){return e=e.map(t=>this.removeAbsolutePath(t)),this.exec(["changelist","--remove",...e])}async getCurrentBranch(){let e=await this.getInfo(),t=It(e.url);return t?$.get("layout.showFullName")?t.path:t.name:""}async getRepositoryUuid(){return(await this.getInfo()).repository.uuid}async getRepoUrl(){let e=await this.getInfo(),t=It(e.url);if(!t)return e.repository.root;let r=new RegExp(t.path+"$");return e.url.replace(r,"").replace(/\/$/,"")}async getBranches(){let e=$.get("layout.trunk"),t=$.get("layout.branches"),r=$.get("layout.tags"),i=await this.getRepoUrl(),o=[],s=[];e&&s.push(new Promise(async u=>{try{await this.exec(["ls",i+"/"+e,"--depth","empty"]),u([e])}catch{u([])}}));let a=[];t&&a.push(t),r&&a.push(r);for(let u of a)s.push(new Promise(async d=>{let m=i+"/"+u;try{let l=(await this.exec(["ls",m])).stdout.trim().replace(/\/|\\/g,"").split(/[\r\n]+/).filter(y=>!!y).map(y=>u+"/"+y);d(l)}catch{d([])}}));return(await Promise.all(s)).forEach(u=>{o.push(...u)}),o}async newBranch(e,t="Created new branch"){let i=await this.getRepoUrl()+"/"+e,s=(await this.getInfo()).url;return await this.exec(["copy",s,i,"-m",t]),await this.switchBranch(e),!0}async switchBranch(e,t=!1){let i=await this.getRepoUrl()+"/"+e;return await this.exec(["switch",i].concat(t?["--ignore-ancestry"]:[])),this.resetInfoCache(),!0}async merge(e,t=!1,r="postpone"){if(!Hu(r))throw new Error("Invalid accept action");let o=await this.getRepoUrl()+"/"+e,s=["merge","--accept",r];return s=s.concat(t?["--reintegrate"]:[]),s=s.concat([o]),await this.exec(s),this.resetInfoCache(),!0}async revert(e,t){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["revert","--depth",t,...e])).stdout}async update(e=!0){let t=["update"];e&&t.push("--ignore-externals");let r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async pullIncomingChange(e){let t=["update",e],r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async patch(e){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["diff","--internal-diff",...e])).stdout}async patchBuffer(e){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.execBuffer(["diff","--internal-diff",...e])).stdout}async patchChangelist(e){return(await this.exec(["diff","--internal-diff","--changelist",e])).stdout}async removeFiles(e,t){e=e.map(o=>this.removeAbsolutePath(o));let r=["remove"];return t&&r.push("--keep-local"),r.push(...e),(await this.exec(r)).stdout}async resolve(e,t){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["resolve","--accept",t,...e])).stdout}async plainLog(){let e=$.get("log.length")??"50";return(await this.exec(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogBuffer(){let e=$.get("log.length")??"50";return(await this.execBuffer(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogByRevision(e){return(await this.exec(["log","-r",e.toString()])).stdout}async plainLogByRevisionBuffer(e){return(await this.execBuffer(["log","-r",e.toString()])).stdout}async plainLogByText(e){if(!Qr(e))throw new Error("Invalid search pattern");return(await this.exec(["log","--search",e])).stdout}async plainLogByTextBuffer(e){if(!Qr(e))throw new Error("Invalid search pattern");return(await this.execBuffer(["log","--search",e])).stdout}async log(e,t,r,i){let o=["log","-r",`${e}:${t}`,`--limit=${r}`,"--xml","-v"];i!==void 0&&o.push(_n(i instanceof $e.Uri?i.toString(!0):i));let s=await this.exec(o);return fi(s.stdout)}async logByUser(e){let t=await this.exec(["log","--xml","-v","--search",e]);return fi(t.stdout)}async countNewCommit(e="BASE:HEAD"){let r=(await this.exec(["log","-r",e,"-q","--xml"])).stdout.match(/<logentry/g);return r&&r.length>0?r.length-1:0}async cleanup(){return(await this.exec(["cleanup"])).stdout}async removeUnversioned(){let e=await this.exec(["cleanup","--remove-unversioned"]);return this.svn.logOutput(e.stdout),e.stdout}async finishCheckout(){let e=await this.getInfo();return(await this.exec(["switch",e.url])).stdout}async list(e){let t=await this.getRepoUrl();e&&(t+="/"+e);let r=await this.exec(["list",t,"--xml"]);return ea(r.stdout)}async ls(e){let t=await this.exec(["list",e,"--xml"]);return ea(t.stdout)}async getCurrentIgnore(e){e=this.removeAbsolutePath(e);let t="";try{let i=["propget","svn:ignore"];e&&i.push(e),t=(await this.exec(i)).stdout.trim()}catch(i){console.error(i)}return t.split(/[\r\n]+/)}async addToIgnore(e,t,r=!1){let i=await this.getCurrentIgnore(t);t=this.removeAbsolutePath(t),i.push(...e);let s=["propset","svn:ignore",[...new Set(i)].filter(c=>!!c).sort().join(`
`)];return t?s.push(t):s.push("."),r&&s.push("--recursive"),(await this.exec(s)).stdout}async rename(e,t){e=this.removeAbsolutePath(e),t=this.removeAbsolutePath(t);let r=["rename",e,t];return(await this.exec(r)).stdout}};H([uc],Kr.prototype,"getInfo",1);var Zr=require("vscode");function Ku(n,e=!0){let t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[`${Zr.env.appRoot}/node_modules.asar/${n}`,`${Zr.env.appRoot}/node_modules/${n}`,n];for(let i of r)try{return t(i)}catch{}e&&Zr.window.showErrorMessage(`Missing dependency: ${n}`)}var aa=Ku("@vscode/iconv-lite-umd",!1);aa||(aa=Ku("iconv-lite"));var Jr=aa;var Ve={AuthorizationFailed:"E170001",RepositoryIsLocked:"E155004",NotASvnRepository:"E155007",NotShareCommonAncestry:"E195012",WorkingCopyIsTooOld:"E155036"};function qx(n){for(let e in Ve)if(Ve.hasOwnProperty(e)){let t=Ve[e];if(new RegExp(`svn: ${t}`).test(n))return t}if(/No more credentials or we tried too many times/.test(n))return Ve.AuthorizationFailed}function Ju(n){return e=>{/ENOENT/.test(e.message)&&(e=new Tt({error:e,message:"Failed to execute svn (ENOENT)",svnErrorCode:"NotASvnRepository"})),n(e)}}var xi=class{constructor(e){this.lastCwd="";this._onOutput=new Zu.EventEmitter;this.svnPath=e.svnPath,this.version=e.version}get onOutput(){return this._onOutput}logOutput(e){this._onOutput.emit("log",e)}async exec(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let y=t.map(b=>/ |^$/.test(b)?`'${b}'`:b);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${y.join(" ")}
`)}r.username&&t.push("--username",r.username),r.password&&t.push("--password",r.password),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let i=r.encoding;delete r.encoding,t.includes("--xml")&&(i="utf8");let o={env:en.env};e&&(o.cwd=e),o.env=Object.assign({},en.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let s=ca.spawn(this.svnPath,t,o),a=[],c=(y,b,R)=>{y.once(b,R),a.push(Ue(()=>y.removeListener(b,R)))},u=(y,b,R)=>{y.on(b,R),a.push(Ue(()=>y.removeListener(b,R)))},[d,m,h]=await Promise.all([new Promise((y,b)=>{c(s,"error",b),c(s,"exit",y)}),new Promise(y=>{let b=[];u(s.stdout,"data",R=>b.push(R)),c(s.stdout,"close",()=>y(Buffer.concat(b)))}),new Promise(y=>{let b=[];u(s.stderr,"data",R=>b.push(R)),c(s.stderr,"close",()=>y(Buffer.concat(b).toString()))})]);Ie(a),i||(i=Gn(m)),i||(i=$.get("default.encoding")),Jr.encodingExists(i)||(i&&console.warn(`SVN: The encoding "${i}" is invalid`),i="utf8");let l=Jr.decode(m,i);if(r.log!==!1&&h.length>0){let y=this.lastCwd.split(/[\\\/]+/).pop(),b=h.split(`
`).filter(R=>R).map(R=>`[${y}]$ ${R}`).join(`
`);this.logOutput(b)}return d?Promise.reject(new Tt({message:"Failed to execute svn",stdout:l,stderr:h,stderrFormated:h.replace(/^svn: E\d+: +/gm,""),exitCode:d,svnErrorCode:qx(h),svnCommand:t[0]})):{exitCode:d,stdout:l,stderr:h}}async execBuffer(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let h=t.map(l=>/ |^$/.test(l)?`'${l}'`:l);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${h.join(" ")}
`)}r.username&&t.push("--username",r.username),r.password&&t.push("--password",r.password),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let i={env:en.env};e&&(i.cwd=e),i.env=Object.assign({},en.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let o=ca.spawn(this.svnPath,t,i),s=[],a=(h,l,y)=>{h.once(l,y),s.push(Ue(()=>h.removeListener(l,y)))},c=(h,l,y)=>{h.on(l,y),s.push(Ue(()=>h.removeListener(l,y)))},[u,d,m]=await Promise.all([new Promise((h,l)=>{a(o,"error",l),a(o,"exit",h)}),new Promise(h=>{let l=[];c(o.stdout,"data",y=>l.push(y)),a(o.stdout,"close",()=>h(Buffer.concat(l)))}),new Promise(h=>{let l=[];c(o.stderr,"data",y=>l.push(y)),a(o.stderr,"close",()=>h(Buffer.concat(l).toString()))})]);if(Ie(s),r.log!==!1&&m.length>0){let h=this.lastCwd.split(/[\\\/]+/).pop(),l=m.split(`
`).filter(y=>y).map(y=>`[${h}]$ ${y}`).join(`
`);this.logOutput(l)}return{exitCode:u,stdout:d,stderr:m}}async getRepositoryRoot(e){try{let t=await this.exec(e,["info","--xml"]),r=await Gr(t.stdout);return r&&r.wcInfo&&r.wcInfo.wcrootAbspath?r.wcInfo.wcrootAbspath:e}catch(t){throw t instanceof Tt?t:(console.error(t),new Error("Unable to find repository root path"))}}async open(e,t){return new Kr(this,e,t,0)}};var di=class extends U{constructor(){super("svn.checkout")}async execute(e){if(e||(e=await ce.window.showInputBox({prompt:"Repository URL",ignoreFocusOut:!0})),!e)return;if(!Qu(e)){ce.window.showErrorMessage("Invalid repository URL. Only http://, https://, svn://, and svn+ssh:// protocols are allowed.");return}let t=$.get("defaultCheckoutDirectory")||ua.homedir();t=t.replace(/^~/,ua.homedir());let r=await ce.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:ce.Uri.file(t),openLabel:"Select Repository Location"});if(!r||r.length===0)return;let o=r[0].fsPath,s,a=It(e);if(a){let v=e.replace(/\//g,"/").replace(a.path,"");s=mi.basename(v)}if(s=await ce.window.showInputBox({prompt:"Folder name",value:s,ignoreFocusOut:!0}),!s)return;let c=mi.join(o,s),u=ce.ProgressLocation.Window;ce.ProgressLocation.Notification&&(u=ce.ProgressLocation.Notification);let d={location:u,title:`Checkout svn repository '${e}'...`,cancellable:!0},m=0,h={};for(;;){m++;try{await ce.window.withProgress(d,async()=>{let v=await ce.commands.executeCommand("svn.getSourceControlManager",""),p=["checkout",e,c];await v.svn.exec(o,p,h)});break}catch(v){if(v.svnErrorCode===Ve.AuthorizationFailed&&m<=3){let x=await ce.commands.executeCommand("svn.promptAuth",h.username);if(x){h.username=x.username,h.password=x.password;continue}}throw v}}let l=[],y="Would you like to open the checked out repository?",b="Open Repository";l.push(b);let R="Add to Workspace";ce.workspace.workspaceFolders&&ce.workspace.updateWorkspaceFolders&&(y="Would you like to open the checked out repository, or add it to the current workspace?",l.push(R));let _=await ce.window.showInformationMessage(y,...l);_===b?ce.commands.executeCommand("vscode.openFolder",ce.Uri.file(c)):_===R&&ce.workspace.updateWorkspaceFolders(ce.workspace.workspaceFolders.length,0,{uri:ce.Uri.file(c)})}};var gi=class extends U{constructor(){super("svn.cleanup",{repository:!0})}async execute(e){await e.cleanup()}};var el=require("vscode");var yi=class extends U{constructor(){super("svn.close",{repository:!0})}async execute(e){(await el.commands.executeCommand("svn.getSourceControlManager","")).close(e)}};var fa=W(require("path")),tn=require("vscode");var tl=W(require("path")),Ge=require("vscode");var Ce,la;Ge.commands.registerCommand("svn.forceCommitMessageTest",n=>{if(la)return la(n)});function rl(){Ce&&Ce.dispose()}async function jx(n,e){return new Promise(r=>{Ce&&Ce.dispose(),la=u=>{r(u),Ce.dispose()},Ce=Ge.window.createWebviewPanel("svnCommitMessage","Commit Message",{preserveFocus:!1,viewColumn:Ge.ViewColumn.Active},{enableScripts:!0,retainContextWhenHidden:!0});let i=Ge.Uri.file(tl.join(__dirname,"..","css","commit-message.css")),o=Ce.webview.asWebviewUri(i),s="";if(e&&e.length){let u=e.sort().map(d=>`<li>${d}</li>`);u.length&&(s=`
<div class="file-list">
  <h3 class="title">Files to commit</h3>
  <ul>
    ${u.join(`
`)}
  </ul>
</div>`)}let a=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  Use a content security policy to only allow loading images from https or from our extension directory,
  and only allow scripts that have a specific nonce.
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${Ce.webview.cspSource} https:; script-src ${Ce.webview.cspSource} 'unsafe-inline'; style-src ${Ce.webview.cspSource};">

  <title>Commit Message</title>
  <link rel="stylesheet" href="${o}">
</head>
<body>
  <section class="container">
    ${s}
    <form>
      <fieldset>
        <div class="float-right">
          <a href="#" id="pickCommitMessage">Pick a previous commit message</a>
        </div>
        <label for="message">Commit message</label>
        <textarea id="message" rows="3" placeholder="Message (press Ctrl+Enter to commit)"></textarea>
        <button id="commit" class="button-primary">Commit</button>
        <div class="float-right">
          <button id="cancel" class="button button-outline">Cancel</button>
        </div>
      </fieldset>
    </form>
  </section>
  <script>
    const vscode = acquireVsCodeApi();

    const txtMessage = document.getElementById("message");
    const btnCommit = document.getElementById("commit");
    const btnCancel = document.getElementById("cancel");
    const linkPickCommitMessage = document.getElementById("pickCommitMessage");

    // load current message
    txtMessage.value = ${JSON.stringify(n)};

    btnCommit.addEventListener("click", function() {
      vscode.postMessage({
        command: "commit",
        message: txtMessage.value
      });
    });

    btnCancel.addEventListener("click", function() {
      vscode.postMessage({
        command: "cancel"
      });
    });

    // Allow CTRL + Enter
    txtMessage.addEventListener("keydown", function(e) {
      if (event.ctrlKey && event.keyCode === 13) {
        btnCommit.click();
      }
    });

    // Auto resize the height of message
    txtMessage.addEventListener("input", function(e) {
      txtMessage.style.height = "auto";
      txtMessage.style.height = (txtMessage.scrollHeight) + "px";
    });

    window.addEventListener("load", function() {
      setTimeout(() => {
        txtMessage.focus();
      }, 1000);
    });

    linkPickCommitMessage.addEventListener("click", function() {
      vscode.postMessage({
        command: "pickCommitMessage"
      });
    });

    // Message from VSCode
    window.addEventListener("message", function(event) {
      const message = event.data;
      switch (message.command) {
        case "setMessage":
          txtMessage.value = message.message;
          txtMessage.dispatchEvent(new Event("input"));
          break;
      }
    });
  </script>
</body>
</html>`;Ce.webview.html=a,Ce.onDidDispose(()=>{r(void 0)});let c=async()=>{let u;e&&e[0]&&(u=await(await Ge.commands.executeCommand("svn.getSourceControlManager","")).getRepositoryFromUri(Ge.Uri.file(e[0])));let d=await Ge.commands.executeCommand("svn.pickCommitMessage",u);d!==void 0&&Ce.webview.postMessage({command:"setMessage",message:d})};Ce.webview.onDidReceiveMessage(u=>{switch(u.command){case"commit":r(u.message),Ce.dispose();break;case"pickCommitMessage":c();break;default:r(void 0),Ce.dispose()}}),Ce.reveal(Ge.ViewColumn.Active,!1)})}async function wi(n,e=!0,t){e&&(n=await jx(n,t));let r=$.get("commit.checkEmptyMessage",!0);return n===""&&r?await Ge.window.showWarningMessage("Do you really want to commit an empty message?",{modal:!0},"Yes")==="Yes"?"":void 0:n}var vi=class extends U{constructor(){super("svn.commit")}async execute(...e){if(e.length===0||!(e[0].resourceUri instanceof tn.Uri)){let i=await this.getSCMResource();if(!i)return;e=[i]}let t=e.filter(i=>i instanceof ee),r=t.map(i=>i.resourceUri);t.forEach(i=>{i.type==="added"&&i.renameResourceUri&&r.push(i.renameResourceUri)}),await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);for(let a of o){let c=fa.dirname(a.fsPath),u=i.getResourceFromFile(c);for(;u;)u.type==="added"&&s.push(c),c=fa.dirname(c),u=i.getResourceFromFile(c)}try{let a=await wi(i.inputBox.value,!0,s);if(a===void 0)return;i.inputBox.value=a;let c=await i.commitFiles(a,s);tn.window.showInformationMessage(c),i.inputBox.value=""}catch(a){console.error(a);let c=a;tn.window.showErrorMessage(c.stderrFormated||String(a))}})}};var pa=W(require("path")),ha=require("vscode");var bi=class extends U{constructor(){super("svn.commitWithMessage",{repository:!0})}async execute(e){let t=await dc(e);if(!t||t.length===0)return;let r=t.map(o=>o.resourceUri.fsPath),i=await wi(e.inputBox.value,!1,r);if(i!==void 0){t.forEach(o=>{if(o instanceof ee){o.type==="added"&&o.renameResourceUri&&r.push(o.renameResourceUri.fsPath);let s=pa.dirname(o.resourceUri.fsPath),a=e.getResourceFromFile(s);for(;a;)a.type==="added"&&r.push(s),s=pa.dirname(s),a=e.getResourceFromFile(s)}});try{let o=await e.commitFiles(i,r);ha.window.showInformationMessage(o),e.inputBox.value=""}catch(o){console.error(o);let s=o;ha.window.showErrorMessage(s.stderrFormated||String(o))}}}};var nl=require("vscode");var Ei=class extends U{constructor(){super("svn.deleteUnversioned")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(o=>o.resourceUri);if(await nl.window.showWarningMessage("Would you like to delete selected files?",{modal:!0},"Yes","No")==="Yes")for(let o of r){let s=o.fsPath;try{if(!await le(s))continue;(await ot(s)).isDirectory()?rs(s):await Ht(s)}catch{}}}};var il=require("vscode");var Ci=class extends U{constructor(){super("svn.fileOpen")}async execute(e){await il.commands.executeCommand("vscode.open",e)}};var Ii=class extends U{constructor(){super("svn.finishCheckout",{repository:!0})}async execute(e){await e.finishCheckout()}};var Si=class extends U{constructor(t){super("svn.getSourceControlManager");this.sourceControlManager=t}async execute(){return this.sourceControlManager}};var ol=require("path"),br=require("vscode");var Di=class extends U{constructor(){super("svn.log",{repository:!0})}async execute(e){try{let t=Ye(br.Uri.file(e.workspaceRoot),"LOG"),r=t.with({path:ol.posix.join(t.path,"svn.log")});await br.commands.executeCommand("vscode.open",r)}catch(t){console.error(t),br.window.showErrorMessage("Unable to log")}}};var Ri=class extends U{constructor(){super("svn.openChangeBase",{})}async execute(e,...t){return this.openChange(e,"BASE",t)}};var Ti=class extends U{constructor(){super("svn.openChangeHead")}async execute(e,...t){return this.openChange(e,"HEAD",t)}};var Pi=class extends U{constructor(){super("svn.openChangePrev",{})}async execute(e,...t){return this.openChange(e,"PREV",t)}};var ht=require("vscode");var Oi=class extends U{constructor(){super("svn.openFile")}async execute(e,...t){let r=e instanceof ee,i;if(e instanceof ht.Uri)e.scheme==="svn"?i=[ht.Uri.file(At(e).fsPath)]:e.scheme==="file"&&(i=[e]);else if(e instanceof qe)i=[new ee(e.uri,e.type,void 0,e.props,!0).resourceUri];else{let a=e;a instanceof ee,a&&(i=[...t.map(c=>c.resourceUri),a.resourceUri])}if(!i)return;let o=i.length===1,s=ht.window.activeTextEditor;for(let a of i){if(!a||await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())continue;let c={preserveFocus:r,preview:o,viewColumn:ht.ViewColumn.Active};s&&s.document.uri.toString()===a.toString()&&(c.selection=s.selection);let u=await ht.workspace.openTextDocument(a);await ht.window.showTextDocument(u,c)}}};var Ni=require("path"),Er=require("vscode");var _i=class extends U{constructor(){super("svn.openHEADFile")}async execute(e){let t;if(e instanceof ee?t=e:e instanceof Er.Uri?t=await this.getSCMResource(e):e instanceof qe?t=new ee(e.uri,e.type,void 0,e.props,!0):t=await this.getSCMResource(),!t)return;let r=await this.getLeftResource(t,"HEAD"),i=Ni.posix.basename(t.resourceUri.path);if(!r){Er.window.showWarningMessage(`"HEAD version of '${i}' is not available."`);return}let o=Ni.posix.dirname(t.resourceUri.path),s=r.with({path:Ni.posix.join(o,`(HEAD) ${i}`)});return Er.commands.executeCommand("vscode.open",s,{preview:!0})}};var Ai=class extends U{constructor(){super("svn.openResourceBase")}async execute(e){await this._openResource(e,"BASE",void 0,!0,!1)}};var Li=class extends U{constructor(){super("svn.openResourceHead")}async execute(e){await this._openResource(e,"HEAD",void 0,!0,!1)}};var Mi=class extends U{constructor(){super("svn.patch")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(c=>c.fsPath),a=await i.patch(s);await this.showDiffPath(i,a)})}};var Fi=class extends U{constructor(){super("svn.patchAll",{repository:!0})}async execute(e){let t=await e.patch([]);await this.showDiffPath(e,t)}};var Ui=class extends U{constructor(){super("svn.patchChangeList",{repository:!0})}async execute(e){let t=await mc(e);if(!t)return;let r=await e.patchChangelist(t);await this.showDiffPath(e,r)}};var Yf=require("vscode");var Qf=W(ln()),Qi=class extends U{constructor(t){super("svn.pickCommitMessage",{repository:!0});this.svnVersion=t}async execute(t){let r=Qf.satisfies(this.svnVersion,">= 1.8"),i=[],o=$.get("previousCommitsUser",null);if(o&&r?i=await t.logByUser(o):i=await t.log("HEAD","0",20),!i.length)return;let s=i.map(u=>({label:u.msg,description:`r${u.revision} | ${u.author} | ${new Date(u.date).toLocaleString()}`})),a=await Yf.window.showQuickPick(s);if(a===void 0)return;let c=a.label;return t.inputBox.value=c,c}};var Aa=require("vscode");var Ki=class extends U{constructor(){super("svn.promptAuth")}async execute(e,t){let r=await Aa.window.showInputBox({placeHolder:"Svn repository username",prompt:"Please enter your username",ignoreFocusOut:!0,value:e});if(r===void 0)return;let i=await Aa.window.showInputBox({placeHolder:"Svn repository password",prompt:"Please enter your password",value:t,ignoreFocusOut:!0,password:!0});return i===void 0?void 0:{username:r,password:i}}};var Kf=require("vscode");var Zi=class extends U{constructor(){super("svn.promptRemove",{repository:!0})}async execute(e,...t){let r=t.map(a=>a.fsPath),i=r.map(a=>e.repository.removeAbsolutePath(a)).sort(),o="Add to ignored list",s=await Kf.window.showInformationMessage(`The file(s) "${i.join(", ")}" are removed from disk.
Would you like remove from SVN?`,{modal:!1},"Yes",o,"No");if(s==="Yes")await e.removeFiles(r,!1);else if(s===o){let a=$.get("delete.ignoredRulesForDeletedFiles",[]);a.push(...i),a=[...new Set(a)],$.update("delete.ignoredRulesForDeletedFiles",a)}}};var Ji=require("vscode");var eo=class extends U{constructor(){super("svn.treeview.pullIncomingChange")}async execute(...e){let t=$.get("showUpdateMessage",!0);if(e[0]instanceof qe){try{let i=e[0],o=await i.repository.pullIncomingChange(i.uri.fsPath);t&&Ji.window.showInformationMessage(o)}catch(i){console.error(i),Ji.window.showErrorMessage("Unable to update")}return}let r=e.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;o.map(a=>a.fsPath).forEach(async a=>{let c=await i.pullIncomingChange(a);t&&Ji.window.showInformationMessage(c)})})}};var to=class extends U{constructor(){super("svn.refresh",{repository:!0})}async execute(e){let t=$.get("refresh.remoteChanges",!1);await e.status(),t&&await e.updateRemoteChangedFiles()}};var ro=class extends U{constructor(){super("svn.refreshRemoteChanges",{repository:!0})}async execute(e){await e.updateRemoteChangedFiles()}};var La=require("vscode");var no=class extends U{constructor(){super("svn.remove")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r,i=await La.window.showWarningMessage("Would you like to keep a local copy of the files?",{modal:!0},"Yes","No");if(!i)return;i==="Yes"?r=!0:r=!1;let o=t.map(s=>s.resourceUri);await this.runByRepository(o,async(s,a)=>{if(!s)return;let c=a.map(u=>u.fsPath);try{await s.removeFiles(c,r)}catch(u){console.log(u),La.window.showErrorMessage("Unable to remove files")}})}};var Zf=require("vscode"),io=class extends U{constructor(){super("svn.removeUnversioned",{repository:!0})}async execute(e){await Zf.window.showWarningMessage("Are you sure? This will remove all unversioned files except for ignored.",{modal:!0},"Yes","No")==="Yes"&&await e.removeUnversioned()}};var Bt=W(require("path")),Jf=require("vscode");var oo=class extends U{constructor(){super("svn.renameExplorer",{repository:!0})}async execute(e,t,r){if(!t)return;let i=t.fsPath;return this.rename(e,i)}async rename(e,t,r){if(t=rt(t),!r){let o=rt(e.workspaceRoot),s=Bt.relative(o,t);r=await Jf.window.showInputBox({value:Bt.basename(t),prompt:`New name name for ${s}`})}if(!r)return;let i=Bt.dirname(t);r=Bt.join(i,r),await e.rename(t,r)}};var ep=require("vscode");var $g=[{label:"base",description:"Choose the file that was the (unmodified) BASE revision before you tried to integrate changes"},{label:"working",description:"Assuming that you've manually handled the conflict resolution, choose the version of the file as it currently stands in your working copy."},{label:"mine-full",description:"Preserve all local modifications and discarding all changes fetched"},{label:"theirs-full",description:"Discard all local modifications and integrating all changes fetched"},{label:"mine-conflict",description:"Resolve conflicted files by preferring local modifications over the changes fetched"},{label:"theirs-conflict",description:"Resolve conflicted files by preferring the changes fetched from the server over local modifications"}],Ma=class{constructor(e){this.option=e}get label(){return this.option.label}get description(){return this.option.description}};function so(){return $g.map(n=>new Ma(n))}var ao=class extends U{constructor(){super("svn.resolve")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=so(),i=await ep.window.showQuickPick(r,{placeHolder:"Select conflict option"});if(!i)return;let o=t.map(s=>s.resourceUri);await this.runByRepository(o,async(s,a)=>{if(!s)return;let c=a.map(u=>u.fsPath);await s.resolve(c,i.label)})}};var fn=require("vscode");var co=class extends U{constructor(){super("svn.resolveAll",{repository:!0})}async execute(e){let t=e.conflicts.resourceStates;t.length||fn.window.showInformationMessage("No Conflicts");for(let r of t){let i=`Select conflict option for ${r.resourceUri.path}`,o=so(),s=await fn.window.showQuickPick(o,{placeHolder:i});if(!s)return;try{let a=await e.resolve([r.resourceUri.path],s.label);fn.window.showInformationMessage(a)}catch(a){let c=a;fn.window.showErrorMessage(c.stderr||String(a))}}}};var tp=W(require("path")),rp=require("vscode");var uo=class extends U{constructor(){super("svn.resolved")}async execute(e){if(!e)return;if(!$.get("conflict.autoResolve")){let i=tp.basename(e.fsPath);if(await rp.window.showWarningMessage(`Mark the conflict as resolved for "${i}"?`,{modal:!0},"Yes","No")!=="Yes")return}let r=[e];await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);await i.resolve(s,"working")})}};var np=require("vscode");var Fa=require("vscode");async function Ir(){let n="Yes I'm sure";return await Fa.window.showWarningMessage("Are you sure? This will wipe all local changes.",{modal:!0},n)===n}async function Bg(){let n=[];for(let r in Ur)Ur.hasOwnProperty(r)&&n.push({label:r,description:Ur[r]});let t=await Fa.window.showQuickPick(n,{placeHolder:"Select revert depth"});if(t)return t.label}async function Sr(n,e="empty"){let t=n.length===0;for(let r of n)if(r.scheme==="file")try{if((await ot(r.fsPath)).isDirectory()){t=!0;break}}catch{}return t?Bg():e}var lo=class extends U{constructor(){super("svn.revert")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0||!await Ir())return;let r=t.map(o=>o.resourceUri),i=await Sr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath).reverse();try{await o.revert(a,i)}catch(c){console.log(c),np.window.showErrorMessage("Unable to revert")}})}};var ip=require("vscode");var fo=class extends U{constructor(){super("svn.revertAll")}async execute(e){let t=e.resourceStates;if(t.length===0||!await Ir())return;let r=t.map(o=>o.resourceUri),i=await Sr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath).reverse();try{await o.revert(a,i)}catch(c){console.log(c),ip.window.showErrorMessage("Unable to revert")}})}};var op=require("vscode");var po=class extends U{constructor(){super("svn.revertChange")}async execute(e,t,r){let i=op.window.visibleTextEditors.filter(o=>o.document.uri.toString()===e.toString())[0];i&&await this._revertChanges(i,[...t.slice(0,r),...t.slice(r+1)])}};var sp=require("vscode");var ho=class extends U{constructor(){super("svn.revertExplorer")}async execute(e,t){if(!t)return;let r=t;if(r.length===0||!await Ir())return;let i=await Sr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath);try{await o.revert(a,i)}catch(c){console.log(c),sp.window.showErrorMessage("Unable to revert")}})}};var pn=require("vscode");var xo=class extends U{constructor(){super("svn.switchBranch",{repository:!0})}async execute(e){let t=await mr(e,!0);if(t)try{if(t.isNew){let r=await pn.window.showInputBox({value:`Created new branch ${t.name}`,prompt:`Commit message for create branch ${t.name}`});if(r===void 0)return;await e.newBranch(t.path,r)}else try{await e.switchBranch(t.path)}catch(r){let i=r;if(i.stderrFormated&&i.stderrFormated.includes("ignore-ancestry"))await pn.window.showErrorMessage("Seems like these branches don't have a common ancestor.  Do you want to retry with '--ignore-ancestry' option?","Yes","No")==="Yes"&&await e.switchBranch(t.path,!0);else throw r}}catch(r){console.log(r),t.isNew?pn.window.showErrorMessage("Unable to create new branch"):pn.window.showErrorMessage("Unable to switch branch")}}};var Ua=require("vscode");var mo=class extends U{constructor(){super("svn.update",{repository:!0})}async execute(e){try{let t=$.get("update.ignoreExternals",!1),r=$.get("showUpdateMessage",!0),i=await e.updateRevision(t);r&&Ua.window.showInformationMessage(i)}catch(t){console.error(t),Ua.window.showErrorMessage("Unable to update")}}};var Dr=require("vscode");var go=class extends U{constructor(){super("svn.upgrade")}async execute(e){if(!e||$.get("ignoreWorkingCopyIsTooOld",!1))return;e=rt(e);let t="Yes",r="No",i="Don't Show Again",o=await Dr.window.showWarningMessage("You want upgrade the working copy (svn upgrade)?",t,r,i),s=await Dr.commands.executeCommand("svn.getSourceControlManager","");if(o===t)await s.upgradeWorkingCopy(e)?(Dr.window.showInformationMessage(`Working copy "${e}" upgraded`),s.tryOpenRepository(e)):Dr.window.showErrorMessage(`Error on upgrading working copy "${e}". See log for more detail`);else if(o===i)return $.update("ignoreWorkingCopyIsTooOld",!0)}};var ap=require("path");var qt=require("vscode");var yo=class extends U{constructor(){super("svn.searchLogByRevision",{repository:!0})}async execute(e){let t=await qt.window.showInputBox({prompt:"Revision?"});if(!t)return;if(!Yu(t)){qt.window.showErrorMessage("Invalid revision. Please enter a number or keyword (HEAD, BASE, PREV, COMMITTED)");return}let r=parseInt(t,10);try{let i=Ye(qt.Uri.file(e.workspaceRoot),"LOG_REVISION",{revision:r}),o=i.with({path:ap.posix.join(i.path,"svn.log")});await qt.commands.executeCommand("vscode.open",o)}catch(i){console.error(i),qt.window.showErrorMessage("Unable to log")}}};var nt=require("vscode");var K=require("vscode"),dt=W(require("path")),cp=W(require("crypto"));var wo=class{constructor(e){this.type=K.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},rr=class{constructor(e){this.type=K.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},ka=class{constructor(){this._emitter=new K.EventEmitter;this._bufferedEvents=[];this._root=new rr("");this._disposables=[];this.onDidChangeFile=this._emitter.event;this._disposables.push(K.workspace.registerFileSystemProvider("tempsvnfs",this,{isCaseSensitive:!0}),K.workspace.onDidCloseTextDocument(e=>{e.uri.scheme==="tempsvnfs"&&this.delete(e.uri)}))}watch(e){return new K.Disposable(()=>{})}stat(e){return this._lookup(e,!1)}readDirectory(e){let t=this._lookupAsDirectory(e,!1),r=[];for(let[i,o]of t.entries)r.push([i,o.type]);return r}createDirectory(e){let t=dt.posix.basename(e.path),r=e.with({path:dt.posix.dirname(e.path)}),i=this._lookupAsDirectory(r,!1),o=new rr(t);i.entries.set(o.name,o),i.mtime=Date.now(),i.size+=1,this._fireSoon({type:K.FileChangeType.Changed,uri:r},{type:K.FileChangeType.Created,uri:e})}readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw K.FileSystemError.FileNotFound()}writeFile(e,t,r){let i=dt.posix.basename(e.path),o=this._lookupParentDirectory(e),s=o.entries.get(i);if(s instanceof rr)throw K.FileSystemError.FileIsADirectory(e);if(!s&&!r.create)throw K.FileSystemError.FileNotFound(e);if(s&&r.create&&!r.overwrite)throw K.FileSystemError.FileExists(e);s||(s=new wo(i),o.entries.set(i,s),this._fireSoon({type:K.FileChangeType.Created,uri:e})),s.mtime=Date.now(),s.size=t.byteLength,s.data=t,this._fireSoon({type:K.FileChangeType.Changed,uri:e})}delete(e){let t=e.with({path:dt.posix.dirname(e.path)}),r=dt.posix.basename(e.path),i=this._lookupAsDirectory(t,!1);if(!i.entries.has(r))throw K.FileSystemError.FileNotFound(e);i.entries.delete(r),i.mtime=Date.now(),i.size-=1,this._fireSoon({type:K.FileChangeType.Changed,uri:t},{type:K.FileChangeType.Deleted,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw K.FileSystemError.FileExists(t);let i=this._lookup(e,!1),o=this._lookupParentDirectory(e),s=this._lookupParentDirectory(t),a=dt.posix.basename(t.path);o.entries.delete(i.name),i.name=a,s.entries.set(a,i),this._fireSoon({type:K.FileChangeType.Deleted,uri:e},{type:K.FileChangeType.Created,uri:t})}async createTempSvnRevisionFile(e,t,r){let i=`r${t}_${dt.basename(e.fsPath)}`,s=cp.createHash("md5").update(e.path).digest("hex"),a=$.get("default.encoding"),c;a?c=Buffer.from(Jr.encode(r,a)):c=Buffer.from(r),this._root.entries.has(s)||this.createDirectory(K.Uri.parse(`tempsvnfs:/${s}`));let u=K.Uri.parse(`tempsvnfs:/${s}/${i}`,!0);return this.writeFile(u,c,{create:!0,overwrite:!0}),u}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[];for(let[e]of this.readDirectory(K.Uri.parse("tempsvnfs:/")))this.delete(K.Uri.parse(`tempsvnfs:/${e}`))}_lookup(e,t){let r=e.path.split("/"),i=this._root;for(let o of r){if(!o)continue;let s;if(i instanceof rr&&(s=i.entries.get(o)),!s){if(t)return;throw K.FileSystemError.FileNotFound(e)}i=s}return i}_lookupAsDirectory(e,t){let r=this._lookup(e,t);if(r instanceof rr)return r;throw K.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let r=this._lookup(e,t);if(r instanceof wo)return r;throw K.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let t=e.with({path:dt.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandler&&clearTimeout(this._fireSoonHandler),this._fireSoonHandler=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},1)}},jt=new ka;var vo=class extends U{constructor(){super("svn.searchLogByText",{repository:!0})}async execute(e){let t=await nt.window.showInputBox({prompt:"Search query"});if(!t)return;if(!Qr(t)){nt.window.showErrorMessage("Invalid search pattern: contains forbidden characters");return}let r=nt.Uri.parse("tempsvnfs:/svn.log");jt.writeFile(r,Buffer.from(""),{create:!0,overwrite:!0}),await nt.commands.executeCommand("vscode.open",r);try{let i=await nt.window.withProgress({cancellable:!1,location:nt.ProgressLocation.Notification,title:"Searching Log"},async()=>e.plainLogByText(t));jt.writeFile(r,Buffer.from(i),{create:!0,overwrite:!0})}catch(i){nt.window.showErrorMessage(`Search failed: ${i instanceof Error?i.message:String(i)}`),console.error(i)}}};var Rr=require("vscode");var bo=class extends U{constructor(){super("svn.merge",{repository:!0})}async execute(e){let t=await mr(e);t&&await this.merge(e,t)}async merge(e,t){let r=!1;gc(e.currentBranch)&&(r=!0);try{await e.merge(t.path,r)}catch(i){let o=i;o.stderrFormated?o.stderrFormated.includes("try updating first")?await Rr.window.showErrorMessage("Seems like you need to update first prior to merging. Would you like to update now and try merging again?","Yes","No")==="Yes"&&(await Rr.commands.executeCommand("svn.update"),await this.merge(e,t)):Rr.window.showErrorMessage("Unable to merge branch: "+o.stderrFormated):(console.log(i),Rr.window.showErrorMessage("Unable to merge branch"))}}};function up(n,e){e.push(new Si(n)),e.push(new Ci),e.push(new Oi),e.push(new Ki),e.push(new bi),e.push(new Ln),e.push(new kn),e.push(new to),e.push(new vi),e.push(new Ai),e.push(new Li),e.push(new Ri),e.push(new xo),e.push(new bo),e.push(new lo),e.push(new mo),e.push(new eo),e.push(new Fi),e.push(new Mi),e.push(new Ui),e.push(new no),e.push(new co),e.push(new ao),e.push(new uo),e.push(new Di),e.push(new po),e.push(new yi),e.push(new gi),e.push(new io),e.push(new Ii),e.push(new Fn),e.push(new Mn),e.push(new oo),e.push(new go),e.push(new Pi),e.push(new Zi),e.push(new di),e.push(new ro),e.push(new Ei),e.push(new Ti),e.push(new _i),e.push(new fo),e.push(new Qi(n.svn.version)),e.push(new ho),e.push(new yo),e.push(new vo)}var Eo=require("vscode");var hn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidChangeStatusRepository(this.checkHasChangesOnActiveEditor,this,this.disposables),Eo.window.onDidChangeActiveTextEditor(()=>this.checkHasChangesOnActiveEditor(),this,this.disposables)}checkHasChangesOnActiveEditor(){Nt("svnActiveEditorHasChanges",this.hasChangesOnActiveEditor())}hasChangesOnActiveEditor(){if(!Eo.window.activeTextEditor)return!1;let e=Eo.window.activeTextEditor.document.uri,t=this.sourceControlManager.getRepository(e);if(!t)return!1;let r=t.getResourceFromFile(e);if(!r)return!1;switch(r.type){case"added":case"deleted":case"external":case"ignored":case"none":case"normal":case"unversioned":return!1;case"conflicted":case"incomplete":case"merged":case"missing":case"modified":case"obstructed":case"replaced":return!0}return!0}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Oe(100)],hn.prototype,"checkHasChangesOnActiveEditor",1);var xn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidOpenRepository(this.checkOpened,this,this.disposables),e.onDidCloseRepository(this.checkOpened,this,this.disposables),this.checkOpened()}checkOpened(){Nt("svnOpenRepositoryCount",this.sourceControlManager.repositories.length)}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Oe(100)],xn.prototype,"checkOpened",1);var yn=W(require("path")),ie=require("vscode");var xp=require("crypto"),dn=W(require("path")),Xa=W(lp()),dp=W(fp()),he=require("vscode");Xa.default.extend(dp.default);var mn=class{constructor(e){this.path=e}toString(){return this.path}};function Tr(n,e,t){return n.map(r=>({kind:e,data:r,parent:t}))}function Co(n){let e=dn.join(__dirname,"..","icons"),t=r=>he.Uri.file(dn.join(e,r,`${n}.svg`));return{light:t("light"),dark:t("dark")}}async function Pr(n,e){let t=he.env.clipboard;if(t===void 0){he.window.showErrorMessage("Clipboard is supported in VS Code 1.30 and newer");return}if(e.kind===2){let r=e.data;switch(n){case"msg":case"revision":await t.writeText(r[n])}}}function qg(n,e,t){return!(n.length&&n[n.length-1].revision==="1"||e.length===0||e[e.length-1].revision==="1"||e.length<t)}function Io(n,e,t){let r=n.persisted.baseRevision;if(e.length&&r&&parseInt(e[0].revision,10)>r){let i=1;for(;e.length>i&&parseInt(e[i].revision,10)>r;)i++;let o=new he.TreeItem("BASE");o.tooltip="Log entries above do not exist in working copy",t.splice(i,0,{kind:4,data:o})}}async function Wa(n,e){if(n.localFullPath===void 0){e&&he.window.showErrorMessage("No working copy for this path");return}let t;try{t=await ot(n.localFullPath.fsPath)}catch{return he.window.showWarningMessage("Not available from this working copy: "+n.localFullPath),!1}return t.isFile()?!0:(he.window.showErrorMessage("This target is not a file"),!1)}function gn(){let n=Number.parseInt($.get("log.length")||"50",10);if(isNaN(n)||n<=0)throw new Error("Invalid log.length setting value");return n}async function Or(n){let e=n.persisted.commitFrom,t=n.entries;t.length&&(e=t[t.length-1].revision,e=(Number.parseInt(e,10)-1).toString());let r=[],i=gn();try{r=await n.repo.log(e,"1",i,n.svnTarget)}catch{}qg(t,r,i)||(n.isComplete=!0),t.push(...r)}var pp=new Map;function jg(n){let e=(0,xp.createHash)("md5");return e.write(n),e.digest().toString("hex")}function So(n,e=16){if(!$.get("gravatars.enabled",!0)||n===void 0)return new he.ThemeIcon("git-commit");let t=pp.get(n);if(t!==void 0)return t;let r=$.get("gravatar.icon_url","").replace("<AUTHOR>",n).replace("<AUTHOR_MD5>",jg(n)).replace("<SIZE>",e.toString());return t=he.Uri.parse(r),pp.set(n,t),t}function Do(n){let e=(0,Xa.default)(n.date).fromNow();return`r${n.revision}, ${e} by ${n.author}`}function Ro(n){return n.msg?n.msg.split(/\r?\n/,1)[0]:"<blank>"}function To(n){let e=n.date;return isNaN(Date.parse(e))||(e=new Date(e).toString()),`Author: ${n.author}
${e}
Revision: ${n.revision}
Message: ${n.msg}`}async function hp(n,e,t){if(t==="BASE"){let s=n.getPathNormalizer().parse(e.toString(!0)).localFullPath;if(s===void 0||!await le(s.path)){let a="BASE revision doesn't exist for "+(s?s.path:"remote path");throw he.window.showErrorMessage(a),new Error(a)}return s}let r;try{r=await n.show(e,t)}catch(i){throw he.window.showErrorMessage("Failed to open path"),i}return jt.createTempSvnRevisionFile(e,t,r)}async function nr(n,e,t,r,i){let o=await hp(n,e,t),s=await hp(n,i||e,r),a={preview:!0},c=`${dn.basename(e.path)} (${t} : ${r})`;return he.commands.executeCommand("vscode.diff",o,s,c,a)}async function Nr(n,e,t){let r;try{r=await n.show(e,t)}catch{he.window.showErrorMessage("Failed to open path");return}let i=await jt.createTempSvnRevisionFile(e,t,r),o={preview:!0};return he.commands.executeCommand("vscode.open",i,o)}var Po=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new ie.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose=[];this._dispose.push(ie.window.onDidChangeActiveTextEditor(this.editorChanged,this),ie.window.registerTreeDataProvider("itemlog",this),ie.commands.registerCommand("svn.itemlog.copymsg",async t=>Pr("msg",t)),ie.commands.registerCommand("svn.itemlog.copyrevision",async t=>Pr("revision",t)),ie.commands.registerCommand("svn.itemlog.openFileRemote",this.openFileRemoteCmd,this),ie.commands.registerCommand("svn.itemlog.openDiff",this.openDiffCmd,this),ie.commands.registerCommand("svn.itemlog.openDiffBase",this.openDiffBaseCmd,this),ie.commands.registerCommand("svn.itemlog.refresh",this.refresh,this)),this.refresh()}dispose(){Ie(this._dispose)}async openFileRemoteCmd(e){let t=e.data,r=He(this.currentItem);return Nr(r.repo,r.svnTarget,t.revision)}async openDiffBaseCmd(e){let t=e.data,r=He(this.currentItem);return nr(r.repo,r.svnTarget,t.revision,"BASE")}async openDiffCmd(e){let t=e.data,r=He(this.currentItem),i=r.entries.findIndex(s=>s===t);if(i===r.entries.length-1){ie.window.showWarningMessage("Cannot diff last commit");return}let o=r.entries[i+1].revision;return nr(r.repo,r.svnTarget,o,t.revision)}async editorChanged(e){return this.refresh(void 0,e)}async refresh(e,t,r){if(r){await Or(He(this.currentItem)),this._onDidChangeTreeData.fire(e);return}if(t===void 0&&(t=ie.window.activeTextEditor),t){let i=t.document.uri;if(i.scheme==="file"){let o=this.sourceControlManager.getRepository(i);if(o!==null)try{let s=await o.getInfo(i.fsPath);this.currentItem={isComplete:!1,entries:[],repo:o,svnTarget:ie.Uri.parse(s.url),persisted:{commitFrom:"HEAD",baseRevision:parseInt(s.revision,10)},order:0}}catch{}}this._onDidChangeTreeData.fire(e)}}async getTreeItem(e){let t;if(e.kind===2){let r=e.data;t=new ie.TreeItem(Ro(r),ie.TreeItemCollapsibleState.None),t.description=Do(r),t.iconPath=So(r.author),t.tooltip=To(r),t.contextValue="diffable",t.command={command:"svn.itemlog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Shouldn't happen");return t}async getChildren(e){if(this.currentItem===void 0)return[];if(e===void 0){let t=yn.basename(this.currentItem.svnTarget.fsPath),r=new ie.TreeItem(t,ie.TreeItemCollapsibleState.Expanded);return r.tooltip=yn.dirname(this.currentItem.svnTarget.fsPath),r.description=yn.dirname(this.currentItem.svnTarget.fsPath),r.iconPath=new ie.ThemeIcon("history"),[{kind:4,data:r}]}else{let t=this.currentItem.entries;t.length===0&&await Or(this.currentItem);let r=Tr(t,2);if(Io(this.currentItem,t,r),!this.currentItem.isComplete){let i=new ie.TreeItem(`Load another ${gn()} revisions`),o={kind:4,data:i};i.tooltip="Paging size may be adjusted using log.length setting",i.command={command:"svn.itemlog.refresh",arguments:[e,void 0,!0],title:"refresh element"},i.iconPath=new ie.ThemeIcon("unfold"),r.push(o)}return r}}};var Gt=W(require("path")),G=require("vscode");var Ep=W(require("path")),se=require("vscode");var _r=require("vscode");var wn=W(require("path")),Oo=class{constructor(e,t,r){this.repository=e;this.workspaceRoot=t;this.root=r}async updateStatus(e){let t=this.getConfiguration(),r=await this.fetchStatuses(t.combineExternal,e.checkRemoteChanges),i=this.buildExcludeList(t.filesExclude),{statusExternal:o,statusesRepository:s}=await this.separateExternals(r,t.combineExternal),a=this.categorizeStatuses(s,i,t);return{changes:a.changes,conflicts:a.conflicts,unversioned:a.unversioned,changelists:a.changelists,remoteChanges:a.remoteChanges,statusExternal:o,statusIgnored:a.statusIgnored,isIncomplete:a.isIncomplete,needCleanUp:a.needCleanUp}}getConfiguration(){let t=_r.workspace.getConfiguration("files",_r.Uri.file(this.root)).get("exclude")??{};return{combineExternal:$.get("sourceControl.combineExternalIfSameServer",!1),hideUnversioned:$.get("sourceControl.hideUnversioned",!1),ignoreList:$.get("sourceControl.ignore",[]),ignoreOnStatusCountList:$.get("sourceControl.ignoreOnStatusCount",[]),countUnversioned:$.get("sourceControl.countUnversioned",!1),filesExclude:t}}async fetchStatuses(e,t){return await this.repository.getStatus({includeIgnored:!0,includeExternals:e,checkRemoteChanges:t})}buildExcludeList(e){let t=[];for(let r in e)if(e.hasOwnProperty(r)){let i=!e[r];t.push((i?"!":"")+r)}return t}async separateExternals(e,t){let r=e.filter(o=>o.status==="external");if(t&&r.length){let o=await this.repository.getRepositoryUuid();r=r.filter(s=>o!==s.repositoryUuid)}let i=e.filter(o=>o.status==="external"?!1:!r.some(s=>Se(s.path,o.path)));return{statusExternal:r,statusesRepository:i}}categorizeStatuses(e,t,r){let i=[],o=[],s=[],a=new Map,c=[],u=[],d=!1,m=!1;for(let h of e){if(h.path==="."&&(d=h.status==="incomplete",m=h.wcStatus.locked),h.wcStatus.switched&&(d=!0),h.wcStatus.locked||h.wcStatus.switched||h.status==="incomplete"||er(h.path,t,{dot:!0}))continue;let l=_r.Uri.file(wn.join(this.workspaceRoot,h.path)),y=h.rename?_r.Uri.file(wn.join(this.workspaceRoot,h.rename)):void 0;h.reposStatus&&c.push(new ee(l,h.reposStatus.item,void 0,h.reposStatus.props,!0));let b=new ee(l,h.status,y,h.props);if(!((h.status==="normal"||h.status==="none")&&(h.props==="normal"||h.props==="none")&&!h.changelist))if(h.status==="ignored")u.push(h);else if(h.status==="conflicted")o.push(b);else if(h.status==="unversioned"){if(r.hideUnversioned)continue;let R=h.path.match(/(.+?)\.(mine|working|merge-\w+\.r\d+|r\d+)$/);if(R&&R[1]&&e.some(_=>_.path===R[1])||r.ignoreList.length>0&&er(wn.sep+h.path,r.ignoreList,{dot:!0,matchBase:!0}))continue;s.push(b)}else if(h.changelist){let R=a.get(h.changelist);R||(R=[]),R.push(b),a.set(h.changelist,R)}else i.push(b)}return{changes:i,conflicts:o,unversioned:s,changelists:a,remoteChanges:c,statusIgnored:u,isIncomplete:d,needCleanUp:m}}};var mp=require("vscode");var No=class{constructor(e,t){this.sourceControl=e;this._changelists=new Map;this._disposables=[];this._prevChangelistsSize=0;this._changes=this.createGroup("changes","Changes"),this._changes.hideWhenEmpty=!0,this._conflicts=this.createGroup("conflicts","Conflicts"),this._conflicts.hideWhenEmpty=!0,this._unversioned=this.createGroup("unversioned","Unversioned"),this._unversioned.hideWhenEmpty=!0,this._disposables.push(this._changes,this._conflicts),this._disposables.push(Ue(()=>this._unversioned.dispose())),this._disposables.push(Ue(()=>{this._remoteChanges&&this._remoteChanges.dispose()})),t.push(Ue(()=>this.dispose()))}get changes(){return this._changes}get conflicts(){return this._conflicts}get unversioned(){return this._unversioned}get changelists(){return this._changelists}get remoteChanges(){return this._remoteChanges}updateGroups(e){var o,s;let{result:t,config:r}=e;this._changes.resourceStates=t.changes,this._conflicts.resourceStates=t.conflicts,this._changelists.forEach(a=>{a.resourceStates=[]}),t.changelists.forEach((a,c)=>{let u=this._changelists.get(c);u||(u=this.createGroup(`changelist-${c}`,`Changelist "${c}"`),u.hideWhenEmpty=!0,this._disposables.push(u),this._changelists.set(c,u)),u.resourceStates=a});let i=new Set(t.changelists.keys());if(this._changelists.forEach((a,c)=>{i.has(c)||(a.dispose(),this._changelists.delete(c))}),this._prevChangelistsSize!==this._changelists.size&&(this._unversioned.dispose(),this._unversioned=this.createGroup("unversioned","Unversioned"),this._unversioned.hideWhenEmpty=!0),this._unversioned.resourceStates=t.unversioned,!this._remoteChanges||this._prevChangelistsSize!==this._changelists.size){let a=((o=this._remoteChanges)==null?void 0:o.resourceStates)??[];(s=this._remoteChanges)==null||s.dispose(),this._remoteChanges=this.createGroup("remotechanges","Remote Changes"),this._remoteChanges.hideWhenEmpty=!0,this._remoteChanges.resourceStates=a}return this._remoteChanges.resourceStates=t.remoteChanges,this._prevChangelistsSize=this._changelists.size,this.calculateCount(r)}getResourceFromFile(e){typeof e=="string"&&(e=mp.Uri.file(e));let t=[this._changes,this._conflicts,this._unversioned,...this._changelists.values()],r=e.toString();for(let i of t)for(let o of i.resourceStates)if(r===o.resourceUri.toString()&&o instanceof ee)return o}calculateCount(e){let t=[this._changes,this._conflicts];return this._changelists.forEach((r,i)=>{e.ignoreOnStatusCountList.includes(i)||t.push(r)}),e.countUnversioned&&t.push(this._unversioned),t.reduce((r,i)=>r+i.resourceStates.length,0)}createGroup(e,t){return this.sourceControl.createResourceGroup(e,t)}clearAll(){var e;this._changes.resourceStates=[],this._unversioned.resourceStates=[],this._conflicts.resourceStates=[],this._changelists.forEach((t,r)=>{t.resourceStates=[]}),(e=this._remoteChanges)==null||e.dispose(),this._remoteChanges=void 0}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[],this._changelists.clear()}};var _o=class{constructor(e,t){this.onPoll=e;this.getConfig=t;this.disposed=!1}start(){if(this.disposed)throw new Error("Cannot start disposed RemoteChangeService");this.stop();let t=this.getConfig().checkFrequencySeconds*1e3;t!==0&&(this.interval=setInterval(()=>{this.onPoll()},t))}stop(){this.interval!==void 0&&(clearInterval(this.interval),this.interval=void 0)}restart(){this.start()}get isRunning(){return this.interval!==void 0}dispose(){this.stop(),this.disposed=!0}};var vn=class{constructor(){this.operations=new Map}start(e){this.operations.set(e,(this.operations.get(e)||0)+1)}end(e){let t=(this.operations.get(e)||0)-1;t<=0?this.operations.delete(e):this.operations.set(e,t)}isRunning(e){return this.operations.has(e)}isIdle(){let e=this.operations.keys();for(let t of e)if(!Nn(t))return!1;return!0}};var Wt=require("path"),gp=W(require("path")),En=require("vscode");var bn=require("path"),Va=require("vscode");function Xt(n){return n.path||"/"}var mt=class{constructor(e,t,r,i,o){this.remoteRoot=e;this.branchRoot=t;this.checkoutRoot=r;this._path=i;this._revision=o;if(i.length===0||i.charAt(0)==="/")throw new Error("Invalid _path "+i)}get remoteFullPath(){return Va.Uri.parse(this.remoteRoot.toString()+"/"+this._path)}get localFullPath(){if(this.checkoutRoot!==void 0)return Va.Uri.file(bn.posix.join(this.checkoutRoot.path,bn.posix.relative(this.fromRepoToBranch,this._path)))}get relativeFromBranch(){return bn.posix.relative(this.fromRepoToBranch,this._path)}get fromRepoToBranch(){return bn.posix.relative(Xt(this.remoteRoot),Xt(this.branchRoot))}get revision(){return this._revision}toString(e){return this.remoteFullPath+(e&&this._revision||"")}};H([ge],mt.prototype,"remoteFullPath",1),H([ge],mt.prototype,"localFullPath",1),H([ge],mt.prototype,"relativeFromBranch",1),H([ge],mt.prototype,"fromRepoToBranch",1),H([ge],mt.prototype,"revision",1),H([ge],mt.prototype,"toString",1);var Vt=class{constructor(e){this.repoInfo=e;this.repoRoot=En.Uri.parse(e.repository.root),this.branchRoot=En.Uri.parse(e.url),e.wcInfo&&e.wcInfo.wcrootAbspath&&(this.checkoutRoot=En.Uri.file(e.wcInfo.wcrootAbspath))}getFullRepoPathFromUrl(e){if(e.startsWith("/"))return e.substr(1);if(e.startsWith("svn://")||e.startsWith("file://")){let t=En.Uri.parse(e).path;return Wt.posix.relative(Xt(this.repoRoot),t)}else throw new Error("unknown path")}parse(e,t=2,r){let i;if(t===2)i=this.getFullRepoPathFromUrl(e);else if(t===1){if(!Wt.posix.isAbsolute(e))throw new Error("Path isn't absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=gp.relative(this.checkoutRoot.fsPath,e),i=Wt.posix.join(this.fromRootToBranch(),i)}else if(t===0){if(Wt.posix.isAbsolute(e))throw new Error("Path is absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=Wt.posix.join(this.fromRootToBranch(),e)}else throw new Error("unsupported kind");return new mt(this.repoRoot,this.branchRoot,this.checkoutRoot,i,r)}fromRootToBranch(){return Wt.posix.relative(Xt(this.repoRoot),Xt(this.branchRoot))}fromBranchToRoot(){return Wt.posix.relative(Xt(this.branchRoot),Xt(this.repoRoot))}};H([ge],Vt.prototype,"fromRootToBranch",1),H([ge],Vt.prototype,"fromBranchToRoot",1);var yp=require("vscode");var Ao=class{constructor(e){this.repository=e;this._onDidChange=new yp.EventEmitter;this.disposables=[];e.onDidChangeStatus(this._onDidChange.fire,this._onDidChange,this.disposables),e.onDidChangeOperations(this._onDidChange.fire,this._onDidChange,this.disposables)}get onDidChange(){return this._onDidChange.event}get command(){if(!this.repository.currentBranch)return;let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch");return{command:"svn.switchBranch",tooltip:"Switch Branch...",title:`$(git-branch) ${this.repository.currentBranch}${e?" (Switching)":""}`,arguments:[this.repository.sourceControl]}}dispose(){this.disposables.forEach(e=>e.dispose())}};var wp=require("vscode");var Mo=class Mo{constructor(e){this.repository=e;this._onDidChange=new wp.EventEmitter;this.disposables=[];this._state=Mo.startState;e.onDidChangeStatus(this.onModelChange,this,this.disposables),e.onDidChangeOperations(this.onOperationsChange,this,this.disposables),this._onDidChange.fire()}get onDidChange(){return this._onDidChange.event}get state(){return this._state}set state(e){this._state=e,this._onDidChange.fire()}onOperationsChange(){let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch")||this.repository.operations.isRunning("Update")||this.repository.operations.isRunning("Merge"),t=this.repository.operations.isRunning("StatusRemote"),r=!this.repository.operations.isIdle();this.state={...this.state,isStatusRemoteRunning:t,isOperationRunning:r,isSyncRunning:e}}onModelChange(){this.state={...this.state,remoteChangedFiles:this.repository.remoteChangedFiles}}get command(){let e="$(sync)",t="",r="",i="";return this.state.isSyncRunning?(r="",e="$(sync~spin)",t="",i="Updating Revision..."):this.state.isStatusRemoteRunning?(r="",e="$(sync~spin)",t="",i="Checking remote updates..."):this.state.isOperationRunning?(r="",e="$(sync~spin)",t="Running",i="Running..."):this.state.needCleanUp?(r="svn.cleanup",e="$(alert)",t="Need cleanup",i="Run cleanup command"):this.state.isIncomplete?(r="svn.finishCheckout",e="$(issue-reopened)",t="Incomplete (Need finish checkout)",i="Run update to complete"):this.state.remoteChangedFiles>0?(e="$(cloud-download)",r="svn.update",i="Update Revision",t=`${this.state.remoteChangedFiles}\u2193`):(r="svn.update",i="Update Revision"),{command:r,title:[e,t].join(" ").trim(),tooltip:i,arguments:[this.repository]}}dispose(){this.disposables.forEach(e=>e.dispose())}};Mo.startState={isIncomplete:!1,isOperationRunning:!1,isStatusRemoteRunning:!1,isSyncRunning:!1,needCleanUp:!1,remoteChangedFiles:0};var Lo=Mo;var Fo=class{constructor(e){this.disposables=[];this.checkoutStatusBar=new Ao(e),this.syncStatusBar=new Lo(e),this.disposables.push(this.checkoutStatusBar,this.syncStatusBar)}get onDidChange(){return st(this.syncStatusBar.onDidChange,this.checkoutStatusBar.onDidChange)}get commands(){let e=[],t=this.checkoutStatusBar.command;t&&e.push(t);let r=this.syncStatusBar.command;return r&&e.push(r),e}dispose(){this.disposables.forEach(e=>e.dispose())}};var Be=require("vscode"),vp=require("fs");var bp=require("path");var Cn=class{constructor(e){this.root=e;this.disposables=[];let t=Be.workspace.createFileSystemWatcher(new Be.RelativePattern(rt(e),"**"));this._onRepoChange=new Be.EventEmitter,this._onRepoCreate=new Be.EventEmitter,this._onRepoDelete=new Be.EventEmitter;let r,i,o;typeof Be.workspace.workspaceFolders<"u"&&!Be.workspace.workspaceFolders.filter(m=>Se(m.uri.fsPath,e)).length&&((0,vp.watch)((0,bp.join)(e,vt()),this.repoWatch.bind(this)).on("error",h=>{throw h}),r=this._onRepoChange.event,i=this._onRepoCreate.event,o=this._onRepoDelete.event),this.disposables.push(t);let s=m=>/[\\\/](\.svn|_svn)[\\\/]tmp/.test(m.path),a=m=>!s(m);this.onDidChange=me(t.onDidChange,a),this.onDidCreate=me(t.onDidCreate,a),this.onDidDelete=me(t.onDidDelete,a),this.onDidAny=st(this.onDidChange,this.onDidCreate,this.onDidDelete);let c=/[\\\/](\.svn|_svn)[\\\/]/,u=m=>!c.test(m.path);this.onDidWorkspaceChange=me(this.onDidChange,u),this.onDidWorkspaceCreate=me(this.onDidCreate,u),this.onDidWorkspaceDelete=me(this.onDidDelete,u),this.onDidWorkspaceAny=st(this.onDidWorkspaceChange,this.onDidWorkspaceCreate,this.onDidWorkspaceDelete);let d=m=>c.test(m.path);this.onDidSvnChange=me(this.onDidChange,d),this.onDidSvnCreate=me(this.onDidCreate,d),this.onDidSvnDelete=me(this.onDidDelete,d),r&&i&&o&&(this.onDidSvnChange=r,this.onDidSvnCreate=i,this.onDidSvnDelete=o),this.onDidSvnAny=st(this.onDidSvnChange,this.onDidSvnCreate,this.onDidSvnDelete)}repoWatch(e,t){t&&(e==="change"?this._onRepoChange.fire(Be.Uri.parse(t)):e==="rename"&&le(t).then(r=>{r?this._onRepoCreate.fire(Be.Uri.parse(t)):this._onRepoDelete.fire(Be.Uri.parse(t))}))}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Oe(1e3)],Cn.prototype,"repoWatch",1);function Wg(n){switch(n){case"CurrentBranch":case"Show":case"Info":return!1;default:return!0}}var Te=class{constructor(e,t){this.repository=e;this.secrets=t;this.statusIgnored=[];this.statusExternal=[];this.disposables=[];this.currentBranch="";this.remoteChangedFiles=0;this.isIncomplete=!1;this.needCleanUp=!1;this.deletedUris=[];this.canSaveAuth=!1;this._onDidChangeRepository=new se.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeState=new se.EventEmitter;this.onDidChangeState=this._onDidChangeState.event;this._onDidChangeStatus=new se.EventEmitter;this.onDidChangeStatus=this._onDidChangeStatus.event;this._onDidChangeRemoteChangedFiles=new se.EventEmitter;this.onDidChangeRemoteChangedFile=this._onDidChangeRemoteChangedFiles.event;this._onRunOperation=new se.EventEmitter;this.onRunOperation=this._onRunOperation.event;this._onDidRunOperation=new se.EventEmitter;this.onDidRunOperation=this._onDidRunOperation.event;this._operations=new vn;this._state=0;this.statusService=new Oo(e,e.workspaceRoot,e.root),this._fsWatcher=new Cn(e.root),this.disposables.push(this._fsWatcher),this._fsWatcher.onDidAny(this.onFSChange,this,this.disposables),this._fsWatcher.onDidSvnAny(async r=>{await this.onDidAnyFileChanged(r)},this,this.disposables),this.sourceControl=se.scm.createSourceControl("svn","SVN",se.Uri.file(e.workspaceRoot)),this.sourceControl.count=0,this.sourceControl.inputBox.placeholder="Message (press Ctrl+Enter to commit)",this.sourceControl.acceptInputCommand={command:"svn.commitWithMessage",title:"commit",arguments:[this.sourceControl]},this.sourceControl.quickDiffProvider=this,this.disposables.push(this.sourceControl),this.statusBar=new Fo(this),this.disposables.push(this.statusBar),this.statusBar.onDidChange(()=>this.sourceControl.statusBarCommands=this.statusBar.commands,null,this.disposables),this.groupManager=new No(this.sourceControl,this.disposables),this.remoteChangeService=new _o(()=>this.updateRemoteChangedFiles(),()=>({checkFrequencySeconds:$.get("remoteChanges.checkFrequency",300)})),this._fsWatcher.onDidWorkspaceDelete(r=>this.deletedUris.push(r),this,this.disposables),this.onDidChangeStatus(this.actionForDeletedFiles,this,this.disposables),this.remoteChangeService.start(),this.updateRemoteChangedFiles(),$.onDidChange(r=>{r.affectsConfiguration("svn.remoteChanges.checkFrequency")&&(this.remoteChangeService.restart(),this.updateRemoteChangedFiles())}),this.status(),this.disposables.push(se.workspace.onDidSaveTextDocument(r=>{this.onDidSaveTextDocument(r)}))}get changes(){return this.groupManager.changes}get conflicts(){return this.groupManager.conflicts}get unversioned(){return this.groupManager.unversioned}get changelists(){return this.groupManager.changelists}get remoteChanges(){return this.groupManager.remoteChanges}get fsWatcher(){return this._fsWatcher}get onDidChangeOperations(){return st(this.onRunOperation,this.onDidRunOperation)}get operations(){return this._operations}get state(){return this._state}set state(e){this._state=e,this._onDidChangeState.fire(e),this.groupManager.clearAll(),this.isIncomplete=!1,this.needCleanUp=!1}get root(){return this.repository.root}get workspaceRoot(){return this.repository.workspaceRoot}get branchRoot(){return se.Uri.parse(this.repository.info.url)}get inputBox(){return this.sourceControl.inputBox}get username(){return this.repository.username}set username(e){this.repository.username=e}get password(){return this.repository.password}set password(e){this.repository.password=e}async onDidAnyFileChanged(e){await this.repository.updateInfo(),this._onDidChangeRepository.fire(e)}async actionForDeletedFiles(){if(!this.deletedUris.length)return;let e=this.deletedUris;this.deletedUris=[];let t=$.get("delete.actionForDeletedFiles","prompt");if(t==="none")return;let i=e.map(a=>this.getResourceFromFile(a)).filter(a=>a&&a.type==="missing").map(a=>a.resourceUri);if(!i.length)return;let s=$.get("delete.ignoredRulesForDeletedFiles",[]).map(a=>Wu(a));if(s.length&&(i=i.filter(a=>{let c=this.repository.removeAbsolutePath(a.fsPath);return!s.some(u=>u.match(c)||u.match(a.fsPath))})),!!i.length){if(t==="remove")return this.removeFiles(i.map(a=>a.fsPath),!1);if(t==="prompt")return se.commands.executeCommand("svn.promptRemove",...i)}}async updateRemoteChangedFiles(){$.get("remoteChanges.checkFrequency",300)?this.run("StatusRemote"):this.groupManager.remoteChanges&&(this.groupManager.remoteChanges.resourceStates=[])}onFSChange(e){$.get("autorefresh")&&this.operations.isIdle()&&this.eventuallyUpdateWhenIdleAndWait()}eventuallyUpdateWhenIdleAndWait(){this.updateWhenIdleAndWait()}async updateWhenIdleAndWait(){await this.whenIdleAndFocused(),await this.status(),await ts(5e3)}async whenIdleAndFocused(){for(;;){if(!this.operations.isIdle()){await Yt(this.onDidRunOperation);continue}if(!se.window.state.focused){let e=me(se.window.onDidChangeWindowState,t=>t.focused);await Yt(e);continue}return}}async updateModelState(e=!1){let t=await this.retryRun(async()=>this.statusService.updateStatus({checkRemoteChanges:e}));this.statusExternal=[...t.statusExternal],this.statusIgnored=[...t.statusIgnored],this.isIncomplete=t.isIncomplete,this.needCleanUp=t.needCleanUp;let r=this.groupManager.updateGroups({result:t,config:{ignoreOnStatusCountList:$.get("sourceControl.ignoreOnStatusCount",[]),countUnversioned:$.get("sourceControl.countUnversioned",!1)}});return this.sourceControl.count=r,this.groupManager.remoteChanges&&(this.groupManager.remoteChanges.repository=this),e&&t.remoteChanges.length!==this.remoteChangedFiles&&(this.remoteChangedFiles=t.remoteChanges.length,this._onDidChangeRemoteChangedFiles.fire()),this._onDidChangeStatus.fire(),this.currentBranch=await this.getCurrentBranch(),Promise.resolve()}getResourceFromFile(e){return this.groupManager.getResourceFromFile(e)}provideOriginalResource(e){if(e.scheme==="file"&&!Se(Ep.join(this.root,vt()),e.fsPath))return Ye(e,"SHOW",{},!0)}async getBranches(){try{return await this.repository.getBranches()}catch{return[]}}async status(){return this.run("Status")}async show(e,t){return this.run("Show",()=>this.repository.show(e,t))}async showBuffer(e,t){return this.run("Show",()=>this.repository.showBuffer(e,t))}async addFiles(e){return this.run("Add",()=>this.repository.addFiles(e))}async addChangelist(e,t){return this.run("AddChangelist",()=>this.repository.addChangelist(e,t))}async removeChangelist(e){return this.run("RemoveChangelist",()=>this.repository.removeChangelist(e))}async getCurrentBranch(){return this.run("CurrentBranch",async()=>this.repository.getCurrentBranch())}async newBranch(e,t="Created new branch"){return this.run("NewBranch",async()=>{await this.repository.newBranch(e,t),this.updateRemoteChangedFiles()})}async switchBranch(e,t=!1){await this.run("SwitchBranch",async()=>{await this.repository.switchBranch(e,t),this.updateRemoteChangedFiles()})}async merge(e,t=!1,r="postpone"){await this.run("Merge",async()=>{await this.repository.merge(e,t,r),this.updateRemoteChangedFiles()})}async updateRevision(e=!1){return this.run("Update",async()=>{let t=await this.repository.update(e);return this.updateRemoteChangedFiles(),t})}async pullIncomingChange(e){return this.run("Update",async()=>{let t=await this.repository.pullIncomingChange(e);return this.updateRemoteChangedFiles(),t})}async resolve(e,t){return this.run("Resolve",()=>this.repository.resolve(e,t))}async commitFiles(e,t){return this.run("Commit",()=>this.repository.commitFiles(e,t))}async revert(e,t){return this.run("Revert",()=>this.repository.revert(e,t))}async info(e){return this.run("Info",()=>this.repository.getInfo(e))}async patch(e){return this.run("Patch",()=>this.repository.patch(e))}async patchBuffer(e){return this.run("Patch",()=>this.repository.patchBuffer(e))}async patchChangelist(e){return this.run("Patch",()=>this.repository.patchChangelist(e))}async removeFiles(e,t){return this.run("Remove",()=>this.repository.removeFiles(e,t))}async plainLog(){return this.run("Log",()=>this.repository.plainLog())}async plainLogBuffer(){return this.run("Log",()=>this.repository.plainLogBuffer())}async plainLogByRevision(e){return this.run("Log",()=>this.repository.plainLogByRevision(e))}async plainLogByRevisionBuffer(e){return this.run("Log",()=>this.repository.plainLogByRevisionBuffer(e))}async plainLogByText(e){return this.run("Log",()=>this.repository.plainLogByText(e))}async plainLogByTextBuffer(e){return this.run("Log",()=>this.repository.plainLogByTextBuffer(e))}async log(e,t,r,i){return this.run("Log",()=>this.repository.log(e,t,r,i))}async logByUser(e){return this.run("Log",()=>this.repository.logByUser(e))}async cleanup(){return this.run("CleanUp",()=>this.repository.cleanup())}async removeUnversioned(){return this.run("CleanUp",()=>this.repository.removeUnversioned())}async getInfo(e,t){return this.run("Info",()=>this.repository.getInfo(e,t,!0))}async getChanges(){return this.run("Changes",()=>this.repository.getChanges())}async finishCheckout(){return this.run("SwitchBranch",()=>this.repository.finishCheckout())}async addToIgnore(e,t,r=!1){return this.run("Ignore",()=>this.repository.addToIgnore(e,t,r))}async rename(e,t){return this.run("Rename",()=>this.repository.rename(e,t))}async list(e){return this.run("List",()=>this.repository.ls(e))}getPathNormalizer(){return new Vt(this.repository.info)}getCredentialServiceName(){var r;let e="vscode.positron-svn",t=this.repository.info;return(r=t.repository)!=null&&r.root?e+=":"+t.repository.root:t.url&&(e+=":"+t.url),e}async loadStoredAuths(){this.lastPromptAuth&&await this.lastPromptAuth;let e=await this.secrets.get(this.getCredentialServiceName());return e===void 0?[]:JSON.parse(e)}async saveAuth(){if(this.canSaveAuth&&this.username&&this.password){let e=await this.secrets.get(this.getCredentialServiceName()),t=[];typeof e=="string"&&(t=JSON.parse(e)),t.push({account:this.username,password:this.password}),await this.secrets.store(this.getCredentialServiceName(),JSON.stringify(t)),this.canSaveAuth=!1}}async promptAuth(){if(this.lastPromptAuth)return this.lastPromptAuth;this.lastPromptAuth=se.commands.executeCommand("svn.promptAuth");let e=await this.lastPromptAuth;return e&&(this.username=e.username,this.password=e.password,this.canSaveAuth=!0),this.lastPromptAuth=void 0,e}onDidSaveTextDocument(e){let t=e.uri.toString(),r=this.conflicts.resourceStates.find(o=>o.resourceUri.toString()===t);if(!r)return;let i=e.getText();/^<{7}[^]+^={7}[^]+^>{7}/m.test(i)||se.commands.executeCommand("svn.resolved",r.resourceUri)}async run(e,t=()=>Promise.resolve(null)){if(this.state!==0)throw new Error("Repository not initialized");let r=async()=>{this._operations.start(e),this._onRunOperation.fire(e);try{let i=await this.retryRun(t),o=e==="StatusRemote";return Nn(e)||await this.updateModelState(o),i}catch(i){throw i.svnErrorCode===Ve.NotASvnRepository&&(this.state=1),await le(this.workspaceRoot)||await se.commands.executeCommand("svn.close",this),i}finally{this._operations.end(e),this._onDidRunOperation.fire(e)}};return Wg(e)?se.window.withProgress({location:se.ProgressLocation.SourceControl},r):r()}async retryRun(e=()=>Promise.resolve(null)){let t=0,r=[];for(;;)try{t++;let i=await e();return this.saveAuth(),i}catch(i){let o=i;if(o.svnErrorCode===Ve.RepositoryIsLocked&&t<=10)await ts(Math.pow(t,2)*50);else if(o.svnErrorCode===Ve.AuthorizationFailed&&t<=1+r.length){t===1&&(r=await this.loadStoredAuths());let s=r.length-1;typeof r[s]<"u"&&(this.username=r[s].account,this.password=r[s].password)}else if(o.svnErrorCode===Ve.AuthorizationFailed&&t<=3+r.length){if(!await this.promptAuth())throw i}else throw i}}dispose(){this.disposables=Ie(this.disposables)}};H([ge],Te.prototype,"onDidChangeOperations",1),H([Oe(1e3)],Te.prototype,"onDidAnyFileChanged",1),H([Oe(1e3)],Te.prototype,"actionForDeletedFiles",1),H([Oe(1e3)],Te.prototype,"updateRemoteChangedFiles",1),H([Oe(1e3)],Te.prototype,"eventuallyUpdateWhenIdleAndWait",1),H([ur],Te.prototype,"updateWhenIdleAndWait",1),H([ur,lc("updateModelState")],Te.prototype,"updateModelState",1),H([ur],Te.prototype,"status",1);function Vg(n){let e;switch(n){case"A":e="status-added";break;case"D":e="status-deleted";break;case"M":e="status-modified";break;case"R":e="status-renamed";break}if(e!==void 0)return Co(e)}var Uo=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new G.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.logCache=new Map;this._dispose=[];this.refresh(),this._dispose.push(G.window.registerTreeDataProvider("repolog",this),G.commands.registerCommand("svn.repolog.copymsg",async t=>Pr("msg",t)),G.commands.registerCommand("svn.repolog.copyrevision",async t=>Pr("revision",t)),G.commands.registerCommand("svn.repolog.addrepolike",this.addRepolikeGui,this),G.commands.registerCommand("svn.repolog.remove",this.removeRepo,this),G.commands.registerCommand("svn.repolog.openFileRemote",this.openFileRemoteCmd,this),G.commands.registerCommand("svn.repolog.openDiff",this.openDiffCmd,this),G.commands.registerCommand("svn.repolog.openFileLocal",this.openFileLocal,this),G.commands.registerCommand("svn.repolog.refresh",this.refresh,this),this.sourceControlManager.onDidChangeRepository(async t=>this.refresh()))}getCached(e){let t=He(e);return t.data instanceof mn?He(this.logCache.get(t.data.toString())):this.getCached(t.parent)}dispose(){Ie(this._dispose)}removeRepo(e){this.logCache.delete(e.data.toString()),this.refresh()}async addRepolike(e,t){let r={entries:[],isComplete:!1,svnTarget:{},repo:{},persisted:{commitFrom:t,userAdded:!0},order:this.logCache.size};if(this.logCache.has(e)){G.window.showWarningMessage("This path is already added");return}let i=this.sourceControlManager.getRepository(e);if(i===null)try{let s;if(e.startsWith("^")){let c=this.sourceControlManager.getRepository(He(G.workspace.workspaceFolders)[0].uri);if(!c)throw new Error("No repository in workspace root");let u=await c.getInfo(e);s=G.Uri.parse(u.url)}else s=G.Uri.parse(e);if(t!=="HEAD"&&isNaN(parseInt(t,10)))throw new Error("erroneous revision");let a=await this.sourceControlManager.getRemoteRepository(s);r.repo=a,r.svnTarget=s}catch(s){G.window.showWarningMessage("Failed to add repo: "+(s instanceof Error?s.message:""));return}else try{let s=await i.getInfo(e,t);r.repo=i,r.svnTarget=G.Uri.parse(s.url),r.persisted.baseRevision=parseInt(s.revision,10)}catch{G.window.showErrorMessage("Failed to resolve svn path");return}let o=r.svnTarget.toString(!0);if(this.logCache.has(o)){G.window.showWarningMessage("Repository with this name already exists");return}this.logCache.set(o,r),this._onDidChangeTreeData.fire(void 0)}addRepolikeGui(){let e=G.window.createInputBox();e.prompt="Enter SVN URL or local path",e.onDidAccept(async()=>{let t=e.value;if(!Gt.isAbsolute(t)&&G.workspace.workspaceFolders&&!t.startsWith("^")&&!/^[a-z]+?:\/\//.test(t))for(let i of G.workspace.workspaceFolders){let o=Gt.join(i.uri.fsPath,t);if(await le(o)){t=o;break}}e.dispose();let r=G.window.createInputBox();r.prompt="Enter starting revision (optional)",r.onDidAccept(async()=>{let i=r.value;return r.dispose(),this.addRepolike(t,i||"HEAD")},void 0),r.show()}),e.show()}async openFileRemoteCmd(e){let t=e.data,r=this.getCached(e),i=r.repo.getPathNormalizer().parse(t._);if(await Wa(i,!1)===!1)return;let o=e.parent.data;return Nr(r.repo,i.remoteFullPath,o.revision)}openFileLocal(e){let t=e.data,i=this.getCached(e).repo.getPathNormalizer().parse(t._);Wa(i,!0)&&G.commands.executeCommand("vscode.open",He(i.localFullPath))}async openDiffCmd(e){let t=e.data,r=this.getCached(e),i=e.parent.data,o=r.repo.getPathNormalizer().parse(t._).remoteFullPath,s,a=await r.repo.log(i.revision,"1",2,o);if(a.length===2)s=a[1];else{G.window.showWarningMessage("Cannot find previous commit");return}return nr(r.repo,o,s.revision,i.revision)}async refresh(e,t){if(e===void 0){for(let[r,i]of this.logCache)i.persisted.userAdded||this.logCache.delete(r);for(let r of this.sourceControlManager.repositories){let i=r.branchRoot,o=i.toString(!0),s={commitFrom:"HEAD",baseRevision:parseInt(r.repository.info.revision,10)},a=this.logCache.get(o);a&&(s=a.persisted),this.logCache.set(o,{entries:[],isComplete:!1,repo:r,svnTarget:i,persisted:s,order:this.logCache.size})}}else if(e.kind===1){let r=this.getCached(e);t?await Or(r):(r.entries=[],r.isComplete=!1)}this._onDidChangeTreeData.fire(e)}async getTreeItem(e){let t;if(e.kind===1){let r=e.data,i=this.getCached(e);t=new G.TreeItem(r.toString(),G.TreeItemCollapsibleState.Collapsed),i.persisted.userAdded?(t.label="\u2218 "+t.label,t.contextValue="userrepo"):t.contextValue="repo",i.repo instanceof Te?t.iconPath=new G.ThemeIcon("folder-opened"):t.iconPath=new G.ThemeIcon("repo");let o=i.persisted.commitFrom||"HEAD";t.tooltip=`${r} since ${o}`}else if(e.kind===2){let r=e.data;t=new G.TreeItem(Ro(r),G.TreeItemCollapsibleState.Collapsed),t.description=Do(r),t.tooltip=To(r),t.iconPath=So(r.author),t.contextValue="commit"}else if(e.kind===3){let r=e.data,i=Gt.basename(r._);t=new G.TreeItem(i,G.TreeItemCollapsibleState.None),t.description=Gt.dirname(r._);let s=this.getCached(e).repo.getPathNormalizer();t.tooltip=s.parse(r._).relativeFromBranch,t.iconPath=Vg(r.action),t.contextValue="diffable",t.command={command:"svn.repolog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Unknown tree elem");return t}async getChildren(e){if(e===void 0)return Tr(Array.from(this.logCache.entries()).sort(([t,r],[i,o])=>r.persisted.userAdded!==o.persisted.userAdded?r.persisted.userAdded?1:-1:r.order-o.order).map(([t,r])=>new mn(t)),1);if(e.kind===1){let t=gn(),r=this.getCached(e),i=r.entries;i.length===0&&await Or(r);let o=Tr(i,2,e);if(Io(r,i,o),!r.isComplete){let s=new G.TreeItem(`Load another ${t} revisions`);s.tooltip="Paging size may be adjusted using log.length setting",s.command={command:"svn.repolog.refresh",arguments:[e,!0],title:"refresh element"},s.iconPath=new G.ThemeIcon("unfold"),o.push({kind:4,data:s})}return o}else if(e.kind===2){let t=e.data;return Tr(t.paths,3,e)}return[]}};var ir=W(require("path")),pe=require("vscode");var Cp=require("vscode");var ko=class n{constructor(e){this.repo=e;this.info=e.info}static async open(e,t){let r=await e.open(t.toString(!0),"");return new n(r)}getPathNormalizer(){return new Vt(this.info)}get branchRoot(){return Cp.Uri.parse(this.info.url)}async log(e,t,r,i){return this.repo.log(e,t,r,i)}async show(e,t){return this.repo.show(e,t)}};var In=class{constructor(e,t,r){this._svn=e;this.extensionContact=r;this._onDidOpenRepository=new pe.EventEmitter;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new pe.EventEmitter;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidChangeRepository=new pe.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeStatusRepository=new pe.EventEmitter;this.onDidChangeStatusRepository=this._onDidChangeStatusRepository.event;this.openRepositories=[];this.disposables=[];this.enabled=!1;this.possibleSvnRepositoryPaths=new Set;this.ignoreList=[];this.maxDepth=0;this._onDidChangeState=new pe.EventEmitter;this.onDidchangeState=this._onDidChangeState.event;this._state="uninitialized";if(t!==0)throw new Error("Unsopported policy");return this.enabled=$.get("enabled")===!0,this.configurationChangeDisposable=pe.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this),(async()=>(this.enabled&&await this.enable(),this))()}get state(){return this._state}setState(e){this._state=e,this._onDidChangeState.fire(e)}get isInitialized(){return this._state==="initialized"?Promise.resolve():Yt(me(this.onDidchangeState,e=>e==="initialized"))}get repositories(){return this.openRepositories.map(e=>e.repository)}get svn(){return this._svn}openRepositoriesSorted(){return this.openRepositories.sort((e,t)=>t.repository.workspaceRoot.length-e.repository.workspaceRoot.length)}onDidChangeConfiguration(){let e=$.get("enabled")===!0;this.maxDepth=$.get("multipleFolders.depth",0),e!==this.enabled&&(this.enabled=e,e?this.enable():this.disable())}async enable(){$.get("multipleFolders.enabled",!1)&&(this.maxDepth=$.get("multipleFolders.depth",0),this.ignoreList=$.get("multipleFolders.ignore",[])),pe.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,this.disposables);let t=pe.workspace.createFileSystemWatcher("**");this.disposables.push(t);let r=st(t.onDidChange,t.onDidCreate,t.onDidDelete);me(r,o=>o.scheme==="file"&&!this.getRepository(o))(this.onPossibleSvnRepositoryChange,this,this.disposables),this.setState("initialized"),await this.scanWorkspaceFolders()}onPossibleSvnRepositoryChange(e){let t=e.fsPath.replace(/\.svn.*$/,"");this.eventuallyScanPossibleSvnRepository(t)}eventuallyScanPossibleSvnRepository(e){this.possibleSvnRepositoryPaths.add(e),this.eventuallyScanPossibleSvnRepositories()}eventuallyScanPossibleSvnRepositories(){for(let e of this.possibleSvnRepositoryPaths)this.tryOpenRepository(e,1);this.possibleSvnRepositoryPaths.clear()}scanExternals(e){$.get("detectExternals")===!0&&e.statusExternal.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}scanIgnored(e){$.get("detectIgnored")===!0&&e.statusIgnored.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}disable(){this.repositories.forEach(e=>e.dispose()),this.openRepositories=[],this.possibleSvnRepositoryPaths.clear(),this.disposables=Ie(this.disposables)}async onDidChangeWorkspaceFolders({added:e,removed:t}){let r=e.filter(o=>!this.getOpenRepository(o.uri)),i=t.map(o=>this.getOpenRepository(o.uri.fsPath)).filter(o=>!!o).filter(o=>!(pe.workspace.workspaceFolders||[]).some(s=>o.repository.workspaceRoot.startsWith(s.uri.fsPath)));r.forEach(o=>this.tryOpenRepository(o.uri.fsPath)),i.forEach(o=>o.repository.dispose())}async scanWorkspaceFolders(){for(let e of pe.workspace.workspaceFolders||[]){let t=e.uri.fsPath;await this.tryOpenRepository(t)}}async tryOpenRepository(e,t=0){if(this.getRepository(e))return;if(await ns(e,t===0)){let o=pe.workspace.getConfiguration("svn",pe.Uri.file(e));if(new Set((o.get("ignoreRepositories")||[]).map(a=>at(a))).has(at(e)))return;try{let a=await this.svn.getRepositoryRoot(e),c=new Te(await this.svn.open(a,e),this.extensionContact.secrets);this.open(c)}catch(a){if(a instanceof Tt&&a.svnErrorCode===Ve.WorkingCopyIsTooOld){await pe.commands.executeCommand("svn.upgrade",e);return}console.error(a)}return}let i=t+1;if(i<=this.maxDepth){let o=[];try{o=await zt(e)}catch{return}for(let s of o){let a=e+"/"+s,c;try{c=await wt(a)}catch{continue}c.isDirectory()&&!er(a,this.ignoreList,{dot:!0})&&await this.tryOpenRepository(a,i)}}}async getRemoteRepository(e){return ko.open(this.svn,e)}getRepository(e){let t=this.getOpenRepository(e);return t&&t.repository?t.repository:null}getOpenRepository(e){if(e){if(e instanceof Te)return this.openRepositories.find(t=>t.repository===e);if(e.repository instanceof Te)return this.openRepositories.find(t=>t.repository===e.repository);if(typeof e=="string"&&(e=pe.Uri.file(e)),e instanceof pe.Uri)return this.openRepositoriesSorted().find(t=>{if(!Se(t.repository.workspaceRoot,e.fsPath))return!1;for(let r of t.repository.statusExternal){let i=ir.join(t.repository.workspaceRoot,r.path);if(Se(i,e.fsPath))return!1}for(let r of t.repository.statusIgnored){let i=ir.join(t.repository.workspaceRoot,r.path);if(Se(i,e.fsPath))return!1}return!0});for(let t of this.openRepositories){let r=t.repository;if(e===r.sourceControl||e===r.changes)return t}}}async getRepositoryFromUri(e){for(let t of this.openRepositoriesSorted()){let r=t.repository;if(Se(r.workspaceRoot,e.fsPath))try{let i=at(e.fsPath);return await r.info(i),r}catch{}}return null}open(e){let r=me(e.onDidChangeState,u=>u===1)(()=>a()),i=e.onDidChangeRepository(u=>this._onDidChangeRepository.fire({repository:e,uri:u})),o=e.onDidChangeStatus(()=>{this._onDidChangeStatusRepository.fire(e)}),s=e.onDidChangeStatus(()=>{this.scanExternals(e),this.scanIgnored(e)});this.scanExternals(e),this.scanIgnored(e);let a=()=>{r.dispose(),i.dispose(),o.dispose(),s.dispose(),e.dispose(),this.openRepositories=this.openRepositories.filter(u=>u!==c),this._onDidCloseRepository.fire(e)},c={repository:e,dispose:a};this.openRepositories.push(c),this._onDidOpenRepository.fire(e)}close(e){let t=this.getOpenRepository(e);t&&t.dispose()}async pickRepository(){if(this.openRepositories.length===0)throw new Error("There are no available repositories");let e=this.repositories.map(i=>({label:ir.basename(i.root),repository:i})),r=await pe.window.showQuickPick(e,{placeHolder:"Choose a repository"});return r&&r.repository}async upgradeWorkingCopy(e){try{return(await this.svn.exec(e,["upgrade"])).exitCode===0}catch(t){console.log(t)}return!1}dispose(){this.disable(),this.configurationChangeDisposable.dispose()}};H([Oe(500)],In.prototype,"eventuallyScanPossibleSvnRepositories",1);var Ar=W(require("child_process")),Ip=W(require("path")),Bo=W(ln());var $o=class{findSvn(e){return(e?this.findSpecificSvn(e):Promise.reject(null)).then(void 0,()=>{switch(process.platform){case"darwin":return this.findSvnDarwin();case"win32":return this.findSvnWin32();default:return this.findSpecificSvn("svn")}}).then(r=>this.checkSvnVersion(r)).then(null,()=>Promise.reject(new Error("Svn installation not found.")))}findSvnWin32(){return this.findSystemSvnWin32(process.env.ProgramW6432).then(void 0,()=>this.findSystemSvnWin32(process.env["ProgramFiles(x86)"])).then(void 0,()=>this.findSystemSvnWin32(process.env.ProgramFiles)).then(void 0,()=>this.findSpecificSvn("svn"))}findSystemSvnWin32(e){return e?this.findSpecificSvn(Ip.join(e,"TortoiseSVN","bin","svn.exe")):Promise.reject("Not found")}findSvnDarwin(){return new Promise((e,t)=>{Ar.exec("which svn",(r,i)=>{if(r)return t("svn not found");let o=i.toString().replace(/^\s+|\s+$/g,"");function s(a){Ar.exec("svn --version --quiet",(c,u)=>c?t("svn not found"):e({path:a,version:u.trim()}))}if(o!=="/usr/bin/svn")return s(o);Ar.exec("xcode-select -p",a=>{if(a&&a.code===2)return t("svn not found");s(o)})})})}findSpecificSvn(e){return new Promise((t,r)=>{let i=[],o=Ar.spawn(e,["--version","--quiet"]);o.stdout.on("data",s=>i.push(s)),o.on("error",Ju(r)),o.on("close",s=>s?r(new Error("Not found")):t({path:e,version:Buffer.concat(i).toString("utf8").trim()}))})}checkSvnVersion(e){return new Promise((t,r)=>{let i=e.version.replace(/^(\d+\.\d+\.\d+).*/,"$1");Bo.valid(i)?Bo.gte(i,"1.6.0")?t(e):r(new Error("Required svn version must be >= 1.6")):r(new Error("Invalid svn version"))})}};var Lr=require("vscode");var Sp=W(require("path")),Xo=require("vscode");var jo=require("vscode");var qo=require("vscode"),Sn=class{getTreeItem(){return new qo.TreeItem("No Incoming Changes",qo.TreeItemCollapsibleState.None)}async getChildren(){return[]}};var Dn=class{constructor(e){this.repository=e}getTreeItem(){let e=new jo.TreeItem("Incoming Changes",jo.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("download","dark"),light:Et("download","light")},e}async getChildren(){if(!this.repository.remoteChanges)return[];let e=this.repository.remoteChanges.resourceStates.map(t=>new qe(t.resourceUri,t.type,this.repository));return e.length===0?[new Sn]:e}};var Rn=class{constructor(e,t){this.repository=e;this.svnProvider=t;e.onDidChangeStatus(()=>{this.svnProvider.update(this)})}get label(){return Sp.basename(this.repository.workspaceRoot)}getTreeItem(){let e=new Xo.TreeItem(this.label,Xo.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("repo","dark"),light:Et("repo","light")},e}async getChildren(){return[new Dn(this.repository)]}};var Tn=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new Lr.EventEmitter;this._dispose=[];this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(Lr.window.registerTreeDataProvider("svn",this),Lr.commands.registerCommand("svn.treeview.refreshProvider",()=>this.refresh()))}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e.getTreeItem()}async getChildren(e){return!this.sourceControlManager||this.sourceControlManager.openRepositories.length===0?Promise.resolve([]):e?e.getChildren():this.sourceControlManager.openRepositories.map(r=>new Rn(r.repository,this))}update(e){this._onDidChangeTreeData.fire(e)}dispose(){Ie(this._dispose)}};var or=require("vscode");var Wo=class{constructor(e){this.model=e;this._dispose=[];this._onDidChangeTreeData=new or.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(or.window.registerTreeDataProvider("branchchanges",this),or.commands.registerCommand("svn.branchchanges.openDiff",this.openDiffCmd,this),or.commands.registerCommand("svn.branchchanges.refresh",()=>this._onDidChangeTreeData.fire(void 0),this),this.model.onDidChangeRepository(()=>this._onDidChangeTreeData.fire(void 0)))}dispose(){Ie(this._dispose)}getTreeItem(e){let t="";e.item==="added"?t="status-added":e.item==="deleted"?t="status-deleted":e.item==="modified"&&(t="status-modified");let r=Co(t);return{label:e.localPath.fsPath,command:{command:"svn.branchchanges.openDiff",title:"Open diff",arguments:[e]},iconPath:r,tooltip:`${e.oldPath.fsPath.replace(e.repo.fsPath,"")}@r${e.oldRevision} \u2192 ${e.newPath.fsPath.replace(e.repo.fsPath,"")}@r${e.newRevision}`}}getChildren(e){if(e!==void 0)return Promise.resolve([]);let t=[];for(let r of this.model.repositories)t.push(r.getChanges());return Promise.all(t).then(r=>r.reduce((i,o)=>i.concat(o),[]))}async openDiffCmd(e){let t=await this.model.getRemoteRepository(e.repo);if(e.item==="modified")return nr(t,e.oldPath,e.oldRevision,e.newRevision,e.newPath);if(e.item==="added")return Nr(t,e.newPath,e.newRevision)}};var Dp=W(ln());var Vo=class{constructor(e){let t=Dp.satisfies(e,">= 1.9");Nt("isSvn19orGreater",t)}dispose(){}};var Rp=W(ln());var Go=class{constructor(e){let t=Rp.satisfies(e,">= 1.8");Nt("isSvn18orGreater",t)}dispose(){}};var Ae=require("vscode");var Gg=1e3*60*3,zg=1e3*60*5,Mr=class{constructor(e){this.sourceControlManager=e;this.disposables=[];this.cache=new Map;this._onDidChangeFile=new Ae.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event;this.changedRepositoryRoots=new Set;this.disposables.push(e.onDidChangeRepository(this.onDidChangeRepository,this),Ae.workspace.registerFileSystemProvider("svn",this,{isReadonly:!0,isCaseSensitive:!0})),setInterval(()=>this.cleanup(),zg)}onDidChangeRepository({repository:e}){this.changedRepositoryRoots.add(e.root),this.eventuallyFireChangeEvents()}eventuallyFireChangeEvents(){this.fireChangeEvents()}async fireChangeEvents(){if(!Ae.window.state.focused){let t=me(Ae.window.onDidChangeWindowState,r=>r.focused);await Yt(t)}let e=[];for(let{uri:t}of this.cache.values()){let r=t.fsPath;for(let i of this.changedRepositoryRoots)if(Se(i,r)){e.push({type:Ae.FileChangeType.Changed,uri:t});break}}e.length>0&&this._onDidChangeFile.fire(e),this.changedRepositoryRoots.clear()}watch(){return cc}async stat(e){await this.sourceControlManager.isInitialized;let{fsPath:t}=At(e),r=this.sourceControlManager.getRepository(t);if(!r)throw Ae.FileSystemError.FileNotFound;let i=0,o=new Date().getTime();try{let s=await r.list(t);s.length&&(i=Number(s[0].size),o=Date.parse(s[0].commit.date))}catch(s){console.error("Failed to list SVN file:",s)}return{type:Ae.FileType.File,size:i,mtime:o,ctime:0}}readDirectory(){throw new Error("readDirectory is not implemented")}createDirectory(){throw new Error("createDirectory is not implemented")}async readFile(e){await this.sourceControlManager.isInitialized;let{fsPath:t,extra:r,action:i}=At(e),o=this.sourceControlManager.getRepository(t);if(!o)throw Ae.FileSystemError.FileNotFound();let s=e.toString(),a=new Date().getTime(),c={uri:e,timestamp:a};this.cache.set(s,c);try{if(i==="SHOW")return await o.showBuffer(t,r.ref);if(i==="LOG")return await o.plainLogBuffer();if(i==="LOG_REVISION"&&r.revision)return await o.plainLogByRevisionBuffer(r.revision);if(i==="LOG_SEARCH"&&r.search)return await o.plainLogByTextBuffer(r.search);if(i==="PATCH")return console.log("here"),await o.patchBuffer([t])}catch(u){console.error("Failed to read SVN file:",u)}return new Uint8Array(0)}writeFile(){throw new Error("writeFile is not implemented")}delete(){throw new Error("delete is not implemented")}rename(){throw new Error("rename is not implemented")}cleanup(){let e=new Date().getTime(),t=new Map;for(let r of this.cache.values()){let{fsPath:i}=At(r.uri);(Ae.workspace.textDocuments.filter(s=>s.uri.scheme==="file").some(s=>ac(s.uri.fsPath,i))||e-r.timestamp<Gg)&&t.set(r.uri.toString(),r)}this.cache=t}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Oe(1100)],Mr.prototype,"eventuallyFireChangeEvents",1),H([ur],Mr.prototype,"fireChangeEvents",1);async function Hg(n,e,t){console.log("SVN Extension: init() started");let r=$.get("path"),i=new $o;console.log("SVN Extension: Finding SVN executable...");let o=await i.findSvn(r);console.log(`SVN Extension: Found SVN ${o.version} at ${o.path}`);let s=new xi({svnPath:o.path,version:o.version}),a=await new In(s,0,n);console.log("SVN Extension: Registering commands..."),up(a,t),console.log("SVN Extension: Creating providers..."),t.push(a,jt,new Mr(a),new Tn(a),new Uo(a),new Po(a),new Wo(a),new hn(a),new xn(a),new Go(o.version),new Vo(o.version)),e.appendLine(`Using svn "${o.version}" from "${o.path}"`),console.log("SVN Extension: Providers created successfully");let c=u=>e.append(u);s.onOutput.addListener("log",c),t.push(Ue(()=>s.onOutput.removeListener("log",c))),t.push(Ue(rl)),console.log("SVN Extension: init() complete")}async function Yg(n,e){let t=ze.window.createOutputChannel("Svn");ze.commands.registerCommand("svn.showOutput",()=>t.show()),e.push(t),$.get("showOutput")&&t.show();let i=async()=>{try{await Hg(n,t,e)}catch(o){let s=o;if(!/Svn installation not found/.test(s.message||""))throw o;if($.get("ignoreMissingSvnWarning")===!0)return;console.warn(s.message),t.appendLine(s.message),t.show();let c="Find SVN executable",u="Download SVN",d="Don't Show Again",m=await ze.window.showWarningMessage("SVN not found. Install it or configure it using the 'svn.path' setting.",c,u,d);if(m===c){let h;Tp.sep==="\\"&&(h={svn:["exe","bat"]});let l=await ze.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:h});if(l&&l[0]){let y=l[0].fsPath;t.appendLine(`Updated "svn.path" with "${y}"`),await $.update("path",y),await i()}}else m===u?ze.commands.executeCommand("vscode.open",ze.Uri.parse("https://subversion.apache.org/packages.html")):m===d&&await $.update("ignoreMissingSvnWarning",!0)}};await i()}async function Qg(n){console.log("SVN Extension: activate() called");let e=[];n.subscriptions.push(new ze.Disposable(()=>ze.Disposable.from(...e).dispose())),await Yg(n,e).catch(t=>{console.error("SVN Extension: Activation failed",t),ze.window.showErrorMessage(`SVN Extension activation failed: ${t.message||t}`)}),console.log("SVN Extension: activation complete")}function Kg(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/
//# sourceMappingURL=extension.js.map
