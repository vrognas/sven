"use strict";var Cp=Object.create;var Fr=Object.defineProperty;var Va=Object.getOwnPropertyDescriptor;var Ip=Object.getOwnPropertyNames;var Sp=Object.getPrototypeOf,Dp=Object.prototype.hasOwnProperty;var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Ga=(n,e)=>{for(var t in e)Fr(n,t,{get:e[t],enumerable:!0})},Pn=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ip(e))!Dp.call(n,i)&&i!==t&&Fr(n,i,{get:()=>e[i],enumerable:!(r=Va(e,i))||r.enumerable});return n},Vo=(n,e,t)=>(Pn(n,e,"default"),t&&Pn(t,e,"default")),V=(n,e,t)=>(t=n!=null?Cp(Sp(n)):{},Pn(e||!n||!n.__esModule?Fr(t,"default",{value:n,enumerable:!0}):t,n)),Rp=n=>Pn(Fr({},"__esModule",{value:!0}),n),H=(n,e,t,r)=>{for(var i=r>1?void 0:r?Va(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&Fr(e,t,i),i};var dc=F((as,ss)=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});var $n;as.default=()=>{if(typeof ss=="object"&&typeof ss.exports=="object")return $n=$n||require("fs"),$n;throw new Error("File system is not available")}});var Kt=F(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.default=(n,e,t)=>({confidence:t,name:e.name(n),lang:e.language?e.language():void 0})});var gc=F(Br=>{"use strict";var qp=Br&&Br.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Br,"__esModule",{value:!0});var mc=qp(Kt()),us=class{name(){return"ASCII"}match(e){let t=e.rawInput;for(let r=0;r<e.rawLen;r++){let i=t[r];if(i<32||i>126)return(0,mc.default)(e,this,0)}return(0,mc.default)(e,this,100)}};Br.default=us});var yc=F(qr=>{"use strict";var jp=qr&&qr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qr,"__esModule",{value:!0});var Xp=jp(Kt()),ls=class{name(){return"UTF-8"}match(e){let t=!1,r=0,i=0,o=0,s,a=e.rawInput;e.rawLen>=3&&(a[0]&255)==239&&(a[1]&255)==187&&(a[2]&255)==191&&(t=!0);for(let c=0;c<e.rawLen;c++){let u=a[c];if(u&128){if((u&224)==192)o=1;else if((u&240)==224)o=2;else if((u&248)==240)o=3;else{if(i++,i>5)break;o=0}for(;c++,!(c>=e.rawLen);){if((a[c]&192)!=128){i++;break}if(--o==0){r++;break}}}}if(s=0,t&&i==0)s=100;else if(t&&r>i*10)s=80;else if(r>3&&i==0)s=100;else if(r>0&&i==0)s=80;else if(r==0&&i==0)s=10;else if(r>i*10)s=25;else return null;return(0,Xp.default)(e,this,s)}};qr.default=ls});var wc=F(Qe=>{"use strict";var Wp=Qe&&Qe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.UTF_32LE=Qe.UTF_32BE=Qe.UTF_16LE=Qe.UTF_16BE=void 0;var ds=Wp(Kt()),fs=class{name(){return"UTF-16BE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==254&&(t[1]&255)==255?(0,ds.default)(e,this,100):null}};Qe.UTF_16BE=fs;var ps=class{name(){return"UTF-16LE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==255&&(t[1]&255)==254?t.length>=4&&t[2]==0&&t[3]==0?null:(0,ds.default)(e,this,100):null}};Qe.UTF_16LE=ps;var Bn=class{name(){return"UTF-32"}getChar(e,t){return-1}match(e){let t=0,r=0,i=!1,o=0,s=e.rawLen/4*4,a=e.rawInput;if(s==0)return null;this.getChar(a,0)==65279&&(i=!0);for(let c=0;c<s;c+=4){let u=this.getChar(a,c);u<0||u>=1114111||u>=55296&&u<=57343?r+=1:t+=1}return i&&r==0?o=100:i&&t>r*10?o=80:t>3&&r==0?o=100:t>0&&r==0?o=80:t>r*10&&(o=25),o==0?null:(0,ds.default)(e,this,o)}},hs=class extends Bn{name(){return"UTF-32BE"}getChar(e,t){return(e[t+0]&255)<<24|(e[t+1]&255)<<16|(e[t+2]&255)<<8|e[t+3]&255}};Qe.UTF_32BE=hs;var xs=class extends Bn{name(){return"UTF-32LE"}getChar(e,t){return(e[t+3]&255)<<24|(e[t+2]&255)<<16|(e[t+1]&255)<<8|e[t+0]&255}};Qe.UTF_32LE=xs});var vc=F(Ue=>{"use strict";var Vp=Ue&&Ue.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.gb_18030=Ue.euc_kr=Ue.euc_jp=Ue.big5=Ue.sjis=void 0;var Gp=Vp(Kt());function zp(n,e){let t=(r,i,o,s)=>{if(s<o)return-1;let a=Math.floor(o+s>>>1);return i>r[a]?t(r,i,a+1,s):i<r[a]?t(r,i,o,a-1):a};return t(n,e,0,n.length-1)}var ms=class{constructor(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1}reset(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1}nextByte(e){return this.nextIndex>=e.rawLen?(this.done=!0,-1):e.rawInput[this.nextIndex++]&255}},Zt=class{constructor(){this.commonChars=[]}name(){return"mbcs"}match(e){let t=0,r=0,i=0,o=0,s=0,a=new ms;e:{for(a.reset();this.nextChar(a,e);){if(o++,a.error)i++;else{let c=a.charValue&4294967295;c>255&&(t++,this.commonChars!=null&&zp(this.commonChars,c)>=0&&r++)}if(i>=2&&i*5>=t)break e}if(t<=10&&i==0){t==0&&o<10?s=0:s=10;break e}if(t<20*i){s=0;break e}if(this.commonChars==null)s=30+t-20*i,s>100&&(s=100);else{let u=90/Math.log(t/4);s=Math.floor(Math.log(r+1)*u+10),s=Math.min(s,100)}}return s==0?null:(0,Gp.default)(e,this,s)}nextChar(e,t){return!0}},gs=class extends Zt{constructor(){super(...arguments),this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314]}name(){return"Shift_JIS"}language(){return"ja"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r>160&&r<=223)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=r<<8|i,i>=64&&i<=127||i>=128&&i<=255||(e.error=!0),!0)}};Ue.sjis=gs;var ys=class extends Zt{constructor(){super(...arguments),this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271]}name(){return"Big5"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r==255)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=e.charValue<<8|i,(i<64||i==127||i==255)&&(e.error=!0),!0)}};Ue.big5=ys;function bc(n,e){n.index=n.nextIndex,n.error=!1;let t=0,r=0,i=0;e:{if(t=n.charValue=n.nextByte(e),t<0){n.done=!0;break e}if(t<=141)break e;if(r=n.nextByte(e),n.charValue=n.charValue<<8|r,t>=161&&t<=254){r<161&&(n.error=!0);break e}if(t==142){r<161&&(n.error=!0);break e}t==143&&(i=n.nextByte(e),n.charValue=n.charValue<<8|i,i<161&&(n.error=!0))}return n.done==!1}var ws=class extends Zt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=bc}name(){return"EUC-JP"}language(){return"ja"}};Ue.euc_jp=ws;var bs=class extends Zt{constructor(){super(...arguments),this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=bc}name(){return"EUC-KR"}language(){return"ko"}};Ue.euc_kr=bs;var vs=class extends Zt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]}name(){return"GB18030"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=0,i=0,o=0,s=0;e:{if(r=e.charValue=e.nextByte(t),r<0){e.done=!0;break e}if(r<=128)break e;if(i=e.nextByte(t),e.charValue=e.charValue<<8|i,r>=129&&r<=254){if(i>=64&&i<=126||i>=80&&i<=254)break e;if(i>=48&&i<=57&&(o=e.nextByte(t),o>=129&&o<=254&&(s=e.nextByte(t),s>=48&&s<=57))){e.charValue=e.charValue<<16|o<<8|s;break e}e.error=!0;break e}}return e.done==!1}};Ue.gb_18030=vs});var Cc=F(ae=>{"use strict";var Hp=ae&&ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ae,"__esModule",{value:!0});ae.KOI8_R=ae.windows_1256=ae.windows_1251=ae.ISO_8859_9=ae.ISO_8859_8=ae.ISO_8859_7=ae.ISO_8859_6=ae.ISO_8859_5=ae.ISO_8859_2=ae.ISO_8859_1=void 0;var Ec=Hp(Kt()),Yp=16777215,qn=class{constructor(e,t){this.byteIndex=0,this.ngram=0,this.ngramCount=0,this.hitCount=0,this.spaceChar=32,this.ngramList=e,this.byteMap=t}search(e,t){let r=0;return e[r+32]<=t&&(r+=32),e[r+16]<=t&&(r+=16),e[r+8]<=t&&(r+=8),e[r+4]<=t&&(r+=4),e[r+2]<=t&&(r+=2),e[r+1]<=t&&(r+=1),e[r]>t&&(r-=1),r<0||e[r]!=t?-1:r}lookup(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)}addByte(e){this.ngram=(this.ngram<<8)+(e&255)&Yp,this.lookup(this.ngram)}nextByte(e){return this.byteIndex>=e.inputLen?-1:e.inputBytes[this.byteIndex++]&255}parse(e,t){let r,i=!1;for(this.spaceChar=t;(r=this.nextByte(e))>=0;){let s=this.byteMap[r];s!=0&&(s==this.spaceChar&&i||this.addByte(s),i=s==this.spaceChar)}this.addByte(this.spaceChar);let o=this.hitCount/this.ngramCount;return o>.33?98:Math.floor(o*300)}},we=class{constructor(e,t){this.fLang=e,this.fNGrams=t}},Qp=n=>Array.isArray(n)&&isFinite(n[0]),Ke=class{constructor(){this.spaceChar=32,this.nGramLang=void 0}ngrams(){return[]}byteMap(){return[]}name(e){return"sbcs"}language(){return this.nGramLang}match(e){this.nGramLang=void 0;let t=this.ngrams();if(Qp(t)){let o=new qn(t,this.byteMap()).parse(e,this.spaceChar);return o<=0?null:(0,Ec.default)(e,this,o)}let r=-1;for(let i=t.length-1;i>=0;i--){let o=t[i],a=new qn(o.fNGrams,this.byteMap()).parse(e,this.spaceChar);a>r&&(r=a,this.nGramLang=o.fLang)}return r<=0?null:(0,Ec.default)(e,this,r)}},Es=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[new we("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new we("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new we("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new we("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new we("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new we("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new we("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new we("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new we("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new we("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]}name(e){return e&&e.c1Bytes?"windows-1252":"ISO-8859-1"}};ae.ISO_8859_1=Es;var Cs=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]}ngrams(){return[new we("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new we("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new we("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new we("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]}name(e){return e&&e.c1Bytes?"windows-1250":"ISO-8859-2"}};ae.ISO_8859_2=Cs;var Is=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]}ngrams(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]}name(){return"ISO-8859-5"}language(){return"ru"}};ae.ISO_8859_5=Is;var Ss=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]}ngrams(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]}name(){return"ISO-8859-6"}language(){return"ar"}};ae.ISO_8859_6=Ss;var Ds=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]}ngrams(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]}name(e){return e&&e.c1Bytes?"windows-1253":"ISO-8859-7"}language(){return"el"}};ae.ISO_8859_7=Ds;var Rs=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]}ngrams(){return[new we("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new we("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]}name(e){return e&&e.c1Bytes?"windows-1255":"ISO-8859-8"}language(){return"he"}};ae.ISO_8859_8=Rs;var Ts=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]}name(e){return e&&e.c1Bytes?"windows-1254":"ISO-8859-9"}language(){return"tr"}};ae.ISO_8859_9=Ts;var Ps=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}ngrams(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]}name(){return"windows-1251"}language(){return"ru"}};ae.windows_1251=Ps;var Ns=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]}ngrams(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]}name(){return"windows-1256"}language(){return"ar"}};ae.windows_1256=Ns;var Os=class extends Ke{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}ngrams(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]}name(){return"KOI8-R"}language(){return"ru"}};ae.KOI8_R=Os});var Ic=F(ct=>{"use strict";var Kp=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ct,"__esModule",{value:!0});ct.ISO_2022_CN=ct.ISO_2022_KR=ct.ISO_2022_JP=void 0;var Zp=Kp(Kt()),jr=class{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,r,i,o=0,s=0,a=0,c,u=e.inputBytes,d=e.inputLen;e:for(t=0;t<d;t++){if(u[t]==27){t:for(i=0;i<this.escapeSequences.length;i++){let m=this.escapeSequences[i];if(d-t<m.length)continue t;for(r=1;r<m.length;r++)if(m[r]!=u[t+r])continue t;o++,t+=m.length-1;continue e}s++}(u[t]==14||u[t]==15)&&a++}return o==0?null:(c=(100*o-100*s)/(o+s),o+a<5&&(c-=(5-(o+a))*10),c<=0?null:(0,Zp.default)(e,this,c))}},_s=class extends jr{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}};ct.ISO_2022_JP=_s;var As=class extends jr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}};ct.ISO_2022_KR=As;var Ls=class extends jr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}};ct.ISO_2022_CN=Ls});var Sc=F(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.isByteArray=void 0;var Jp=n=>n==null||typeof n!="object"?!1:isFinite(n.length)&&n.length>=0;jn.isByteArray=Jp});var Rc=F(ne=>{"use strict";var eh=ne&&ne.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),th=ne&&ne.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Wn=ne&&ne.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},n(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=n(e),i=0;i<r.length;i++)r[i]!=="default"&&eh(t,e,r[i]);return th(t,e),t}}(),Fs=ne&&ne.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ne,"__esModule",{value:!0});ne.detectFileSync=ne.detectFile=ne.analyse=ne.detect=void 0;var Dc=Fs(dc()),rh=Fs(gc()),nh=Fs(yc()),Xn=Wn(wc()),Xr=Wn(vc()),ut=Wn(Cc()),Ms=Wn(Ic()),ih=Sc(),oh=[new nh.default,new Xn.UTF_16BE,new Xn.UTF_16LE,new Xn.UTF_32BE,new Xn.UTF_32LE,new Xr.sjis,new Xr.big5,new Xr.euc_jp,new Xr.euc_kr,new Xr.gb_18030,new Ms.ISO_2022_JP,new Ms.ISO_2022_KR,new Ms.ISO_2022_CN,new ut.ISO_8859_1,new ut.ISO_8859_2,new ut.ISO_8859_5,new ut.ISO_8859_6,new ut.ISO_8859_7,new ut.ISO_8859_8,new ut.ISO_8859_9,new ut.windows_1251,new ut.windows_1256,new ut.KOI8_R,new rh.default],sh=n=>{let e=(0,ne.analyse)(n);return e.length>0?e[0].name:null};ne.detect=sh;var ah=n=>{if(!(0,ih.isByteArray)(n))throw new Error("Input must be a byte array, e.g. Buffer or Uint8Array");let e=[];for(let o=0;o<256;o++)e[o]=0;for(let o=n.length-1;o>=0;o--)e[n[o]&255]++;let t=!1;for(let o=128;o<=159;o+=1)if(e[o]!==0){t=!0;break}let r={byteStats:e,c1Bytes:t,rawInput:n,rawLen:n.length,inputBytes:n,inputLen:n.length};return oh.map(o=>o.match(r)).filter(o=>!!o).sort((o,s)=>s.confidence-o.confidence)};ne.analyse=ah;var ch=(n,e={})=>new Promise((t,r)=>{let i,o=(0,Dc.default)(),s=(c,u)=>{i&&o.closeSync(i),c?r(c):u?t((0,ne.detect)(u)):r(new Error("No error and no buffer received"))},a=(e==null?void 0:e.sampleSize)||0;if(a>0){i=o.openSync(n,"r");let c=Buffer.allocUnsafe(a);o.read(i,c,0,a,e.offset,(u,d)=>{u?s(u,null):(d<a&&(c=c.subarray(0,d)),s(null,c))});return}o.readFile(n,s)});ne.detectFile=ch;var uh=(n,e={})=>{let t=(0,Dc.default)();if(e&&e.sampleSize){let r=t.openSync(n,"r"),i=Buffer.allocUnsafe(e.sampleSize),o=t.readSync(r,i,0,e.sampleSize,e.offset);return o<e.sampleSize&&(i=i.subarray(0,o)),t.closeSync(r),(0,ne.detect)(i)}return(0,ne.detect)(t.readFileSync(n))};ne.detectFileSync=uh;ne.default={analyse:ne.analyse,detect:ne.detect,detectFileSync:ne.detectFileSync,detectFile:ne.detectFile}});var zn=F(Us=>{(function(){Us.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Us)});var lt=F((Oc,Ft)=>{(function(){var n,e,t,r,i,o,s,a=[].slice,c={}.hasOwnProperty;n=function(){var u,d,m,x,f,y;if(y=arguments[0],f=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,m=f.length;u<m;u++)if(x=f[u],x!=null)for(d in x)c.call(x,d)&&(y[d]=x[d]);return y},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},o=function(u){var d;return!!u&&((d=typeof u)=="function"||d==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var d;if(t(u))return!u.length;for(d in u)if(c.call(u,d))return!1;return!0},s=function(u){var d,m;return o(u)&&(m=Object.getPrototypeOf(u))&&(d=m.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Ft.exports.assign=n,Ft.exports.isFunction=i,Ft.exports.isObject=o,Ft.exports.isArray=t,Ft.exports.isEmpty=r,Ft.exports.isPlainObject=s,Ft.exports.getValue=e}).call(Oc)});var ks=F((_c,Ac)=>{(function(){var n;Ac.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(_c)});var Fc=F((Lc,Mc)=>{(function(){var n;Mc.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Lc)});var $c=F((Uc,kc)=>{(function(){var n;kc.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Uc)});var jc=F((Bc,qc)=>{(function(){var n,e,t;e=Fc(),t=$c(),qc.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,o){return!0},r.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},r}()}).call(Bc)});var fe=F((Xc,Wc)=>{(function(){Wc.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Xc)});var $s=F((Vc,Gc)=>{(function(){var n,e,t;n=fe(),t=Xe(),Gc.exports=e=function(){function r(i,o,s){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(Vc)});var Hn=F((zc,Hc)=>{(function(){var n;Hc.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(zc)});var Yn=F((Yc,Qc)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(m,x){for(var f in x)d.call(x,f)&&(m[f]=x[f]);function y(){this.constructor=m}return y.prototype=x.prototype,m.prototype=new y,m.__super__=x.prototype,m},d={}.hasOwnProperty;c=lt(),a=c.isObject,s=c.isFunction,o=c.getValue,i=Xe(),n=fe(),e=$s(),r=Hn(),Qc.exports=t=function(m){u(x,m);function x(f,y,v){var T,_,I,w;if(x.__super__.constructor.call(this,f),y==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(y),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,v!=null&&this.attribute(v),f.type===n.Document&&(this.isRoot=!0,this.documentObject=f,f.rootObject=this,f.children)){for(w=f.children,_=0,I=w.length;_<I;_++)if(T=w[_],T.type===n.DocType){T.name=this.name;break}}}return Object.defineProperty(x.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(x.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(x.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(x.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(x.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(x.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(x.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(x.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),x.prototype.clone=function(){var f,y,v,T;v=Object.create(this),v.isRoot&&(v.documentObject=null),v.attribs={},T=this.attribs;for(y in T)d.call(T,y)&&(f=T[y],v.attribs[y]=f.clone());return v.children=[],this.children.forEach(function(_){var I;return I=_.clone(),I.parent=v,v.children.push(I)}),v},x.prototype.attribute=function(f,y){var v,T;if(f!=null&&(f=o(f)),a(f))for(v in f)d.call(f,v)&&(T=f[v],this.attribute(v,T));else s(y)&&(y=y.apply()),this.options.keepNullAttributes&&y==null?this.attribs[f]=new e(this,f,""):y!=null&&(this.attribs[f]=new e(this,f,y));return this},x.prototype.removeAttribute=function(f){var y,v,T;if(f==null)throw new Error("Missing attribute name. "+this.debugInfo());if(f=o(f),Array.isArray(f))for(v=0,T=f.length;v<T;v++)y=f[v],delete this.attribs[y];else delete this.attribs[f];return this},x.prototype.toString=function(f){return this.options.writer.element(this,this.options.writer.filterOptions(f))},x.prototype.att=function(f,y){return this.attribute(f,y)},x.prototype.a=function(f,y){return this.attribute(f,y)},x.prototype.getAttribute=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f].value:null},x.prototype.setAttribute=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getAttributeNode=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f]:null},x.prototype.setAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.removeAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getAttributeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.setAttributeNS=function(f,y,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.removeAttributeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getAttributeNodeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.setAttributeNodeNS=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByTagNameNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.hasAttribute=function(f){return this.attribs.hasOwnProperty(f)},x.prototype.hasAttributeNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.setIdAttribute=function(f,y){return this.attribs.hasOwnProperty(f)?this.attribs[f].isId:y},x.prototype.setIdAttributeNS=function(f,y,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.setIdAttributeNode=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByTagNameNS=function(f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.isEqualNode=function(f){var y,v,T;if(!x.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.namespaceURI!==this.namespaceURI||f.prefix!==this.prefix||f.localName!==this.localName||f.attribs.length!==this.attribs.length)return!1;for(y=v=0,T=this.attribs.length-1;0<=T?v<=T:v>=T;y=0<=T?++v:--v)if(!this.attribs[y].isEqualNode(f.attribs[y]))return!1;return!0},x}(i)}).call(Yc)});var Wr=F((Kc,Zc)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=Xe(),Zc.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(Kc)});var Qn=F((Jc,e0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),t=Wr(),e0.exports=e=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},s}(t)}).call(Jc)});var Kn=F((t0,r0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Wr(),r0.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},s}(e)}).call(t0)});var Zn=F((n0,i0)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=lt().isObject,t=Xe(),n=fe(),i0.exports=e=function(s){i(a,s);function a(c,u,d,m){var x;a.__super__.constructor.call(this,c),r(u)&&(x=u,u=x.version,d=x.encoding,m=x.standalone),u||(u="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(u),d!=null&&(this.encoding=this.stringify.xmlEncoding(d)),m!=null&&(this.standalone=this.stringify.xmlStandalone(m))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(n0)});var Jn=F((o0,s0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),s0.exports=e=function(o){r(s,o);function s(a,c,u,d,m,x){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!d)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!m)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(m.indexOf("#")!==0&&(m="#"+m),!m.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(x&&!m.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(d),x&&(this.defaultValue=this.stringify.dtdAttDefault(x)),this.defaultValueType=m}return s.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},s}(t)}).call(o0)});var ei=F((a0,c0)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=lt().isObject,t=Xe(),n=fe(),c0.exports=e=function(s){i(a,s);function a(c,u,d,m){if(a.__super__.constructor.call(this,c),d==null)throw new Error("Missing DTD entity name. "+this.debugInfo(d));if(m==null)throw new Error("Missing DTD entity value. "+this.debugInfo(d));if(this.pe=!!u,this.name=this.stringify.name(d),this.type=n.EntityDeclaration,!r(m))this.value=this.stringify.dtdEntityValue(m),this.internal=!0;else{if(!m.pubID&&!m.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(d));if(m.pubID&&!m.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(d));if(this.internal=!1,m.pubID!=null&&(this.pubID=this.stringify.dtdPubID(m.pubID)),m.sysID!=null&&(this.sysID=this.stringify.dtdSysID(m.sysID)),m.nData!=null&&(this.nData=this.stringify.dtdNData(m.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(d))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(a0)});var ti=F((u0,l0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),l0.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return s.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},s}(t)}).call(u0)});var ri=F((f0,p0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),p0.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=n.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},s}(t)}).call(f0)});var ni=F((h0,x0)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(m,x){for(var f in x)d.call(x,f)&&(m[f]=x[f]);function y(){this.constructor=m}return y.prototype=x.prototype,m.prototype=new y,m.__super__=x.prototype,m},d={}.hasOwnProperty;c=lt().isObject,a=Xe(),n=fe(),e=Jn(),r=ei(),t=ti(),i=ri(),s=Hn(),x0.exports=o=function(m){u(x,m);function x(f,y,v){var T,_,I,w,l,h;if(x.__super__.constructor.call(this,f),this.type=n.DocType,f.children){for(w=f.children,_=0,I=w.length;_<I;_++)if(T=w[_],T.type===n.Element){this.name=T.name;break}}this.documentObject=f,c(y)&&(l=y,y=l.pubID,v=l.sysID),v==null&&(h=[y,v],v=h[0],y=h[1]),y!=null&&(this.pubID=this.stringify.dtdPubID(y)),v!=null&&(this.sysID=this.stringify.dtdSysID(v))}return Object.defineProperty(x.prototype,"entities",{get:function(){var f,y,v,T,_;for(T={},_=this.children,y=0,v=_.length;y<v;y++)f=_[y],f.type===n.EntityDeclaration&&!f.pe&&(T[f.name]=f);return new s(T)}}),Object.defineProperty(x.prototype,"notations",{get:function(){var f,y,v,T,_;for(T={},_=this.children,y=0,v=_.length;y<v;y++)f=_[y],f.type===n.NotationDeclaration&&(T[f.name]=f);return new s(T)}}),Object.defineProperty(x.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(x.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(x.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),x.prototype.element=function(f,y){var v;return v=new t(this,f,y),this.children.push(v),this},x.prototype.attList=function(f,y,v,T,_){var I;return I=new e(this,f,y,v,T,_),this.children.push(I),this},x.prototype.entity=function(f,y){var v;return v=new r(this,!1,f,y),this.children.push(v),this},x.prototype.pEntity=function(f,y){var v;return v=new r(this,!0,f,y),this.children.push(v),this},x.prototype.notation=function(f,y){var v;return v=new i(this,f,y),this.children.push(v),this},x.prototype.toString=function(f){return this.options.writer.docType(this,this.options.writer.filterOptions(f))},x.prototype.ele=function(f,y){return this.element(f,y)},x.prototype.att=function(f,y,v,T,_){return this.attList(f,y,v,T,_)},x.prototype.ent=function(f,y){return this.entity(f,y)},x.prototype.pent=function(f,y){return this.pEntity(f,y)},x.prototype.not=function(f,y){return this.notation(f,y)},x.prototype.up=function(){return this.root()||this.documentObject},x.prototype.isEqualNode=function(f){return!(!x.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.name!==this.name||f.publicId!==this.publicId||f.systemId!==this.systemId)},x}(a)}).call(h0)});var ii=F((d0,m0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Xe(),m0.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},s}(e)}).call(d0)});var oi=F((g0,y0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Wr(),y0.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(c)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},s.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(g0)});var si=F((w0,b0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=fe(),e=Wr(),b0.exports=t=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},s.prototype.isEqualNode=function(a){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},s}(e)}).call(w0)});var Bs=F((v0,E0)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=Xe(),n=fe(),E0.exports=e=function(o){r(s,o);function s(a){s.__super__.constructor.call(this,a),this.type=n.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return""},s}(t)}).call(v0)});var S0=F((C0,I0)=>{(function(){var n;I0.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(C0)});var T0=F((D0,R0)=>{(function(){R0.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(D0)});var Xe=F((P0,N0)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,x,f,y,v,T,_,I,w={}.hasOwnProperty;I=lt(),_=I.isObject,T=I.isFunction,v=I.isEmpty,y=I.getValue,a=null,t=null,r=null,i=null,o=null,x=null,f=null,m=null,s=null,e=null,d=null,c=null,n=null,N0.exports=u=function(){function l(h){this.parent=h,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Yn(),t=Qn(),r=Kn(),i=Zn(),o=ni(),x=ii(),f=oi(),m=si(),s=Bs(),e=fe(),d=S0(),c=Hn(),n=T0())}return Object.defineProperty(l.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(l.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(l.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(l.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(l.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new d(this.children)),this.childNodeList}}),Object.defineProperty(l.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(l.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(l.prototype,"previousSibling",{get:function(){var h;return h=this.parent.children.indexOf(this),this.parent.children[h-1]||null}}),Object.defineProperty(l.prototype,"nextSibling",{get:function(){var h;return h=this.parent.children.indexOf(this),this.parent.children[h+1]||null}}),Object.defineProperty(l.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(l.prototype,"textContent",{get:function(){var h,E,O,g,D;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(D="",g=this.children,E=0,O=g.length;E<O;E++)h=g[E],h.textContent&&(D+=h.textContent);return D}else return null},set:function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),l.prototype.setParent=function(h){var E,O,g,D,C;for(this.parent=h,h&&(this.options=h.options,this.stringify=h.stringify),D=this.children,C=[],O=0,g=D.length;O<g;O++)E=D[O],C.push(E.setParent(this));return C},l.prototype.element=function(h,E,O){var g,D,C,R,P,N,M,k,A,X,B;if(N=null,E===null&&O==null&&(A=[{},null],E=A[0],O=A[1]),E==null&&(E={}),E=y(E),_(E)||(X=[E,O],O=X[0],E=X[1]),h!=null&&(h=y(h)),Array.isArray(h))for(C=0,M=h.length;C<M;C++)D=h[C],N=this.element(D);else if(T(h))N=this.element(h.apply());else if(_(h)){for(P in h)if(w.call(h,P))if(B=h[P],T(B)&&(B=B.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&P.indexOf(this.stringify.convertAttKey)===0)N=this.attribute(P.substr(this.stringify.convertAttKey.length),B);else if(!this.options.separateArrayItems&&Array.isArray(B)&&v(B))N=this.dummy();else if(_(B)&&v(B))N=this.element(P);else if(!this.options.keepNullNodes&&B==null)N=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(B))for(R=0,k=B.length;R<k;R++)D=B[R],g={},g[P]=D,N=this.element(g);else _(B)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&P.indexOf(this.stringify.convertTextKey)===0?N=this.element(B):(N=this.element(P),N.element(B)):N=this.element(P,B)}else!this.options.keepNullNodes&&O===null?N=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&h.indexOf(this.stringify.convertTextKey)===0?N=this.text(O):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&h.indexOf(this.stringify.convertCDataKey)===0?N=this.cdata(O):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&h.indexOf(this.stringify.convertCommentKey)===0?N=this.comment(O):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&h.indexOf(this.stringify.convertRawKey)===0?N=this.raw(O):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&h.indexOf(this.stringify.convertPIKey)===0?N=this.instruction(h.substr(this.stringify.convertPIKey.length),O):N=this.node(h,E,O);if(N==null)throw new Error("Could not create any elements with: "+h+". "+this.debugInfo());return N},l.prototype.insertBefore=function(h,E,O){var g,D,C,R,P;if(h!=null&&h.type)return C=h,R=E,C.setParent(this),R?(D=children.indexOf(R),P=children.splice(D),children.push(C),Array.prototype.push.apply(children,P)):children.push(C),C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return D=this.parent.children.indexOf(this),P=this.parent.children.splice(D),g=this.parent.element(h,E,O),Array.prototype.push.apply(this.parent.children,P),g},l.prototype.insertAfter=function(h,E,O){var g,D,C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return D=this.parent.children.indexOf(this),C=this.parent.children.splice(D+1),g=this.parent.element(h,E,O),Array.prototype.push.apply(this.parent.children,C),g},l.prototype.remove=function(){var h,E;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return h=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[h,h-h+1].concat(E=[])),this.parent},l.prototype.node=function(h,E,O){var g,D;return h!=null&&(h=y(h)),E||(E={}),E=y(E),_(E)||(D=[E,O],O=D[0],E=D[1]),g=new a(this,h,E),O!=null&&g.text(O),this.children.push(g),g},l.prototype.text=function(h){var E;return _(h)&&this.element(h),E=new f(this,h),this.children.push(E),this},l.prototype.cdata=function(h){var E;return E=new t(this,h),this.children.push(E),this},l.prototype.comment=function(h){var E;return E=new r(this,h),this.children.push(E),this},l.prototype.commentBefore=function(h){var E,O,g;return O=this.parent.children.indexOf(this),g=this.parent.children.splice(O),E=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,g),this},l.prototype.commentAfter=function(h){var E,O,g;return O=this.parent.children.indexOf(this),g=this.parent.children.splice(O+1),E=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,g),this},l.prototype.raw=function(h){var E;return E=new x(this,h),this.children.push(E),this},l.prototype.dummy=function(){var h;return h=new s(this),h},l.prototype.instruction=function(h,E){var O,g,D,C,R;if(h!=null&&(h=y(h)),E!=null&&(E=y(E)),Array.isArray(h))for(C=0,R=h.length;C<R;C++)O=h[C],this.instruction(O);else if(_(h))for(O in h)w.call(h,O)&&(g=h[O],this.instruction(O,g));else T(E)&&(E=E.apply()),D=new m(this,h,E),this.children.push(D);return this},l.prototype.instructionBefore=function(h,E){var O,g,D;return g=this.parent.children.indexOf(this),D=this.parent.children.splice(g),O=this.parent.instruction(h,E),Array.prototype.push.apply(this.parent.children,D),this},l.prototype.instructionAfter=function(h,E){var O,g,D;return g=this.parent.children.indexOf(this),D=this.parent.children.splice(g+1),O=this.parent.instruction(h,E),Array.prototype.push.apply(this.parent.children,D),this},l.prototype.declaration=function(h,E,O){var g,D;return g=this.document(),D=new i(g,h,E,O),g.children.length===0?g.children.unshift(D):g.children[0].type===e.Declaration?g.children[0]=D:g.children.unshift(D),g.root()||g},l.prototype.dtd=function(h,E){var O,g,D,C,R,P,N,M,k,A;for(g=this.document(),D=new o(g,h,E),k=g.children,C=R=0,N=k.length;R<N;C=++R)if(O=k[C],O.type===e.DocType)return g.children[C]=D,D;for(A=g.children,C=P=0,M=A.length;P<M;C=++P)if(O=A[C],O.isRoot)return g.children.splice(C,0,D),D;return g.children.push(D),D},l.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},l.prototype.root=function(){var h;for(h=this;h;){if(h.type===e.Document)return h.rootObject;if(h.isRoot)return h;h=h.parent}},l.prototype.document=function(){var h;for(h=this;h;){if(h.type===e.Document)return h;h=h.parent}},l.prototype.end=function(h){return this.document().end(h)},l.prototype.prev=function(){var h;if(h=this.parent.children.indexOf(this),h<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[h-1]},l.prototype.next=function(){var h;if(h=this.parent.children.indexOf(this),h===-1||h===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[h+1]},l.prototype.importDocument=function(h){var E;return E=h.root().clone(),E.parent=this,E.isRoot=!1,this.children.push(E),this},l.prototype.debugInfo=function(h){var E,O;return h=h||this.name,h==null&&!((E=this.parent)!=null&&E.name)?"":h==null?"parent: <"+this.parent.name+">":(O=this.parent)!=null&&O.name?"node: <"+h+">, parent: <"+this.parent.name+">":"node: <"+h+">"},l.prototype.ele=function(h,E,O){return this.element(h,E,O)},l.prototype.nod=function(h,E,O){return this.node(h,E,O)},l.prototype.txt=function(h){return this.text(h)},l.prototype.dat=function(h){return this.cdata(h)},l.prototype.com=function(h){return this.comment(h)},l.prototype.ins=function(h,E){return this.instruction(h,E)},l.prototype.doc=function(){return this.document()},l.prototype.dec=function(h,E,O){return this.declaration(h,E,O)},l.prototype.e=function(h,E,O){return this.element(h,E,O)},l.prototype.n=function(h,E,O){return this.node(h,E,O)},l.prototype.t=function(h){return this.text(h)},l.prototype.d=function(h){return this.cdata(h)},l.prototype.c=function(h){return this.comment(h)},l.prototype.r=function(h){return this.raw(h)},l.prototype.i=function(h,E){return this.instruction(h,E)},l.prototype.u=function(){return this.up()},l.prototype.importXMLBuilder=function(h){return this.importDocument(h)},l.prototype.replaceChild=function(h,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.removeChild=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.appendChild=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.hasChildNodes=function(){return this.children.length!==0},l.prototype.cloneNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isSupported=function(h,E){return!0},l.prototype.hasAttributes=function(){return this.attribs.length!==0},l.prototype.compareDocumentPosition=function(h){var E,O;return E=this,E===h?0:this.document()!==h.document()?(O=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?O|=n.Preceding:O|=n.Following,O):E.isAncestor(h)?n.Contains|n.Preceding:E.isDescendant(h)?n.Contains|n.Following:E.isPreceding(h)?n.Preceding:n.Following},l.prototype.isSameNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.lookupPrefix=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isDefaultNamespace=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.lookupNamespaceURI=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isEqualNode=function(h){var E,O,g;if(h.nodeType!==this.nodeType||h.children.length!==this.children.length)return!1;for(E=O=0,g=this.children.length-1;0<=g?O<=g:O>=g;E=0<=g?++O:--O)if(!this.children[E].isEqualNode(h.children[E]))return!1;return!0},l.prototype.getFeature=function(h,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.setUserData=function(h,E,O){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getUserData=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.contains=function(h){return h?h===this||this.isDescendant(h):!1},l.prototype.isDescendant=function(h){var E,O,g,D,C;for(C=this.children,g=0,D=C.length;g<D;g++)if(E=C[g],h===E||(O=E.isDescendant(h),O))return!0;return!1},l.prototype.isAncestor=function(h){return h.isDescendant(this)},l.prototype.isPreceding=function(h){var E,O;return E=this.treePosition(h),O=this.treePosition(this),E===-1||O===-1?!1:E<O},l.prototype.isFollowing=function(h){var E,O;return E=this.treePosition(h),O=this.treePosition(this),E===-1||O===-1?!1:E>O},l.prototype.treePosition=function(h){var E,O;return O=0,E=!1,this.foreachTreeNode(this.document(),function(g){if(O++,!E&&g===h)return E=!0}),E?O:-1},l.prototype.foreachTreeNode=function(h,E){var O,g,D,C,R;for(h||(h=this.document()),C=h.children,g=0,D=C.length;g<D;g++){if(O=C[g],R=E(O))return R;if(R=this.foreachTreeNode(O,E),R)return R}},l}()}).call(P0)});var qs=F((O0,_0)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;_0.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(o in s)t.call(s,o)&&(a=s[o],this[o]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var o,s;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},r.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(O0)});var Vr=F((A0,L0)=>{(function(){L0.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(A0)});var js=F((M0,F0)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,x,f,y,v,T,_={}.hasOwnProperty;T=lt().assign,n=fe(),c=Zn(),u=ni(),t=Qn(),r=Kn(),m=Yn(),f=ii(),y=oi(),x=si(),d=Bs(),i=Jn(),o=ti(),s=ei(),a=ri(),e=Vr(),F0.exports=v=function(){function I(w){var l,h,E;w||(w={}),this.options=w,h=w.writer||{};for(l in h)_.call(h,l)&&(E=h[l],this["_"+l]=this[l],this[l]=E)}return I.prototype.filterOptions=function(w){var l,h,E,O,g,D,C,R;return w||(w={}),w=T({},this.options,w),l={writer:this},l.pretty=w.pretty||!1,l.allowEmpty=w.allowEmpty||!1,l.indent=(h=w.indent)!=null?h:"  ",l.newline=(E=w.newline)!=null?E:`
`,l.offset=(O=w.offset)!=null?O:0,l.dontPrettyTextNodes=(g=(D=w.dontPrettyTextNodes)!=null?D:w.dontprettytextnodes)!=null?g:0,l.spaceBeforeSlash=(C=(R=w.spaceBeforeSlash)!=null?R:w.spacebeforeslash)!=null?C:"",l.spaceBeforeSlash===!0&&(l.spaceBeforeSlash=" "),l.suppressPrettyCount=0,l.user={},l.state=e.None,l},I.prototype.indent=function(w,l,h){var E;return!l.pretty||l.suppressPrettyCount?"":l.pretty&&(E=(h||0)+l.offset+1,E>0)?new Array(E).join(l.indent):""},I.prototype.endline=function(w,l,h){return!l.pretty||l.suppressPrettyCount?"":l.newline},I.prototype.attribute=function(w,l,h){var E;return this.openAttribute(w,l,h),E=" "+w.name+'="'+w.value+'"',this.closeAttribute(w,l,h),E},I.prototype.cdata=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<![CDATA[",l.state=e.InsideTag,E+=w.value,l.state=e.CloseTag,E+="]]>"+this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.comment=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<!-- ",l.state=e.InsideTag,E+=w.value,l.state=e.CloseTag,E+=" -->"+this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.declaration=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<?xml",l.state=e.InsideTag,E+=' version="'+w.version+'"',w.encoding!=null&&(E+=' encoding="'+w.encoding+'"'),w.standalone!=null&&(E+=' standalone="'+w.standalone+'"'),l.state=e.CloseTag,E+=l.spaceBeforeSlash+"?>",E+=this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.docType=function(w,l,h){var E,O,g,D,C;if(h||(h=0),this.openNode(w,l,h),l.state=e.OpenTag,D=this.indent(w,l,h),D+="<!DOCTYPE "+w.root().name,w.pubID&&w.sysID?D+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.sysID&&(D+=' SYSTEM "'+w.sysID+'"'),w.children.length>0){for(D+=" [",D+=this.endline(w,l,h),l.state=e.InsideTag,C=w.children,O=0,g=C.length;O<g;O++)E=C[O],D+=this.writeChildNode(E,l,h+1);l.state=e.CloseTag,D+="]"}return l.state=e.CloseTag,D+=l.spaceBeforeSlash+">",D+=this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),D},I.prototype.element=function(w,l,h){var E,O,g,D,C,R,P,N,M,k,A,X,B,Q;h||(h=0),k=!1,A="",this.openNode(w,l,h),l.state=e.OpenTag,A+=this.indent(w,l,h)+"<"+w.name,X=w.attribs;for(M in X)_.call(X,M)&&(E=X[M],A+=this.attribute(E,l,h));if(g=w.children.length,D=g===0?null:w.children[0],g===0||w.children.every(function(Z){return(Z.type===n.Text||Z.type===n.Raw)&&Z.value===""}))l.allowEmpty?(A+=">",l.state=e.CloseTag,A+="</"+w.name+">"+this.endline(w,l,h)):(l.state=e.CloseTag,A+=l.spaceBeforeSlash+"/>"+this.endline(w,l,h));else if(l.pretty&&g===1&&(D.type===n.Text||D.type===n.Raw)&&D.value!=null)A+=">",l.state=e.InsideTag,l.suppressPrettyCount++,k=!0,A+=this.writeChildNode(D,l,h+1),l.suppressPrettyCount--,k=!1,l.state=e.CloseTag,A+="</"+w.name+">"+this.endline(w,l,h);else{if(l.dontPrettyTextNodes){for(B=w.children,C=0,P=B.length;C<P;C++)if(O=B[C],(O.type===n.Text||O.type===n.Raw)&&O.value!=null){l.suppressPrettyCount++,k=!0;break}}for(A+=">"+this.endline(w,l,h),l.state=e.InsideTag,Q=w.children,R=0,N=Q.length;R<N;R++)O=Q[R],A+=this.writeChildNode(O,l,h+1);l.state=e.CloseTag,A+=this.indent(w,l,h)+"</"+w.name+">",k&&l.suppressPrettyCount--,A+=this.endline(w,l,h),l.state=e.None}return this.closeNode(w,l,h),A},I.prototype.writeChildNode=function(w,l,h){switch(w.type){case n.CData:return this.cdata(w,l,h);case n.Comment:return this.comment(w,l,h);case n.Element:return this.element(w,l,h);case n.Raw:return this.raw(w,l,h);case n.Text:return this.text(w,l,h);case n.ProcessingInstruction:return this.processingInstruction(w,l,h);case n.Dummy:return"";case n.Declaration:return this.declaration(w,l,h);case n.DocType:return this.docType(w,l,h);case n.AttributeDeclaration:return this.dtdAttList(w,l,h);case n.ElementDeclaration:return this.dtdElement(w,l,h);case n.EntityDeclaration:return this.dtdEntity(w,l,h);case n.NotationDeclaration:return this.dtdNotation(w,l,h);default:throw new Error("Unknown XML node type: "+w.constructor.name)}},I.prototype.processingInstruction=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<?",l.state=e.InsideTag,E+=w.target,w.value&&(E+=" "+w.value),l.state=e.CloseTag,E+=l.spaceBeforeSlash+"?>",E+=this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.raw=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h),l.state=e.InsideTag,E+=w.value,l.state=e.CloseTag,E+=this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.text=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h),l.state=e.InsideTag,E+=w.value,l.state=e.CloseTag,E+=this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.dtdAttList=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<!ATTLIST",l.state=e.InsideTag,E+=" "+w.elementName+" "+w.attributeName+" "+w.attributeType,w.defaultValueType!=="#DEFAULT"&&(E+=" "+w.defaultValueType),w.defaultValue&&(E+=' "'+w.defaultValue+'"'),l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.dtdElement=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<!ELEMENT",l.state=e.InsideTag,E+=" "+w.name+" "+w.value,l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.dtdEntity=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<!ENTITY",l.state=e.InsideTag,w.pe&&(E+=" %"),E+=" "+w.name,w.value?E+=' "'+w.value+'"':(w.pubID&&w.sysID?E+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.sysID&&(E+=' SYSTEM "'+w.sysID+'"'),w.nData&&(E+=" NDATA "+w.nData)),l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.dtdNotation=function(w,l,h){var E;return this.openNode(w,l,h),l.state=e.OpenTag,E=this.indent(w,l,h)+"<!NOTATION",l.state=e.InsideTag,E+=" "+w.name,w.pubID&&w.sysID?E+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.pubID?E+=' PUBLIC "'+w.pubID+'"':w.sysID&&(E+=' SYSTEM "'+w.sysID+'"'),l.state=e.CloseTag,E+=l.spaceBeforeSlash+">"+this.endline(w,l,h),l.state=e.None,this.closeNode(w,l,h),E},I.prototype.openNode=function(w,l,h){},I.prototype.closeNode=function(w,l,h){},I.prototype.openAttribute=function(w,l,h){},I.prototype.closeAttribute=function(w,l,h){},I}()}).call(M0)});var ai=F((U0,k0)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=js(),k0.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,a){var c,u,d,m,x;for(a=this.filterOptions(a),m="",x=s.children,u=0,d=x.length;u<d;u++)c=x[u],m+=this.writeChildNode(c,a,0);return a.pretty&&m.slice(-a.newline.length)===a.newline&&(m=m.slice(0,-a.newline.length)),m},o}(e)}).call(U0)});var Xs=F(($0,B0)=>{(function(){var n,e,t,r,i,o,s,a,c=function(d,m){for(var x in m)u.call(m,x)&&(d[x]=m[x]);function f(){this.constructor=d}return f.prototype=m.prototype,d.prototype=new f,d.__super__=m.prototype,d},u={}.hasOwnProperty;a=lt().isPlainObject,t=ks(),e=jc(),i=Xe(),n=fe(),s=qs(),o=ai(),B0.exports=r=function(d){c(m,d);function m(x){m.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,x||(x={}),x.writer||(x.writer=new o),this.options=x,this.stringify=new s(x)}return Object.defineProperty(m.prototype,"implementation",{value:new t}),Object.defineProperty(m.prototype,"doctype",{get:function(){var x,f,y,v;for(v=this.children,f=0,y=v.length;f<y;f++)if(x=v[f],x.type===n.DocType)return x;return null}}),Object.defineProperty(m.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(m.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(m.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(m.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(m.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(m.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(m.prototype,"origin",{get:function(){return null}}),Object.defineProperty(m.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(m.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(m.prototype,"contentType",{get:function(){return null}}),m.prototype.end=function(x){var f;return f={},x?a(x)&&(f=x,x=this.options.writer):x=this.options.writer,x.document(this,x.filterOptions(f))},m.prototype.toString=function(x){return this.options.writer.document(this,this.options.writer.filterOptions(x))},m.prototype.createElement=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTextNode=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createComment=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createCDATASection=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createProcessingInstruction=function(x,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttribute=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEntityReference=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.importNode=function(x,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createElementNS=function(x,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttributeNS=function(x,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(x,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementById=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.adoptNode=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.renameNode=function(x,f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByClassName=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEvent=function(x){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createNodeIterator=function(x,f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTreeWalker=function(x,f,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},m}(i)}).call($0)});var X0=F((q0,j0)=>{(function(){var n,e,t,r,i,o,s,a,c,u,d,m,x,f,y,v,T,_,I,w,l,h,E,O,g={}.hasOwnProperty;O=lt(),h=O.isObject,l=O.isFunction,E=O.isPlainObject,w=O.getValue,n=fe(),m=Xs(),f=Yn(),r=Qn(),i=Kn(),v=ii(),I=oi(),y=si(),u=Zn(),d=ni(),o=Jn(),a=ei(),s=ti(),c=ri(),t=$s(),_=qs(),T=ai(),e=Vr(),j0.exports=x=function(){function D(C,R,P){var N;this.name="?xml",this.type=n.Document,C||(C={}),N={},C.writer?E(C.writer)&&(N=C.writer,C.writer=new T):C.writer=new T,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(N),this.stringify=new _(C),this.onDataCallback=R||function(){},this.onEndCallback=P||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return D.prototype.createChildNode=function(C){var R,P,N,M,k,A,X,B;switch(C.type){case n.CData:this.cdata(C.value);break;case n.Comment:this.comment(C.value);break;case n.Element:N={},X=C.attribs;for(P in X)g.call(X,P)&&(R=X[P],N[P]=R.value);this.node(C.name,N);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(C.value);break;case n.Text:this.text(C.value);break;case n.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(B=C.children,k=0,A=B.length;k<A;k++)M=B[k],this.createChildNode(M),M.type===n.Element&&this.up();return this},D.prototype.dummy=function(){return this},D.prototype.node=function(C,R,P){var N;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=w(C),R==null&&(R={}),R=w(R),h(R)||(N=[R,P],P=N[0],R=N[1]),this.currentNode=new f(this,C,R),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,P!=null&&this.text(P),this},D.prototype.element=function(C,R,P){var N,M,k,A,X,B;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||h(C)||l(C))for(A=this.options.noValidation,this.options.noValidation=!0,B=new m(this.options).element("TEMP_ROOT"),B.element(C),this.options.noValidation=A,X=B.children,M=0,k=X.length;M<k;M++)N=X[M],this.createChildNode(N),N.type===n.Element&&this.up();else this.node(C,R,P);return this},D.prototype.attribute=function(C,R){var P,N;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=w(C)),h(C))for(P in C)g.call(C,P)&&(N=C[P],this.attribute(P,N));else l(R)&&(R=R.apply()),this.options.keepNullAttributes&&R==null?this.currentNode.attribs[C]=new t(this,C,""):R!=null&&(this.currentNode.attribs[C]=new t(this,C,R));return this},D.prototype.text=function(C){var R;return this.openCurrent(),R=new I(this,C),this.onData(this.writer.text(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.cdata=function(C){var R;return this.openCurrent(),R=new r(this,C),this.onData(this.writer.cdata(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.comment=function(C){var R;return this.openCurrent(),R=new i(this,C),this.onData(this.writer.comment(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.raw=function(C){var R;return this.openCurrent(),R=new v(this,C),this.onData(this.writer.raw(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.instruction=function(C,R){var P,N,M,k,A;if(this.openCurrent(),C!=null&&(C=w(C)),R!=null&&(R=w(R)),Array.isArray(C))for(P=0,k=C.length;P<k;P++)N=C[P],this.instruction(N);else if(h(C))for(N in C)g.call(C,N)&&(M=C[N],this.instruction(N,M));else l(R)&&(R=R.apply()),A=new y(this,C,R),this.onData(this.writer.processingInstruction(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},D.prototype.declaration=function(C,R,P){var N;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return N=new u(this,C,R,P),this.onData(this.writer.declaration(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.doctype=function(C,R,P){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,R,P),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},D.prototype.dtdElement=function(C,R){var P;return this.openCurrent(),P=new s(this,C,R),this.onData(this.writer.dtdElement(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.attList=function(C,R,P,N,M){var k;return this.openCurrent(),k=new o(this,C,R,P,N,M),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.entity=function(C,R){var P;return this.openCurrent(),P=new a(this,!1,C,R),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.pEntity=function(C,R){var P;return this.openCurrent(),P=new a(this,!0,C,R),this.onData(this.writer.dtdEntity(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.notation=function(C,R){var P;return this.openCurrent(),P=new c(this,C,R),this.onData(this.writer.dtdNotation(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},D.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},D.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},D.prototype.openNode=function(C){var R,P,N,M;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===n.Element&&(this.root=C),P="",C.type===n.Element){this.writerOptions.state=e.OpenTag,P=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,M=C.attribs;for(N in M)g.call(M,N)&&(R=M[N],P+=this.writer.attribute(R,this.writerOptions,this.currentLevel));P+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,P=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?P+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(P+=' SYSTEM "'+C.sysID+'"'),C.children?(P+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,P+=">"),P+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(P,this.currentLevel),C.isOpen=!0}},D.prototype.closeNode=function(C){var R;if(!C.isClosed)return R="",this.writerOptions.state=e.CloseTag,C.type===n.Element?R=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):R=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(R,this.currentLevel),C.isClosed=!0},D.prototype.onData=function(C,R){return this.documentStarted=!0,this.onDataCallback(C,R+1)},D.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},D.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},D.prototype.ele=function(){return this.element.apply(this,arguments)},D.prototype.nod=function(C,R,P){return this.node(C,R,P)},D.prototype.txt=function(C){return this.text(C)},D.prototype.dat=function(C){return this.cdata(C)},D.prototype.com=function(C){return this.comment(C)},D.prototype.ins=function(C,R){return this.instruction(C,R)},D.prototype.dec=function(C,R,P){return this.declaration(C,R,P)},D.prototype.dtd=function(C,R,P){return this.doctype(C,R,P)},D.prototype.e=function(C,R,P){return this.element(C,R,P)},D.prototype.n=function(C,R,P){return this.node(C,R,P)},D.prototype.t=function(C){return this.text(C)},D.prototype.d=function(C){return this.cdata(C)},D.prototype.c=function(C){return this.comment(C)},D.prototype.r=function(C){return this.raw(C)},D.prototype.i=function(C,R){return this.instruction(C,R)},D.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.ent=function(C,R){return this.entity(C,R)},D.prototype.pent=function(C,R){return this.pEntity(C,R)},D.prototype.not=function(C,R){return this.notation(C,R)},D}()}).call(q0)});var G0=F((W0,V0)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;n=fe(),r=js(),e=Vr(),V0.exports=t=function(s){i(a,s);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,d){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,d)},a.prototype.document=function(c,u){var d,m,x,f,y,v,T,_,I;for(T=c.children,m=x=0,y=T.length;x<y;m=++x)d=T[m],d.isLastRootNode=m===c.children.length-1;for(u=this.filterOptions(u),_=c.children,I=[],f=0,v=_.length;f<v;f++)d=_[f],I.push(this.writeChildNode(d,u,0));return I},a.prototype.attribute=function(c,u,d){return this.stream.write(a.__super__.attribute.call(this,c,u,d))},a.prototype.cdata=function(c,u,d){return this.stream.write(a.__super__.cdata.call(this,c,u,d))},a.prototype.comment=function(c,u,d){return this.stream.write(a.__super__.comment.call(this,c,u,d))},a.prototype.declaration=function(c,u,d){return this.stream.write(a.__super__.declaration.call(this,c,u,d))},a.prototype.docType=function(c,u,d){var m,x,f,y;if(d||(d=0),this.openNode(c,u,d),u.state=e.OpenTag,this.stream.write(this.indent(c,u,d)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,d)),u.state=e.InsideTag,y=c.children,x=0,f=y.length;x<f;x++)m=y[x],this.writeChildNode(m,u,d+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,d)),u.state=e.None,this.closeNode(c,u,d)},a.prototype.element=function(c,u,d){var m,x,f,y,v,T,_,I,w,l;d||(d=0),this.openNode(c,u,d),u.state=e.OpenTag,this.stream.write(this.indent(c,u,d)+"<"+c.name),w=c.attribs;for(_ in w)o.call(w,_)&&(m=w[_],this.attribute(m,u,d));if(f=c.children.length,y=f===0?null:c.children[0],f===0||c.children.every(function(h){return(h.type===n.Text||h.type===n.Raw)&&h.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&f===1&&(y.type===n.Text||y.type===n.Raw)&&y.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,I=!0,this.writeChildNode(y,u,d+1),u.suppressPrettyCount--,I=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,d)),u.state=e.InsideTag,l=c.children,v=0,T=l.length;v<T;v++)x=l[v],this.writeChildNode(x,u,d+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,d)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,d)),u.state=e.None,this.closeNode(c,u,d)},a.prototype.processingInstruction=function(c,u,d){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,d))},a.prototype.raw=function(c,u,d){return this.stream.write(a.__super__.raw.call(this,c,u,d))},a.prototype.text=function(c,u,d){return this.stream.write(a.__super__.text.call(this,c,u,d))},a.prototype.dtdAttList=function(c,u,d){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,d))},a.prototype.dtdElement=function(c,u,d){return this.stream.write(a.__super__.dtdElement.call(this,c,u,d))},a.prototype.dtdEntity=function(c,u,d){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,d))},a.prototype.dtdNotation=function(c,u,d){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,d))},a}(r)}).call(W0)});var H0=F((z0,Ut)=>{(function(){var n,e,t,r,i,o,s,a,c,u;u=lt(),a=u.assign,c=u.isFunction,t=ks(),r=Xs(),i=X0(),s=ai(),o=G0(),n=fe(),e=Vr(),Ut.exports.create=function(d,m,x,f){var y,v;if(d==null)throw new Error("Root element needs a name.");return f=a({},m,x,f),y=new r(f),v=y.element(d),f.headless||(y.declaration(f),(f.pubID!=null||f.sysID!=null)&&y.dtd(f)),v},Ut.exports.begin=function(d,m,x){var f;return c(d)&&(f=[d,m],m=f[0],x=f[1],d={}),m?new i(d,m,x):new r(d)},Ut.exports.stringWriter=function(d){return new s(d)},Ut.exports.streamWriter=function(d,m){return new o(d,m)},Ut.exports.implementation=new t,Ut.exports.nodeType=n,Ut.exports.writerState=e}).call(z0)});var Y0=F(Ws=>{(function(){"use strict";var n,e,t,r,i,o={}.hasOwnProperty;n=H0(),e=zn().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},i=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Ws.Builder=function(){function s(a){var c,u,d;this.options={},u=e["0.2"];for(c in u)o.call(u,c)&&(d=u[c],this.options[c]=d);for(c in a)o.call(a,c)&&(d=a[c],this.options[c]=d)}return s.prototype.buildObject=function(a){var c,u,d,m,x;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(x=Object.keys(a)[0],a=a[x]):x=this.options.rootName,d=function(f){return function(y,v){var T,_,I,w,l,h;if(typeof v!="object")f.options.cdata&&r(v)?y.raw(i(v)):y.txt(v);else if(Array.isArray(v)){for(w in v)if(o.call(v,w)){_=v[w];for(l in _)I=_[l],y=d(y.ele(l),I).up()}}else for(l in v)if(o.call(v,l))if(_=v[l],l===c){if(typeof _=="object")for(T in _)h=_[T],y=y.att(T,h)}else if(l===u)f.options.cdata&&r(_)?y=y.raw(i(_)):y=y.txt(_);else if(Array.isArray(_))for(w in _)o.call(_,w)&&(I=_[w],typeof I=="string"?f.options.cdata&&r(I)?y=y.ele(l).raw(i(I)).up():y=y.ele(l,I).up():y=d(y.ele(l),I).up());else typeof _=="object"?y=d(y.ele(l),_).up():typeof _=="string"&&f.options.cdata&&r(_)?y=y.ele(l).raw(i(_)).up():(_==null&&(_=""),y=y.ele(l,_.toString()).up());return y}}(this),m=n.create(x,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(m,a).end(this.options.renderOpts)},s}()}).call(Ws)});var Q0=F(ci=>{(function(n){n.parser=function(b,p){return new t(b,p)},n.SAXParser=t,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(b,p){if(!(this instanceof t))return new t(b,p);var L=this;i(L),L.q=L.c="",L.bufferCheckPosition=n.MAX_BUFFER_LENGTH,L.opt=p||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!b,L.noscript=!!(b||L.opt.noscript),L.state=g.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(y)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!b),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),C(L,"onready")}Object.create||(Object.create=function(b){function p(){}p.prototype=b;var L=new p;return L}),Object.keys||(Object.keys=function(b){var p=[];for(var L in b)b.hasOwnProperty(L)&&p.push(L);return p});function r(b){for(var p=Math.max(n.MAX_BUFFER_LENGTH,10),L=0,S=0,Y=e.length;S<Y;S++){var ie=b[e[S]].length;if(ie>p)switch(e[S]){case"textNode":P(b);break;case"cdata":R(b,"oncdata",b.cdata),b.cdata="";break;case"script":R(b,"onscript",b.script),b.script="";break;default:M(b,"Max buffer length exceeded: "+e[S])}L=Math.max(L,ie)}var xe=n.MAX_BUFFER_LENGTH-L;b.bufferCheckPosition=xe+b.position}function i(b){for(var p=0,L=e.length;p<L;p++)b[e[p]]=""}function o(b){P(b),b.cdata!==""&&(R(b,"oncdata",b.cdata),b.cdata=""),b.script!==""&&(R(b,"onscript",b.script),b.script="")}t.prototype={end:function(){k(this)},write:gt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var a=n.EVENTS.filter(function(b){return b!=="error"&&b!=="end"});function c(b,p){return new u(b,p)}function u(b,p){if(!(this instanceof u))return new u(b,p);s.apply(this),this._parser=new t(b,p),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(S){L.emit("error",S),L._parser.error=null},this._decoder=null,a.forEach(function(S){Object.defineProperty(L,"on"+S,{get:function(){return L._parser["on"+S]},set:function(Y){if(!Y)return L.removeAllListeners(S),L._parser["on"+S]=Y,Y;L.on(S,Y)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(b){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(b)){if(!this._decoder){var p=require("string_decoder").StringDecoder;this._decoder=new p("utf8")}b=this._decoder.write(b)}return this._parser.write(b.toString()),this.emit("data",b),!0},u.prototype.end=function(b){return b&&b.length&&this.write(b),this._parser.end(),!0},u.prototype.on=function(b,p){var L=this;return!L._parser["on"+b]&&a.indexOf(b)!==-1&&(L._parser["on"+b]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,b),L.emit.apply(L,S)}),s.prototype.on.call(L,b,p)};var d="[CDATA[",m="DOCTYPE",x="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",y={xml:x,xmlns:f},v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function w(b){return b===" "||b===`
`||b==="\r"||b==="	"}function l(b){return b==='"'||b==="'"}function h(b){return b===">"||w(b)}function E(b,p){return b.test(p)}function O(b,p){return!E(b,p)}var g=0;n.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(b){var p=n.ENTITIES[b],L=typeof p=="number"?String.fromCharCode(p):p;n.ENTITIES[b]=L});for(var D in n.STATE)n.STATE[n.STATE[D]]=D;g=n.STATE;function C(b,p,L){b[p]&&b[p](L)}function R(b,p,L){b.textNode&&P(b),C(b,p,L)}function P(b){b.textNode=N(b.opt,b.textNode),b.textNode&&C(b,"ontext",b.textNode),b.textNode=""}function N(b,p){return b.trim&&(p=p.trim()),b.normalize&&(p=p.replace(/\s+/g," ")),p}function M(b,p){return P(b),b.trackPosition&&(p+=`
Line: `+b.line+`
Column: `+b.column+`
Char: `+b.c),p=new Error(p),b.error=p,C(b,"onerror",p),b}function k(b){return b.sawRoot&&!b.closedRoot&&A(b,"Unclosed root tag"),b.state!==g.BEGIN&&b.state!==g.BEGIN_WHITESPACE&&b.state!==g.TEXT&&M(b,"Unexpected end"),P(b),b.c="",b.closed=!0,C(b,"onend"),t.call(b,b.strict,b.opt),b}function A(b,p){if(typeof b!="object"||!(b instanceof t))throw new Error("bad call to strictFail");b.strict&&M(b,p)}function X(b){b.strict||(b.tagName=b.tagName[b.looseCase]());var p=b.tags[b.tags.length-1]||b,L=b.tag={name:b.tagName,attributes:{}};b.opt.xmlns&&(L.ns=p.ns),b.attribList.length=0,R(b,"onopentagstart",L)}function B(b,p){var L=b.indexOf(":"),S=L<0?["",b]:b.split(":"),Y=S[0],ie=S[1];return p&&b==="xmlns"&&(Y="xmlns",ie=""),{prefix:Y,local:ie}}function Q(b){if(b.strict||(b.attribName=b.attribName[b.looseCase]()),b.attribList.indexOf(b.attribName)!==-1||b.tag.attributes.hasOwnProperty(b.attribName)){b.attribName=b.attribValue="";return}if(b.opt.xmlns){var p=B(b.attribName,!0),L=p.prefix,S=p.local;if(L==="xmlns")if(S==="xml"&&b.attribValue!==x)A(b,"xml: prefix must be bound to "+x+`
Actual: `+b.attribValue);else if(S==="xmlns"&&b.attribValue!==f)A(b,"xmlns: prefix must be bound to "+f+`
Actual: `+b.attribValue);else{var Y=b.tag,ie=b.tags[b.tags.length-1]||b;Y.ns===ie.ns&&(Y.ns=Object.create(ie.ns)),Y.ns[S]=b.attribValue}b.attribList.push([b.attribName,b.attribValue])}else b.tag.attributes[b.attribName]=b.attribValue,R(b,"onattribute",{name:b.attribName,value:b.attribValue});b.attribName=b.attribValue=""}function Z(b,p){if(b.opt.xmlns){var L=b.tag,S=B(b.tagName);L.prefix=S.prefix,L.local=S.local,L.uri=L.ns[S.prefix]||"",L.prefix&&!L.uri&&(A(b,"Unbound namespace prefix: "+JSON.stringify(b.tagName)),L.uri=S.prefix);var Y=b.tags[b.tags.length-1]||b;L.ns&&Y.ns!==L.ns&&Object.keys(L.ns).forEach(function(Wa){R(b,"onopennamespace",{prefix:Wa,uri:L.ns[Wa]})});for(var ie=0,xe=b.attribList.length;ie<xe;ie++){var Le=b.attribList[ie],Me=Le[0],sr=Le[1],be=B(Me,!0),yt=be.prefix,Ep=be.local,Xa=yt===""?"":L.ns[yt]||"",Wo={name:Me,value:sr,prefix:yt,local:Ep,uri:Xa};yt&&yt!=="xmlns"&&!Xa&&(A(b,"Unbound namespace prefix: "+JSON.stringify(yt)),Wo.uri=yt),b.tag.attributes[Me]=Wo,R(b,"onattribute",Wo)}b.attribList.length=0}b.tag.isSelfClosing=!!p,b.sawRoot=!0,b.tags.push(b.tag),R(b,"onopentag",b.tag),p||(!b.noscript&&b.tagName.toLowerCase()==="script"?b.state=g.SCRIPT:b.state=g.TEXT,b.tag=null,b.tagName=""),b.attribName=b.attribValue="",b.attribList.length=0}function ue(b){if(!b.tagName){A(b,"Weird empty close tag."),b.textNode+="</>",b.state=g.TEXT;return}if(b.script){if(b.tagName!=="script"){b.script+="</"+b.tagName+">",b.tagName="",b.state=g.SCRIPT;return}R(b,"onscript",b.script),b.script=""}var p=b.tags.length,L=b.tagName;b.strict||(L=L[b.looseCase]());for(var S=L;p--;){var Y=b.tags[p];if(Y.name!==S)A(b,"Unexpected close tag");else break}if(p<0){A(b,"Unmatched closing tag: "+b.tagName),b.textNode+="</"+b.tagName+">",b.state=g.TEXT;return}b.tagName=L;for(var ie=b.tags.length;ie-- >p;){var xe=b.tag=b.tags.pop();b.tagName=b.tag.name,R(b,"onclosetag",b.tagName);var Le={};for(var Me in xe.ns)Le[Me]=xe.ns[Me];var sr=b.tags[b.tags.length-1]||b;b.opt.xmlns&&xe.ns!==sr.ns&&Object.keys(xe.ns).forEach(function(be){var yt=xe.ns[be];R(b,"onclosenamespace",{prefix:be,uri:yt})})}p===0&&(b.closedRoot=!0),b.tagName=b.attribValue=b.attribName="",b.attribList.length=0,b.state=g.TEXT}function de(b){var p=b.entity,L=p.toLowerCase(),S,Y="";return b.ENTITIES[p]?b.ENTITIES[p]:b.ENTITIES[L]?b.ENTITIES[L]:(p=L,p.charAt(0)==="#"&&(p.charAt(1)==="x"?(p=p.slice(2),S=parseInt(p,16),Y=S.toString(16)):(p=p.slice(1),S=parseInt(p,10),Y=S.toString(10))),p=p.replace(/^0+/,""),isNaN(S)||Y.toLowerCase()!==p||S<0||S>1114111?(A(b,"Invalid character entity"),"&"+b.entity+";"):String.fromCodePoint(S))}function Te(b,p){p==="<"?(b.state=g.OPEN_WAKA,b.startTagPosition=b.position):w(p)||(A(b,"Non-whitespace before first tag."),b.textNode=p,b.state=g.TEXT)}function it(b,p){var L="";return p<b.length&&(L=b.charAt(p)),L}function gt(b){var p=this;if(this.error)throw this.error;if(p.closed)return M(p,"Cannot write after close. Assign an onready handler.");if(b===null)return k(p);typeof b=="object"&&(b=b.toString());for(var L=0,S="";S=it(b,L++),p.c=S,!!S;)switch(p.trackPosition&&(p.position++,S===`
`?(p.line++,p.column=0):p.column++),p.state){case g.BEGIN:if(p.state=g.BEGIN_WHITESPACE,S==="\uFEFF")continue;Te(p,S);continue;case g.BEGIN_WHITESPACE:Te(p,S);continue;case g.TEXT:if(p.sawRoot&&!p.closedRoot){for(var ie=L-1;S&&S!=="<"&&S!=="&";)S=it(b,L++),S&&p.trackPosition&&(p.position++,S===`
`?(p.line++,p.column=0):p.column++);p.textNode+=b.substring(ie,L-1)}S==="<"&&!(p.sawRoot&&p.closedRoot&&!p.strict)?(p.state=g.OPEN_WAKA,p.startTagPosition=p.position):(!w(S)&&(!p.sawRoot||p.closedRoot)&&A(p,"Text data outside of root node."),S==="&"?p.state=g.TEXT_ENTITY:p.textNode+=S);continue;case g.SCRIPT:S==="<"?p.state=g.SCRIPT_ENDING:p.script+=S;continue;case g.SCRIPT_ENDING:S==="/"?p.state=g.CLOSE_TAG:(p.script+="<"+S,p.state=g.SCRIPT);continue;case g.OPEN_WAKA:if(S==="!")p.state=g.SGML_DECL,p.sgmlDecl="";else if(!w(S))if(E(v,S))p.state=g.OPEN_TAG,p.tagName=S;else if(S==="/")p.state=g.CLOSE_TAG,p.tagName="";else if(S==="?")p.state=g.PROC_INST,p.procInstName=p.procInstBody="";else{if(A(p,"Unencoded <"),p.startTagPosition+1<p.position){var Y=p.position-p.startTagPosition;S=new Array(Y).join(" ")+S}p.textNode+="<"+S,p.state=g.TEXT}continue;case g.SGML_DECL:if(p.sgmlDecl+S==="--"){p.state=g.COMMENT,p.comment="",p.sgmlDecl="";continue}p.doctype&&p.doctype!==!0&&p.sgmlDecl?(p.state=g.DOCTYPE_DTD,p.doctype+="<!"+p.sgmlDecl+S,p.sgmlDecl=""):(p.sgmlDecl+S).toUpperCase()===d?(R(p,"onopencdata"),p.state=g.CDATA,p.sgmlDecl="",p.cdata=""):(p.sgmlDecl+S).toUpperCase()===m?(p.state=g.DOCTYPE,(p.doctype||p.sawRoot)&&A(p,"Inappropriately located doctype declaration"),p.doctype="",p.sgmlDecl=""):S===">"?(R(p,"onsgmldeclaration",p.sgmlDecl),p.sgmlDecl="",p.state=g.TEXT):(l(S)&&(p.state=g.SGML_DECL_QUOTED),p.sgmlDecl+=S);continue;case g.SGML_DECL_QUOTED:S===p.q&&(p.state=g.SGML_DECL,p.q=""),p.sgmlDecl+=S;continue;case g.DOCTYPE:S===">"?(p.state=g.TEXT,R(p,"ondoctype",p.doctype),p.doctype=!0):(p.doctype+=S,S==="["?p.state=g.DOCTYPE_DTD:l(S)&&(p.state=g.DOCTYPE_QUOTED,p.q=S));continue;case g.DOCTYPE_QUOTED:p.doctype+=S,S===p.q&&(p.q="",p.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:S==="]"?(p.doctype+=S,p.state=g.DOCTYPE):S==="<"?(p.state=g.OPEN_WAKA,p.startTagPosition=p.position):l(S)?(p.doctype+=S,p.state=g.DOCTYPE_DTD_QUOTED,p.q=S):p.doctype+=S;continue;case g.DOCTYPE_DTD_QUOTED:p.doctype+=S,S===p.q&&(p.state=g.DOCTYPE_DTD,p.q="");continue;case g.COMMENT:S==="-"?p.state=g.COMMENT_ENDING:p.comment+=S;continue;case g.COMMENT_ENDING:S==="-"?(p.state=g.COMMENT_ENDED,p.comment=N(p.opt,p.comment),p.comment&&R(p,"oncomment",p.comment),p.comment=""):(p.comment+="-"+S,p.state=g.COMMENT);continue;case g.COMMENT_ENDED:S!==">"?(A(p,"Malformed comment"),p.comment+="--"+S,p.state=g.COMMENT):p.doctype&&p.doctype!==!0?p.state=g.DOCTYPE_DTD:p.state=g.TEXT;continue;case g.CDATA:for(var ie=L-1;S&&S!=="]";)S=it(b,L++),S&&p.trackPosition&&(p.position++,S===`
`?(p.line++,p.column=0):p.column++);p.cdata+=b.substring(ie,L-1),S==="]"&&(p.state=g.CDATA_ENDING);continue;case g.CDATA_ENDING:S==="]"?p.state=g.CDATA_ENDING_2:(p.cdata+="]"+S,p.state=g.CDATA);continue;case g.CDATA_ENDING_2:S===">"?(p.cdata&&R(p,"oncdata",p.cdata),R(p,"onclosecdata"),p.cdata="",p.state=g.TEXT):S==="]"?p.cdata+="]":(p.cdata+="]]"+S,p.state=g.CDATA);continue;case g.PROC_INST:S==="?"?p.state=g.PROC_INST_ENDING:w(S)?p.state=g.PROC_INST_BODY:p.procInstName+=S;continue;case g.PROC_INST_BODY:if(!p.procInstBody&&w(S))continue;S==="?"?p.state=g.PROC_INST_ENDING:p.procInstBody+=S;continue;case g.PROC_INST_ENDING:S===">"?(R(p,"onprocessinginstruction",{name:p.procInstName,body:p.procInstBody}),p.procInstName=p.procInstBody="",p.state=g.TEXT):(p.procInstBody+="?"+S,p.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:E(T,S)?p.tagName+=S:(X(p),S===">"?Z(p):S==="/"?p.state=g.OPEN_TAG_SLASH:(w(S)||A(p,"Invalid character in tag name"),p.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:S===">"?(Z(p,!0),ue(p)):(A(p,"Forward-slash in opening tag not followed by >"),p.state=g.ATTRIB);continue;case g.ATTRIB:if(w(S))continue;S===">"?Z(p):S==="/"?p.state=g.OPEN_TAG_SLASH:E(v,S)?(p.attribName=S,p.attribValue="",p.state=g.ATTRIB_NAME):A(p,"Invalid attribute name");continue;case g.ATTRIB_NAME:S==="="?p.state=g.ATTRIB_VALUE:S===">"?(A(p,"Attribute without value"),p.attribValue=p.attribName,Q(p),Z(p)):w(S)?p.state=g.ATTRIB_NAME_SAW_WHITE:E(T,S)?p.attribName+=S:A(p,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if(S==="=")p.state=g.ATTRIB_VALUE;else{if(w(S))continue;A(p,"Attribute without value"),p.tag.attributes[p.attribName]="",p.attribValue="",R(p,"onattribute",{name:p.attribName,value:""}),p.attribName="",S===">"?Z(p):E(v,S)?(p.attribName=S,p.state=g.ATTRIB_NAME):(A(p,"Invalid attribute name"),p.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(w(S))continue;l(S)?(p.q=S,p.state=g.ATTRIB_VALUE_QUOTED):(p.opt.unquotedAttributeValues||M(p,"Unquoted attribute value"),p.state=g.ATTRIB_VALUE_UNQUOTED,p.attribValue=S);continue;case g.ATTRIB_VALUE_QUOTED:if(S!==p.q){S==="&"?p.state=g.ATTRIB_VALUE_ENTITY_Q:p.attribValue+=S;continue}Q(p),p.q="",p.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:w(S)?p.state=g.ATTRIB:S===">"?Z(p):S==="/"?p.state=g.OPEN_TAG_SLASH:E(v,S)?(A(p,"No whitespace between attributes"),p.attribName=S,p.attribValue="",p.state=g.ATTRIB_NAME):A(p,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!h(S)){S==="&"?p.state=g.ATTRIB_VALUE_ENTITY_U:p.attribValue+=S;continue}Q(p),S===">"?Z(p):p.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(p.tagName)S===">"?ue(p):E(T,S)?p.tagName+=S:p.script?(p.script+="</"+p.tagName,p.tagName="",p.state=g.SCRIPT):(w(S)||A(p,"Invalid tagname in closing tag"),p.state=g.CLOSE_TAG_SAW_WHITE);else{if(w(S))continue;O(v,S)?p.script?(p.script+="</"+S,p.state=g.SCRIPT):A(p,"Invalid tagname in closing tag."):p.tagName=S}continue;case g.CLOSE_TAG_SAW_WHITE:if(w(S))continue;S===">"?ue(p):A(p,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var xe,Le;switch(p.state){case g.TEXT_ENTITY:xe=g.TEXT,Le="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:xe=g.ATTRIB_VALUE_QUOTED,Le="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:xe=g.ATTRIB_VALUE_UNQUOTED,Le="attribValue";break}if(S===";"){var Me=de(p);p.opt.unparsedEntities&&!Object.values(n.XML_ENTITIES).includes(Me)?(p.entity="",p.state=xe,p.write(Me)):(p[Le]+=Me,p.entity="",p.state=xe)}else E(p.entity.length?I:_,S)?p.entity+=S:(A(p,"Invalid character in entity name"),p[Le]+="&"+p.entity+S,p.entity="",p.state=xe);continue;default:throw new Error(p,"Unknown state: "+p.state)}return p.position>=p.bufferCheckPosition&&r(p),p}String.fromCodePoint||function(){var b=String.fromCharCode,p=Math.floor,L=function(){var S=16384,Y=[],ie,xe,Le=-1,Me=arguments.length;if(!Me)return"";for(var sr="";++Le<Me;){var be=Number(arguments[Le]);if(!isFinite(be)||be<0||be>1114111||p(be)!==be)throw RangeError("Invalid code point: "+be);be<=65535?Y.push(be):(be-=65536,ie=(be>>10)+55296,xe=be%1024+56320,Y.push(ie,xe)),(Le+1===Me||Y.length>S)&&(sr+=b.apply(null,Y),Y.length=0)}return sr};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(typeof ci>"u"?ci.sax={}:ci)});var K0=F(Vs=>{(function(){"use strict";Vs.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(Vs)});var Gs=F(Jt=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),Jt.normalize=function(e){return e.toLowerCase()},Jt.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Jt.stripPrefix=function(e){return e.replace(n,"")},Jt.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Jt.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Jt)});var Z0=F(St=>{(function(){"use strict";var n,e,t,r,i,o,s,a,c,u=function(x,f){return function(){return x.apply(f,arguments)}},d=function(x,f){for(var y in f)m.call(f,y)&&(x[y]=f[y]);function v(){this.constructor=x}return v.prototype=f.prototype,x.prototype=new v,x.__super__=f.prototype,x},m={}.hasOwnProperty;a=Q0(),r=require("events"),n=K0(),s=Gs(),c=require("timers").setImmediate,e=zn().defaults,i=function(x){return typeof x=="object"&&x!=null&&Object.keys(x).length===0},o=function(x,f,y){var v,T,_;for(v=0,T=x.length;v<T;v++)_=x[v],f=_(f,y);return f},t=function(x,f,y){var v;return v=Object.create(null),v.value=y,v.writable=!0,v.enumerable=!0,v.configurable=!0,Object.defineProperty(x,f,v)},St.Parser=function(x){d(f,x);function f(y){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var v,T,_;if(!(this instanceof St.Parser))return new St.Parser(y);this.options={},T=e["0.2"];for(v in T)m.call(T,v)&&(_=T[v],this.options[v]=_);for(v in y)m.call(y,v)&&(_=y[v],this.options[v]=_);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return f.prototype.processAsync=function(){var y,v;try{return this.remaining.length<=this.options.chunkSize?(y=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(y),this.saxParser.close()):(y=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(y),c(this.processAsync))}catch(T){if(v=T,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(v)}},f.prototype.assignOrPush=function(y,v,T){return v in y?(y[v]instanceof Array||t(y,v,[y[v]]),y[v].push(T)):this.options.explicitArray?t(y,v,[T]):t(y,v,T)},f.prototype.reset=function(){var y,v,T,_;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(I){return function(w){if(I.saxParser.resume(),!I.saxParser.errThrown)return I.saxParser.errThrown=!0,I.emit("error",w)}}(this),this.saxParser.onend=function(I){return function(){if(!I.saxParser.ended)return I.saxParser.ended=!0,I.emit("end",I.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,_=[],y=this.options.attrkey,v=this.options.charkey,this.saxParser.onopentag=function(I){return function(w){var l,h,E,O,g;if(E={},E[v]="",!I.options.ignoreAttrs){g=w.attributes;for(l in g)m.call(g,l)&&(!(y in E)&&!I.options.mergeAttrs&&(E[y]={}),h=I.options.attrValueProcessors?o(I.options.attrValueProcessors,w.attributes[l],l):w.attributes[l],O=I.options.attrNameProcessors?o(I.options.attrNameProcessors,l):l,I.options.mergeAttrs?I.assignOrPush(E,O,h):t(E[y],O,h))}return E["#name"]=I.options.tagNameProcessors?o(I.options.tagNameProcessors,w.name):w.name,I.options.xmlns&&(E[I.options.xmlnskey]={uri:w.uri,local:w.local}),_.push(E)}}(this),this.saxParser.onclosetag=function(I){return function(){var w,l,h,E,O,g,D,C,R,P;if(g=_.pop(),O=g["#name"],(!I.options.explicitChildren||!I.options.preserveChildrenOrder)&&delete g["#name"],g.cdata===!0&&(w=g.cdata,delete g.cdata),R=_[_.length-1],g[v].match(/^\s*$/)&&!w?(l=g[v],delete g[v]):(I.options.trim&&(g[v]=g[v].trim()),I.options.normalize&&(g[v]=g[v].replace(/\s{2,}/g," ").trim()),g[v]=I.options.valueProcessors?o(I.options.valueProcessors,g[v],O):g[v],Object.keys(g).length===1&&v in g&&!I.EXPLICIT_CHARKEY&&(g=g[v])),i(g)&&(typeof I.options.emptyTag=="function"?g=I.options.emptyTag():g=I.options.emptyTag!==""?I.options.emptyTag:l),I.options.validator!=null&&(P="/"+function(){var N,M,k;for(k=[],N=0,M=_.length;N<M;N++)E=_[N],k.push(E["#name"]);return k}().concat(O).join("/"),function(){var N;try{return g=I.options.validator(P,R&&R[O],g)}catch(M){return N=M,I.emit("error",N)}}()),I.options.explicitChildren&&!I.options.mergeAttrs&&typeof g=="object"){if(!I.options.preserveChildrenOrder)E={},I.options.attrkey in g&&(E[I.options.attrkey]=g[I.options.attrkey],delete g[I.options.attrkey]),!I.options.charsAsChildren&&I.options.charkey in g&&(E[I.options.charkey]=g[I.options.charkey],delete g[I.options.charkey]),Object.getOwnPropertyNames(g).length>0&&(E[I.options.childkey]=g),g=E;else if(R){R[I.options.childkey]=R[I.options.childkey]||[],D={};for(h in g)m.call(g,h)&&t(D,h,g[h]);R[I.options.childkey].push(D),delete g["#name"],Object.keys(g).length===1&&v in g&&!I.EXPLICIT_CHARKEY&&(g=g[v])}}return _.length>0?I.assignOrPush(R,O,g):(I.options.explicitRoot&&(C=g,g={},t(g,O,C)),I.resultObject=g,I.saxParser.ended=!0,I.emit("end",I.resultObject))}}(this),T=function(I){return function(w){var l,h;if(h=_[_.length-1],h)return h[v]+=w,I.options.explicitChildren&&I.options.preserveChildrenOrder&&I.options.charsAsChildren&&(I.options.includeWhiteChars||w.replace(/\\n/g,"").trim()!=="")&&(h[I.options.childkey]=h[I.options.childkey]||[],l={"#name":"__text__"},l[v]=w,I.options.normalize&&(l[v]=l[v].replace(/\s{2,}/g," ").trim()),h[I.options.childkey].push(l)),h}}(this),this.saxParser.ontext=T,this.saxParser.oncdata=function(I){return function(w){var l;if(l=T(w),l)return l.cdata=!0}}(this)},f.prototype.parseString=function(y,v){var T;v!=null&&typeof v=="function"&&(this.on("end",function(_){return this.reset(),v(null,_)}),this.on("error",function(_){return this.reset(),v(_)}));try{return y=y.toString(),y.trim()===""?(this.emit("end",null),!0):(y=n.stripBOM(y),this.options.async?(this.remaining=y,c(this.processAsync),this.saxParser):this.saxParser.write(y).close())}catch(_){if(T=_,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw T}else return this.emit("error",T),this.saxParser.errThrown=!0}},f.prototype.parseStringPromise=function(y){return new Promise(function(v){return function(T,_){return v.parseString(y,function(I,w){return I?_(I):T(w)})}}(this))},f}(r),St.parseString=function(x,f,y){var v,T,_;return y!=null?(typeof y=="function"&&(v=y),typeof f=="object"&&(T=f)):(typeof f=="function"&&(v=f),T={}),_=new St.Parser(T),_.parseString(x,v)},St.parseStringPromise=function(x,f){var y,v;return typeof f=="object"&&(y=f),v=new St.Parser(y),v.parseStringPromise(x)}}).call(St)});var gr=F(Dt=>{(function(){"use strict";var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;e=zn(),n=Y0(),t=Z0(),r=Gs(),Dt.defaults=e.defaults,Dt.processors=r,Dt.ValidationError=function(s){i(a,s);function a(c){this.message=c}return a}(Error),Dt.Builder=n.Builder,Dt.Parser=t.Parser,Dt.parseString=t.parseString,Dt.parseStringPromise=t.parseStringPromise}).call(Dt)});var yu=F((fw,Pt)=>{var te=require("fs"),li=require("os"),ve=require("path"),tu=require("crypto"),pt={fs:te.constants,os:li.constants},ru="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",su=/XXXXXX/,ph=3,au=(pt.O_CREAT||pt.fs.O_CREAT)|(pt.O_EXCL||pt.fs.O_EXCL)|(pt.O_RDWR||pt.fs.O_RDWR),hh=li.platform()==="win32",xh=pt.EBADF||pt.os.errno.EBADF,dh=pt.ENOENT||pt.os.errno.ENOENT,cu=448,uu=384,mh="exit",yr=[],lu=te.rmdirSync.bind(te),fu=!1;function gh(n,e){return te.rm(n,{recursive:!0},e)}function pu(n){return te.rmSync(n,{recursive:!0})}function Ys(n,e){let t=wr(n,e),r=t[0],i=t[1];Rh(r,function(o,s){if(o)return i(o);let a=s.tries;(function c(){try{let u=xu(s);te.stat(u,function(d){if(!d)return a-- >0?c():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()})}function Qs(n){let e=wr(n),t=e[0],r=Th(t),i=r.tries;do{let o=xu(r);try{te.statSync(o)}catch{return o}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function yh(n,e){let t=wr(n,e),r=t[0],i=t[1];Ys(r,function(s,a){if(s)return i(s);te.open(a,au,r.mode||uu,function(u,d){if(u)return i(u);if(r.discardDescriptor)return te.close(d,function(x){return i(x,a,void 0,zs(a,-1,r,!1))});{let m=r.discardDescriptor||r.detachDescriptor;i(null,a,d,zs(a,m?-1:d,r,!1))}})})}function wh(n){let e=wr(n),t=e[0],r=t.discardDescriptor||t.detachDescriptor,i=Qs(t),o=te.openSync(i,au,t.mode||uu);return t.discardDescriptor&&(te.closeSync(o),o=void 0),{name:i,fd:o,removeCallback:zs(i,r?-1:o,t,!0)}}function bh(n,e){let t=wr(n,e),r=t[0],i=t[1];Ys(r,function(s,a){if(s)return i(s);te.mkdir(a,r.mode||cu,function(u){if(u)return i(u);i(null,a,hu(a,r,!1))})})}function vh(n){let e=wr(n),t=e[0],r=Qs(t);return te.mkdirSync(r,t.mode||cu),{name:r,removeCallback:hu(r,t,!0)}}function Eh(n,e){let t=function(r){if(r&&!Hs(r))return e(r);e()};0<=n[0]?te.close(n[0],function(){te.unlink(n[1],t)}):te.unlink(n[1],t)}function Ch(n){let e=null;try{0<=n[0]&&te.closeSync(n[0])}catch(t){if(!Ph(t)&&!Hs(t))throw t}finally{try{te.unlinkSync(n[1])}catch(t){Hs(t)||(e=t)}}if(e!==null)throw e}function zs(n,e,t,r){let i=ui(Ch,[e,n],r),o=ui(Eh,[e,n],r,i);return t.keep||yr.unshift(i),r?i:o}function hu(n,e,t){let r=e.unsafeCleanup?gh:te.rmdir.bind(te),i=e.unsafeCleanup?pu:lu,o=ui(i,n,t),s=ui(r,n,t,o);return e.keep||yr.unshift(o),t?o:s}function ui(n,e,t,r){let i=!1;return function o(s){if(!i){let a=r||o,c=yr.indexOf(a);return c>=0&&yr.splice(c,1),i=!0,t||n===lu||n===pu?n(e):n(e,s||function(){})}}}function Ih(){if(fu)for(;yr.length;)try{yr[0]()}catch{}}function nu(n){let e=[],t=null;try{t=tu.randomBytes(n)}catch{t=tu.pseudoRandomBytes(n)}for(let r=0;r<n;r++)e.push(ru[t[r]%ru.length]);return e.join("")}function We(n){return typeof n>"u"}function wr(n,e){if(typeof n=="function")return[{},n];if(We(n))return[{},e];let t={};for(let r of Object.getOwnPropertyNames(n))t[r]=n[r];return[t,e]}function Sh(n,e,t){let r=ve.isAbsolute(n)?n:ve.join(e,n);te.stat(r,function(i){i?te.realpath(ve.dirname(r),function(o,s){if(o)return t(o);t(null,ve.join(s,ve.basename(r)))}):te.realpath(r,t)})}function Dh(n,e){let t=ve.isAbsolute(n)?n:ve.join(e,n);try{return te.statSync(t),te.realpathSync(t)}catch{let i=te.realpathSync(ve.dirname(t));return ve.join(i,ve.basename(t))}}function xu(n){let e=n.tmpdir;if(!We(n.name))return ve.join(e,n.dir,n.name);if(!We(n.template))return ve.join(e,n.dir,n.template).replace(su,nu(6));let t=[n.prefix?n.prefix:"tmp","-",process.pid,"-",nu(12),n.postfix?"-"+n.postfix:""].join("");return ve.join(e,n.dir,t)}function du(n){if(!We(n.name)){let e=n.name;if(ve.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let t=ve.basename(e);if(t===".."||t==="."||t!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!We(n.template)&&!n.template.match(su))throw new Error(`Invalid template, found "${n.template}".`);if(!We(n.tries)&&isNaN(n.tries)||n.tries<0)throw new Error(`Invalid tries, found "${n.tries}".`);n.tries=We(n.name)?n.tries||ph:1,n.keep=!!n.keep,n.detachDescriptor=!!n.detachDescriptor,n.discardDescriptor=!!n.discardDescriptor,n.unsafeCleanup=!!n.unsafeCleanup,n.prefix=We(n.prefix)?"":n.prefix,n.postfix=We(n.postfix)?"":n.postfix}function iu(n,e,t,r){if(We(e))return r(null);Sh(e,t,function(i,o){if(i)return r(i);let s=ve.relative(t,o);if(!o.startsWith(t))return r(new Error(`${n} option must be relative to "${t}", found "${s}".`));r(null,s)})}function ou(n,e,t){if(We(e))return;let r=Dh(e,t),i=ve.relative(t,r);if(!r.startsWith(t))throw new Error(`${n} option must be relative to "${t}", found "${i}".`);return i}function Rh(n,e){Oh(n,function(t,r){if(t)return e(t);n.tmpdir=r;try{du(n,r)}catch(i){return e(i)}iu("dir",n.dir,r,function(i,o){if(i)return e(i);n.dir=We(o)?"":o,iu("template",n.template,r,function(s,a){if(s)return e(s);n.template=a,e(null,n)})})})}function Th(n){let e=n.tmpdir=gu(n);du(n,e);let t=ou("dir",n.dir,e);return n.dir=We(t)?"":t,n.template=ou("template",n.template,e),n}function Ph(n){return mu(n,-xh,"EBADF")}function Hs(n){return mu(n,-dh,"ENOENT")}function mu(n,e,t){return hh?n.code===t:n.code===t&&n.errno===e}function Nh(){fu=!0}function Oh(n,e){return te.realpath(n&&n.tmpdir||li.tmpdir(),e)}function gu(n){return te.realpathSync(n&&n.tmpdir||li.tmpdir())}process.addListener(mh,Ih);Object.defineProperty(Pt.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return gu()}});Pt.exports.dir=bh;Pt.exports.dirSync=vh;Pt.exports.file=yh;Pt.exports.fileSync=wh;Pt.exports.tmpName=Ys;Pt.exports.tmpNameSync=Qs;Pt.exports.setGracefulCleanup=Nh});var rn=F((Sb,tl)=>{"use strict";var Fx="2.0.0",Ux=Number.MAX_SAFE_INTEGER||9007199254740991,kx=16,$x=250,Bx=["major","premajor","minor","preminor","patch","prepatch","prerelease"];tl.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:kx,MAX_SAFE_BUILD_LENGTH:$x,MAX_SAFE_INTEGER:Ux,RELEASE_TYPES:Bx,SEMVER_SPEC_VERSION:Fx,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var nn=F((Db,rl)=>{"use strict";var qx=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};rl.exports=qx});var Cr=F((xt,nl)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:fa,MAX_SAFE_BUILD_LENGTH:jx,MAX_LENGTH:Xx}=rn(),Wx=nn();xt=nl.exports={};var Vx=xt.re=[],Gx=xt.safeRe=[],q=xt.src=[],zx=xt.safeSrc=[],j=xt.t={},Hx=0,pa="[a-zA-Z0-9-]",Yx=[["\\s",1],["\\d",Xx],[pa,jx]],Qx=n=>{for(let[e,t]of Yx)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},W=(n,e,t)=>{let r=Qx(e),i=Hx++;Wx(n,i,e),j[n]=i,q[i]=e,zx[i]=r,Vx[i]=new RegExp(e,t?"g":void 0),Gx[i]=new RegExp(r,t?"g":void 0)};W("NUMERICIDENTIFIER","0|[1-9]\\d*");W("NUMERICIDENTIFIERLOOSE","\\d+");W("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${pa}*`);W("MAINVERSION",`(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})`);W("MAINVERSIONLOOSE",`(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASEIDENTIFIER",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIER]})`);W("PRERELEASEIDENTIFIERLOOSE",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASE",`(?:-(${q[j.PRERELEASEIDENTIFIER]}(?:\\.${q[j.PRERELEASEIDENTIFIER]})*))`);W("PRERELEASELOOSE",`(?:-?(${q[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${q[j.PRERELEASEIDENTIFIERLOOSE]})*))`);W("BUILDIDENTIFIER",`${pa}+`);W("BUILD",`(?:\\+(${q[j.BUILDIDENTIFIER]}(?:\\.${q[j.BUILDIDENTIFIER]})*))`);W("FULLPLAIN",`v?${q[j.MAINVERSION]}${q[j.PRERELEASE]}?${q[j.BUILD]}?`);W("FULL",`^${q[j.FULLPLAIN]}$`);W("LOOSEPLAIN",`[v=\\s]*${q[j.MAINVERSIONLOOSE]}${q[j.PRERELEASELOOSE]}?${q[j.BUILD]}?`);W("LOOSE",`^${q[j.LOOSEPLAIN]}$`);W("GTLT","((?:<|>)?=?)");W("XRANGEIDENTIFIERLOOSE",`${q[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);W("XRANGEIDENTIFIER",`${q[j.NUMERICIDENTIFIER]}|x|X|\\*`);W("XRANGEPLAIN",`[v=\\s]*(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:${q[j.PRERELEASE]})?${q[j.BUILD]}?)?)?`);W("XRANGEPLAINLOOSE",`[v=\\s]*(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:${q[j.PRERELEASELOOSE]})?${q[j.BUILD]}?)?)?`);W("XRANGE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAIN]}$`);W("XRANGELOOSE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAINLOOSE]}$`);W("COERCEPLAIN",`(^|[^\\d])(\\d{1,${fa}})(?:\\.(\\d{1,${fa}}))?(?:\\.(\\d{1,${fa}}))?`);W("COERCE",`${q[j.COERCEPLAIN]}(?:$|[^\\d])`);W("COERCEFULL",q[j.COERCEPLAIN]+`(?:${q[j.PRERELEASE]})?(?:${q[j.BUILD]})?(?:$|[^\\d])`);W("COERCERTL",q[j.COERCE],!0);W("COERCERTLFULL",q[j.COERCEFULL],!0);W("LONETILDE","(?:~>?)");W("TILDETRIM",`(\\s*)${q[j.LONETILDE]}\\s+`,!0);xt.tildeTrimReplace="$1~";W("TILDE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAIN]}$`);W("TILDELOOSE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAINLOOSE]}$`);W("LONECARET","(?:\\^)");W("CARETTRIM",`(\\s*)${q[j.LONECARET]}\\s+`,!0);xt.caretTrimReplace="$1^";W("CARET",`^${q[j.LONECARET]}${q[j.XRANGEPLAIN]}$`);W("CARETLOOSE",`^${q[j.LONECARET]}${q[j.XRANGEPLAINLOOSE]}$`);W("COMPARATORLOOSE",`^${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]})$|^$`);W("COMPARATOR",`^${q[j.GTLT]}\\s*(${q[j.FULLPLAIN]})$|^$`);W("COMPARATORTRIM",`(\\s*)${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]}|${q[j.XRANGEPLAIN]})`,!0);xt.comparatorTrimReplace="$1$2$3";W("HYPHENRANGE",`^\\s*(${q[j.XRANGEPLAIN]})\\s+-\\s+(${q[j.XRANGEPLAIN]})\\s*$`);W("HYPHENRANGELOOSE",`^\\s*(${q[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${q[j.XRANGEPLAINLOOSE]})\\s*$`);W("STAR","(<|>)?=?\\s*\\*");W("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");W("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ki=F((Rb,il)=>{"use strict";var Kx=Object.freeze({loose:!0}),Zx=Object.freeze({}),Jx=n=>n?typeof n!="object"?Kx:n:Zx;il.exports=Jx});var ha=F((Tb,al)=>{"use strict";var ol=/^[0-9]+$/,sl=(n,e)=>{if(typeof n=="number"&&typeof e=="number")return n===e?0:n<e?-1:1;let t=ol.test(n),r=ol.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},ed=(n,e)=>sl(e,n);al.exports={compareIdentifiers:sl,rcompareIdentifiers:ed}});var Se=F((Pb,ul)=>{"use strict";var $i=nn(),{MAX_LENGTH:cl,MAX_SAFE_INTEGER:Bi}=rn(),{safeRe:qi,t:ji}=Cr(),td=ki(),{compareIdentifiers:xa}=ha(),da=class n{constructor(e,t){if(t=td(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>cl)throw new TypeError(`version is longer than ${cl} characters`);$i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?qi[ji.LOOSE]:qi[ji.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Bi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Bi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Bi||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Bi)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($i("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if($i("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xa(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if($i("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xa(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?qi[ji.PRERELEASELOOSE]:qi[ji.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];r===!1&&(o=[t]),xa(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};ul.exports=da});var tr=F((Nb,fl)=>{"use strict";var ll=Se(),rd=(n,e,t=!1)=>{if(n instanceof ll)return n;try{return new ll(n,e)}catch(r){if(!t)return null;throw r}};fl.exports=rd});var hl=F((Ob,pl)=>{"use strict";var nd=tr(),id=(n,e)=>{let t=nd(n,e);return t?t.version:null};pl.exports=id});var dl=F((_b,xl)=>{"use strict";var od=tr(),sd=(n,e)=>{let t=od(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};xl.exports=sd});var yl=F((Ab,gl)=>{"use strict";var ml=Se(),ad=(n,e,t,r,i)=>{typeof t=="string"&&(i=r,r=t,t=void 0);try{return new ml(n instanceof ml?n.version:n,t).inc(e,r,i).version}catch{return null}};gl.exports=ad});var vl=F((Lb,bl)=>{"use strict";var wl=tr(),cd=(n,e)=>{let t=wl(n,null,!0),r=wl(e,null,!0),i=t.compare(r);if(i===0)return null;let o=i>0,s=o?t:r,a=o?r:t,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let d=c?"pre":"";return t.major!==r.major?d+"major":t.minor!==r.minor?d+"minor":t.patch!==r.patch?d+"patch":"prerelease"};bl.exports=cd});var Cl=F((Mb,El)=>{"use strict";var ud=Se(),ld=(n,e)=>new ud(n,e).major;El.exports=ld});var Sl=F((Fb,Il)=>{"use strict";var fd=Se(),pd=(n,e)=>new fd(n,e).minor;Il.exports=pd});var Rl=F((Ub,Dl)=>{"use strict";var hd=Se(),xd=(n,e)=>new hd(n,e).patch;Dl.exports=xd});var Pl=F((kb,Tl)=>{"use strict";var dd=tr(),md=(n,e)=>{let t=dd(n,e);return t&&t.prerelease.length?t.prerelease:null};Tl.exports=md});var et=F(($b,Ol)=>{"use strict";var Nl=Se(),gd=(n,e,t)=>new Nl(n,t).compare(new Nl(e,t));Ol.exports=gd});var Al=F((Bb,_l)=>{"use strict";var yd=et(),wd=(n,e,t)=>yd(e,n,t);_l.exports=wd});var Ml=F((qb,Ll)=>{"use strict";var bd=et(),vd=(n,e)=>bd(n,e,!0);Ll.exports=vd});var Xi=F((jb,Ul)=>{"use strict";var Fl=Se(),Ed=(n,e,t)=>{let r=new Fl(n,t),i=new Fl(e,t);return r.compare(i)||r.compareBuild(i)};Ul.exports=Ed});var $l=F((Xb,kl)=>{"use strict";var Cd=Xi(),Id=(n,e)=>n.sort((t,r)=>Cd(t,r,e));kl.exports=Id});var ql=F((Wb,Bl)=>{"use strict";var Sd=Xi(),Dd=(n,e)=>n.sort((t,r)=>Sd(r,t,e));Bl.exports=Dd});var on=F((Vb,jl)=>{"use strict";var Rd=et(),Td=(n,e,t)=>Rd(n,e,t)>0;jl.exports=Td});var Wi=F((Gb,Xl)=>{"use strict";var Pd=et(),Nd=(n,e,t)=>Pd(n,e,t)<0;Xl.exports=Nd});var ma=F((zb,Wl)=>{"use strict";var Od=et(),_d=(n,e,t)=>Od(n,e,t)===0;Wl.exports=_d});var ga=F((Hb,Vl)=>{"use strict";var Ad=et(),Ld=(n,e,t)=>Ad(n,e,t)!==0;Vl.exports=Ld});var Vi=F((Yb,Gl)=>{"use strict";var Md=et(),Fd=(n,e,t)=>Md(n,e,t)>=0;Gl.exports=Fd});var Gi=F((Qb,zl)=>{"use strict";var Ud=et(),kd=(n,e,t)=>Ud(n,e,t)<=0;zl.exports=kd});var ya=F((Kb,Hl)=>{"use strict";var $d=ma(),Bd=ga(),qd=on(),jd=Vi(),Xd=Wi(),Wd=Gi(),Vd=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return $d(n,t,r);case"!=":return Bd(n,t,r);case">":return qd(n,t,r);case">=":return jd(n,t,r);case"<":return Xd(n,t,r);case"<=":return Wd(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Hl.exports=Vd});var Ql=F((Zb,Yl)=>{"use strict";var Gd=Se(),zd=tr(),{safeRe:zi,t:Hi}=Cr(),Hd=(n,e)=>{if(n instanceof Gd)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(e.includePrerelease?zi[Hi.COERCEFULL]:zi[Hi.COERCE]);else{let c=e.includePrerelease?zi[Hi.COERCERTLFULL]:zi[Hi.COERCERTL],u;for(;(u=c.exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(t===null)return null;let r=t[2],i=t[3]||"0",o=t[4]||"0",s=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return zd(`${r}.${i}.${o}${s}${a}`,e)};Yl.exports=Hd});var Zl=F((Jb,Kl)=>{"use strict";var wa=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};Kl.exports=wa});var tt=F((ev,rf)=>{"use strict";var Yd=/\s+/g,ba=class n{constructor(e,t){if(t=Kd(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof va)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(Yd," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!ef(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&im(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&rm)|(this.options.loose&&nm))+":"+e,i=Jl.get(r);if(i)return i;let o=this.options.loose,s=o?Oe[De.HYPHENRANGELOOSE]:Oe[De.HYPHENRANGE];e=e.replace(s,xm(this.options.includePrerelease)),se("hyphen replace",e),e=e.replace(Oe[De.COMPARATORTRIM],Jd),se("comparator trim",e),e=e.replace(Oe[De.TILDETRIM],em),se("tilde trim",e),e=e.replace(Oe[De.CARETTRIM],tm),se("caret trim",e);let a=e.split(" ").map(m=>om(m,this.options)).join(" ").split(/\s+/).map(m=>hm(m,this.options));o&&(a=a.filter(m=>(se("loose invalid filter",m,this.options),!!m.match(Oe[De.COMPARATORLOOSE])))),se("range list",a);let c=new Map,u=a.map(m=>new va(m,this.options));for(let m of u){if(ef(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return Jl.set(r,d),d}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>tf(r,t)&&e.set.some(i=>tf(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Zd(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(dm(this.set[t],e,this.options))return!0;return!1}};rf.exports=ba;var Qd=Zl(),Jl=new Qd,Kd=ki(),va=sn(),se=nn(),Zd=Se(),{safeRe:Oe,t:De,comparatorTrimReplace:Jd,tildeTrimReplace:em,caretTrimReplace:tm}=Cr(),{FLAG_INCLUDE_PRERELEASE:rm,FLAG_LOOSE:nm}=rn(),ef=n=>n.value==="<0.0.0-0",im=n=>n.value==="",tf=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},om=(n,e)=>(n=n.replace(Oe[De.BUILD],""),se("comp",n,e),n=cm(n,e),se("caret",n),n=sm(n,e),se("tildes",n),n=lm(n,e),se("xrange",n),n=pm(n,e),se("stars",n),n),_e=n=>!n||n.toLowerCase()==="x"||n==="*",sm=(n,e)=>n.trim().split(/\s+/).map(t=>am(t,e)).join(" "),am=(n,e)=>{let t=e.loose?Oe[De.TILDELOOSE]:Oe[De.TILDE];return n.replace(t,(r,i,o,s,a)=>{se("tilde",n,r,i,o,s,a);let c;return _e(i)?c="":_e(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:_e(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(se("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,se("tilde return",c),c})},cm=(n,e)=>n.trim().split(/\s+/).map(t=>um(t,e)).join(" "),um=(n,e)=>{se("caret",n,e);let t=e.loose?Oe[De.CARETLOOSE]:Oe[De.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{se("caret",n,i,o,s,a,c);let u;return _e(o)?u="":_e(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:_e(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(se("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(se("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),se("caret return",u),u})},lm=(n,e)=>(se("replaceXRanges",n,e),n.split(/\s+/).map(t=>fm(t,e)).join(" ")),fm=(n,e)=>{n=n.trim();let t=e.loose?Oe[De.XRANGELOOSE]:Oe[De.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{se("xRange",n,r,i,o,s,a,c);let u=_e(o),d=u||_e(s),m=d||_e(a),x=m;return i==="="&&x&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&x?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:m&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),se("xRange return",r),r})},pm=(n,e)=>(se("replaceStars",n,e),n.trim().replace(Oe[De.STAR],"")),hm=(n,e)=>(se("replaceGTE0",n,e),n.trim().replace(Oe[e.includePrerelease?De.GTE0PRE:De.GTE0],"")),xm=n=>(e,t,r,i,o,s,a,c,u,d,m,x)=>(_e(r)?t="":_e(i)?t=`>=${r}.0.0${n?"-0":""}`:_e(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,_e(u)?c="":_e(d)?c=`<${+u+1}.0.0-0`:_e(m)?c=`<${u}.${+d+1}.0-0`:x?c=`<=${u}.${d}.${m}-${x}`:n?c=`<${u}.${d}.${+m+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),dm=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(se(n[r].semver),n[r].semver!==va.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var sn=F((tv,uf)=>{"use strict";var an=Symbol("SemVer ANY"),Ia=class n{static get ANY(){return an}constructor(e,t){if(t=nf(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ca("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===an?this.value="":this.value=this.operator+this.semver.version,Ca("comp",this)}parse(e){let t=this.options.loose?of[sf.COMPARATORLOOSE]:of[sf.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new af(r[2],this.options.loose):this.semver=an}toString(){return this.value}test(e){if(Ca("Comparator.test",e,this.options.loose),this.semver===an||e===an)return!0;if(typeof e=="string")try{e=new af(e,this.options)}catch{return!1}return Ea(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new cf(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new cf(this.value,t).test(e.semver):(t=nf(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Ea(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Ea(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};uf.exports=Ia;var nf=ki(),{safeRe:of,t:sf}=Cr(),Ea=ya(),Ca=nn(),af=Se(),cf=tt()});var cn=F((rv,lf)=>{"use strict";var mm=tt(),gm=(n,e,t)=>{try{e=new mm(e,t)}catch{return!1}return e.test(n)};lf.exports=gm});var pf=F((nv,ff)=>{"use strict";var ym=tt(),wm=(n,e)=>new ym(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));ff.exports=wm});var xf=F((iv,hf)=>{"use strict";var bm=Se(),vm=tt(),Em=(n,e,t)=>{let r=null,i=null,o=null;try{o=new vm(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new bm(r,t))}),r};hf.exports=Em});var mf=F((ov,df)=>{"use strict";var Cm=Se(),Im=tt(),Sm=(n,e,t)=>{let r=null,i=null,o=null;try{o=new Im(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new Cm(r,t))}),r};df.exports=Sm});var wf=F((sv,yf)=>{"use strict";var Sa=Se(),Dm=tt(),gf=on(),Rm=(n,e)=>{n=new Dm(n,e);let t=new Sa("0.0.0");if(n.test(t)||(t=new Sa("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=>{let a=new Sa(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||gf(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!t||gf(t,o))&&(t=o)}return t&&n.test(t)?t:null};yf.exports=Rm});var vf=F((av,bf)=>{"use strict";var Tm=tt(),Pm=(n,e)=>{try{return new Tm(n,e).range||"*"}catch{return null}};bf.exports=Pm});var Yi=F((cv,Sf)=>{"use strict";var Nm=Se(),If=sn(),{ANY:Om}=If,_m=tt(),Am=cn(),Ef=on(),Cf=Wi(),Lm=Gi(),Mm=Vi(),Fm=(n,e,t,r)=>{n=new Nm(n,r),e=new _m(e,r);let i,o,s,a,c;switch(t){case">":i=Ef,o=Lm,s=Cf,a=">",c=">=";break;case"<":i=Cf,o=Mm,s=Ef,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Am(n,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],m=null,x=null;if(d.forEach(f=>{f.semver===Om&&(f=new If(">=0.0.0")),m=m||f,x=x||f,i(f.semver,m.semver,r)?m=f:s(f.semver,x.semver,r)&&(x=f)}),m.operator===a||m.operator===c||(!x.operator||x.operator===a)&&o(n,x.semver))return!1;if(x.operator===c&&s(n,x.semver))return!1}return!0};Sf.exports=Fm});var Rf=F((uv,Df)=>{"use strict";var Um=Yi(),km=(n,e,t)=>Um(n,e,">",t);Df.exports=km});var Pf=F((lv,Tf)=>{"use strict";var $m=Yi(),Bm=(n,e,t)=>$m(n,e,"<",t);Tf.exports=Bm});var _f=F((fv,Of)=>{"use strict";var Nf=tt(),qm=(n,e,t)=>(n=new Nf(n,t),e=new Nf(e,t),n.intersects(e,t));Of.exports=qm});var Lf=F((pv,Af)=>{"use strict";var jm=cn(),Xm=et();Af.exports=(n,e,t)=>{let r=[],i=null,o=null,s=n.sort((d,m)=>Xm(d,m,t));for(let d of s)jm(d,e,t)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[d,m]of r)d===m?a.push(d):!m&&d===s[0]?a.push("*"):m?d===s[0]?a.push(`<=${m}`):a.push(`${d} - ${m}`):a.push(`>=${d}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var Bf=F((hv,$f)=>{"use strict";var Mf=tt(),Ra=sn(),{ANY:Da}=Ra,un=cn(),Ta=et(),Wm=(n,e,t={})=>{if(n===e)return!0;n=new Mf(n,t),e=new Mf(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=Gm(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Vm=[new Ra(">=0.0.0-0")],Ff=[new Ra(">=0.0.0")],Gm=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Da){if(e.length===1&&e[0].semver===Da)return!0;t.includePrerelease?n=Vm:n=Ff}if(e.length===1&&e[0].semver===Da){if(t.includePrerelease)return!0;e=Ff}let r=new Set,i,o;for(let f of n)f.operator===">"||f.operator===">="?i=Uf(i,f,t):f.operator==="<"||f.operator==="<="?o=kf(o,f,t):r.add(f.semver);if(r.size>1)return null;let s;if(i&&o){if(s=Ta(i.semver,o.semver,t),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of r){if(i&&!un(f,String(i),t)||o&&!un(f,String(o),t))return null;for(let y of e)if(!un(f,String(y),t))return!1;return!0}let a,c,u,d,m=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,x=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&o.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let f of e){if(d=d||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",i){if(x&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===x.major&&f.semver.minor===x.minor&&f.semver.patch===x.patch&&(x=!1),f.operator===">"||f.operator===">="){if(a=Uf(i,f,t),a===f&&a!==i)return!1}else if(i.operator===">="&&!un(i.semver,String(f),t))return!1}if(o){if(m&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===m.major&&f.semver.minor===m.minor&&f.semver.patch===m.patch&&(m=!1),f.operator==="<"||f.operator==="<="){if(c=kf(o,f,t),c===f&&c!==o)return!1}else if(o.operator==="<="&&!un(o.semver,String(f),t))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&d&&!i&&s!==0||x||m)},Uf=(n,e,t)=>{if(!n)return e;let r=Ta(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},kf=(n,e,t)=>{if(!n)return e;let r=Ta(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};$f.exports=Wm});var ln=F((xv,Xf)=>{"use strict";var Pa=Cr(),qf=rn(),zm=Se(),jf=ha(),Hm=tr(),Ym=hl(),Qm=dl(),Km=yl(),Zm=vl(),Jm=Cl(),eg=Sl(),tg=Rl(),rg=Pl(),ng=et(),ig=Al(),og=Ml(),sg=Xi(),ag=$l(),cg=ql(),ug=on(),lg=Wi(),fg=ma(),pg=ga(),hg=Vi(),xg=Gi(),dg=ya(),mg=Ql(),gg=sn(),yg=tt(),wg=cn(),bg=pf(),vg=xf(),Eg=mf(),Cg=wf(),Ig=vf(),Sg=Yi(),Dg=Rf(),Rg=Pf(),Tg=_f(),Pg=Lf(),Ng=Bf();Xf.exports={parse:Hm,valid:Ym,clean:Qm,inc:Km,diff:Zm,major:Jm,minor:eg,patch:tg,prerelease:rg,compare:ng,rcompare:ig,compareLoose:og,compareBuild:sg,sort:ag,rsort:cg,gt:ug,lt:lg,eq:fg,neq:pg,gte:hg,lte:xg,cmp:dg,coerce:mg,Comparator:gg,Range:yg,satisfies:wg,toComparators:bg,maxSatisfying:vg,minSatisfying:Eg,minVersion:Cg,validRange:Ig,outside:Sg,gtr:Dg,ltr:Rg,intersects:Tg,simplifyRange:Pg,subset:Ng,SemVer:zm,re:Pa.re,src:Pa.src,tokens:Pa.t,SEMVER_SPEC_VERSION:qf.SEMVER_SPEC_VERSION,RELEASE_TYPES:qf.RELEASE_TYPES,compareIdentifiers:jf.compareIdentifiers,rcompareIdentifiers:jf.rcompareIdentifiers}});var op=F((Fa,Ua)=>{(function(n,e){typeof Fa=="object"&&typeof Ua<"u"?Ua.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})(Fa,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",c="week",u="month",d="quarter",m="year",x="date",f="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var N=["th","st","nd","rd"],M=P%100;return"["+P+(N[(M-20)%10]||N[M]||N[0])+"]"}},_=function(P,N,M){var k=String(P);return!k||k.length>=N?P:""+Array(N+1-k.length).join(M)+P},I={s:_,z:function(P){var N=-P.utcOffset(),M=Math.abs(N),k=Math.floor(M/60),A=M%60;return(N<=0?"+":"-")+_(k,2,"0")+":"+_(A,2,"0")},m:function P(N,M){if(N.date()<M.date())return-P(M,N);var k=12*(M.year()-N.year())+(M.month()-N.month()),A=N.clone().add(k,u),X=M-A<0,B=N.clone().add(k+(X?-1:1),u);return+(-(k+(M-A)/(X?A-B:B-A))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:u,y:m,w:c,d:a,D:x,h:s,m:o,s:i,ms:r,Q:d}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},w="en",l={};l[w]=T;var h="$isDayjsObject",E=function(P){return P instanceof C||!(!P||!P[h])},O=function P(N,M,k){var A;if(!N)return w;if(typeof N=="string"){var X=N.toLowerCase();l[X]&&(A=X),M&&(l[X]=M,A=X);var B=N.split("-");if(!A&&B.length>1)return P(B[0])}else{var Q=N.name;l[Q]=N,A=Q}return!k&&A&&(w=A),A||!k&&w},g=function(P,N){if(E(P))return P.clone();var M=typeof N=="object"?N:{};return M.date=P,M.args=arguments,new C(M)},D=I;D.l=O,D.i=E,D.w=function(P,N){return g(P,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var C=function(){function P(M){this.$L=O(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[h]=!0}var N=P.prototype;return N.parse=function(M){this.$d=function(k){var A=k.date,X=k.utc;if(A===null)return new Date(NaN);if(D.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var B=A.match(y);if(B){var Q=B[2]-1||0,Z=(B[7]||"0").substring(0,3);return X?new Date(Date.UTC(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)):new Date(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)}}return new Date(A)}(M),this.init()},N.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},N.$utils=function(){return D},N.isValid=function(){return this.$d.toString()!==f},N.isSame=function(M,k){var A=g(M);return this.startOf(k)<=A&&A<=this.endOf(k)},N.isAfter=function(M,k){return g(M)<this.startOf(k)},N.isBefore=function(M,k){return this.endOf(k)<g(M)},N.$g=function(M,k,A){return D.u(M)?this[k]:this.set(A,M)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(M,k){var A=this,X=!!D.u(k)||k,B=D.p(M),Q=function(p,L){var S=D.w(A.$u?Date.UTC(A.$y,L,p):new Date(A.$y,L,p),A);return X?S:S.endOf(a)},Z=function(p,L){return D.w(A.toDate()[p].apply(A.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(L)),A)},ue=this.$W,de=this.$M,Te=this.$D,it="set"+(this.$u?"UTC":"");switch(B){case m:return X?Q(1,0):Q(31,11);case u:return X?Q(1,de):Q(0,de+1);case c:var gt=this.$locale().weekStart||0,b=(ue<gt?ue+7:ue)-gt;return Q(X?Te-b:Te+(6-b),de);case a:case x:return Z(it+"Hours",0);case s:return Z(it+"Minutes",1);case o:return Z(it+"Seconds",2);case i:return Z(it+"Milliseconds",3);default:return this.clone()}},N.endOf=function(M){return this.startOf(M,!1)},N.$set=function(M,k){var A,X=D.p(M),B="set"+(this.$u?"UTC":""),Q=(A={},A[a]=B+"Date",A[x]=B+"Date",A[u]=B+"Month",A[m]=B+"FullYear",A[s]=B+"Hours",A[o]=B+"Minutes",A[i]=B+"Seconds",A[r]=B+"Milliseconds",A)[X],Z=X===a?this.$D+(k-this.$W):k;if(X===u||X===m){var ue=this.clone().set(x,1);ue.$d[Q](Z),ue.init(),this.$d=ue.set(x,Math.min(this.$D,ue.daysInMonth())).$d}else Q&&this.$d[Q](Z);return this.init(),this},N.set=function(M,k){return this.clone().$set(M,k)},N.get=function(M){return this[D.p(M)]()},N.add=function(M,k){var A,X=this;M=Number(M);var B=D.p(k),Q=function(de){var Te=g(X);return D.w(Te.date(Te.date()+Math.round(de*M)),X)};if(B===u)return this.set(u,this.$M+M);if(B===m)return this.set(m,this.$y+M);if(B===a)return Q(1);if(B===c)return Q(7);var Z=(A={},A[o]=e,A[s]=t,A[i]=n,A)[B]||1,ue=this.$d.getTime()+M*Z;return D.w(ue,this)},N.subtract=function(M,k){return this.add(-1*M,k)},N.format=function(M){var k=this,A=this.$locale();if(!this.isValid())return A.invalidDate||f;var X=M||"YYYY-MM-DDTHH:mm:ssZ",B=D.z(this),Q=this.$H,Z=this.$m,ue=this.$M,de=A.weekdays,Te=A.months,it=A.meridiem,gt=function(L,S,Y,ie){return L&&(L[S]||L(k,X))||Y[S].slice(0,ie)},b=function(L){return D.s(Q%12||12,L,"0")},p=it||function(L,S,Y){var ie=L<12?"AM":"PM";return Y?ie.toLowerCase():ie};return X.replace(v,function(L,S){return S||function(Y){switch(Y){case"YY":return String(k.$y).slice(-2);case"YYYY":return D.s(k.$y,4,"0");case"M":return ue+1;case"MM":return D.s(ue+1,2,"0");case"MMM":return gt(A.monthsShort,ue,Te,3);case"MMMM":return gt(Te,ue);case"D":return k.$D;case"DD":return D.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return gt(A.weekdaysMin,k.$W,de,2);case"ddd":return gt(A.weekdaysShort,k.$W,de,3);case"dddd":return de[k.$W];case"H":return String(Q);case"HH":return D.s(Q,2,"0");case"h":return b(1);case"hh":return b(2);case"a":return p(Q,Z,!0);case"A":return p(Q,Z,!1);case"m":return String(Z);case"mm":return D.s(Z,2,"0");case"s":return String(k.$s);case"ss":return D.s(k.$s,2,"0");case"SSS":return D.s(k.$ms,3,"0");case"Z":return B}return null}(L)||B.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(M,k,A){var X,B=this,Q=D.p(k),Z=g(M),ue=(Z.utcOffset()-this.utcOffset())*e,de=this-Z,Te=function(){return D.m(B,Z)};switch(Q){case m:X=Te()/12;break;case u:X=Te();break;case d:X=Te()/3;break;case c:X=(de-ue)/6048e5;break;case a:X=(de-ue)/864e5;break;case s:X=de/t;break;case o:X=de/e;break;case i:X=de/n;break;default:X=de}return A?X:D.a(X)},N.daysInMonth=function(){return this.endOf(u).$D},N.$locale=function(){return l[this.$L]},N.locale=function(M,k){if(!M)return this.$L;var A=this.clone(),X=O(M,k,!0);return X&&(A.$L=X),A},N.clone=function(){return D.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},P}(),R=C.prototype;return g.prototype=R,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",u],["$y",m],["$D",x]].forEach(function(P){R[P[1]]=function(N){return this.$g(N,P[0],P[1])}}),g.extend=function(P,N){return P.$i||(P(N,C,g),P.$i=!0),g},g.locale=O,g.isDayjs=E,g.unix=function(P){return g(1e3*P)},g.en=l[w],g.Ls=l,g.p={},g})});var sp=F((ka,$a)=>{(function(n,e){typeof ka=="object"&&typeof $a<"u"?$a.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_relativeTime=e()})(ka,function(){"use strict";return function(n,e,t){n=n||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(a,c,u,d){return r.fromToBase(a,c,u,d)}t.en.relativeTime=i,r.fromToBase=function(a,c,u,d,m){for(var x,f,y,v=u.$locale().relativeTime||i,T=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=T.length,I=0;I<_;I+=1){var w=T[I];w.d&&(x=d?t(a).diff(u,w.d,!0):u.diff(a,w.d,!0));var l=(n.rounding||Math.round)(Math.abs(x));if(y=x>0,l<=w.r||!w.r){l<=1&&I>0&&(w=T[I-1]);var h=v[w.l];m&&(l=m(""+l)),f=typeof h=="string"?h.replace("%d",l):h(l,c,w.l,y);break}}if(c)return f;var E=y?v.future:v.past;return typeof E=="function"?E(f):E.replace("%s",f)},r.to=function(a,c){return o(a,c,this,!0)},r.from=function(a,c){return o(a,c,this)};var s=function(a){return a.$u?t.utc():t()};r.toNow=function(a){return this.to(s(this),a)},r.fromNow=function(a){return this.from(s(this),a)}}})});var Wg={};Ga(Wg,{activate:()=>jg,deactivate:()=>Xg});module.exports=Rp(Wg);var vp=V(require("path")),ze=require("vscode");var lc=require("vscode");var Ct=V(require("path")),z=require("vscode");var Ur=(i=>(i.empty="only the target itself",i.files="the target and any immediate file children thereof",i.immediates="the target and any immediate children thereof",i.infinity="the target and all of its descendants\u2014full recursion",i))(Ur||{});var ee={};Ga(ee,{default:()=>za.default});Vo(ee,require("fs"));var za=V(require("fs"),1);function le(n){return new Promise((e,t)=>{(0,ee.access)(n,r=>e(!r))})}var Ha=require("util"),ot=(0,Ha.promisify)(ee.lstat);var Ya=require("util"),Go=(0,Ya.promisify)(ee.readFile);var Qa=require("util"),zt=(0,Qa.promisify)(ee.readdir);var Ka=require("util"),zo=(0,Ka.promisify)(ee.rmdir);var Za=require("util"),wt=(0,Za.promisify)(ee.stat);var Ja=require("util"),Ht=(0,Ja.promisify)(ee.unlink);var ec=require("util"),Ho=(0,ec.promisify)(ee.writeFile);var cr=V(require("path")),Yo=require("vscode"),ar=class{constructor(e,t=!1){this.expression=e;this.recursive=t}get label(){let e=this.recursive?" (Recursive)":"";return`${this.expression}${e}`}get description(){let e=this.recursive?" (Recursive)":"";return`Add '${this.expression}' to 'svn:ignore'${e}`}};async function tc(n,e){if(e.length===0)return!1;let t=new RegExp("\\.[^\\.]+(\\.map)?$","i");if(e.length===1){let y=e[0],v=y.fsPath.match(t),T=v&&v[0]?v[0]:"",_=cr.basename(y.fsPath),I=cr.dirname(y.fsPath),w=[];w.push(new ar(_)),T&&w.push(new ar("*"+T)),w.push(new ar(_,!0)),T&&w.push(new ar("*"+T,!0));let l=await Yo.window.showQuickPick(w);return l?n.addToIgnore([l.expression],I,l.recursive):!1}let r=e.length,i="(Recursive)",o=`Ignore ${r} by filename`,s=`Ignore ${r} by extension`,a=`Ignore ${r} by filename ${i}`,c=`Ignore ${r} by extension ${i}`,u=[o,s,a,c],d=await Yo.window.showQuickPick(u);if(!d)return!1;let m=d.startsWith(o),x=d.endsWith(i),f={};for(let y of e){let v=cr.dirname(y.fsPath),T=cr.basename(y.fsPath),_=y.fsPath.match(t),I=_&&_[0]?_[0]:"";typeof f[v]>"u"&&(f[v]=[]),m?f[v].push(T):I&&f[v].push("*"+I)}for(let y in f)if(f.hasOwnProperty(y)){let v=[...new Set(f[y])];await n.addToIgnore(v,y,x)}return!0}var Nn=require("vscode");function rc(n,e,t){let r=[],i=0;for(let o of t){let s=o.originalEndLineNumber===0,a=o.modifiedEndLineNumber===0;if(r.push(n.getText(new Nn.Range(i,0,s?o.originalStartLineNumber:o.originalStartLineNumber-1,0))),!a){let c=o.modifiedStartLineNumber-1,u=0;s&&o.originalStartLineNumber===n.lineCount&&(c=n.lineCount-1,u=n.lineAt(c).range.end.character),r.push(e.getText(new Nn.Range(c,u,o.modifiedEndLineNumber,0)))}i=s?o.originalStartLineNumber:o.originalEndLineNumber}return r.push(n.getText(new Nn.Range(i,0,n.lineCount,0))),r.join("")}var is=V(require("path")),_t=require("vscode");var Fe=V(require("path")),nc=require("vscode");function Qo(n){return n.then(()=>{})}function Ie(n){return n.forEach(e=>e.dispose()),[]}function Be(n){return{dispose:n}}function Tp(n){return Be(()=>Ie(n))}function st(...n){return(e,t=null,r)=>{let i=Tp(n.map(o=>o(s=>e.call(t,s))));return r&&r.push(i),i}}function me(n,e){return(t,r=null,i)=>n(o=>e(o)&&t.call(r,o),null,i)}function Pp(n){return(e,t=null,r)=>{let i=n(o=>(i.dispose(),e.call(t,o)),null,r);return i}}function Yt(n){return new Promise(e=>Pp(n)(e))}var Np=new RegExp(Fe.sep==="/"?"\\\\":"/","g"),Op=new RegExp("^\\\\(\\w:)","g");function rt(n){return n=n.replace(Np,Fe.sep),n=n.replace(Op,"$1"),Fe.sep==="\\"&&(n=n.charAt(0).toLowerCase()+n.slice(1)),n}function at(n){return n=rt(n),Fe.sep==="\\"&&(n=n.toLowerCase()),n}function Pe(n,e){return n.trim()===""||e.trim()===""?!1:(n=n.replace(/[\\\/]/g,Fe.sep),e=e.replace(/[\\\/]/g,Fe.sep),Fe.sep==="\\"&&(n=n.replace(/^\\/,"").toLowerCase(),e=e.replace(/^\\/,"").toLowerCase()),n===e?!0:(n.charAt(n.length-1)!==Fe.sep&&(n+=Fe.sep),e.startsWith(n)))}function Ko(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>t===0?e.toLowerCase():e.toUpperCase()).replace(/[\s\-]+/g,"")}function Zo(n){return new Promise(e=>setTimeout(e,n))}function On(n){switch(n){case"CurrentBranch":case"Log":case"Show":case"Info":case"Changes":return!0;default:return!1}}async function Jo(n){await le(n)&&(await ot(n)).isDirectory()&&(await Promise.all((await zt(n)).map(async e=>{let t=Fe.join(n,e);(await ot(t)).isDirectory()?await Jo(t):await Ht(t)})),await zo(n))}function He(n){if(n===void 0)throw new Error("undefined unwrap");return n}function _n(n){return/@/.test(n)&&(n+="@"),n}function bt(){return process.env.SVN_ASP_DOT_NET_HACK?"_svn":".svn"}async function es(n,e=!0){let t=bt(),r=await le(`${n}/${t}`);if(r||!e)return r;let i=Fe.dirname(n);return i===n||i==="."?!1:es(i,!0)}function Ot(n,e){nc.commands.executeCommand("setContext",n,e)}function _p(n){return/^[a-zA-Z]:\\/.test(n)}function ic(n,e){return _p(n)&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e}var oc=Be(()=>null);function kr(n){return(e,t,r)=>{let i=null,o=null;if(typeof r.value=="function"?(i="value",o=r.value):typeof r.get=="function"&&(i="get",o=r.get),!o||!i)throw new Error("not supported");r[i]=n(o,t)}}function Ap(n,e){let t=`$memoize$${e}`;return function(...r){return this.hasOwnProperty(t)||Object.defineProperty(this,t,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[t]}}var ge=kr(Ap);function Lp(n,e){let t=`$throttle$current$${e}`,r=`$throttle$next$${e}`,i=function(...o){if(this[r])return this[r];if(this[t])return this[r]=Qo(this[t]).then(()=>(this[r]=void 0,i.apply(this,o))),this[r];this[t]=n.apply(this,o);let s=()=>this[t]=void 0;return Qo(this[t]).then(s,s),this[t]};return i}var ur=kr(Lp);function Mp(n,e){let t=`__$sequence$${e}`;return function(...r){let i=this[t]||Promise.resolve(null),o=async()=>n.apply(this,r);return this[t]=i.then(o,o),this[t]}}var sc=kr(Mp);function Ne(n){return kr((e,t)=>{let r=`$debounce$${t}`;return function(...i){clearTimeout(this[r]),this[r]=setTimeout(()=>e.apply(this,i),n)}})}var ts={};function ac(n){return kr((e,t)=>function(...r){let i=ts[n]||Promise.resolve(null),o=async()=>e.apply(this,r);return ts[n]=i.then(o,o),ts[n]})}var lr=require("vscode"),rs="svn",ns=class{constructor(){this._onDidChange=new lr.EventEmitter;this.configuration=lr.workspace.getConfiguration(rs),lr.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}get onDidChange(){return this._onDidChange.event}onConfigurationChanged(e){e.affectsConfiguration(rs)&&(this.configuration=lr.workspace.getConfiguration(rs),this._onDidChange.fire(e))}get(e,t){return this.configuration.get(e,t)}update(e,t,r){return this.configuration.update(e,t,r)}inspect(e){return this.configuration.inspect(e)}},$=new ns;var Fp=is.join(__dirname,"..","icons");function ye(n,e){return _t.Uri.file(is.join(Fp,e,`${n}.svg`))}var vt=class vt{constructor(e,t,r,i,o=!1){this._resourceUri=e;this._type=t;this._renameResourceUri=r;this._props=i;this._remote=o}get resourceUri(){return this._resourceUri}get type(){return this._type}get renameResourceUri(){return this._renameResourceUri}get props(){return this._props}get remote(){return this._remote}get decorations(){let e={iconPath:this.getIconPath("light")},t={iconPath:this.getIconPath("dark")},r=this.tooltip,i=this.strikeThrough,o=this.faded;return{strikeThrough:i,faded:o,tooltip:r,light:e,dark:t}}get command(){let e=$.get("diff.withHead",!0),t=$.get("sourceControl.changesLeftClick","open diff");return!this.remote&&t==="open"?{command:"svn.openFile",title:"Open file",arguments:[this]}:this.remote||e?{command:"svn.openResourceHead",title:"Open Diff With Head",arguments:[this]}:{command:"svn.openResourceBase",title:"Open Diff With Base",arguments:[this]}}getIconPath(e){if(this.type==="added"&&this.renameResourceUri)return vt.icons[e].Renamed;let t=this.type.charAt(0).toUpperCase()+this.type.slice(1);if(typeof vt.icons[e][t]<"u")return vt.icons[e][t]}get tooltip(){return this.type==="added"&&this.renameResourceUri?"Renamed from "+this.renameResourceUri.fsPath:this.type==="normal"&&this.props&&this.props!=="none"?"Property "+this.props.charAt(0).toUpperCase()+this.props.slice(1):this.type.charAt(0).toUpperCase()+this.type.slice(1)}get strikeThrough(){return this.type==="deleted"}get faded(){return!1}get letter(){switch(this.type){case"added":return this.renameResourceUri?"R":"A";case"conflicted":return"C";case"deleted":return"D";case"external":return"E";case"ignored":return"I";case"modified":return"M";case"replaced":return"R";case"unversioned":return"U";case"missing":return"!";default:return}}get color(){switch(this.type){case"modified":case"replaced":return new _t.ThemeColor("gitDecoration.modifiedResourceForeground");case"deleted":case"missing":return new _t.ThemeColor("gitDecoration.deletedResourceForeground");case"added":case"unversioned":return new _t.ThemeColor("gitDecoration.untrackedResourceForeground");case"external":case"ignored":return new _t.ThemeColor("gitDecoration.ignoredResourceForeground");case"conflicted":return new _t.ThemeColor("gitDecoration.conflictingResourceForeground");default:return}}get priority(){switch(this.type){case"modified":return 2;case"ignored":return 3;case"deleted":case"added":case"replaced":case"missing":return 4;default:return 1}}};vt.icons={light:{Added:ye("status-added","light"),Conflicted:ye("status-conflicted","light"),Deleted:ye("status-deleted","light"),Ignored:ye("status-ignored","light"),Missing:ye("status-missing","light"),Modified:ye("status-modified","light"),Renamed:ye("status-renamed","light"),Replaced:ye("status-replaced","light"),Unversioned:ye("status-unversioned","light")},dark:{Added:ye("status-added","dark"),Conflicted:ye("status-conflicted","dark"),Deleted:ye("status-deleted","dark"),Ignored:ye("status-ignored","dark"),Missing:ye("status-missing","dark"),Modified:ye("status-modified","dark"),Renamed:ye("status-renamed","dark"),Replaced:ye("status-replaced","dark"),Unversioned:ye("status-unversioned","dark")}},H([ge],vt.prototype,"resourceUri",1),H([ge],vt.prototype,"type",1),H([ge],vt.prototype,"command",1);var re=vt;var uc=V(require("path")),An=require("vscode");var os=V(require("path")),cc=require("vscode");function At(n){return JSON.parse(n.query)}function Ye(n,e,t={},r=!1){let i={action:e,fsPath:n.fsPath,extra:t};return n.with({scheme:"svn",path:r?n.path+bt():n.path,query:JSON.stringify(i)})}function Et(n,e){let t=os.join(__dirname,"..","icons");return cc.Uri.file(os.join(t,e,`${n}.svg`))}var qe=class{constructor(e,t,r){this.uri=e;this.type=t;this.repository=r}get props(){}get label(){return uc.relative(this.repository.workspaceRoot,this.uri.fsPath)}get contextValue(){return`incomingChange:${this.type}`}getTreeItem(){let e=new An.TreeItem(this.label,An.TreeItemCollapsibleState.None);return e.iconPath={dark:Et(`status-${this.type}`,"dark"),light:Et(`status-${this.type}`,"light")},e.contextValue=this.contextValue,e.command=this.getCommand(),e}getChildren(){return Promise.resolve([])}getCommand(){switch(this.type){case"modified":return{command:"svn.openChangeHead",title:"Open Changes with HEAD",arguments:[new re(this.uri,this.type,void 0,"none",!0)]};case"deleted":return{command:"svn.openFile",title:"Open File",arguments:[this.uri]};case"added":return{command:"svn.openHEADFile",title:"Open File (HEAD)",arguments:[new re(this.uri,this.type,void 0,"none",!0)]};default:console.error(`No command returned for type ${this.type}`);return}}};var U=class{constructor(e,t={}){if(t.repository){let r=this.createRepositoryCommand(this.execute);this._disposable=z.commands.registerCommand(e,r);return}if(!t.repository){this._disposable=z.commands.registerCommand(e,(...r)=>this.execute(...r));return}}dispose(){this._disposable&&this._disposable.dispose()}createRepositoryCommand(e){return async(...r)=>{let i=await z.commands.executeCommand("svn.getSourceControlManager",""),o=i.getRepository(r[0]),s;return o?s=Promise.resolve(o):i.repositories.length===1?s=Promise.resolve(i.repositories[0]):s=i.pickRepository(),s.then(c=>c?Promise.resolve(e.apply(this,[c,...r])):Promise.resolve()).catch(c=>{console.error(c)})}}async getResourceStates(e){if(e.length===0||!(e[0].resourceUri instanceof z.Uri)){let t=await this.getSCMResource();if(!t)return[];e=[t]}return e.filter(t=>t instanceof re)}async runByRepository(e,t){let r=e instanceof z.Uri?[e]:e,i=e instanceof z.Uri,o=await z.commands.executeCommand("svn.getSourceControlManager",""),s=[];for(let c of r){let u=o.getRepository(c);if(!u){console.warn("Could not find Svn repository for ",c);continue}let d=s.filter(m=>m.repository===u)[0];d?d.resources.push(c):s.push({repository:u,resources:[c]})}let a=s.map(({repository:c,resources:u})=>t(c,i?u[0]:u));return Promise.all(a)}async getSCMResource(e){if(e=e||z.window.activeTextEditor&&z.window.activeTextEditor.document.uri,!!e){if(e.scheme==="svn"){let{fsPath:t}=At(e);e=z.Uri.file(t)}if(e.scheme==="file"){let r=(await z.commands.executeCommand("svn.getSourceControlManager","")).getRepository(e);return r?r.getResourceFromFile(e):void 0}}}async _openResource(e,t,r,i,o){let s=await this.getLeftResource(e,t),a=this.getRightResource(e,t),c=this.getTitle(e,t);if(e.remote&&s&&([s,a]=[a,s]),!a){console.error("oh no");return}if(await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())return;let u={preserveFocus:i,preview:r,viewColumn:z.ViewColumn.Active},d=z.window.activeTextEditor;return o&&d&&d.document.uri.toString()===a.toString()&&(u.selection=d.selection),s?z.commands.executeCommand("vscode.diff",s,a,c,u):z.commands.executeCommand("vscode.open",a,u)}async getLeftResource(e,t=""){if(e.remote)return e.type!=="deleted"?Ye(e.resourceUri,"SHOW",{ref:t}):void 0;if(e.type==="added"&&e.renameResourceUri)return Ye(e.renameResourceUri,"SHOW",{ref:t});if(e.type==="conflicted"&&await le(e.resourceUri.fsPath)){let r=await Go(e.resourceUri.fsPath,{encoding:"utf8"});if(/^<{7}[^]+^={7}[^]+^>{7}/m.test(r))return}switch(e.type){case"conflicted":case"modified":case"replaced":return Ye(e.resourceUri,"SHOW",{ref:t})}}getRightResource(e,t=""){if(e.remote)return e.type!=="added"?e.resourceUri:void 0;switch(e.type){case"added":case"conflicted":case"ignored":case"modified":case"unversioned":case"replaced":return e.resourceUri;case"deleted":case"missing":return Ye(e.resourceUri,"SHOW",{ref:t})}}getTitle(e,t){if(e.type==="added"&&e.renameResourceUri){let i=Ct.basename(e.renameResourceUri.fsPath),o=Ct.relative(Ct.dirname(e.renameResourceUri.fsPath),e.resourceUri.fsPath);return t?`${i} -> ${o} (${t})`:`${i} -> ${o}`}let r=Ct.basename(e.resourceUri.fsPath);return t?`${r} (${t})`:""}async openChange(e,t,r){let i=e instanceof re,o=e instanceof z.Uri||!e,s;if(e instanceof z.Uri){let c=await this.getSCMResource(e);c!==void 0&&(s=[c])}else if(e instanceof qe)s=[new re(e.uri,e.type,void 0,e.props,!0)];else{let c;e instanceof re?c=e:c=await this.getSCMResource(),c&&(s=[...r,c])}if(!s)return;let a=s.length===1?void 0:!1;for(let c of s)await this._openResource(c,t,a,i,o)}async showDiffPath(e,t){try{let r=Ct.join(e.root,bt(),"tmp","svn.patch");if(await le(r))try{await Ht(r)}catch{}let i=z.Uri.file(r).with({scheme:"untitled"}),o=await z.workspace.openTextDocument(i);await(await z.window.showTextDocument(o)).edit(a=>{a.delete(new z.Range(new z.Position(0,0),new z.Position(Number.MAX_SAFE_INTEGER,0))),a.insert(new z.Position(0,0),t)})}catch(r){console.error(r),z.window.showErrorMessage("Unable to patch")}}async _revertChanges(e,t){let r=e.document,i=r.uri;if(i.scheme!=="file")return;let o=Ye(i,"SHOW",{ref:"BASE"}),s=await z.workspace.openTextDocument(o),a=rc(s,r,t),c=new z.WorkspaceEdit;c.replace(i,new z.Range(new z.Position(0,0),r.lineAt(r.lineCount-1).range.end),a),z.workspace.applyEdit(c),await r.save()}async addToIgnore(e){await this.runByRepository(e,async(t,r)=>{if(t)try{await tc(t,r)&&z.window.showInformationMessage("File(s) is now being ignored")}catch(i){console.log(i),z.window.showErrorMessage("Unable to set property ignore")}})}};var Ln=class extends U{constructor(){super("svn.add")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);try{await i.addFiles(s)}catch(a){console.log(a),lc.window.showErrorMessage("Unable to add file")}})}};var Mn=class extends U{constructor(){super("svn.addToIgnoreExplorer")}async execute(e,t){if(!(!t||t.length===0))return this.addToIgnore(t)}};var Fn=class extends U{constructor(){super("svn.addToIgnoreSCM")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);return this.addToIgnore(r)}};var je=require("vscode");var Mt=require("vscode");var Lt=class{constructor(e){this.group=e}get label(){return this.group.id.replace(/^changelist-/,"")}get id(){return this.group.id}get description(){return this.group.label}get resourceGroup(){return this.group}};var $r=class{constructor(e){this._id=e}get label(){return this._id}get description(){return"Ignored on commit"}};var fr=class{get label(){return"$(plus) New changelist"}get description(){return"Create a new change list"}};var pr=class{get label(){return"$(dash) Remove changelist"}get description(){return"Remove changelist of file(s)"}};var Un=class{constructor(e,t,r=!1){this._repository=e;this._state=t;this.picked=r}get label(){return this._repository.repository.removeAbsolutePath(this._state.resourceUri.fsPath)}get description(){return this._state.resourceUri.fsPath}get state(){return this._state}};function Up(n,e=!1){let t=[];t.push(new fr),n.changelists.forEach((i,o)=>{i.resourceStates.length&&t.push(new Lt(i))});let r=$.get("sourceControl.ignoreOnCommit");for(let i of r)t.some(o=>o.label===i)||t.push(new $r(i));return e&&t.push(new pr),t}function kp(n){let e=[];n.changes.resourceStates.length&&e.push(new Lt(n.changes));let t=$.get("sourceControl.ignoreOnCommit");return n.changelists.forEach((r,i)=>{r.resourceStates.length&&!t.includes(i)&&e.push(new Lt(r))}),e}async function fc(n,e=!1){let t=Up(n,e),r=await Mt.window.showQuickPick(t,{placeHolder:"Select an existing changelist or create a new"});if(!r)return;let i;if(r instanceof pr)return!1;if(r instanceof fr){let o=await Mt.window.showInputBox({placeHolder:"Changelist name",prompt:"Please enter a changelist name"});if(!o)return;i=o}else i=r.label;return i}async function $p(n){let e=kp(n);if(e.length===0){Mt.window.showInformationMessage("There are no changes to commit.");return}let t;return e.length===1&&n.changes.resourceStates.length?t=e[0]:t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist to commit"}),t}async function pc(n){let e=await $p(n);if(e){if(e.id==="changes"&&e.resourceGroup.resourceStates.length>1){let t=$.get("commit.changes.selectedAll",!0),r=e.resourceGroup.resourceStates.map(o=>new Un(n,o,t)),i=await Mt.window.showQuickPick(r,{placeHolder:"Select files to commit",canPickMany:!0});return i!==void 0&&i.length>0?i.map(o=>o.state):void 0}return e.resourceGroup.resourceStates}}function Bp(n){let e=[];return n.changelists.forEach((t,r)=>{t.resourceStates.length&&e.push(new Lt(t))}),e}async function hc(n){let e=Bp(n);if(!e.length){Mt.window.showErrorMessage("No changelists to pick from");return}let t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist"});if(t)return t.label}var kn=class extends U{constructor(){super("svn.changelist")}async execute(...e){let t;if(e[0]instanceof re)t=e.map(m=>m.resourceUri);else if(e[0]instanceof je.Uri)t=e[1];else if(je.window.activeTextEditor)t=[je.window.activeTextEditor.document.uri];else{console.error("Unhandled type for changelist command");return}let r=await je.commands.executeCommand("svn.getSourceControlManager",""),i=t.map(async m=>r.getRepositoryFromUri(m)),o=await Promise.all(i);if(o=o.filter(m=>m),o.length===0){je.window.showErrorMessage("Files are not under version control and cannot be added to a change list");return}if(Array.from(new Set(o)).length!==1){je.window.showErrorMessage("Unable to add files from different repositories to change list");return}if(o.length!==t.length){je.window.showErrorMessage("Some Files are not under version control and cannot be added to a change list");return}let a=o[0];if(!a)return;let c=t.map(m=>m.fsPath),u=!1;a.changelists.forEach((m,x)=>{if(m.resourceStates.some(f=>c.some(y=>at(y)===at(f.resourceUri.path))))return u=!0,!1});let d=await fc(a,u);if(!(!d&&d!==!1))if(d===!1)try{await a.removeChangelist(c)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to remove file "${c.join(",")}" from changelist`)}else try{await a.addChangelist(c,d),je.window.showInformationMessage(`Added files "${c.join(",")}" to changelist "${d}"`)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to add file "${c.join(",")}" to changelist "${d}"`)}}};var sa=V(require("os")),mi=V(require("path")),ce=require("vscode");var dr=require("vscode");var Qt=class{constructor(e,t){this.dir=e;this.parent=t}get label(){return this.branch?`$(git-branch) ${this.dir.name}`:`$(file-directory) ${this.dir.name}`}get description(){return`r${this.dir.commit.revision} | ${this.dir.commit.author} | ${new Date(this.dir.commit.date).toLocaleString()}`}get path(){return this.parent?`${this.parent}/${this.dir.name}`:this.dir.name}get branch(){return It(this.path)}};H([ge],Qt.prototype,"branch",1);var hr=class{constructor(e){this._parent=e}get label(){return"$(plus) Create new branch"}get description(){return`Create new branch in "${this._parent}"`}};var xr=class{constructor(e){this.path=e}get label(){return`$(arrow-left) back to /${this.path}`}get description(){return"Back to parent"}};function It(n){let e=["layout.trunkRegex","layout.branchesRegex","layout.tagsRegex"];for(let t of e){let r=$.get(t);if(!r)continue;let i=$.get(`${t}Name`,1)+2,o=new RegExp(`(^|/)(${r})$`),s=n.match(o);if(s&&s[2]&&s[i])return{name:s[i],path:s[2]}}}async function mr(n,e=!1,t){let r=n.repository.list(t);dr.window.withProgress({location:dr.ProgressLocation.Window,title:"Checking remote branches"},()=>r);let o=(await r).filter(c=>c.kind==="dir"),s=[];if(t){let c=t.split("/");c.pop();let u=c.join("/");s.push(new xr(u))}e&&t&&It(`${t}/test`)&&s.push(new hr(t)),s.push(...o.map(c=>new Qt(c,t)));let a=await dr.window.showQuickPick(s);if(a){if(a instanceof xr)return mr(n,e,a.path);if(a instanceof Qt)return a.branch?a.branch:mr(n,e,a.path);if(a instanceof hr){let c=await dr.window.showInputBox({prompt:"Please provide a branch name",ignoreFocusOut:!0});if(!c)return;let u=c.replace(/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$|\.$/g,"-"),d=It(`${t}/${u}`);return d&&(d.isNew=!0),d}}}function xc(n){let e="layout.trunkRegex",t=$.get(e),r=new RegExp(`(^|/)(${t})$`),i=n.match(r),o=$.get(`${e}Name`,1)+2;return!!(i&&i[2]&&i[o])}var oa=V(require("child_process")),zu=require("events"),en=V(require("process"));var Pc=V(Rc());function lh(n){if(!n||n.length<2)return null;let e=n.readUInt8(0),t=n.readUInt8(1);if(e===254&&t===255)return"utf16be";if(e===255&&t===254)return"utf16le";if(n.length<3)return null;let r=n.readUInt8(2);return e===239&&t===187&&r===191?"utf8":null}var fh=["ascii","utf-8","utf-16","utf-32"],Tc={ibm866:"cp866",big5:"cp950"};function Vn(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function Gn(n){let e=lh(n);if(e)return e;let t=(0,Pc.analyse)(n);if(!t||t.length===0)return null;let r=$.get("experimental.encoding_priority",[]);if(r.length>0)for(let c of r){let u=t.find(d=>Vn(c)===Vn(d.name));if(u&&u.confidence>60){let d=Vn(u.name);return Tc[d]||d}}let i=t[0];if(i.confidence<80)return null;let o=i.name;if(0<=fh.indexOf(o.toLowerCase()))return null;let s=Vn(o);return Tc[s]||s}var J0=V(gr());var ft={mergeAttrs:!0,explicitRoot:!1,explicitArray:!1,attrNameProcessors:[Ko],tagNameProcessors:[Ko],doctype:!1};async function Gr(n){return new Promise((e,t)=>{J0.parseString(n,ft,(r,i)=>{(r||typeof i.entry>"u")&&t(),e(i.entry)})})}function Rt(n){if(!n)return n;let e=n;return e=e.replace(/[A-Z]:\\(?:[^\\/:*?"<>|\r\n]+\\)*[^\\/:*?"<>|\r\n]*/gi,"[PATH]"),e=e.replace(/\/(?:[a-zA-Z0-9._\-~]+\/)*[a-zA-Z0-9._\-~]*/g,"[PATH]"),e=e.replace(/https?:\/\/(?:(?:[a-zA-Z0-9\-._~:/?#\[\]@!$&'()*+,;=])+)/gi,"[DOMAIN]"),e=e.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,"[IP]"),e=e.replace(/\b(?:[0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}\b/g,"[IP]"),e=e.replace(/(?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s,;]+/gi,"$&=[REDACTED]"),e=e.replace(/[?&](?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s&;]+/gi,t=>{let[r]=t.split("=");return r+"=[REDACTED]"}),e=e.replace(/Bearer\s+[A-Za-z0-9._\-~+/=]+/g,"Bearer [REDACTED]"),e=e.replace(/Basic\s+[A-Za-z0-9+/=]+/g,"Basic [REDACTED]"),e=e.replace(/"([A-Za-z0-9+/=_\-]{32,})"/g,'"[REDACTED]"'),e=e.replace(/'([A-Za-z0-9+/=_\-]{32,})'/g,"'[REDACTED]'"),e=e.replace(/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/gi,"[UUID]"),e=e.replace(/AKIA[0-9A-Z]{16}/g,"[AWS_KEY]"),e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,"[EMAIL]"),e}function eu(n){if(!n)return{};let e={};return n.message&&(e.message=Rt(n.message)),n.name&&(e.name=n.name),n.code&&(e.code=n.code),n.exitCode&&(e.exitCode=n.exitCode),n.svnErrorCode&&(e.svnErrorCode=n.svnErrorCode),n.svnCommand&&(e.svnCommand=Rt(n.svnCommand)),n.stdout&&(e.stdout=Rt(n.stdout)),n.stderr&&(e.stderr=Rt(n.stderr)),n.stderrFormated&&(e.stderrFormated=Rt(n.stderrFormated)),n.stack&&(e.stack=Rt(n.stack)),e}var Tt=class{constructor(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=void 0,this.message=e.message||"SVN error",this.stdout=e.stdout,this.stderr=e.stderr,this.stderrFormated=e.stderrFormated,this.exitCode=e.exitCode,this.svnErrorCode=e.svnErrorCode,this.svnCommand=e.svnCommand}toString(){let e=eu(this),t=Rt(this.message)+" "+JSON.stringify(e,null,2);return this.error&&(t+=Rt(this.error.stack||"")),t}};var Nt=V(require("path")),hi=V(yu()),ke=require("vscode");var wu=V(gr());async function Ks(n){return new Promise((e,t)=>{wu.parseString(n,ft,(r,i)=>{r&&t(),i.list&&i.list.entry?(Array.isArray(i.list.entry)||(i.list.entry=[i.list.entry]),e(i.list.entry)):e([])})})}var bu=V(gr());async function fi(n){return new Promise((e,t)=>{bu.parseString(n,ft,(r,i)=>{r&&t();let o=[];Array.isArray(i.logentry)?o=i.logentry:typeof i.logentry=="object"&&(o=[i.logentry]);for(let s of o)s.paths===void 0?s.paths=[]:Array.isArray(s.paths.path)?s.paths=s.paths.path:s.paths=[s.paths.path];e(o)})})}var vu=V(gr());function Zs(n,e){if(Array.isArray(n)){let i=[];return n.forEach(o=>{let s=Zs(o,e);s&&i.push(...s)}),i}let t={locked:!!n.wcStatus.wcLocked&&n.wcStatus.wcLocked==="true"||!!(n.reposStatus&&n.reposStatus.lock),switched:!!n.wcStatus.switched&&n.wcStatus.switched==="true"},r={changelist:e,path:n.path,status:n.wcStatus.item,props:n.wcStatus.props,wcStatus:t,reposStatus:n.reposStatus};return n.wcStatus.movedTo&&r.status==="deleted"?[]:(n.wcStatus.movedFrom&&r.status==="added"&&(r.rename=n.wcStatus.movedFrom),n.wcStatus.commit&&(r.commit={revision:n.wcStatus.commit.revision,author:n.wcStatus.commit.author,date:n.wcStatus.commit.date}),[r])}function _h(n){let e=[];return n.target&&n.target.entry&&e.push(...Zs(n.target.entry)),n.changelist&&(Array.isArray(n.changelist)||(n.changelist=[n.changelist]),n.changelist.forEach(t=>{e.push(...Zs(t.entry,t.name))})),e}async function Eu(n){return new Promise((e,t)=>{vu.parseString(n,ft,(r,i)=>{r&&t();let o=_h(i);e(o)})})}var Js=(n,e,t)=>{let r=n instanceof RegExp?Cu(n,t):n,i=e instanceof RegExp?Cu(e,t):e,o=r!==null&&i!=null&&Ah(r,i,t);return o&&{start:o[0],end:o[1],pre:t.slice(0,o[0]),body:t.slice(o[0]+r.length,o[1]),post:t.slice(o[1]+i.length)}},Cu=(n,e)=>{let t=e.match(n);return t?t[0]:null},Ah=(n,e,t)=>{let r,i,o,s,a,c=t.indexOf(n),u=t.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],o=t.length;d>=0&&!a;){if(d===c)r.push(d),c=t.indexOf(n,d+1);else if(r.length===1){let m=r.pop();m!==void 0&&(a=[m,u])}else i=r.pop(),i!==void 0&&i<o&&(o=i,s=u),u=t.indexOf(e,d+1);d=c<u&&c>=0?c:u}r.length&&s!==void 0&&(a=[o,s])}return a};var Iu="\0SLASH"+Math.random()+"\0",Su="\0OPEN"+Math.random()+"\0",ta="\0CLOSE"+Math.random()+"\0",Du="\0COMMA"+Math.random()+"\0",Ru="\0PERIOD"+Math.random()+"\0",Lh=new RegExp(Iu,"g"),Mh=new RegExp(Su,"g"),Fh=new RegExp(ta,"g"),Uh=new RegExp(Du,"g"),kh=new RegExp(Ru,"g"),$h=/\\\\/g,Bh=/\\{/g,qh=/\\}/g,jh=/\\,/g,Xh=/\\./g;function ea(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function Wh(n){return n.replace($h,Iu).replace(Bh,Su).replace(qh,ta).replace(jh,Du).replace(Xh,Ru)}function Vh(n){return n.replace(Lh,"\\").replace(Mh,"{").replace(Fh,"}").replace(Uh,",").replace(kh,".")}function Tu(n){if(!n)return[""];let e=[],t=Js("{","}",n);if(!t)return n.split(",");let{pre:r,body:i,post:o}=t,s=r.split(",");s[s.length-1]+="{"+i+"}";let a=Tu(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function Pu(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),zr(Wh(n),!0).map(Vh)):[]}function Gh(n){return"{"+n+"}"}function zh(n){return/^-?0\d/.test(n)}function Hh(n,e){return n<=e}function Yh(n,e){return n>=e}function zr(n,e){let t=[],r=Js("{","}",n);if(!r)return[n];let i=r.pre,o=r.post.length?zr(r.post,!1):[""];if(/\$$/.test(r.pre))for(let s=0;s<o.length;s++){let a=i+"{"+r.body+"}"+o[s];t.push(a)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=s||a,u=r.body.indexOf(",")>=0;if(!c&&!u)return r.post.match(/,(?!,).*\}/)?(n=r.pre+"{"+r.body+ta+r.post,zr(n)):[n];let d;if(c)d=r.body.split(/\.\./);else if(d=Tu(r.body),d.length===1&&d[0]!==void 0&&(d=zr(d[0],!1).map(Gh),d.length===1))return o.map(x=>r.pre+d[0]+x);let m;if(c&&d[0]!==void 0&&d[1]!==void 0){let x=ea(d[0]),f=ea(d[1]),y=Math.max(d[0].length,d[1].length),v=d.length===3&&d[2]!==void 0?Math.abs(ea(d[2])):1,T=Hh;f<x&&(v*=-1,T=Yh);let I=d.some(zh);m=[];for(let w=x;T(w,f);w+=v){let l;if(a)l=String.fromCharCode(w),l==="\\"&&(l="");else if(l=String(w),I){let h=y-l.length;if(h>0){let E=new Array(h+1).join("0");w<0?l="-"+E+l.slice(1):l=E+l}}m.push(l)}}else{m=[];for(let x=0;x<d.length;x++)m.push.apply(m,zr(d[x],!1))}for(let x=0;x<m.length;x++)for(let f=0;f<o.length;f++){let y=i+m[x]+o[f];(!e||c||y)&&t.push(y)}}return t}var Hr=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var Qh={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Yr=n=>n.replace(/[[\]\\-]/g,"\\$&"),Kh=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Nu=n=>n.join(""),Ou=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=t+1,s=!1,a=!1,c=!1,u=!1,d=t,m="";e:for(;o<n.length;){let v=n.charAt(o);if((v==="!"||v==="^")&&o===t+1){u=!0,o++;continue}if(v==="]"&&s&&!c){d=o+1;break}if(s=!0,v==="\\"&&!c){c=!0,o++;continue}if(v==="["&&!c){for(let[T,[_,I,w]]of Object.entries(Qh))if(n.startsWith(T,o)){if(m)return["$.",!1,n.length-t,!0];o+=T.length,w?i.push(_):r.push(_),a=a||I;continue e}}if(c=!1,m){v>m?r.push(Yr(m)+"-"+Yr(v)):v===m&&r.push(Yr(v)),m="",o++;continue}if(n.startsWith("-]",o+1)){r.push(Yr(v+"-")),o+=2;continue}if(n.startsWith("-",o+1)){m=v,o+=2;continue}r.push(Yr(v)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let v=r[0].length===2?r[0].slice(-1):r[0];return[Kh(v),!1,d-t,!1]}let x="["+(u?"^":"")+Nu(r)+"]",f="["+(u?"":"^")+Nu(i)+"]";return[r.length&&i.length?"("+x+"|"+f+")":r.length?x:f,a,d-t,!0]};var kt=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!0}={})=>t?e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");var Zh=new Set(["!","?","+","*","@"]),_u=n=>Zh.has(n),Jh="(?!(?:^|/)\\.\\.?(?:$|/))",pi="(?!\\.)",ex=new Set(["[","."]),tx=new Set(["..","."]),rx=new Set("().*{}+?[]^$\\!"),nx=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ra="[^/]",Au=ra+"*?",Lu=ra+"+?",br=class n{type;#r;#n;#o=!1;#e=[];#t;#s;#c;#a=!1;#i;#u;#f=!1;constructor(e,t,r={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#r=this.#t?this.#t.#r:this,this.#i=this.#r===this?r:this.#r.#i,this.#c=this.#r===this?[]:this.#r.#c,e==="!"&&!this.#r.#a&&this.#c.push(this),this.#s=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#s+1;!r.type&&i<r.#e.length;i++)for(let o of e.#e){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){var t;let e=this.type===null?this.#e.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#e.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#a&&((t=this.#t)==null?void 0:t.type)==="!")&&e.push({}),e}isStart(){var t;if(this.#r===this)return!0;if(!((t=this.#t)!=null&&t.isStart()))return!1;if(this.#s===0)return!0;let e=this.#t;for(let r=0;r<this.#s;r++){let i=e.#e[r];if(!(i instanceof n&&i.type==="!"))return!1}return!0}isEnd(){var t,r,i;if(this.#r===this||((t=this.#t)==null?void 0:t.type)==="!")return!0;if(!((r=this.#t)!=null&&r.isEnd()))return!1;if(!this.type)return(i=this.#t)==null?void 0:i.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#s===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let r of this.#e)t.copyIn(r);return t}static#l(e,t,r,i){let o=!1,s=!1,a=-1,c=!1;if(t.type===null){let f=r,y="";for(;f<e.length;){let v=e.charAt(f++);if(o||v==="\\"){o=!o,y+=v;continue}if(s){f===a+1?(v==="^"||v==="!")&&(c=!0):v==="]"&&!(f===a+2&&c)&&(s=!1),y+=v;continue}else if(v==="["){s=!0,a=f,c=!1,y+=v;continue}if(!i.noext&&_u(v)&&e.charAt(f)==="("){t.push(y),y="";let T=new n(v,t);f=n.#l(e,T,f,i),t.push(T);continue}y+=v}return t.push(y),f}let u=r+1,d=new n(null,t),m=[],x="";for(;u<e.length;){let f=e.charAt(u++);if(o||f==="\\"){o=!o,x+=f;continue}if(s){u===a+1?(f==="^"||f==="!")&&(c=!0):f==="]"&&!(u===a+2&&c)&&(s=!1),x+=f;continue}else if(f==="["){s=!0,a=u,c=!1,x+=f;continue}if(_u(f)&&e.charAt(u)==="("){d.push(x),x="";let y=new n(f,d);d.push(y),u=n.#l(e,y,u,i);continue}if(f==="|"){d.push(x),x="",m.push(d),d=new n(null,t);continue}if(f===")")return x===""&&t.#e.length===0&&(t.#f=!0),d.push(x),x="",t.push(...m,d),u;x+=f}return t.type=null,t.#n=void 0,t.#e=[e.substring(r-1)],u}static fromGlob(e,t={}){let r=new n(null,void 0,t);return n.#l(e,r,0,t),r}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[t,r,i,o]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#i.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){var c;let t=e??!!this.#i.dot;if(this.#r===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd()&&!this.#e.some(y=>typeof y!="string"),d=this.#e.map(y=>{let[v,T,_,I]=typeof y=="string"?n.#x(y,this.#n,u):y.toRegExpSource(e);return this.#n=this.#n||_,this.#o=this.#o||I,v}).join(""),m="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&tx.has(this.#e[0]))){let v=ex,T=t&&v.has(d.charAt(0))||d.startsWith("\\.")&&v.has(d.charAt(2))||d.startsWith("\\.\\.")&&v.has(d.charAt(4)),_=!t&&!e&&v.has(d.charAt(0));m=T?Jh:_?pi:""}let x="";return this.isEnd()&&this.#r.#a&&((c=this.#t)==null?void 0:c.type)==="!"&&(x="(?:$|\\/)"),[m+d+x,kt(d),this.#n=!!this.#n,this.#o]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#p(t);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#e=[u],this.type=null,this.#n=void 0,[u,kt(this.toString()),!1,!1]}let s=!r||e||t||!pi?"":this.#p(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let a="";if(this.type==="!"&&this.#f)a=(this.isStart()&&!t?pi:"")+Lu;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?pi:"")+Au+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;a=i+o+u}return[a,kt(o),this.#n=!!this.#n,this.#o]}#p(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[r,i,o,s]=t.toRegExpSource(e);return this.#o=this.#o||s,r}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#x(e,t,r=!1){let i=!1,o="",s=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,o+=(rx.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,m,x]=Ou(e,a);if(m){o+=u,s=s||d,a+=m-1,t=t||x;continue}}if(c==="*"){o+=r&&e==="*"?Lu:Au,t=!0;continue}if(c==="?"){o+=ra,t=!0;continue}o+=nx(c)}return[o,kt(e),!!t,s]}};var na=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!1}={})=>t?e?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Ee=(n,e,t={})=>(Hr(e),!t.nocomment&&e.charAt(0)==="#"?!1:new $t(e,t).match(n)),ix=/^\*+([^+@!?\*\[\(]*)$/,ox=n=>e=>!e.startsWith(".")&&e.endsWith(n),sx=n=>e=>e.endsWith(n),ax=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),cx=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),ux=/^\*+\.\*+$/,lx=n=>!n.startsWith(".")&&n.includes("."),fx=n=>n!=="."&&n!==".."&&n.includes("."),px=/^\.\*+$/,hx=n=>n!=="."&&n!==".."&&n.startsWith("."),xx=/^\*+$/,dx=n=>n.length!==0&&!n.startsWith("."),mx=n=>n.length!==0&&n!=="."&&n!=="..",gx=/^\?+([^+@!?\*\[\(]*)?$/,yx=([n,e=""])=>{let t=Uu([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},wx=([n,e=""])=>{let t=ku([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},bx=([n,e=""])=>{let t=ku([n]);return e?r=>t(r)&&r.endsWith(e):t},vx=([n,e=""])=>{let t=Uu([n]);return e?r=>t(r)&&r.endsWith(e):t},Uu=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},ku=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},$u=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Mu={win32:{sep:"\\"},posix:{sep:"/"}},Ex=$u==="win32"?Mu.win32.sep:Mu.posix.sep;Ee.sep=Ex;var Je=Symbol("globstar **");Ee.GLOBSTAR=Je;var Cx="[^/]",Ix=Cx+"*?",Sx="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Dx="(?:(?!(?:\\/|^)\\.).)*?",Rx=(n,e={})=>t=>Ee(t,n,e);Ee.filter=Rx;var Ze=(n,e={})=>Object.assign({},n,e),Tx=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Ee;let e=Ee;return Object.assign((r,i,o={})=>e(r,i,Ze(n,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Ze(n,o))}static defaults(i){return e.defaults(Ze(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Ze(n,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Ze(n,o))}},unescape:(r,i={})=>e.unescape(r,Ze(n,i)),escape:(r,i={})=>e.escape(r,Ze(n,i)),filter:(r,i={})=>e.filter(r,Ze(n,i)),defaults:r=>e.defaults(Ze(n,r)),makeRe:(r,i={})=>e.makeRe(r,Ze(n,i)),braceExpand:(r,i={})=>e.braceExpand(r,Ze(n,i)),match:(r,i,o={})=>e.match(r,i,Ze(n,o)),sep:e.sep,GLOBSTAR:Je})};Ee.defaults=Tx;var Bu=(n,e={})=>(Hr(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Pu(n));Ee.braceExpand=Bu;var Px=(n,e={})=>new $t(n,e).makeRe();Ee.makeRe=Px;var Nx=(n,e,t={})=>{let r=new $t(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};Ee.match=Nx;var Fu=/[?*]|[+@!]\(.*?\)|\[|\]/,Ox=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$t=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){Hr(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||$u,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!Fu.test(o[2]))&&!Fu.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let s=i;for(;r[s+1]==="**";)s++;s>i&&r.splice(i+1,s-i);let a=r[i+1],c=r[i+2],u=r[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;t=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<r.length-1;s++){let a=r[s];s===1&&a===""&&r[0]===""||(a==="."||a==="")&&(t=!0,r.splice(s,1),s--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let s=r[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){t=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let i=0,o=0,s=[],a="";for(;i<e.length&&o<t.length;)if(e[i]===t[o])s.push(a==="b"?t[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&t[o]===e[i+1])s.push(e[i]),i++;else if(r&&t[o]==="**"&&e[i]===t[o+1])s.push(t[o]),o++;else if(e[i]==="*"&&t[o]&&(this.options.dot||!t[o].startsWith("."))&&t[o]!=="**"){if(a==="b")return!1;a="a",s.push(e[i]),i++,o++}else if(t[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",s.push(t[o]),i++,o++}else return!1;return e.length===t.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),T=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),_=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),I=!_&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),w=T?3:v?0:void 0,l=I?3:_?0:void 0;if(typeof w=="number"&&typeof l=="number"){let[h,E]=[e[w],t[l]];h.toLowerCase()===E.toLowerCase()&&(t[l]=h,l>w?t=t.slice(l):w>l&&(e=e.slice(w)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,c=e.length,u=t.length;s<c&&a<u;s++,a++){this.debug("matchOne loop");var d=t[a],m=e[s];if(this.debug(t,d,m),d===!1)return!1;if(d===Je){this.debug("GLOBSTAR",[t,d,m]);var x=s,f=a+1;if(f===u){for(this.debug("** at the end");s<c;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;x<c;){var y=e[x];if(this.debug(`
globstar while`,e,x,t,f,y),this.matchOne(e.slice(x),t.slice(f),r))return this.debug("globstar found match!",x,c,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,x,t,f);break}this.debug("globstar swallow a segment, and continue"),x++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,x,t,f),x===c))}let v;if(typeof d=="string"?(v=m===d,this.debug("string match",d,m,v)):(v=d.test(m),this.debug("pattern match",d,m,v)),!v)return!1}if(s===c&&a===u)return!0;if(s===c)return r;if(a===u)return s===c-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Bu(this.pattern,this.options)}parse(e){Hr(e);let t=this.options;if(e==="**")return Je;if(e==="")return"";let r,i=null;(r=e.match(xx))?i=t.dot?mx:dx:(r=e.match(ix))?i=(t.nocase?t.dot?cx:ax:t.dot?sx:ox)(r[1]):(r=e.match(gx))?i=(t.nocase?t.dot?wx:yx:t.dot?bx:vx)(r):(r=e.match(ux))?i=t.dot?fx:lx:(r=e.match(px))&&(i=hx);let o=br.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?Ix:t.dot?Sx:Dx,i=new Set(t.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(m=>{if(m instanceof RegExp)for(let x of m.flags.split(""))i.add(x);return typeof m=="string"?Ox(m):m===Je?Je:m._src});u.forEach((m,x)=>{let f=u[x+1],y=u[x-1];m!==Je||y===Je||(y===void 0?f!==void 0&&f!==Je?u[x+1]="(?:\\/|"+r+"\\/)?"+f:u[x]=r:f===void 0?u[x-1]=y+"(?:\\/|\\/"+r+")?":f!==Je&&(u[x-1]=y+"(?:\\/|\\/"+r+"\\/)"+f,u[x+1]=Je))});let d=u.filter(m=>m!==Je);if(this.partial&&d.length>=1){let m=[];for(let x=1;x<=d.length;x++)m.push(d.slice(0,x).join("/"));return"(?:"+m.join("|")+")"}return d.join("/")}).join("|"),[s,a]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+a+"$",this.partial&&(o="^(?:\\/|"+s+o.slice(1,-1)+a+")$"),this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let a=i.length-2;!s&&a>=0;a--)s=i[a];for(let a=0;a<o.length;a++){let c=o[a],u=i;if(r.matchBase&&c.length===1&&(u=[s]),this.matchOne(u,c,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ee.defaults(e).Minimatch}};Ee.AST=br;Ee.Minimatch=$t;Ee.escape=na;Ee.unescape=kt;function er(n,e,t={}){let r=!1;return e.forEach(i=>{let o=i[0]==="!";r===o&&(r=Ee(n,i,t))}),r}function qu(n){return new $t(n)}var ju=V(gr());async function Xu(n){return new Promise((e,t)=>{ju.parseString(n,ft,(r,i)=>{(r||!i.paths||!i.paths.path)&&t(),Array.isArray(i.paths.path)||(i.paths.path=[i.paths.path]),e(i.paths.path)})})}function Wu(n){return!n||typeof n!="string"?!1:/^[a-zA-Z0-9_-]+$/.test(n)}var _x=["postpone","base","mine-conflict","theirs-conflict","mine-full","theirs-full","edit","launch","working"];function Vu(n){return!n||typeof n!="string"?!1:_x.includes(n)}function Qr(n){return!n||typeof n!="string"?!1:!/[|;$()[\]{}`\\]/.test(n)}var Kr=class{constructor(e,t,r,i){this.svn=e;this.root=t;this.workspaceRoot=r;this._infoCache={};return i===1?(async()=>this)():(async()=>(await this.updateInfo(),this))()}async updateInfo(){let e=await this.exec(["info","--xml",_n(this.workspaceRoot?this.workspaceRoot:this.root)]);this._info=await Gr(e.stdout)}async exec(e,t={}){return t.username=this.username,t.password=this.password,this.svn.exec(this.workspaceRoot,e,t)}async execBuffer(e,t={}){return t.username=this.username,t.password=this.password,this.svn.execBuffer(this.workspaceRoot,e,t)}removeAbsolutePath(e){return e=rt(e),e=Nt.relative(this.workspaceRoot,e),e===""&&(e="."),_n(e)}async getStatus(e){e=Object.assign({},{includeIgnored:!1,includeExternals:!0,checkRemoteChanges:!1},e);let t=["stat","--xml"];e.includeIgnored&&t.push("--no-ignore"),e.includeExternals||t.push("--ignore-externals"),e.checkRemoteChanges&&t.push("--show-updates");let r=await this.exec(t),i=await Eu(r.stdout);for(let o of i)if(o.status==="external")try{let s=await this.getInfo(o.path);o.repositoryUuid=s.repository.uuid}catch(s){console.error(s)}return i}get info(){return He(this._info)}resetInfoCache(e=""){delete this._infoCache[e]}async getInfo(e="",t,r=!1,i=!1){if(!r&&this._infoCache[e])return this._infoCache[e];let o=["info","--xml"];t&&o.push("-r",t),e&&(i||(e=rt(e)),o.push(e));let s=await this.exec(o);return this._infoCache[e]=await Gr(s.stdout),setTimeout(()=>{this.resetInfoCache(e)},2*60*1e3),this._infoCache[e]}async getChanges(){let e=["log","-r1:HEAD","--limit=1","--stop-on-copy","--xml","--with-all-revprops","--verbose"],t=await this.exec(e),r=await fi(t.stdout);if(r.length===0||r[0].paths.length===0)return[];let i=r[0].paths[0];if(typeof i.copyfromRev>"u"||typeof i.copyfromPath>"u"||typeof i._>"u"||i.copyfromRev.trim().length===0||i.copyfromPath.trim().length===0||i._.trim().length===0)return[];let o=i.copyfromPath,s=i.copyfromRev,a=i._,c=this.info.repository.root+o,u=this.info.repository.root+a;e=["mergeinfo","--show-revs=merged",c,u],t=await this.exec(e);let d=t.stdout.trim().split(`
`),m="";d.length&&(m=d[d.length-1]),m.trim().length===0&&(m=s);let x=await this.getInfo(u,void 0,!0,!0);e=["diff",`${c}@${m}`,u,"--ignore-properties","--xml","--summarize"],t=await this.exec(e);let f;try{f=await Xu(t.stdout)}catch{return[]}let y=[];for(let v of f)y.push({oldPath:ke.Uri.parse(v._),newPath:ke.Uri.parse(v._.replace(c,u)),oldRevision:m.replace("r",""),newRevision:x.revision,item:v.item,props:v.props,kind:v.kind,repo:ke.Uri.parse(this.info.repository.root),localPath:ke.Uri.parse(v._.replace(c,""))});return y}async show(e,t){let r=["cat"],i,o;e instanceof ke.Uri?(i=e,o=e.toString(!0)):(i=ke.Uri.file(e),o=e);let s=i.scheme==="file"&&Pe(this.workspaceRoot,i.fsPath),a=o;s&&(a=this.removeAbsolutePath(a)),t&&(r.push("-r",t),s&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))),r.push(a);let c=ke.workspace.getConfiguration("files",i),u=c.get("encoding"),d=c.get("autoGuessEncoding",!1),m=ke.workspace.textDocuments.find(y=>at(y.uri.fsPath)===at(o));if(m){let y=ke.workspace.getConfiguration(`[${m.languageId}]`,i);if(y["files.encoding"]!==void 0&&(u=y["files.encoding"]),y["files.autoGuessEncoding"]!==void 0&&(d=y["files.autoGuessEncoding"]),d){let v=Buffer.from(m.getText(),"utf-8"),T=Gn(v);T&&(u=T)}}else{let y=$.get("default.encoding");y&&(u=y)}return $.get("experimental.detect_encoding",!1)&&(u=null),(await this.exec(r,{encoding:u})).stdout}async showBuffer(e,t){let r=["cat"],i,o;e instanceof ke.Uri?(i=e,o=e.toString(!0)):(i=ke.Uri.file(e),o=e);let s=i.scheme==="file"&&Pe(this.workspaceRoot,i.fsPath),a=o;return s&&(a=this.removeAbsolutePath(a)),t&&(r.push("-r",t),s&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))),r.push(a),(await this.execBuffer(r)).stdout}async commitFiles(e,t){t=t.map(a=>this.removeAbsolutePath(a));let r=["commit",...t];await le(Nt.join(this.workspaceRoot,e))&&r.push("--force-log");let i;/\n|[^\x00-\x7F\x80-\xFF]/.test(e)?(hi.setGracefulCleanup(),i=hi.fileSync({prefix:"svn-commit-message-"}),await Ho(i.name,e,{encoding:"utf-8"}),r.push("-F",i.name),r.push("--encoding","UTF-8")):r.push("-m",e),r.push("--depth","empty");let o=await this.exec(r);i&&i.removeCallback();let s=o.stdout.match(/Committed revision (.*)\./i);if(s&&s[0]){let a=(o.stdout.match(/(Sending|Adding|Deleting)\s+/g)||[]).length;return`${`${a} ${a===1?"file":"files"} commited`}: revision ${s[1]}.`}return o.stdout}async addFilesByIgnore(e,t){let r=async i=>(await wt(i)).isDirectory()?(await Promise.all((await zt(i)).map(o=>{let s=Nt.resolve(i+Nt.sep+o),a=this.removeAbsolutePath(s);return er(Nt.sep+a,t,{dot:!0,matchBase:!0})?[]:r(s)}))).reduce((o,s)=>o.concat(s),[i]):[i];return e=(await Promise.all(e.map(i=>r(i)))).flat(),e=e.map(i=>this.removeAbsolutePath(i)),this.exec(["add","--depth=empty",...e])}addFiles(e){let t=$.get("sourceControl.ignore");return t.length>0?this.addFilesByIgnore(e,t):(e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["add",...e]))}addChangelist(e,t){if(!Wu(t))throw new Error("Invalid changelist name");return e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["changelist",t,...e])}removeChangelist(e){return e=e.map(t=>this.removeAbsolutePath(t)),this.exec(["changelist","--remove",...e])}async getCurrentBranch(){let e=await this.getInfo(),t=It(e.url);return t?$.get("layout.showFullName")?t.path:t.name:""}async getRepositoryUuid(){return(await this.getInfo()).repository.uuid}async getRepoUrl(){let e=await this.getInfo(),t=It(e.url);if(!t)return e.repository.root;let r=new RegExp(t.path+"$");return e.url.replace(r,"").replace(/\/$/,"")}async getBranches(){let e=$.get("layout.trunk"),t=$.get("layout.branches"),r=$.get("layout.tags"),i=await this.getRepoUrl(),o=[],s=[];e&&s.push(new Promise(async u=>{try{await this.exec(["ls",i+"/"+e,"--depth","empty"]),u([e])}catch{u([])}}));let a=[];t&&a.push(t),r&&a.push(r);for(let u of a)s.push(new Promise(async d=>{let m=i+"/"+u;try{let f=(await this.exec(["ls",m])).stdout.trim().replace(/\/|\\/g,"").split(/[\r\n]+/).filter(y=>!!y).map(y=>u+"/"+y);d(f)}catch{d([])}}));return(await Promise.all(s)).forEach(u=>{o.push(...u)}),o}async newBranch(e,t="Created new branch"){let i=await this.getRepoUrl()+"/"+e,s=(await this.getInfo()).url;return await this.exec(["copy",s,i,"-m",t]),await this.switchBranch(e),!0}async switchBranch(e,t=!1){let i=await this.getRepoUrl()+"/"+e;return await this.exec(["switch",i].concat(t?["--ignore-ancestry"]:[])),this.resetInfoCache(),!0}async merge(e,t=!1,r="postpone"){if(!Vu(r))throw new Error("Invalid accept action");let o=await this.getRepoUrl()+"/"+e,s=["merge","--accept",r];return s=s.concat(t?["--reintegrate"]:[]),s=s.concat([o]),await this.exec(s),this.resetInfoCache(),!0}async revert(e,t){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["revert","--depth",t,...e])).stdout}async update(e=!0){let t=["update"];e&&t.push("--ignore-externals");let r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async pullIncomingChange(e){let t=["update",e],r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async patch(e){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["diff","--internal-diff",...e])).stdout}async patchBuffer(e){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.execBuffer(["diff","--internal-diff",...e])).stdout}async patchChangelist(e){return(await this.exec(["diff","--internal-diff","--changelist",e])).stdout}async removeFiles(e,t){e=e.map(o=>this.removeAbsolutePath(o));let r=["remove"];return t&&r.push("--keep-local"),r.push(...e),(await this.exec(r)).stdout}async resolve(e,t){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["resolve","--accept",t,...e])).stdout}async plainLog(){let e=$.get("log.length")||"50";return(await this.exec(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogBuffer(){let e=$.get("log.length")||"50";return(await this.execBuffer(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogByRevision(e){return(await this.exec(["log","-r",e.toString()])).stdout}async plainLogByRevisionBuffer(e){return(await this.execBuffer(["log","-r",e.toString()])).stdout}async plainLogByText(e){if(!Qr(e))throw new Error("Invalid search pattern");return(await this.exec(["log","--search",e])).stdout}async plainLogByTextBuffer(e){if(!Qr(e))throw new Error("Invalid search pattern");return(await this.execBuffer(["log","--search",e])).stdout}async log(e,t,r,i){let o=["log","-r",`${e}:${t}`,`--limit=${r}`,"--xml","-v"];i!==void 0&&o.push(_n(i instanceof ke.Uri?i.toString(!0):i));let s=await this.exec(o);return fi(s.stdout)}async logByUser(e){let t=await this.exec(["log","--xml","-v","--search",e]);return fi(t.stdout)}async countNewCommit(e="BASE:HEAD"){let r=(await this.exec(["log","-r",e,"-q","--xml"])).stdout.match(/<logentry/g);return r&&r.length>0?r.length-1:0}async cleanup(){return(await this.exec(["cleanup"])).stdout}async removeUnversioned(){let e=await this.exec(["cleanup","--remove-unversioned"]);return this.svn.logOutput(e.stdout),e.stdout}async finishCheckout(){let e=await this.getInfo();return(await this.exec(["switch",e.url])).stdout}async list(e){let t=await this.getRepoUrl();e&&(t+="/"+e);let r=await this.exec(["list",t,"--xml"]);return Ks(r.stdout)}async ls(e){let t=await this.exec(["list",e,"--xml"]);return Ks(t.stdout)}async getCurrentIgnore(e){e=this.removeAbsolutePath(e);let t="";try{let i=["propget","svn:ignore"];e&&i.push(e),t=(await this.exec(i)).stdout.trim()}catch(i){console.error(i)}return t.split(/[\r\n]+/)}async addToIgnore(e,t,r=!1){let i=await this.getCurrentIgnore(t);t=this.removeAbsolutePath(t),i.push(...e);let s=["propset","svn:ignore",[...new Set(i)].filter(c=>!!c).sort().join(`
`)];return t?s.push(t):s.push("."),r&&s.push("--recursive"),(await this.exec(s)).stdout}async rename(e,t){e=this.removeAbsolutePath(e),t=this.removeAbsolutePath(t);let r=["rename",e,t];return(await this.exec(r)).stdout}};H([sc],Kr.prototype,"getInfo",1);var Zr=require("vscode");function Gu(n,e=!0){let t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[`${Zr.env.appRoot}/node_modules.asar/${n}`,`${Zr.env.appRoot}/node_modules/${n}`,n];for(let i of r)try{return t(i)}catch{}e&&Zr.window.showErrorMessage(`Missing dependency: ${n}`)}var ia=Gu("@vscode/iconv-lite-umd",!1);ia||(ia=Gu("iconv-lite"));var Jr=ia;var Ve={AuthorizationFailed:"E170001",RepositoryIsLocked:"E155004",NotASvnRepository:"E155007",NotShareCommonAncestry:"E195012",WorkingCopyIsTooOld:"E155036"};function Ax(n){for(let e in Ve)if(Ve.hasOwnProperty(e)){let t=Ve[e];if(new RegExp(`svn: ${t}`).test(n))return t}if(/No more credentials or we tried too many times/.test(n))return Ve.AuthorizationFailed}function Hu(n){return e=>{/ENOENT/.test(e.message)&&(e=new Tt({error:e,message:"Failed to execute svn (ENOENT)",svnErrorCode:"NotASvnRepository"})),n(e)}}var xi=class{constructor(e){this.lastCwd="";this._onOutput=new zu.EventEmitter;this.svnPath=e.svnPath,this.version=e.version}get onOutput(){return this._onOutput}logOutput(e){this._onOutput.emit("log",e)}async exec(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let y=t.map(v=>/ |^$/.test(v)?`'${v}'`:v);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${y.join(" ")}
`)}r.username&&t.push("--username",r.username),r.password&&t.push("--password",r.password),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let i=r.encoding;delete r.encoding,t.includes("--xml")&&(i="utf8");let o={env:en.env};e&&(o.cwd=e),o.env=Object.assign({},en.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let s=oa.spawn(this.svnPath,t,o),a=[],c=(y,v,T)=>{y.once(v,T),a.push(Be(()=>y.removeListener(v,T)))},u=(y,v,T)=>{y.on(v,T),a.push(Be(()=>y.removeListener(v,T)))},[d,m,x]=await Promise.all([new Promise((y,v)=>{c(s,"error",v),c(s,"exit",y)}),new Promise(y=>{let v=[];u(s.stdout,"data",T=>v.push(T)),c(s.stdout,"close",()=>y(Buffer.concat(v)))}),new Promise(y=>{let v=[];u(s.stderr,"data",T=>v.push(T)),c(s.stderr,"close",()=>y(Buffer.concat(v).toString()))})]);Ie(a),i||(i=Gn(m)),i||(i=$.get("default.encoding")),Jr.encodingExists(i)||(i&&console.warn(`SVN: The encoding "${i}" is invalid`),i="utf8");let f=Jr.decode(m,i);if(r.log!==!1&&x.length>0){let y=this.lastCwd.split(/[\\\/]+/).pop(),v=x.split(`
`).filter(T=>T).map(T=>`[${y}]$ ${T}`).join(`
`);this.logOutput(v)}return d?Promise.reject(new Tt({message:"Failed to execute svn",stdout:f,stderr:x,stderrFormated:x.replace(/^svn: E\d+: +/gm,""),exitCode:d,svnErrorCode:Ax(x),svnCommand:t[0]})):{exitCode:d,stdout:f,stderr:x}}async execBuffer(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let x=t.map(f=>/ |^$/.test(f)?`'${f}'`:f);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${x.join(" ")}
`)}r.username&&t.push("--username",r.username),r.password&&t.push("--password",r.password),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let i={env:en.env};e&&(i.cwd=e),i.env=Object.assign({},en.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let o=oa.spawn(this.svnPath,t,i),s=[],a=(x,f,y)=>{x.once(f,y),s.push(Be(()=>x.removeListener(f,y)))},c=(x,f,y)=>{x.on(f,y),s.push(Be(()=>x.removeListener(f,y)))},[u,d,m]=await Promise.all([new Promise((x,f)=>{a(o,"error",f),a(o,"exit",x)}),new Promise(x=>{let f=[];c(o.stdout,"data",y=>f.push(y)),a(o.stdout,"close",()=>x(Buffer.concat(f)))}),new Promise(x=>{let f=[];c(o.stderr,"data",y=>f.push(y)),a(o.stderr,"close",()=>x(Buffer.concat(f).toString()))})]);if(Ie(s),r.log!==!1&&m.length>0){let x=this.lastCwd.split(/[\\\/]+/).pop(),f=m.split(`
`).filter(y=>y).map(y=>`[${x}]$ ${y}`).join(`
`);this.logOutput(f)}return{exitCode:u,stdout:d,stderr:m}}async getRepositoryRoot(e){try{let t=await this.exec(e,["info","--xml"]),r=await Gr(t.stdout);return r&&r.wcInfo&&r.wcInfo.wcrootAbspath?r.wcInfo.wcrootAbspath:e}catch(t){throw t instanceof Tt?t:(console.error(t),new Error("Unable to find repository root path"))}}async open(e,t){return new Kr(this,e,t,0)}};var di=class extends U{constructor(){super("svn.checkout")}async execute(e){if(e||(e=await ce.window.showInputBox({prompt:"Repository URL",ignoreFocusOut:!0})),!e)return;let t=$.get("defaultCheckoutDirectory")||sa.homedir();t=t.replace(/^~/,sa.homedir());let r=await ce.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:ce.Uri.file(t),openLabel:"Select Repository Location"});if(!r||r.length===0)return;let o=r[0].fsPath,s,a=It(e);if(a){let w=e.replace(/\//g,"/").replace(a.path,"");s=mi.basename(w)}if(s=await ce.window.showInputBox({prompt:"Folder name",value:s,ignoreFocusOut:!0}),!s)return;let c=mi.join(o,s),u=ce.ProgressLocation.Window;ce.ProgressLocation.Notification&&(u=ce.ProgressLocation.Notification);let d={location:u,title:`Checkout svn repository '${e}'...`,cancellable:!0},m=0,x={};for(;;){m++;try{await ce.window.withProgress(d,async()=>{let w=await ce.commands.executeCommand("svn.getSourceControlManager",""),l=["checkout",e,c];await w.svn.exec(o,l,x)});break}catch(w){if(w.svnErrorCode===Ve.AuthorizationFailed&&m<=3){let h=await ce.commands.executeCommand("svn.promptAuth",x.username);if(h){x.username=h.username,x.password=h.password;continue}}throw w}}let f=[],y="Would you like to open the checked out repository?",v="Open Repository";f.push(v);let T="Add to Workspace";ce.workspace.workspaceFolders&&ce.workspace.updateWorkspaceFolders&&(y="Would you like to open the checked out repository, or add it to the current workspace?",f.push(T));let _=await ce.window.showInformationMessage(y,...f);_===v?ce.commands.executeCommand("vscode.openFolder",ce.Uri.file(c)):_===T&&ce.workspace.updateWorkspaceFolders(ce.workspace.workspaceFolders.length,0,{uri:ce.Uri.file(c)})}};var gi=class extends U{constructor(){super("svn.cleanup",{repository:!0})}async execute(e){await e.cleanup()}};var Yu=require("vscode");var yi=class extends U{constructor(){super("svn.close",{repository:!0})}async execute(e){(await Yu.commands.executeCommand("svn.getSourceControlManager","")).close(e)}};var ca=V(require("path")),tn=require("vscode");var Qu=V(require("path")),Ge=require("vscode");var Ce,aa;Ge.commands.registerCommand("svn.forceCommitMessageTest",n=>{if(aa)return aa(n)});function Ku(){Ce&&Ce.dispose()}async function Lx(n,e){return new Promise(r=>{Ce&&Ce.dispose(),aa=u=>{r(u),Ce.dispose()},Ce=Ge.window.createWebviewPanel("svnCommitMessage","Commit Message",{preserveFocus:!1,viewColumn:Ge.ViewColumn.Active},{enableScripts:!0,retainContextWhenHidden:!0});let i=Ge.Uri.file(Qu.join(__dirname,"..","css","commit-message.css")),o=Ce.webview.asWebviewUri(i),s="";if(e&&e.length){let u=e.sort().map(d=>`<li>${d}</li>`);u.length&&(s=`
<div class="file-list">
  <h3 class="title">Files to commit</h3>
  <ul>
    ${u.join(`
`)}
  </ul>
</div>`)}let a=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  Use a content security policy to only allow loading images from https or from our extension directory,
  and only allow scripts that have a specific nonce.
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${Ce.webview.cspSource} https:; script-src ${Ce.webview.cspSource} 'unsafe-inline'; style-src ${Ce.webview.cspSource};">

  <title>Commit Message</title>
  <link rel="stylesheet" href="${o}">
</head>
<body>
  <section class="container">
    ${s}
    <form>
      <fieldset>
        <div class="float-right">
          <a href="#" id="pickCommitMessage">Pick a previous commit message</a>
        </div>
        <label for="message">Commit message</label>
        <textarea id="message" rows="3" placeholder="Message (press Ctrl+Enter to commit)"></textarea>
        <button id="commit" class="button-primary">Commit</button>
        <div class="float-right">
          <button id="cancel" class="button button-outline">Cancel</button>
        </div>
      </fieldset>
    </form>
  </section>
  <script>
    const vscode = acquireVsCodeApi();

    const txtMessage = document.getElementById("message");
    const btnCommit = document.getElementById("commit");
    const btnCancel = document.getElementById("cancel");
    const linkPickCommitMessage = document.getElementById("pickCommitMessage");

    // load current message
    txtMessage.value = ${JSON.stringify(n)};

    btnCommit.addEventListener("click", function() {
      vscode.postMessage({
        command: "commit",
        message: txtMessage.value
      });
    });

    btnCancel.addEventListener("click", function() {
      vscode.postMessage({
        command: "cancel"
      });
    });

    // Allow CTRL + Enter
    txtMessage.addEventListener("keydown", function(e) {
      if (event.ctrlKey && event.keyCode === 13) {
        btnCommit.click();
      }
    });

    // Auto resize the height of message
    txtMessage.addEventListener("input", function(e) {
      txtMessage.style.height = "auto";
      txtMessage.style.height = (txtMessage.scrollHeight) + "px";
    });

    window.addEventListener("load", function() {
      setTimeout(() => {
        txtMessage.focus();
      }, 1000);
    });

    linkPickCommitMessage.addEventListener("click", function() {
      vscode.postMessage({
        command: "pickCommitMessage"
      });
    });

    // Message from VSCode
    window.addEventListener("message", function(event) {
      const message = event.data;
      switch (message.command) {
        case "setMessage":
          txtMessage.value = message.message;
          txtMessage.dispatchEvent(new Event("input"));
          break;
      }
    });
  </script>
</body>
</html>`;Ce.webview.html=a,Ce.onDidDispose(()=>{r(void 0)});let c=async()=>{let u;e&&e[0]&&(u=await(await Ge.commands.executeCommand("svn.getSourceControlManager","")).getRepositoryFromUri(Ge.Uri.file(e[0])));let d=await Ge.commands.executeCommand("svn.pickCommitMessage",u);d!==void 0&&Ce.webview.postMessage({command:"setMessage",message:d})};Ce.webview.onDidReceiveMessage(u=>{switch(u.command){case"commit":r(u.message),Ce.dispose();break;case"pickCommitMessage":c();break;default:r(void 0),Ce.dispose()}}),Ce.reveal(Ge.ViewColumn.Active,!1)})}async function wi(n,e=!0,t){e&&(n=await Lx(n,t));let r=$.get("commit.checkEmptyMessage",!0);return n===""&&r?await Ge.window.showWarningMessage("Do you really want to commit an empty message?",{modal:!0},"Yes")==="Yes"?"":void 0:n}var bi=class extends U{constructor(){super("svn.commit")}async execute(...e){if(e.length===0||!(e[0].resourceUri instanceof tn.Uri)){let i=await this.getSCMResource();if(!i)return;e=[i]}let t=e.filter(i=>i instanceof re),r=t.map(i=>i.resourceUri);t.forEach(i=>{i.type==="added"&&i.renameResourceUri&&r.push(i.renameResourceUri)}),await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);for(let a of o){let c=ca.dirname(a.fsPath),u=i.getResourceFromFile(c);for(;u;)u.type==="added"&&s.push(c),c=ca.dirname(c),u=i.getResourceFromFile(c)}try{let a=await wi(i.inputBox.value,!0,s);if(a===void 0)return;i.inputBox.value=a;let c=await i.commitFiles(a,s);tn.window.showInformationMessage(c),i.inputBox.value=""}catch(a){console.error(a);let c=a;tn.window.showErrorMessage(c.stderrFormated||String(a))}})}};var ua=V(require("path")),la=require("vscode");var vi=class extends U{constructor(){super("svn.commitWithMessage",{repository:!0})}async execute(e){let t=await pc(e);if(!t||t.length===0)return;let r=t.map(o=>o.resourceUri.fsPath),i=await wi(e.inputBox.value,!1,r);if(i!==void 0){t.forEach(o=>{if(o instanceof re){o.type==="added"&&o.renameResourceUri&&r.push(o.renameResourceUri.fsPath);let s=ua.dirname(o.resourceUri.fsPath),a=e.getResourceFromFile(s);for(;a;)a.type==="added"&&r.push(s),s=ua.dirname(s),a=e.getResourceFromFile(s)}});try{let o=await e.commitFiles(i,r);la.window.showInformationMessage(o),e.inputBox.value=""}catch(o){console.error(o);let s=o;la.window.showErrorMessage(s.stderrFormated||String(o))}}}};var Zu=require("vscode");var Ei=class extends U{constructor(){super("svn.deleteUnversioned")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(o=>o.resourceUri);if(await Zu.window.showWarningMessage("Would you like to delete selected files?",{modal:!0},"Yes","No")==="Yes")for(let o of r){let s=o.fsPath;try{if(!await le(s))continue;(await ot(s)).isDirectory()?Jo(s):await Ht(s)}catch{}}}};var Ju=require("vscode");var Ci=class extends U{constructor(){super("svn.fileOpen")}async execute(e){await Ju.commands.executeCommand("vscode.open",e)}};var Ii=class extends U{constructor(){super("svn.finishCheckout",{repository:!0})}async execute(e){await e.finishCheckout()}};var Si=class extends U{constructor(t){super("svn.getSourceControlManager");this.sourceControlManager=t}async execute(){return this.sourceControlManager}};var el=require("path"),vr=require("vscode");var Di=class extends U{constructor(){super("svn.log",{repository:!0})}async execute(e){try{let t=Ye(vr.Uri.file(e.workspaceRoot),"LOG"),r=t.with({path:el.posix.join(t.path,"svn.log")});await vr.commands.executeCommand("vscode.open",r)}catch(t){console.error(t),vr.window.showErrorMessage("Unable to log")}}};var Ri=class extends U{constructor(){super("svn.openChangeBase",{})}async execute(e,...t){return this.openChange(e,"BASE",t)}};var Ti=class extends U{constructor(){super("svn.openChangeHead")}async execute(e,...t){return this.openChange(e,"HEAD",t)}};var Pi=class extends U{constructor(){super("svn.openChangePrev",{})}async execute(e,...t){return this.openChange(e,"PREV",t)}};var ht=require("vscode");var Ni=class extends U{constructor(){super("svn.openFile")}async execute(e,...t){let r=e instanceof re,i;if(e instanceof ht.Uri)e.scheme==="svn"?i=[ht.Uri.file(At(e).fsPath)]:e.scheme==="file"&&(i=[e]);else if(e instanceof qe)i=[new re(e.uri,e.type,void 0,e.props,!0).resourceUri];else{let a=e;a instanceof re,a&&(i=[...t.map(c=>c.resourceUri),a.resourceUri])}if(!i)return;let o=i.length===1,s=ht.window.activeTextEditor;for(let a of i){if(!a||await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())continue;let c={preserveFocus:r,preview:o,viewColumn:ht.ViewColumn.Active};s&&s.document.uri.toString()===a.toString()&&(c.selection=s.selection);let u=await ht.workspace.openTextDocument(a);await ht.window.showTextDocument(u,c)}}};var Oi=require("path"),Er=require("vscode");var _i=class extends U{constructor(){super("svn.openHEADFile")}async execute(e){let t;if(e instanceof re?t=e:e instanceof Er.Uri?t=await this.getSCMResource(e):e instanceof qe?t=new re(e.uri,e.type,void 0,e.props,!0):t=await this.getSCMResource(),!t)return;let r=await this.getLeftResource(t,"HEAD"),i=Oi.posix.basename(t.resourceUri.path);if(!r){Er.window.showWarningMessage(`"HEAD version of '${i}' is not available."`);return}let o=Oi.posix.dirname(t.resourceUri.path),s=r.with({path:Oi.posix.join(o,`(HEAD) ${i}`)});return Er.commands.executeCommand("vscode.open",s,{preview:!0})}};var Ai=class extends U{constructor(){super("svn.openResourceBase")}async execute(e){await this._openResource(e,"BASE",void 0,!0,!1)}};var Li=class extends U{constructor(){super("svn.openResourceHead")}async execute(e){await this._openResource(e,"HEAD",void 0,!0,!1)}};var Mi=class extends U{constructor(){super("svn.patch")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(c=>c.fsPath),a=await i.patch(s);await this.showDiffPath(i,a)})}};var Fi=class extends U{constructor(){super("svn.patchAll",{repository:!0})}async execute(e){let t=await e.patch([]);await this.showDiffPath(e,t)}};var Ui=class extends U{constructor(){super("svn.patchChangeList",{repository:!0})}async execute(e){let t=await hc(e);if(!t)return;let r=await e.patchChangelist(t);await this.showDiffPath(e,r)}};var Wf=require("vscode");var Vf=V(ln()),Qi=class extends U{constructor(t){super("svn.pickCommitMessage",{repository:!0});this.svnVersion=t}async execute(t){let r=Vf.satisfies(this.svnVersion,">= 1.8"),i=[],o=$.get("previousCommitsUser",null);if(o&&r?i=await t.logByUser(o):i=await t.log("HEAD","0",20),!i.length)return;let s=i.map(u=>({label:u.msg,description:`r${u.revision} | ${u.author} | ${new Date(u.date).toLocaleString()}`})),a=await Wf.window.showQuickPick(s);if(a===void 0)return;let c=a.label;return t.inputBox.value=c,c}};var Na=require("vscode");var Ki=class extends U{constructor(){super("svn.promptAuth")}async execute(e,t){let r=await Na.window.showInputBox({placeHolder:"Svn repository username",prompt:"Please enter your username",ignoreFocusOut:!0,value:e});if(r===void 0)return;let i=await Na.window.showInputBox({placeHolder:"Svn repository password",prompt:"Please enter your password",value:t,ignoreFocusOut:!0,password:!0});return i===void 0?void 0:{username:r,password:i}}};var Gf=require("vscode");var Zi=class extends U{constructor(){super("svn.promptRemove",{repository:!0})}async execute(e,...t){let r=t.map(a=>a.fsPath),i=r.map(a=>e.repository.removeAbsolutePath(a)).sort(),o="Add to ignored list",s=await Gf.window.showInformationMessage(`The file(s) "${i.join(", ")}" are removed from disk.
Would you like remove from SVN?`,{modal:!1},"Yes",o,"No");if(s==="Yes")await e.removeFiles(r,!1);else if(s===o){let a=$.get("delete.ignoredRulesForDeletedFiles",[]);a.push(...i),a=[...new Set(a)],$.update("delete.ignoredRulesForDeletedFiles",a)}}};var Ji=require("vscode");var eo=class extends U{constructor(){super("svn.treeview.pullIncomingChange")}async execute(...e){let t=$.get("showUpdateMessage",!0);if(e[0]instanceof qe){try{let i=e[0],o=await i.repository.pullIncomingChange(i.uri.fsPath);t&&Ji.window.showInformationMessage(o)}catch(i){console.error(i),Ji.window.showErrorMessage("Unable to update")}return}let r=e.map(i=>i.resourceUri);await this.runByRepository(r,async(i,o)=>{if(!i)return;o.map(a=>a.fsPath).forEach(async a=>{let c=await i.pullIncomingChange(a);t&&Ji.window.showInformationMessage(c)})})}};var to=class extends U{constructor(){super("svn.refresh",{repository:!0})}async execute(e){let t=$.get("refresh.remoteChanges",!1);await e.status(),t&&await e.updateRemoteChangedFiles()}};var ro=class extends U{constructor(){super("svn.refreshRemoteChanges",{repository:!0})}async execute(e){await e.updateRemoteChangedFiles()}};var Oa=require("vscode");var no=class extends U{constructor(){super("svn.remove")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r,i=await Oa.window.showWarningMessage("Would you like to keep a local copy of the files?",{modal:!0},"Yes","No");if(!i)return;i==="Yes"?r=!0:r=!1;let o=t.map(s=>s.resourceUri);await this.runByRepository(o,async(s,a)=>{if(!s)return;let c=a.map(u=>u.fsPath);try{await s.removeFiles(c,r)}catch(u){console.log(u),Oa.window.showErrorMessage("Unable to remove files")}})}};var zf=require("vscode"),io=class extends U{constructor(){super("svn.removeUnversioned",{repository:!0})}async execute(e){await zf.window.showWarningMessage("Are you sure? This will remove all unversioned files except for ignored.",{modal:!0},"Yes","No")==="Yes"&&await e.removeUnversioned()}};var Bt=V(require("path")),Hf=require("vscode");var oo=class extends U{constructor(){super("svn.renameExplorer",{repository:!0})}async execute(e,t,r){if(!t)return;let i=t.fsPath;return this.rename(e,i)}async rename(e,t,r){if(t=rt(t),!r){let o=rt(e.workspaceRoot),s=Bt.relative(o,t);r=await Hf.window.showInputBox({value:Bt.basename(t),prompt:`New name name for ${s}`})}if(!r)return;let i=Bt.dirname(t);r=Bt.join(i,r),await e.rename(t,r)}};var Yf=require("vscode");var Og=[{label:"base",description:"Choose the file that was the (unmodified) BASE revision before you tried to integrate changes"},{label:"working",description:"Assuming that you've manually handled the conflict resolution, choose the version of the file as it currently stands in your working copy."},{label:"mine-full",description:"Preserve all local modifications and discarding all changes fetched"},{label:"theirs-full",description:"Discard all local modifications and integrating all changes fetched"},{label:"mine-conflict",description:"Resolve conflicted files by preferring local modifications over the changes fetched"},{label:"theirs-conflict",description:"Resolve conflicted files by preferring the changes fetched from the server over local modifications"}],_a=class{constructor(e){this.option=e}get label(){return this.option.label}get description(){return this.option.description}};function so(){return Og.map(n=>new _a(n))}var ao=class extends U{constructor(){super("svn.resolve")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=so(),i=await Yf.window.showQuickPick(r,{placeHolder:"Select conflict option"});if(!i)return;let o=t.map(s=>s.resourceUri);await this.runByRepository(o,async(s,a)=>{if(!s)return;let c=a.map(u=>u.fsPath);await s.resolve(c,i.label)})}};var fn=require("vscode");var co=class extends U{constructor(){super("svn.resolveAll",{repository:!0})}async execute(e){let t=e.conflicts.resourceStates;t.length||fn.window.showInformationMessage("No Conflicts");for(let r of t){let i=`Select conflict option for ${r.resourceUri.path}`,o=so(),s=await fn.window.showQuickPick(o,{placeHolder:i});if(!s)return;try{let a=await e.resolve([r.resourceUri.path],s.label);fn.window.showInformationMessage(a)}catch(a){let c=a;fn.window.showErrorMessage(c.stderr||String(a))}}}};var Qf=V(require("path")),Kf=require("vscode");var uo=class extends U{constructor(){super("svn.resolved")}async execute(e){if(!e)return;if(!$.get("conflict.autoResolve")){let i=Qf.basename(e.fsPath);if(await Kf.window.showWarningMessage(`Mark the conflict as resolved for "${i}"?`,{modal:!0},"Yes","No")!=="Yes")return}let r=[e];await this.runByRepository(r,async(i,o)=>{if(!i)return;let s=o.map(a=>a.fsPath);await i.resolve(s,"working")})}};var Zf=require("vscode");var Aa=require("vscode");async function Ir(){let n="Yes I'm sure";return await Aa.window.showWarningMessage("Are you sure? This will wipe all local changes.",{modal:!0},n)===n}async function _g(){let n=[];for(let r in Ur)Ur.hasOwnProperty(r)&&n.push({label:r,description:Ur[r]});let t=await Aa.window.showQuickPick(n,{placeHolder:"Select revert depth"});if(t)return t.label}async function Sr(n,e="empty"){let t=n.length===0;for(let r of n)if(r.scheme==="file")try{if((await ot(r.fsPath)).isDirectory()){t=!0;break}}catch{}return t?_g():e}var lo=class extends U{constructor(){super("svn.revert")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0||!await Ir())return;let r=t.map(o=>o.resourceUri),i=await Sr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath).reverse();try{await o.revert(a,i)}catch(c){console.log(c),Zf.window.showErrorMessage("Unable to revert")}})}};var Jf=require("vscode");var fo=class extends U{constructor(){super("svn.revertAll")}async execute(e){let t=e.resourceStates;if(t.length===0||!await Ir())return;let r=t.map(o=>o.resourceUri),i=await Sr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath).reverse();try{await o.revert(a,i)}catch(c){console.log(c),Jf.window.showErrorMessage("Unable to revert")}})}};var ep=require("vscode");var po=class extends U{constructor(){super("svn.revertChange")}async execute(e,t,r){let i=ep.window.visibleTextEditors.filter(o=>o.document.uri.toString()===e.toString())[0];i&&await this._revertChanges(i,[...t.slice(0,r),...t.slice(r+1)])}};var tp=require("vscode");var ho=class extends U{constructor(){super("svn.revertExplorer")}async execute(e,t){if(!t)return;let r=t;if(r.length===0||!await Ir())return;let i=await Sr(r);i&&await this.runByRepository(r,async(o,s)=>{if(!o)return;let a=s.map(c=>c.fsPath);try{await o.revert(a,i)}catch(c){console.log(c),tp.window.showErrorMessage("Unable to revert")}})}};var pn=require("vscode");var xo=class extends U{constructor(){super("svn.switchBranch",{repository:!0})}async execute(e){let t=await mr(e,!0);if(t)try{if(t.isNew){let r=await pn.window.showInputBox({value:`Created new branch ${t.name}`,prompt:`Commit message for create branch ${t.name}`});if(r===void 0)return;await e.newBranch(t.path,r)}else try{await e.switchBranch(t.path)}catch(r){let i=r;if(i.stderrFormated&&i.stderrFormated.includes("ignore-ancestry"))await pn.window.showErrorMessage("Seems like these branches don't have a common ancestor.  Do you want to retry with '--ignore-ancestry' option?","Yes","No")==="Yes"&&await e.switchBranch(t.path,!0);else throw r}}catch(r){console.log(r),t.isNew?pn.window.showErrorMessage("Unable to create new branch"):pn.window.showErrorMessage("Unable to switch branch")}}};var La=require("vscode");var mo=class extends U{constructor(){super("svn.update",{repository:!0})}async execute(e){try{let t=$.get("update.ignoreExternals",!1),r=$.get("showUpdateMessage",!0),i=await e.updateRevision(t);r&&La.window.showInformationMessage(i)}catch(t){console.error(t),La.window.showErrorMessage("Unable to update")}}};var Dr=require("vscode");var go=class extends U{constructor(){super("svn.upgrade")}async execute(e){if(!e||$.get("ignoreWorkingCopyIsTooOld",!1))return;e=rt(e);let t="Yes",r="No",i="Don't Show Again",o=await Dr.window.showWarningMessage("You want upgrade the working copy (svn upgrade)?",t,r,i),s=await Dr.commands.executeCommand("svn.getSourceControlManager","");if(o===t)await s.upgradeWorkingCopy(e)?(Dr.window.showInformationMessage(`Working copy "${e}" upgraded`),s.tryOpenRepository(e)):Dr.window.showErrorMessage(`Error on upgrading working copy "${e}". See log for more detail`);else if(o===i)return $.update("ignoreWorkingCopyIsTooOld",!0)}};var rp=require("path");var qt=require("vscode");var yo=class extends U{constructor(){super("svn.searchLogByRevision",{repository:!0})}async execute(e){let t=await qt.window.showInputBox({prompt:"Revision?"});if(!t)return;let r=parseInt(t,10);if(!r||!/^\+?(0|[1-9]\d*)$/.test(t)){qt.window.showErrorMessage("Invalid revision");return}try{let i=Ye(qt.Uri.file(e.workspaceRoot),"LOG_REVISION",{revision:r}),o=i.with({path:rp.posix.join(i.path,"svn.log")});await qt.commands.executeCommand("vscode.open",o)}catch(i){console.error(i),qt.window.showErrorMessage("Unable to log")}}};var nt=require("vscode");var K=require("vscode"),dt=V(require("path")),np=V(require("crypto"));var wo=class{constructor(e){this.type=K.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},rr=class{constructor(e){this.type=K.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},Ma=class{constructor(){this._emitter=new K.EventEmitter;this._bufferedEvents=[];this._root=new rr("");this._disposables=[];this.onDidChangeFile=this._emitter.event;this._disposables.push(K.workspace.registerFileSystemProvider("tempsvnfs",this,{isCaseSensitive:!0}),K.workspace.onDidCloseTextDocument(e=>{e.uri.scheme==="tempsvnfs"&&this.delete(e.uri)}))}watch(e){return new K.Disposable(()=>{})}stat(e){return this._lookup(e,!1)}readDirectory(e){let t=this._lookupAsDirectory(e,!1),r=[];for(let[i,o]of t.entries)r.push([i,o.type]);return r}createDirectory(e){let t=dt.posix.basename(e.path),r=e.with({path:dt.posix.dirname(e.path)}),i=this._lookupAsDirectory(r,!1),o=new rr(t);i.entries.set(o.name,o),i.mtime=Date.now(),i.size+=1,this._fireSoon({type:K.FileChangeType.Changed,uri:r},{type:K.FileChangeType.Created,uri:e})}readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw K.FileSystemError.FileNotFound()}writeFile(e,t,r){let i=dt.posix.basename(e.path),o=this._lookupParentDirectory(e),s=o.entries.get(i);if(s instanceof rr)throw K.FileSystemError.FileIsADirectory(e);if(!s&&!r.create)throw K.FileSystemError.FileNotFound(e);if(s&&r.create&&!r.overwrite)throw K.FileSystemError.FileExists(e);s||(s=new wo(i),o.entries.set(i,s),this._fireSoon({type:K.FileChangeType.Created,uri:e})),s.mtime=Date.now(),s.size=t.byteLength,s.data=t,this._fireSoon({type:K.FileChangeType.Changed,uri:e})}delete(e){let t=e.with({path:dt.posix.dirname(e.path)}),r=dt.posix.basename(e.path),i=this._lookupAsDirectory(t,!1);if(!i.entries.has(r))throw K.FileSystemError.FileNotFound(e);i.entries.delete(r),i.mtime=Date.now(),i.size-=1,this._fireSoon({type:K.FileChangeType.Changed,uri:t},{type:K.FileChangeType.Deleted,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw K.FileSystemError.FileExists(t);let i=this._lookup(e,!1),o=this._lookupParentDirectory(e),s=this._lookupParentDirectory(t),a=dt.posix.basename(t.path);o.entries.delete(i.name),i.name=a,s.entries.set(a,i),this._fireSoon({type:K.FileChangeType.Deleted,uri:e},{type:K.FileChangeType.Created,uri:t})}async createTempSvnRevisionFile(e,t,r){let i=`r${t}_${dt.basename(e.fsPath)}`,s=np.createHash("md5").update(e.path).digest("hex"),a=$.get("default.encoding"),c;a?c=Buffer.from(Jr.encode(r,a)):c=Buffer.from(r),this._root.entries.has(s)||this.createDirectory(K.Uri.parse(`tempsvnfs:/${s}`));let u=K.Uri.parse(`tempsvnfs:/${s}/${i}`,!0);return this.writeFile(u,c,{create:!0,overwrite:!0}),u}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[];for(let[e]of this.readDirectory(K.Uri.parse("tempsvnfs:/")))this.delete(K.Uri.parse(`tempsvnfs:/${e}`))}_lookup(e,t){let r=e.path.split("/"),i=this._root;for(let o of r){if(!o)continue;let s;if(i instanceof rr&&(s=i.entries.get(o)),!s){if(t)return;throw K.FileSystemError.FileNotFound(e)}i=s}return i}_lookupAsDirectory(e,t){let r=this._lookup(e,t);if(r instanceof rr)return r;throw K.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let r=this._lookup(e,t);if(r instanceof wo)return r;throw K.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let t=e.with({path:dt.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandler&&clearTimeout(this._fireSoonHandler),this._fireSoonHandler=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},1)}},jt=new Ma;var bo=class extends U{constructor(){super("svn.searchLogByText",{repository:!0})}async execute(e){let t=await nt.window.showInputBox({prompt:"Search query"});if(!t)return;if(!Qr(t)){nt.window.showErrorMessage("Invalid search pattern: contains forbidden characters");return}let r=nt.Uri.parse("tempsvnfs:/svn.log");jt.writeFile(r,Buffer.from(""),{create:!0,overwrite:!0}),await nt.commands.executeCommand("vscode.open",r);try{let i=await nt.window.withProgress({cancellable:!1,location:nt.ProgressLocation.Notification,title:"Searching Log"},async()=>e.plainLogByText(t));jt.writeFile(r,Buffer.from(i),{create:!0,overwrite:!0})}catch(i){nt.window.showErrorMessage(`Search failed: ${i instanceof Error?i.message:String(i)}`),console.error(i)}}};var Rr=require("vscode");var vo=class extends U{constructor(){super("svn.merge",{repository:!0})}async execute(e){let t=await mr(e);t&&await this.merge(e,t)}async merge(e,t){let r=!1;xc(e.currentBranch)&&(r=!0);try{await e.merge(t.path,r)}catch(i){let o=i;o.stderrFormated?o.stderrFormated.includes("try updating first")?await Rr.window.showErrorMessage("Seems like you need to update first prior to merging. Would you like to update now and try merging again?","Yes","No")==="Yes"&&(await Rr.commands.executeCommand("svn.update"),await this.merge(e,t)):Rr.window.showErrorMessage("Unable to merge branch: "+o.stderrFormated):(console.log(i),Rr.window.showErrorMessage("Unable to merge branch"))}}};function ip(n,e){e.push(new Si(n)),e.push(new Ci),e.push(new Ni),e.push(new Ki),e.push(new vi),e.push(new Ln),e.push(new kn),e.push(new to),e.push(new bi),e.push(new Ai),e.push(new Li),e.push(new Ri),e.push(new xo),e.push(new vo),e.push(new lo),e.push(new mo),e.push(new eo),e.push(new Fi),e.push(new Mi),e.push(new Ui),e.push(new no),e.push(new co),e.push(new ao),e.push(new uo),e.push(new Di),e.push(new po),e.push(new yi),e.push(new gi),e.push(new io),e.push(new Ii),e.push(new Fn),e.push(new Mn),e.push(new oo),e.push(new go),e.push(new Pi),e.push(new Zi),e.push(new di),e.push(new ro),e.push(new Ei),e.push(new Ti),e.push(new _i),e.push(new fo),e.push(new Qi(n.svn.version)),e.push(new ho),e.push(new yo),e.push(new bo)}var Eo=require("vscode");var hn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidChangeStatusRepository(this.checkHasChangesOnActiveEditor,this,this.disposables),Eo.window.onDidChangeActiveTextEditor(()=>this.checkHasChangesOnActiveEditor(),this,this.disposables)}checkHasChangesOnActiveEditor(){Ot("svnActiveEditorHasChanges",this.hasChangesOnActiveEditor())}hasChangesOnActiveEditor(){if(!Eo.window.activeTextEditor)return!1;let e=Eo.window.activeTextEditor.document.uri,t=this.sourceControlManager.getRepository(e);if(!t)return!1;let r=t.getResourceFromFile(e);if(!r)return!1;switch(r.type){case"added":case"deleted":case"external":case"ignored":case"none":case"normal":case"unversioned":return!1;case"conflicted":case"incomplete":case"merged":case"missing":case"modified":case"obstructed":case"replaced":return!0}return!0}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(100)],hn.prototype,"checkHasChangesOnActiveEditor",1);var xn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidOpenRepository(this.checkOpened,this,this.disposables),e.onDidCloseRepository(this.checkOpened,this,this.disposables),this.checkOpened()}checkOpened(){Ot("svnOpenRepositoryCount",this.sourceControlManager.repositories.length)}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(100)],xn.prototype,"checkOpened",1);var yn=V(require("path")),oe=require("vscode");var up=require("crypto"),dn=V(require("path")),Ba=V(op()),lp=V(sp()),he=require("vscode");Ba.default.extend(lp.default);var mn=class{constructor(e){this.path=e}toString(){return this.path}};function Tr(n,e,t){return n.map(r=>({kind:e,data:r,parent:t}))}function Co(n){let e=dn.join(__dirname,"..","icons"),t=r=>he.Uri.file(dn.join(e,r,`${n}.svg`));return{light:t("light"),dark:t("dark")}}async function Pr(n,e){let t=he.env.clipboard;if(t===void 0){he.window.showErrorMessage("Clipboard is supported in VS Code 1.30 and newer");return}if(e.kind===2){let r=e.data;switch(n){case"msg":case"revision":await t.writeText(r[n])}}}function Ag(n,e,t){return!(n.length&&n[n.length-1].revision==="1"||e.length===0||e[e.length-1].revision==="1"||e.length<t)}function Io(n,e,t){let r=n.persisted.baseRevision;if(e.length&&r&&parseInt(e[0].revision,10)>r){let i=1;for(;e.length>i&&parseInt(e[i].revision,10)>r;)i++;let o=new he.TreeItem("BASE");o.tooltip="Log entries above do not exist in working copy",t.splice(i,0,{kind:4,data:o})}}async function qa(n,e){if(n.localFullPath===void 0){e&&he.window.showErrorMessage("No working copy for this path");return}let t;try{t=await ot(n.localFullPath.fsPath)}catch{return he.window.showWarningMessage("Not available from this working copy: "+n.localFullPath),!1}return t.isFile()?!0:(he.window.showErrorMessage("This target is not a file"),!1)}function gn(){let n=Number.parseInt($.get("log.length")||"50",10);if(isNaN(n)||n<=0)throw new Error("Invalid log.length setting value");return n}async function Nr(n){let e=n.persisted.commitFrom,t=n.entries;t.length&&(e=t[t.length-1].revision,e=(Number.parseInt(e,10)-1).toString());let r=[],i=gn();try{r=await n.repo.log(e,"1",i,n.svnTarget)}catch{}Ag(t,r,i)||(n.isComplete=!0),t.push(...r)}var ap=new Map;function Lg(n){let e=(0,up.createHash)("md5");return e.write(n),e.digest().toString("hex")}function So(n,e=16){if(!$.get("gravatars.enabled",!0)||n===void 0)return new he.ThemeIcon("git-commit");let t=ap.get(n);if(t!==void 0)return t;let r=$.get("gravatar.icon_url","").replace("<AUTHOR>",n).replace("<AUTHOR_MD5>",Lg(n)).replace("<SIZE>",e.toString());return t=he.Uri.parse(r),ap.set(n,t),t}function Do(n){let e=(0,Ba.default)(n.date).fromNow();return`r${n.revision}, ${e} by ${n.author}`}function Ro(n){return n.msg?n.msg.split(/\r?\n/,1)[0]:"<blank>"}function To(n){let e=n.date;return isNaN(Date.parse(e))||(e=new Date(e).toString()),`Author: ${n.author}
${e}
Revision: ${n.revision}
Message: ${n.msg}`}async function cp(n,e,t){if(t==="BASE"){let s=n.getPathNormalizer().parse(e.toString(!0)).localFullPath;if(s===void 0||!await le(s.path)){let a="BASE revision doesn't exist for "+(s?s.path:"remote path");throw he.window.showErrorMessage(a),new Error(a)}return s}let r;try{r=await n.show(e,t)}catch(i){throw he.window.showErrorMessage("Failed to open path"),i}return jt.createTempSvnRevisionFile(e,t,r)}async function nr(n,e,t,r,i){let o=await cp(n,e,t),s=await cp(n,i||e,r),a={preview:!0},c=`${dn.basename(e.path)} (${t} : ${r})`;return he.commands.executeCommand("vscode.diff",o,s,c,a)}async function Or(n,e,t){let r;try{r=await n.show(e,t)}catch{he.window.showErrorMessage("Failed to open path");return}let i=await jt.createTempSvnRevisionFile(e,t,r),o={preview:!0};return he.commands.executeCommand("vscode.open",i,o)}var Po=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new oe.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose=[];this._dispose.push(oe.window.onDidChangeActiveTextEditor(this.editorChanged,this),oe.window.registerTreeDataProvider("itemlog",this),oe.commands.registerCommand("svn.itemlog.copymsg",async t=>Pr("msg",t)),oe.commands.registerCommand("svn.itemlog.copyrevision",async t=>Pr("revision",t)),oe.commands.registerCommand("svn.itemlog.openFileRemote",this.openFileRemoteCmd,this),oe.commands.registerCommand("svn.itemlog.openDiff",this.openDiffCmd,this),oe.commands.registerCommand("svn.itemlog.openDiffBase",this.openDiffBaseCmd,this),oe.commands.registerCommand("svn.itemlog.refresh",this.refresh,this)),this.refresh()}dispose(){Ie(this._dispose)}async openFileRemoteCmd(e){let t=e.data,r=He(this.currentItem);return Or(r.repo,r.svnTarget,t.revision)}async openDiffBaseCmd(e){let t=e.data,r=He(this.currentItem);return nr(r.repo,r.svnTarget,t.revision,"BASE")}async openDiffCmd(e){let t=e.data,r=He(this.currentItem),i=r.entries.findIndex(s=>s===t);if(i===r.entries.length-1){oe.window.showWarningMessage("Cannot diff last commit");return}let o=r.entries[i+1].revision;return nr(r.repo,r.svnTarget,o,t.revision)}async editorChanged(e){return this.refresh(void 0,e)}async refresh(e,t,r){if(r){await Nr(He(this.currentItem)),this._onDidChangeTreeData.fire(e);return}if(t===void 0&&(t=oe.window.activeTextEditor),t){let i=t.document.uri;if(i.scheme==="file"){let o=this.sourceControlManager.getRepository(i);if(o!==null)try{let s=await o.getInfo(i.fsPath);this.currentItem={isComplete:!1,entries:[],repo:o,svnTarget:oe.Uri.parse(s.url),persisted:{commitFrom:"HEAD",baseRevision:parseInt(s.revision,10)},order:0}}catch{}}this._onDidChangeTreeData.fire(e)}}async getTreeItem(e){let t;if(e.kind===2){let r=e.data;t=new oe.TreeItem(Ro(r),oe.TreeItemCollapsibleState.None),t.description=Do(r),t.iconPath=So(r.author),t.tooltip=To(r),t.contextValue="diffable",t.command={command:"svn.itemlog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Shouldn't happen");return t}async getChildren(e){if(this.currentItem===void 0)return[];if(e===void 0){let t=yn.basename(this.currentItem.svnTarget.fsPath),r=new oe.TreeItem(t,oe.TreeItemCollapsibleState.Expanded);return r.tooltip=yn.dirname(this.currentItem.svnTarget.fsPath),r.description=yn.dirname(this.currentItem.svnTarget.fsPath),r.iconPath=new oe.ThemeIcon("history"),[{kind:4,data:r}]}else{let t=this.currentItem.entries;t.length===0&&await Nr(this.currentItem);let r=Tr(t,2);if(Io(this.currentItem,t,r),!this.currentItem.isComplete){let i=new oe.TreeItem(`Load another ${gn()} revisions`),o={kind:4,data:i};i.tooltip="Paging size may be adjusted using log.length setting",i.command={command:"svn.itemlog.refresh",arguments:[e,void 0,!0],title:"refresh element"},i.iconPath=new oe.ThemeIcon("unfold"),r.push(o)}return r}}};var Gt=V(require("path")),G=require("vscode");var _r=V(require("path")),Cn=require("timers"),J=require("vscode");var wn=class{constructor(){this.operations=new Map}start(e){this.operations.set(e,(this.operations.get(e)||0)+1)}end(e){let t=(this.operations.get(e)||0)-1;t<=0?this.operations.delete(e):this.operations.set(e,t)}isRunning(e){return this.operations.has(e)}isIdle(){let e=this.operations.keys();for(let t of e)if(!On(t))return!1;return!0}};var Wt=require("path"),fp=V(require("path")),vn=require("vscode");var bn=require("path"),ja=require("vscode");function Xt(n){return n.path||"/"}var mt=class{constructor(e,t,r,i,o){this.remoteRoot=e;this.branchRoot=t;this.checkoutRoot=r;this._path=i;this._revision=o;if(i.length===0||i.charAt(0)==="/")throw new Error("Invalid _path "+i)}get remoteFullPath(){return ja.Uri.parse(this.remoteRoot.toString()+"/"+this._path)}get localFullPath(){if(this.checkoutRoot!==void 0)return ja.Uri.file(bn.posix.join(this.checkoutRoot.path,bn.posix.relative(this.fromRepoToBranch,this._path)))}get relativeFromBranch(){return bn.posix.relative(this.fromRepoToBranch,this._path)}get fromRepoToBranch(){return bn.posix.relative(Xt(this.remoteRoot),Xt(this.branchRoot))}get revision(){return this._revision}toString(e){return this.remoteFullPath+(e&&this._revision||"")}};H([ge],mt.prototype,"remoteFullPath",1),H([ge],mt.prototype,"localFullPath",1),H([ge],mt.prototype,"relativeFromBranch",1),H([ge],mt.prototype,"fromRepoToBranch",1),H([ge],mt.prototype,"revision",1),H([ge],mt.prototype,"toString",1);var Vt=class{constructor(e){this.repoInfo=e;this.repoRoot=vn.Uri.parse(e.repository.root),this.branchRoot=vn.Uri.parse(e.url),e.wcInfo&&e.wcInfo.wcrootAbspath&&(this.checkoutRoot=vn.Uri.file(e.wcInfo.wcrootAbspath))}getFullRepoPathFromUrl(e){if(e.startsWith("/"))return e.substr(1);if(e.startsWith("svn://")||e.startsWith("file://")){let t=vn.Uri.parse(e).path;return Wt.posix.relative(Xt(this.repoRoot),t)}else throw new Error("unknown path")}parse(e,t=2,r){let i;if(t===2)i=this.getFullRepoPathFromUrl(e);else if(t===1){if(!Wt.posix.isAbsolute(e))throw new Error("Path isn't absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=fp.relative(this.checkoutRoot.fsPath,e),i=Wt.posix.join(this.fromRootToBranch(),i)}else if(t===0){if(Wt.posix.isAbsolute(e))throw new Error("Path is absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=Wt.posix.join(this.fromRootToBranch(),e)}else throw new Error("unsupported kind");return new mt(this.repoRoot,this.branchRoot,this.checkoutRoot,i,r)}fromRootToBranch(){return Wt.posix.relative(Xt(this.repoRoot),Xt(this.branchRoot))}fromBranchToRoot(){return Wt.posix.relative(Xt(this.branchRoot),Xt(this.repoRoot))}};H([ge],Vt.prototype,"fromRootToBranch",1),H([ge],Vt.prototype,"fromBranchToRoot",1);var pp=require("vscode");var No=class{constructor(e){this.repository=e;this._onDidChange=new pp.EventEmitter;this.disposables=[];e.onDidChangeStatus(this._onDidChange.fire,this._onDidChange,this.disposables),e.onDidChangeOperations(this._onDidChange.fire,this._onDidChange,this.disposables)}get onDidChange(){return this._onDidChange.event}get command(){if(!this.repository.currentBranch)return;let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch");return{command:"svn.switchBranch",tooltip:"Switch Branch...",title:`$(git-branch) ${this.repository.currentBranch}${e?" (Switching)":""}`,arguments:[this.repository.sourceControl]}}dispose(){this.disposables.forEach(e=>e.dispose())}};var hp=require("vscode");var _o=class _o{constructor(e){this.repository=e;this._onDidChange=new hp.EventEmitter;this.disposables=[];this._state=_o.startState;e.onDidChangeStatus(this.onModelChange,this,this.disposables),e.onDidChangeOperations(this.onOperationsChange,this,this.disposables),this._onDidChange.fire()}get onDidChange(){return this._onDidChange.event}get state(){return this._state}set state(e){this._state=e,this._onDidChange.fire()}onOperationsChange(){let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch")||this.repository.operations.isRunning("Update")||this.repository.operations.isRunning("Merge"),t=this.repository.operations.isRunning("StatusRemote"),r=!this.repository.operations.isIdle();this.state={...this.state,isStatusRemoteRunning:t,isOperationRunning:r,isSyncRunning:e}}onModelChange(){this.state={...this.state,remoteChangedFiles:this.repository.remoteChangedFiles}}get command(){let e="$(sync)",t="",r="",i="";return this.state.isSyncRunning?(r="",e="$(sync~spin)",t="",i="Updating Revision..."):this.state.isStatusRemoteRunning?(r="",e="$(sync~spin)",t="",i="Checking remote updates..."):this.state.isOperationRunning?(r="",e="$(sync~spin)",t="Running",i="Running..."):this.state.needCleanUp?(r="svn.cleanup",e="$(alert)",t="Need cleanup",i="Run cleanup command"):this.state.isIncomplete?(r="svn.finishCheckout",e="$(issue-reopened)",t="Incomplete (Need finish checkout)",i="Run update to complete"):this.state.remoteChangedFiles>0?(e="$(cloud-download)",r="svn.update",i="Update Revision",t=`${this.state.remoteChangedFiles}\u2193`):(r="svn.update",i="Update Revision"),{command:r,title:[e,t].join(" ").trim(),tooltip:i,arguments:[this.repository]}}dispose(){this.disposables.forEach(e=>e.dispose())}};_o.startState={isIncomplete:!1,isOperationRunning:!1,isStatusRemoteRunning:!1,isSyncRunning:!1,needCleanUp:!1,remoteChangedFiles:0};var Oo=_o;var Ao=class{constructor(e){this.disposables=[];this.checkoutStatusBar=new No(e),this.syncStatusBar=new Oo(e),this.disposables.push(this.checkoutStatusBar,this.syncStatusBar)}get onDidChange(){return st(this.syncStatusBar.onDidChange,this.checkoutStatusBar.onDidChange)}get commands(){let e=[],t=this.checkoutStatusBar.command;t&&e.push(t);let r=this.syncStatusBar.command;return r&&e.push(r),e}dispose(){this.disposables.forEach(e=>e.dispose())}};var $e=require("vscode"),xp=require("fs");var dp=require("path");var En=class{constructor(e){this.root=e;this.disposables=[];let t=$e.workspace.createFileSystemWatcher(new $e.RelativePattern(rt(e),"**"));this._onRepoChange=new $e.EventEmitter,this._onRepoCreate=new $e.EventEmitter,this._onRepoDelete=new $e.EventEmitter;let r,i,o;typeof $e.workspace.workspaceFolders<"u"&&!$e.workspace.workspaceFolders.filter(m=>Pe(m.uri.fsPath,e)).length&&((0,xp.watch)((0,dp.join)(e,bt()),this.repoWatch.bind(this)).on("error",x=>{throw x}),r=this._onRepoChange.event,i=this._onRepoCreate.event,o=this._onRepoDelete.event),this.disposables.push(t);let s=m=>/[\\\/](\.svn|_svn)[\\\/]tmp/.test(m.path),a=m=>!s(m);this.onDidChange=me(t.onDidChange,a),this.onDidCreate=me(t.onDidCreate,a),this.onDidDelete=me(t.onDidDelete,a),this.onDidAny=st(this.onDidChange,this.onDidCreate,this.onDidDelete);let c=/[\\\/](\.svn|_svn)[\\\/]/,u=m=>!c.test(m.path);this.onDidWorkspaceChange=me(this.onDidChange,u),this.onDidWorkspaceCreate=me(this.onDidCreate,u),this.onDidWorkspaceDelete=me(this.onDidDelete,u),this.onDidWorkspaceAny=st(this.onDidWorkspaceChange,this.onDidWorkspaceCreate,this.onDidWorkspaceDelete);let d=m=>c.test(m.path);this.onDidSvnChange=me(this.onDidChange,d),this.onDidSvnCreate=me(this.onDidCreate,d),this.onDidSvnDelete=me(this.onDidDelete,d),r&&i&&o&&(this.onDidSvnChange=r,this.onDidSvnCreate=i,this.onDidSvnDelete=o),this.onDidSvnAny=st(this.onDidSvnChange,this.onDidSvnCreate,this.onDidSvnDelete)}repoWatch(e,t){t&&(e==="change"?this._onRepoChange.fire($e.Uri.parse(t)):e==="rename"&&le(t).then(r=>{r?this._onRepoCreate.fire($e.Uri.parse(t)):this._onRepoDelete.fire($e.Uri.parse(t))}))}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(1e3)],En.prototype,"repoWatch",1);function Fg(n){switch(n){case"CurrentBranch":case"Show":case"Info":return!1;default:return!0}}var Re=class{constructor(e,t){this.repository=e;this.secrets=t;this.changelists=new Map;this.statusIgnored=[];this.statusExternal=[];this.disposables=[];this.currentBranch="";this.remoteChangedFiles=0;this.isIncomplete=!1;this.needCleanUp=!1;this.deletedUris=[];this.canSaveAuth=!1;this._onDidChangeRepository=new J.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeState=new J.EventEmitter;this.onDidChangeState=this._onDidChangeState.event;this._onDidChangeStatus=new J.EventEmitter;this.onDidChangeStatus=this._onDidChangeStatus.event;this._onDidChangeRemoteChangedFiles=new J.EventEmitter;this.onDidChangeRemoteChangedFile=this._onDidChangeRemoteChangedFiles.event;this._onRunOperation=new J.EventEmitter;this.onRunOperation=this._onRunOperation.event;this._onDidRunOperation=new J.EventEmitter;this.onDidRunOperation=this._onDidRunOperation.event;this._operations=new wn;this._state=0;this._fsWatcher=new En(e.root),this.disposables.push(this._fsWatcher),this._fsWatcher.onDidAny(this.onFSChange,this,this.disposables),this._fsWatcher.onDidSvnAny(async r=>{await this.onDidAnyFileChanged(r)},this,this.disposables),this.sourceControl=J.scm.createSourceControl("svn","SVN",J.Uri.file(e.workspaceRoot)),this.sourceControl.count=0,this.sourceControl.inputBox.placeholder="Message (press Ctrl+Enter to commit)",this.sourceControl.acceptInputCommand={command:"svn.commitWithMessage",title:"commit",arguments:[this.sourceControl]},this.sourceControl.quickDiffProvider=this,this.disposables.push(this.sourceControl),this.statusBar=new Ao(this),this.disposables.push(this.statusBar),this.statusBar.onDidChange(()=>this.sourceControl.statusBarCommands=this.statusBar.commands,null,this.disposables),this.changes=this.sourceControl.createResourceGroup("changes","Changes"),this.conflicts=this.sourceControl.createResourceGroup("conflicts","Conflicts"),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.changes.hideWhenEmpty=!0,this.unversioned.hideWhenEmpty=!0,this.conflicts.hideWhenEmpty=!0,this.disposables.push(this.changes),this.disposables.push(this.conflicts),this.disposables.push(Be(()=>this.unversioned.dispose())),this.disposables.push(Be(()=>{this.remoteChangedUpdateInterval&&(0,Cn.clearInterval)(this.remoteChangedUpdateInterval)})),this._fsWatcher.onDidWorkspaceDelete(r=>this.deletedUris.push(r),this,this.disposables),this.onDidChangeStatus(this.actionForDeletedFiles,this,this.disposables),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles(),$.onDidChange(r=>{r.affectsConfiguration("svn.remoteChanges.checkFrequency")&&(this.remoteChangedUpdateInterval&&(0,Cn.clearInterval)(this.remoteChangedUpdateInterval),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles())}),this.status(),this.disposables.push(J.workspace.onDidSaveTextDocument(r=>{this.onDidSaveTextDocument(r)}))}get fsWatcher(){return this._fsWatcher}get onDidChangeOperations(){return st(this.onRunOperation,this.onDidRunOperation)}get operations(){return this._operations}get state(){return this._state}set state(e){this._state=e,this._onDidChangeState.fire(e),this.changes.resourceStates=[],this.unversioned.resourceStates=[],this.conflicts.resourceStates=[],this.changelists.forEach((t,r)=>{t.resourceStates=[]}),this.remoteChanges&&this.remoteChanges.dispose(),this.isIncomplete=!1,this.needCleanUp=!1}get root(){return this.repository.root}get workspaceRoot(){return this.repository.workspaceRoot}get branchRoot(){return J.Uri.parse(this.repository.info.url)}get inputBox(){return this.sourceControl.inputBox}get username(){return this.repository.username}set username(e){this.repository.username=e}get password(){return this.repository.password}set password(e){this.repository.password=e}async onDidAnyFileChanged(e){await this.repository.updateInfo(),this._onDidChangeRepository.fire(e)}createRemoteChangedInterval(){let e=$.get("remoteChanges.checkFrequency",300);e&&(this.remoteChangedUpdateInterval=(0,Cn.setInterval)(()=>{this.updateRemoteChangedFiles()},1e3*e))}async actionForDeletedFiles(){if(!this.deletedUris.length)return;let e=this.deletedUris;this.deletedUris=[];let t=$.get("delete.actionForDeletedFiles","prompt");if(t==="none")return;let i=e.map(a=>this.getResourceFromFile(a)).filter(a=>a&&a.type==="missing").map(a=>a.resourceUri);if(!i.length)return;let s=$.get("delete.ignoredRulesForDeletedFiles",[]).map(a=>qu(a));if(s.length&&(i=i.filter(a=>{let c=this.repository.removeAbsolutePath(a.fsPath);return!s.some(u=>u.match(c)||u.match(a.fsPath))})),!!i.length){if(t==="remove")return this.removeFiles(i.map(a=>a.fsPath),!1);if(t==="prompt")return J.commands.executeCommand("svn.promptRemove",...i)}}async updateRemoteChangedFiles(){$.get("remoteChanges.checkFrequency",300)?this.run("StatusRemote"):this.remoteChanges&&(this.remoteChanges.dispose(),this.remoteChanges=void 0)}onFSChange(e){$.get("autorefresh")&&this.operations.isIdle()&&this.eventuallyUpdateWhenIdleAndWait()}eventuallyUpdateWhenIdleAndWait(){this.updateWhenIdleAndWait()}async updateWhenIdleAndWait(){await this.whenIdleAndFocused(),await this.status(),await Zo(5e3)}async whenIdleAndFocused(){for(;;){if(!this.operations.isIdle()){await Yt(this.onDidRunOperation);continue}if(!J.window.state.focused){let e=me(J.window.onDidChangeWindowState,t=>t.focused);await Yt(e);continue}return}}async updateModelState(e=!1){let t=[],r=[],i=[],o=new Map,s=[];this.statusExternal=[],this.statusIgnored=[],this.isIncomplete=!1,this.needCleanUp=!1;let a=$.get("sourceControl.combineExternalIfSameServer",!1),c=await this.retryRun(async()=>this.repository.getStatus({includeIgnored:!0,includeExternals:a,checkRemoteChanges:e}))||[],d=J.workspace.getConfiguration("files",J.Uri.file(this.root)).get("exclude"),m=[];for(let I in d)if(d.hasOwnProperty(I)){let w=!d[I];m.push((w?"!":"")+I)}if(this.statusExternal=c.filter(I=>I.status==="external"),a&&this.statusExternal.length){let I=await this.repository.getRepositoryUuid();this.statusExternal=this.statusExternal.filter(w=>I!==w.repositoryUuid)}let x=c.filter(I=>I.status==="external"?!1:!this.statusExternal.some(w=>Pe(w.path,I.path))),f=$.get("sourceControl.hideUnversioned"),y=$.get("sourceControl.ignore");for(let I of x){if(I.path==="."&&(this.isIncomplete=I.status==="incomplete",this.needCleanUp=I.wcStatus.locked),I.wcStatus.switched&&(this.isIncomplete=!0),I.wcStatus.locked||I.wcStatus.switched||I.status==="incomplete"||er(I.path,m,{dot:!0}))continue;let w=J.Uri.file(_r.join(this.workspaceRoot,I.path)),l=I.rename?J.Uri.file(_r.join(this.workspaceRoot,I.rename)):void 0;I.reposStatus&&s.push(new re(w,I.reposStatus.item,void 0,I.reposStatus.props,!0));let h=new re(w,I.status,l,I.props);if(!((I.status==="normal"||I.status==="none")&&(I.props==="normal"||I.props==="none")&&!I.changelist))if(I.status==="ignored")this.statusIgnored.push(I);else if(I.status==="conflicted")i.push(h);else if(I.status==="unversioned"){if(f)continue;let E=I.path.match(/(.+?)\.(mine|working|merge-\w+\.r\d+|r\d+)$/);if(E&&E[1]&&c.some(O=>O.path===E[1])||y.length>0&&er(_r.sep+I.path,y,{dot:!0,matchBase:!0}))continue;r.push(h)}else if(I.changelist){let E=o.get(I.changelist);E||(E=[]),E.push(h),o.set(I.changelist,E)}else t.push(h)}this.changes.resourceStates=t,this.conflicts.resourceStates=i;let v=this.changelists.size;this.changelists.forEach((I,w)=>{I.resourceStates=[]});let T=[this.changes,this.conflicts],_=$.get("sourceControl.ignoreOnStatusCount");if(o.forEach((I,w)=>{let l=this.changelists.get(w);l||(l=this.sourceControl.createResourceGroup(`changelist-${w}`,`Changelist "${w}"`),l.hideWhenEmpty=!0,this.disposables.push(l),this.changelists.set(w,l)),l.resourceStates=I,_.includes(w)||T.push(l)}),v!==this.changelists.size&&(this.unversioned.dispose(),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.unversioned.hideWhenEmpty=!0),this.unversioned.resourceStates=r,$.get("sourceControl.countUnversioned",!1)&&T.push(this.unversioned),this.sourceControl.count=T.reduce((I,w)=>I+w.resourceStates.length,0),!this.remoteChanges||v!==this.changelists.size){let I=[];this.remoteChanges&&(I=this.remoteChanges.resourceStates,this.remoteChanges.dispose()),this.remoteChanges=this.sourceControl.createResourceGroup("remotechanges","Remote Changes"),this.remoteChanges.repository=this,this.remoteChanges.hideWhenEmpty=!0,this.remoteChanges.resourceStates=I}return e&&(this.remoteChanges.resourceStates=s,s.length!==this.remoteChangedFiles&&(this.remoteChangedFiles=s.length,this._onDidChangeRemoteChangedFiles.fire())),this._onDidChangeStatus.fire(),this.currentBranch=await this.getCurrentBranch(),Promise.resolve()}getResourceFromFile(e){typeof e=="string"&&(e=J.Uri.file(e));let t=[this.changes,this.conflicts,this.unversioned,...this.changelists.values()],r=e.toString();for(let i of t)for(let o of i.resourceStates)if(r===o.resourceUri.toString()&&o instanceof re)return o}provideOriginalResource(e){if(e.scheme==="file"&&!Pe(_r.join(this.root,bt()),e.fsPath))return Ye(e,"SHOW",{},!0)}async getBranches(){try{return await this.repository.getBranches()}catch{return[]}}async status(){return this.run("Status")}async show(e,t){return this.run("Show",()=>this.repository.show(e,t))}async showBuffer(e,t){return this.run("Show",()=>this.repository.showBuffer(e,t))}async addFiles(e){return this.run("Add",()=>this.repository.addFiles(e))}async addChangelist(e,t){return this.run("AddChangelist",()=>this.repository.addChangelist(e,t))}async removeChangelist(e){return this.run("RemoveChangelist",()=>this.repository.removeChangelist(e))}async getCurrentBranch(){return this.run("CurrentBranch",async()=>this.repository.getCurrentBranch())}async newBranch(e,t="Created new branch"){return this.run("NewBranch",async()=>{await this.repository.newBranch(e,t),this.updateRemoteChangedFiles()})}async switchBranch(e,t=!1){await this.run("SwitchBranch",async()=>{await this.repository.switchBranch(e,t),this.updateRemoteChangedFiles()})}async merge(e,t=!1,r="postpone"){await this.run("Merge",async()=>{await this.repository.merge(e,t,r),this.updateRemoteChangedFiles()})}async updateRevision(e=!1){return this.run("Update",async()=>{let t=await this.repository.update(e);return this.updateRemoteChangedFiles(),t})}async pullIncomingChange(e){return this.run("Update",async()=>{let t=await this.repository.pullIncomingChange(e);return this.updateRemoteChangedFiles(),t})}async resolve(e,t){return this.run("Resolve",()=>this.repository.resolve(e,t))}async commitFiles(e,t){return this.run("Commit",()=>this.repository.commitFiles(e,t))}async revert(e,t){return this.run("Revert",()=>this.repository.revert(e,t))}async info(e){return this.run("Info",()=>this.repository.getInfo(e))}async patch(e){return this.run("Patch",()=>this.repository.patch(e))}async patchBuffer(e){return this.run("Patch",()=>this.repository.patchBuffer(e))}async patchChangelist(e){return this.run("Patch",()=>this.repository.patchChangelist(e))}async removeFiles(e,t){return this.run("Remove",()=>this.repository.removeFiles(e,t))}async plainLog(){return this.run("Log",()=>this.repository.plainLog())}async plainLogBuffer(){return this.run("Log",()=>this.repository.plainLogBuffer())}async plainLogByRevision(e){return this.run("Log",()=>this.repository.plainLogByRevision(e))}async plainLogByRevisionBuffer(e){return this.run("Log",()=>this.repository.plainLogByRevisionBuffer(e))}async plainLogByText(e){return this.run("Log",()=>this.repository.plainLogByText(e))}async plainLogByTextBuffer(e){return this.run("Log",()=>this.repository.plainLogByTextBuffer(e))}async log(e,t,r,i){return this.run("Log",()=>this.repository.log(e,t,r,i))}async logByUser(e){return this.run("Log",()=>this.repository.logByUser(e))}async cleanup(){return this.run("CleanUp",()=>this.repository.cleanup())}async removeUnversioned(){return this.run("CleanUp",()=>this.repository.removeUnversioned())}async getInfo(e,t){return this.run("Info",()=>this.repository.getInfo(e,t,!0))}async getChanges(){return this.run("Changes",()=>this.repository.getChanges())}async finishCheckout(){return this.run("SwitchBranch",()=>this.repository.finishCheckout())}async addToIgnore(e,t,r=!1){return this.run("Ignore",()=>this.repository.addToIgnore(e,t,r))}async rename(e,t){return this.run("Rename",()=>this.repository.rename(e,t))}async list(e){return this.run("List",()=>this.repository.ls(e))}getPathNormalizer(){return new Vt(this.repository.info)}getCredentialServiceName(){let e="vscode.positron-svn",t=this.repository.info;return t.repository&&t.repository.root?e+=":"+t.repository.root:t.url&&(e+=":"+t.url),e}async loadStoredAuths(){this.lastPromptAuth&&await this.lastPromptAuth;let e=await this.secrets.get(this.getCredentialServiceName());return typeof e>"u"?[]:JSON.parse(e)}async saveAuth(){if(this.canSaveAuth&&this.username&&this.password){let e=await this.secrets.get(this.getCredentialServiceName()),t=[];typeof e=="string"&&(t=JSON.parse(e)),t.push({account:this.username,password:this.password}),await this.secrets.store(this.getCredentialServiceName(),JSON.stringify(t)),this.canSaveAuth=!1}}async promptAuth(){if(this.lastPromptAuth)return this.lastPromptAuth;this.lastPromptAuth=J.commands.executeCommand("svn.promptAuth");let e=await this.lastPromptAuth;return e&&(this.username=e.username,this.password=e.password,this.canSaveAuth=!0),this.lastPromptAuth=void 0,e}onDidSaveTextDocument(e){let t=e.uri.toString(),r=this.conflicts.resourceStates.find(o=>o.resourceUri.toString()===t);if(!r)return;let i=e.getText();/^<{7}[^]+^={7}[^]+^>{7}/m.test(i)||J.commands.executeCommand("svn.resolved",r.resourceUri)}async run(e,t=()=>Promise.resolve(null)){if(this.state!==0)throw new Error("Repository not initialized");let r=async()=>{this._operations.start(e),this._onRunOperation.fire(e);try{let i=await this.retryRun(t),o=e==="StatusRemote";return On(e)||await this.updateModelState(o),i}catch(i){throw i.svnErrorCode===Ve.NotASvnRepository&&(this.state=1),await le(this.workspaceRoot)||await J.commands.executeCommand("svn.close",this),i}finally{this._operations.end(e),this._onDidRunOperation.fire(e)}};return Fg(e)?J.window.withProgress({location:J.ProgressLocation.SourceControl},r):r()}async retryRun(e=()=>Promise.resolve(null)){let t=0,r=[];for(;;)try{t++;let i=await e();return this.saveAuth(),i}catch(i){let o=i;if(o.svnErrorCode===Ve.RepositoryIsLocked&&t<=10)await Zo(Math.pow(t,2)*50);else if(o.svnErrorCode===Ve.AuthorizationFailed&&t<=1+r.length){t===1&&(r=await this.loadStoredAuths());let s=r.length-1;typeof r[s]<"u"&&(this.username=r[s].account,this.password=r[s].password)}else if(o.svnErrorCode===Ve.AuthorizationFailed&&t<=3+r.length){if(!await this.promptAuth())throw i}else throw i}}dispose(){this.disposables=Ie(this.disposables)}};H([ge],Re.prototype,"onDidChangeOperations",1),H([Ne(1e3)],Re.prototype,"onDidAnyFileChanged",1),H([Ne(1e3)],Re.prototype,"actionForDeletedFiles",1),H([Ne(1e3)],Re.prototype,"updateRemoteChangedFiles",1),H([Ne(1e3)],Re.prototype,"eventuallyUpdateWhenIdleAndWait",1),H([ur],Re.prototype,"updateWhenIdleAndWait",1),H([ur,ac("updateModelState")],Re.prototype,"updateModelState",1),H([ur],Re.prototype,"status",1);function Ug(n){let e;switch(n){case"A":e="status-added";break;case"D":e="status-deleted";break;case"M":e="status-modified";break;case"R":e="status-renamed";break}if(e!==void 0)return Co(e)}var Lo=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new G.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.logCache=new Map;this._dispose=[];this.refresh(),this._dispose.push(G.window.registerTreeDataProvider("repolog",this),G.commands.registerCommand("svn.repolog.copymsg",async t=>Pr("msg",t)),G.commands.registerCommand("svn.repolog.copyrevision",async t=>Pr("revision",t)),G.commands.registerCommand("svn.repolog.addrepolike",this.addRepolikeGui,this),G.commands.registerCommand("svn.repolog.remove",this.removeRepo,this),G.commands.registerCommand("svn.repolog.openFileRemote",this.openFileRemoteCmd,this),G.commands.registerCommand("svn.repolog.openDiff",this.openDiffCmd,this),G.commands.registerCommand("svn.repolog.openFileLocal",this.openFileLocal,this),G.commands.registerCommand("svn.repolog.refresh",this.refresh,this),this.sourceControlManager.onDidChangeRepository(async t=>this.refresh()))}getCached(e){let t=He(e);return t.data instanceof mn?He(this.logCache.get(t.data.toString())):this.getCached(t.parent)}dispose(){Ie(this._dispose)}removeRepo(e){this.logCache.delete(e.data.toString()),this.refresh()}async addRepolike(e,t){let r={entries:[],isComplete:!1,svnTarget:{},repo:{},persisted:{commitFrom:t,userAdded:!0},order:this.logCache.size};if(this.logCache.has(e)){G.window.showWarningMessage("This path is already added");return}let i=this.sourceControlManager.getRepository(e);if(i===null)try{let s;if(e.startsWith("^")){let c=this.sourceControlManager.getRepository(He(G.workspace.workspaceFolders)[0].uri);if(!c)throw new Error("No repository in workspace root");let u=await c.getInfo(e);s=G.Uri.parse(u.url)}else s=G.Uri.parse(e);if(t!=="HEAD"&&isNaN(parseInt(t,10)))throw new Error("erroneous revision");let a=await this.sourceControlManager.getRemoteRepository(s);r.repo=a,r.svnTarget=s}catch(s){G.window.showWarningMessage("Failed to add repo: "+(s instanceof Error?s.message:""));return}else try{let s=await i.getInfo(e,t);r.repo=i,r.svnTarget=G.Uri.parse(s.url),r.persisted.baseRevision=parseInt(s.revision,10)}catch{G.window.showErrorMessage("Failed to resolve svn path");return}let o=r.svnTarget.toString(!0);if(this.logCache.has(o)){G.window.showWarningMessage("Repository with this name already exists");return}this.logCache.set(o,r),this._onDidChangeTreeData.fire(void 0)}addRepolikeGui(){let e=G.window.createInputBox();e.prompt="Enter SVN URL or local path",e.onDidAccept(async()=>{let t=e.value;if(!Gt.isAbsolute(t)&&G.workspace.workspaceFolders&&!t.startsWith("^")&&!/^[a-z]+?:\/\//.test(t))for(let i of G.workspace.workspaceFolders){let o=Gt.join(i.uri.fsPath,t);if(await le(o)){t=o;break}}e.dispose();let r=G.window.createInputBox();r.prompt="Enter starting revision (optional)",r.onDidAccept(async()=>{let i=r.value;return r.dispose(),this.addRepolike(t,i||"HEAD")},void 0),r.show()}),e.show()}async openFileRemoteCmd(e){let t=e.data,r=this.getCached(e),i=r.repo.getPathNormalizer().parse(t._);if(await qa(i,!1)===!1)return;let o=e.parent.data;return Or(r.repo,i.remoteFullPath,o.revision)}openFileLocal(e){let t=e.data,i=this.getCached(e).repo.getPathNormalizer().parse(t._);qa(i,!0)&&G.commands.executeCommand("vscode.open",He(i.localFullPath))}async openDiffCmd(e){let t=e.data,r=this.getCached(e),i=e.parent.data,o=r.repo.getPathNormalizer().parse(t._).remoteFullPath,s,a=await r.repo.log(i.revision,"1",2,o);if(a.length===2)s=a[1];else{G.window.showWarningMessage("Cannot find previous commit");return}return nr(r.repo,o,s.revision,i.revision)}async refresh(e,t){if(e===void 0){for(let[r,i]of this.logCache)i.persisted.userAdded||this.logCache.delete(r);for(let r of this.sourceControlManager.repositories){let i=r.branchRoot,o=i.toString(!0),s={commitFrom:"HEAD",baseRevision:parseInt(r.repository.info.revision,10)},a=this.logCache.get(o);a&&(s=a.persisted),this.logCache.set(o,{entries:[],isComplete:!1,repo:r,svnTarget:i,persisted:s,order:this.logCache.size})}}else if(e.kind===1){let r=this.getCached(e);t?await Nr(r):(r.entries=[],r.isComplete=!1)}this._onDidChangeTreeData.fire(e)}async getTreeItem(e){let t;if(e.kind===1){let r=e.data,i=this.getCached(e);t=new G.TreeItem(r.toString(),G.TreeItemCollapsibleState.Collapsed),i.persisted.userAdded?(t.label="\u2218 "+t.label,t.contextValue="userrepo"):t.contextValue="repo",i.repo instanceof Re?t.iconPath=new G.ThemeIcon("folder-opened"):t.iconPath=new G.ThemeIcon("repo");let o=i.persisted.commitFrom||"HEAD";t.tooltip=`${r} since ${o}`}else if(e.kind===2){let r=e.data;t=new G.TreeItem(Ro(r),G.TreeItemCollapsibleState.Collapsed),t.description=Do(r),t.tooltip=To(r),t.iconPath=So(r.author),t.contextValue="commit"}else if(e.kind===3){let r=e.data,i=Gt.basename(r._);t=new G.TreeItem(i,G.TreeItemCollapsibleState.None),t.description=Gt.dirname(r._);let s=this.getCached(e).repo.getPathNormalizer();t.tooltip=s.parse(r._).relativeFromBranch,t.iconPath=Ug(r.action),t.contextValue="diffable",t.command={command:"svn.repolog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Unknown tree elem");return t}async getChildren(e){if(e===void 0)return Tr(Array.from(this.logCache.entries()).sort(([t,r],[i,o])=>r.persisted.userAdded!==o.persisted.userAdded?r.persisted.userAdded?1:-1:r.order-o.order).map(([t,r])=>new mn(t)),1);if(e.kind===1){let t=gn(),r=this.getCached(e),i=r.entries;i.length===0&&await Nr(r);let o=Tr(i,2,e);if(Io(r,i,o),!r.isComplete){let s=new G.TreeItem(`Load another ${t} revisions`);s.tooltip="Paging size may be adjusted using log.length setting",s.command={command:"svn.repolog.refresh",arguments:[e,!0],title:"refresh element"},s.iconPath=new G.ThemeIcon("unfold"),o.push({kind:4,data:s})}return o}else if(e.kind===2){let t=e.data;return Tr(t.paths,3,e)}return[]}};var ir=V(require("path")),pe=require("vscode");var mp=require("vscode");var Mo=class n{constructor(e){this.repo=e;this.info=e.info}static async open(e,t){let r=await e.open(t.toString(!0),"");return new n(r)}getPathNormalizer(){return new Vt(this.info)}get branchRoot(){return mp.Uri.parse(this.info.url)}async log(e,t,r,i){return this.repo.log(e,t,r,i)}async show(e,t){return this.repo.show(e,t)}};var In=class{constructor(e,t,r){this._svn=e;this.extensionContact=r;this._onDidOpenRepository=new pe.EventEmitter;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new pe.EventEmitter;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidChangeRepository=new pe.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeStatusRepository=new pe.EventEmitter;this.onDidChangeStatusRepository=this._onDidChangeStatusRepository.event;this.openRepositories=[];this.disposables=[];this.enabled=!1;this.possibleSvnRepositoryPaths=new Set;this.ignoreList=[];this.maxDepth=0;this._onDidChangeState=new pe.EventEmitter;this.onDidchangeState=this._onDidChangeState.event;this._state="uninitialized";if(t!==0)throw new Error("Unsopported policy");return this.enabled=$.get("enabled")===!0,this.configurationChangeDisposable=pe.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this),(async()=>(this.enabled&&await this.enable(),this))()}get state(){return this._state}setState(e){this._state=e,this._onDidChangeState.fire(e)}get isInitialized(){return this._state==="initialized"?Promise.resolve():Yt(me(this.onDidchangeState,e=>e==="initialized"))}get repositories(){return this.openRepositories.map(e=>e.repository)}get svn(){return this._svn}openRepositoriesSorted(){return this.openRepositories.sort((e,t)=>t.repository.workspaceRoot.length-e.repository.workspaceRoot.length)}onDidChangeConfiguration(){let e=$.get("enabled")===!0;this.maxDepth=$.get("multipleFolders.depth",0),e!==this.enabled&&(this.enabled=e,e?this.enable():this.disable())}async enable(){$.get("multipleFolders.enabled",!1)&&(this.maxDepth=$.get("multipleFolders.depth",0),this.ignoreList=$.get("multipleFolders.ignore",[])),pe.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,this.disposables);let t=pe.workspace.createFileSystemWatcher("**");this.disposables.push(t);let r=st(t.onDidChange,t.onDidCreate,t.onDidDelete);me(r,o=>o.scheme==="file"&&!this.getRepository(o))(this.onPossibleSvnRepositoryChange,this,this.disposables),this.setState("initialized"),await this.scanWorkspaceFolders()}onPossibleSvnRepositoryChange(e){let t=e.fsPath.replace(/\.svn.*$/,"");this.eventuallyScanPossibleSvnRepository(t)}eventuallyScanPossibleSvnRepository(e){this.possibleSvnRepositoryPaths.add(e),this.eventuallyScanPossibleSvnRepositories()}eventuallyScanPossibleSvnRepositories(){for(let e of this.possibleSvnRepositoryPaths)this.tryOpenRepository(e,1);this.possibleSvnRepositoryPaths.clear()}scanExternals(e){$.get("detectExternals")===!0&&e.statusExternal.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}scanIgnored(e){$.get("detectIgnored")===!0&&e.statusIgnored.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}disable(){this.repositories.forEach(e=>e.dispose()),this.openRepositories=[],this.possibleSvnRepositoryPaths.clear(),this.disposables=Ie(this.disposables)}async onDidChangeWorkspaceFolders({added:e,removed:t}){let r=e.filter(o=>!this.getOpenRepository(o.uri)),i=t.map(o=>this.getOpenRepository(o.uri.fsPath)).filter(o=>!!o).filter(o=>!(pe.workspace.workspaceFolders||[]).some(s=>o.repository.workspaceRoot.startsWith(s.uri.fsPath)));r.forEach(o=>this.tryOpenRepository(o.uri.fsPath)),i.forEach(o=>o.repository.dispose())}async scanWorkspaceFolders(){for(let e of pe.workspace.workspaceFolders||[]){let t=e.uri.fsPath;await this.tryOpenRepository(t)}}async tryOpenRepository(e,t=0){if(this.getRepository(e))return;if(await es(e,t===0)){let o=pe.workspace.getConfiguration("svn",pe.Uri.file(e));if(new Set((o.get("ignoreRepositories")||[]).map(a=>at(a))).has(at(e)))return;try{let a=await this.svn.getRepositoryRoot(e),c=new Re(await this.svn.open(a,e),this.extensionContact.secrets);this.open(c)}catch(a){if(a instanceof Tt&&a.svnErrorCode===Ve.WorkingCopyIsTooOld){await pe.commands.executeCommand("svn.upgrade",e);return}console.error(a)}return}let i=t+1;if(i<=this.maxDepth){let o=[];try{o=await zt(e)}catch{return}for(let s of o){let a=e+"/"+s,c;try{c=await wt(a)}catch{continue}c.isDirectory()&&!er(a,this.ignoreList,{dot:!0})&&await this.tryOpenRepository(a,i)}}}async getRemoteRepository(e){return Mo.open(this.svn,e)}getRepository(e){let t=this.getOpenRepository(e);return t&&t.repository?t.repository:null}getOpenRepository(e){if(e){if(e instanceof Re)return this.openRepositories.find(t=>t.repository===e);if(e.repository instanceof Re)return this.openRepositories.find(t=>t.repository===e.repository);if(typeof e=="string"&&(e=pe.Uri.file(e)),e instanceof pe.Uri)return this.openRepositoriesSorted().find(t=>{if(!Pe(t.repository.workspaceRoot,e.fsPath))return!1;for(let r of t.repository.statusExternal){let i=ir.join(t.repository.workspaceRoot,r.path);if(Pe(i,e.fsPath))return!1}for(let r of t.repository.statusIgnored){let i=ir.join(t.repository.workspaceRoot,r.path);if(Pe(i,e.fsPath))return!1}return!0});for(let t of this.openRepositories){let r=t.repository;if(e===r.sourceControl||e===r.changes)return t}}}async getRepositoryFromUri(e){for(let t of this.openRepositoriesSorted()){let r=t.repository;if(Pe(r.workspaceRoot,e.fsPath))try{let i=at(e.fsPath);return await r.info(i),r}catch{}}return null}open(e){let r=me(e.onDidChangeState,u=>u===1)(()=>a()),i=e.onDidChangeRepository(u=>this._onDidChangeRepository.fire({repository:e,uri:u})),o=e.onDidChangeStatus(()=>{this._onDidChangeStatusRepository.fire(e)}),s=e.onDidChangeStatus(()=>{this.scanExternals(e),this.scanIgnored(e)});this.scanExternals(e),this.scanIgnored(e);let a=()=>{r.dispose(),i.dispose(),o.dispose(),s.dispose(),e.dispose(),this.openRepositories=this.openRepositories.filter(u=>u!==c),this._onDidCloseRepository.fire(e)},c={repository:e,dispose:a};this.openRepositories.push(c),this._onDidOpenRepository.fire(e)}close(e){let t=this.getOpenRepository(e);t&&t.dispose()}async pickRepository(){if(this.openRepositories.length===0)throw new Error("There are no available repositories");let e=this.repositories.map(i=>({label:ir.basename(i.root),repository:i})),r=await pe.window.showQuickPick(e,{placeHolder:"Choose a repository"});return r&&r.repository}async upgradeWorkingCopy(e){try{return(await this.svn.exec(e,["upgrade"])).exitCode===0}catch(t){console.log(t)}return!1}dispose(){this.disable(),this.configurationChangeDisposable.dispose()}};H([Ne(500)],In.prototype,"eventuallyScanPossibleSvnRepositories",1);var Ar=V(require("child_process")),gp=V(require("path")),Uo=V(ln());var Fo=class{findSvn(e){return(e?this.findSpecificSvn(e):Promise.reject(null)).then(void 0,()=>{switch(process.platform){case"darwin":return this.findSvnDarwin();case"win32":return this.findSvnWin32();default:return this.findSpecificSvn("svn")}}).then(r=>this.checkSvnVersion(r)).then(null,()=>Promise.reject(new Error("Svn installation not found.")))}findSvnWin32(){return this.findSystemSvnWin32(process.env.ProgramW6432).then(void 0,()=>this.findSystemSvnWin32(process.env["ProgramFiles(x86)"])).then(void 0,()=>this.findSystemSvnWin32(process.env.ProgramFiles)).then(void 0,()=>this.findSpecificSvn("svn"))}findSystemSvnWin32(e){return e?this.findSpecificSvn(gp.join(e,"TortoiseSVN","bin","svn.exe")):Promise.reject("Not found")}findSvnDarwin(){return new Promise((e,t)=>{Ar.exec("which svn",(r,i)=>{if(r)return t("svn not found");let o=i.toString().replace(/^\s+|\s+$/g,"");function s(a){Ar.exec("svn --version --quiet",(c,u)=>c?t("svn not found"):e({path:a,version:u.trim()}))}if(o!=="/usr/bin/svn")return s(o);Ar.exec("xcode-select -p",a=>{if(a&&a.code===2)return t("svn not found");s(o)})})})}findSpecificSvn(e){return new Promise((t,r)=>{let i=[],o=Ar.spawn(e,["--version","--quiet"]);o.stdout.on("data",s=>i.push(s)),o.on("error",Hu(r)),o.on("close",s=>s?r(new Error("Not found")):t({path:e,version:Buffer.concat(i).toString("utf8").trim()}))})}checkSvnVersion(e){return new Promise((t,r)=>{let i=e.version.replace(/^(\d+\.\d+\.\d+).*/,"$1");Uo.valid(i)?Uo.gte(i,"1.6.0")?t(e):r(new Error("Required svn version must be >= 1.6")):r(new Error("Invalid svn version"))})}};var Lr=require("vscode");var yp=V(require("path")),Bo=require("vscode");var $o=require("vscode");var ko=require("vscode"),Sn=class{getTreeItem(){return new ko.TreeItem("No Incoming Changes",ko.TreeItemCollapsibleState.None)}async getChildren(){return[]}};var Dn=class{constructor(e){this.repository=e}getTreeItem(){let e=new $o.TreeItem("Incoming Changes",$o.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("download","dark"),light:Et("download","light")},e}async getChildren(){if(!this.repository.remoteChanges)return[];let e=this.repository.remoteChanges.resourceStates.map(t=>new qe(t.resourceUri,t.type,this.repository));return e.length===0?[new Sn]:e}};var Rn=class{constructor(e,t){this.repository=e;this.svnProvider=t;e.onDidChangeStatus(()=>{this.svnProvider.update(this)})}get label(){return yp.basename(this.repository.workspaceRoot)}getTreeItem(){let e=new Bo.TreeItem(this.label,Bo.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("repo","dark"),light:Et("repo","light")},e}async getChildren(){return[new Dn(this.repository)]}};var Tn=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new Lr.EventEmitter;this._dispose=[];this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(Lr.window.registerTreeDataProvider("svn",this),Lr.commands.registerCommand("svn.treeview.refreshProvider",()=>this.refresh()))}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e.getTreeItem()}async getChildren(e){return!this.sourceControlManager||this.sourceControlManager.openRepositories.length===0?Promise.resolve([]):e?e.getChildren():this.sourceControlManager.openRepositories.map(r=>new Rn(r.repository,this))}update(e){this._onDidChangeTreeData.fire(e)}dispose(){Ie(this._dispose)}};var or=require("vscode");var qo=class{constructor(e){this.model=e;this._dispose=[];this._onDidChangeTreeData=new or.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(or.window.registerTreeDataProvider("branchchanges",this),or.commands.registerCommand("svn.branchchanges.openDiff",this.openDiffCmd,this),or.commands.registerCommand("svn.branchchanges.refresh",()=>this._onDidChangeTreeData.fire(void 0),this),this.model.onDidChangeRepository(()=>this._onDidChangeTreeData.fire(void 0)))}dispose(){Ie(this._dispose)}getTreeItem(e){let t="";e.item==="added"?t="status-added":e.item==="deleted"?t="status-deleted":e.item==="modified"&&(t="status-modified");let r=Co(t);return{label:e.localPath.fsPath,command:{command:"svn.branchchanges.openDiff",title:"Open diff",arguments:[e]},iconPath:r,tooltip:`${e.oldPath.fsPath.replace(e.repo.fsPath,"")}@r${e.oldRevision} \u2192 ${e.newPath.fsPath.replace(e.repo.fsPath,"")}@r${e.newRevision}`}}getChildren(e){if(e!==void 0)return Promise.resolve([]);let t=[];for(let r of this.model.repositories)t.push(r.getChanges());return Promise.all(t).then(r=>r.reduce((i,o)=>i.concat(o),[]))}async openDiffCmd(e){let t=await this.model.getRemoteRepository(e.repo);if(e.item==="modified")return nr(t,e.oldPath,e.oldRevision,e.newRevision,e.newPath);if(e.item==="added")return Or(t,e.newPath,e.newRevision)}};var wp=V(ln());var jo=class{constructor(e){let t=wp.satisfies(e,">= 1.9");Ot("isSvn19orGreater",t)}dispose(){}};var bp=V(ln());var Xo=class{constructor(e){let t=bp.satisfies(e,">= 1.8");Ot("isSvn18orGreater",t)}dispose(){}};var Ae=require("vscode");var kg=1e3*60*3,$g=1e3*60*5,Mr=class{constructor(e){this.sourceControlManager=e;this.disposables=[];this.cache=new Map;this._onDidChangeFile=new Ae.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event;this.changedRepositoryRoots=new Set;this.disposables.push(e.onDidChangeRepository(this.onDidChangeRepository,this),Ae.workspace.registerFileSystemProvider("svn",this,{isReadonly:!0,isCaseSensitive:!0})),setInterval(()=>this.cleanup(),$g)}onDidChangeRepository({repository:e}){this.changedRepositoryRoots.add(e.root),this.eventuallyFireChangeEvents()}eventuallyFireChangeEvents(){this.fireChangeEvents()}async fireChangeEvents(){if(!Ae.window.state.focused){let t=me(Ae.window.onDidChangeWindowState,r=>r.focused);await Yt(t)}let e=[];for(let{uri:t}of this.cache.values()){let r=t.fsPath;for(let i of this.changedRepositoryRoots)if(Pe(i,r)){e.push({type:Ae.FileChangeType.Changed,uri:t});break}}e.length>0&&this._onDidChangeFile.fire(e),this.changedRepositoryRoots.clear()}watch(){return oc}async stat(e){await this.sourceControlManager.isInitialized;let{fsPath:t}=At(e),r=this.sourceControlManager.getRepository(t);if(!r)throw Ae.FileSystemError.FileNotFound;let i=0,o=new Date().getTime();try{let s=await r.list(t);s.length&&(i=Number(s[0].size),o=Date.parse(s[0].commit.date))}catch(s){console.error("Failed to list SVN file:",s)}return{type:Ae.FileType.File,size:i,mtime:o,ctime:0}}readDirectory(){throw new Error("readDirectory is not implemented")}createDirectory(){throw new Error("createDirectory is not implemented")}async readFile(e){await this.sourceControlManager.isInitialized;let{fsPath:t,extra:r,action:i}=At(e),o=this.sourceControlManager.getRepository(t);if(!o)throw Ae.FileSystemError.FileNotFound();let s=e.toString(),a=new Date().getTime(),c={uri:e,timestamp:a};this.cache.set(s,c);try{if(i==="SHOW")return await o.showBuffer(t,r.ref);if(i==="LOG")return await o.plainLogBuffer();if(i==="LOG_REVISION"&&r.revision)return await o.plainLogByRevisionBuffer(r.revision);if(i==="LOG_SEARCH"&&r.search)return await o.plainLogByTextBuffer(r.search);if(i==="PATCH")return console.log("here"),await o.patchBuffer([t])}catch(u){console.error("Failed to read SVN file:",u)}return new Uint8Array(0)}writeFile(){throw new Error("writeFile is not implemented")}delete(){throw new Error("delete is not implemented")}rename(){throw new Error("rename is not implemented")}cleanup(){let e=new Date().getTime(),t=new Map;for(let r of this.cache.values()){let{fsPath:i}=At(r.uri);(Ae.workspace.textDocuments.filter(s=>s.uri.scheme==="file").some(s=>ic(s.uri.fsPath,i))||e-r.timestamp<kg)&&t.set(r.uri.toString(),r)}this.cache=t}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(1100)],Mr.prototype,"eventuallyFireChangeEvents",1),H([ur],Mr.prototype,"fireChangeEvents",1);async function Bg(n,e,t){console.log("SVN Extension: init() started");let r=$.get("path"),i=new Fo;console.log("SVN Extension: Finding SVN executable...");let o=await i.findSvn(r);console.log(`SVN Extension: Found SVN ${o.version} at ${o.path}`);let s=new xi({svnPath:o.path,version:o.version}),a=await new In(s,0,n);console.log("SVN Extension: Registering commands..."),ip(a,t),console.log("SVN Extension: Creating providers..."),t.push(a,jt,new Mr(a),new Tn(a),new Lo(a),new Po(a),new qo(a),new hn(a),new xn(a),new Xo(o.version),new jo(o.version)),e.appendLine(`Using svn "${o.version}" from "${o.path}"`),console.log("SVN Extension: Providers created successfully");let c=u=>e.append(u);s.onOutput.addListener("log",c),t.push(Be(()=>s.onOutput.removeListener("log",c))),t.push(Be(Ku)),console.log("SVN Extension: init() complete")}async function qg(n,e){let t=ze.window.createOutputChannel("Svn");ze.commands.registerCommand("svn.showOutput",()=>t.show()),e.push(t),$.get("showOutput")&&t.show();let i=async()=>{try{await Bg(n,t,e)}catch(o){let s=o;if(!/Svn installation not found/.test(s.message||""))throw o;if($.get("ignoreMissingSvnWarning")===!0)return;console.warn(s.message),t.appendLine(s.message),t.show();let c="Find SVN executable",u="Download SVN",d="Don't Show Again",m=await ze.window.showWarningMessage("SVN not found. Install it or configure it using the 'svn.path' setting.",c,u,d);if(m===c){let x;vp.sep==="\\"&&(x={svn:["exe","bat"]});let f=await ze.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:x});if(f&&f[0]){let y=f[0].fsPath;t.appendLine(`Updated "svn.path" with "${y}"`),await $.update("path",y),await i()}}else m===u?ze.commands.executeCommand("vscode.open",ze.Uri.parse("https://subversion.apache.org/packages.html")):m===d&&await $.update("ignoreMissingSvnWarning",!0)}};await i()}async function jg(n){console.log("SVN Extension: activate() called");let e=[];n.subscriptions.push(new ze.Disposable(()=>ze.Disposable.from(...e).dispose())),await qg(n,e).catch(t=>{console.error("SVN Extension: Activation failed",t),ze.window.showErrorMessage(`SVN Extension activation failed: ${t.message||t}`)}),console.log("SVN Extension: activation complete")}function Xg(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/
//# sourceMappingURL=extension.js.map
