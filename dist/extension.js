"use strict";var bp=Object.create;var kr=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var vp=Object.getOwnPropertyNames;var Ep=Object.getPrototypeOf,Cp=Object.prototype.hasOwnProperty;var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Wa=(n,e)=>{for(var t in e)kr(n,t,{get:e[t],enumerable:!0})},On=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vp(e))!Cp.call(n,i)&&i!==t&&kr(n,i,{get:()=>e[i],enumerable:!(r=Xa(e,i))||r.enumerable});return n},js=(n,e,t)=>(On(n,e,"default"),t&&On(t,e,"default")),V=(n,e,t)=>(t=n!=null?bp(Ep(n)):{},On(e||!n||!n.__esModule?kr(t,"default",{value:n,enumerable:!0}):t,n)),Ip=n=>On(kr({},"__esModule",{value:!0}),n),H=(n,e,t,r)=>{for(var i=r>1?void 0:r?Xa(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&kr(e,t,i),i};var hc=F((no,ro)=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});var jn;no.default=()=>{if(typeof ro=="object"&&typeof ro.exports=="object")return jn=jn||require("fs"),jn;throw new Error("File system is not available")}});var Kt=F(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.default=(n,e,t)=>({confidence:t,name:e.name(n),lang:e.language?e.language():void 0})});var dc=F(qr=>{"use strict";var Up=qr&&qr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qr,"__esModule",{value:!0});var xc=Up(Kt()),so=class{name(){return"ASCII"}match(e){let t=e.rawInput;for(let r=0;r<e.rawLen;r++){let i=t[r];if(i<32||i>126)return(0,xc.default)(e,this,0)}return(0,xc.default)(e,this,100)}};qr.default=so});var mc=F(jr=>{"use strict";var $p=jr&&jr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jr,"__esModule",{value:!0});var Bp=$p(Kt()),oo=class{name(){return"UTF-8"}match(e){let t=!1,r=0,i=0,s=0,o,a=e.rawInput;e.rawLen>=3&&(a[0]&255)==239&&(a[1]&255)==187&&(a[2]&255)==191&&(t=!0);for(let c=0;c<e.rawLen;c++){let u=a[c];if(u&128){if((u&224)==192)s=1;else if((u&240)==224)s=2;else if((u&248)==240)s=3;else{if(i++,i>5)break;s=0}for(;c++,!(c>=e.rawLen);){if((a[c]&192)!=128){i++;break}if(--s==0){r++;break}}}}if(o=0,t&&i==0)o=100;else if(t&&r>i*10)o=80;else if(r>3&&i==0)o=100;else if(r>0&&i==0)o=80;else if(r==0&&i==0)o=10;else if(r>i*10)o=25;else return null;return(0,Bp.default)(e,this,o)}};jr.default=oo});var gc=F(Ke=>{"use strict";var qp=Ke&&Ke.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.UTF_32LE=Ke.UTF_32BE=Ke.UTF_16LE=Ke.UTF_16BE=void 0;var fo=qp(Kt()),ao=class{name(){return"UTF-16BE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==254&&(t[1]&255)==255?(0,fo.default)(e,this,100):null}};Ke.UTF_16BE=ao;var co=class{name(){return"UTF-16LE"}match(e){let t=e.rawInput;return t.length>=2&&(t[0]&255)==255&&(t[1]&255)==254?t.length>=4&&t[2]==0&&t[3]==0?null:(0,fo.default)(e,this,100):null}};Ke.UTF_16LE=co;var Xn=class{name(){return"UTF-32"}getChar(e,t){return-1}match(e){let t=0,r=0,i=!1,s=0,o=e.rawLen/4*4,a=e.rawInput;if(o==0)return null;this.getChar(a,0)==65279&&(i=!0);for(let c=0;c<o;c+=4){let u=this.getChar(a,c);u<0||u>=1114111||u>=55296&&u<=57343?r+=1:t+=1}return i&&r==0?s=100:i&&t>r*10?s=80:t>3&&r==0?s=100:t>0&&r==0?s=80:t>r*10&&(s=25),s==0?null:(0,fo.default)(e,this,s)}},uo=class extends Xn{name(){return"UTF-32BE"}getChar(e,t){return(e[t+0]&255)<<24|(e[t+1]&255)<<16|(e[t+2]&255)<<8|e[t+3]&255}};Ke.UTF_32BE=uo;var lo=class extends Xn{name(){return"UTF-32LE"}getChar(e,t){return(e[t+3]&255)<<24|(e[t+2]&255)<<16|(e[t+1]&255)<<8|e[t+0]&255}};Ke.UTF_32LE=lo});var wc=F(Ue=>{"use strict";var jp=Ue&&Ue.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.gb_18030=Ue.euc_kr=Ue.euc_jp=Ue.big5=Ue.sjis=void 0;var Xp=jp(Kt());function Wp(n,e){let t=(r,i,s,o)=>{if(o<s)return-1;let a=Math.floor(s+o>>>1);return i>r[a]?t(r,i,a+1,o):i<r[a]?t(r,i,s,a-1):a};return t(n,e,0,n.length-1)}var po=class{constructor(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1}reset(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1}nextByte(e){return this.nextIndex>=e.rawLen?(this.done=!0,-1):e.rawInput[this.nextIndex++]&255}},Zt=class{constructor(){this.commonChars=[]}name(){return"mbcs"}match(e){let t=0,r=0,i=0,s=0,o=0,a=new po;e:{for(a.reset();this.nextChar(a,e);){if(s++,a.error)i++;else{let c=a.charValue&4294967295;c>255&&(t++,this.commonChars!=null&&Wp(this.commonChars,c)>=0&&r++)}if(i>=2&&i*5>=t)break e}if(t<=10&&i==0){t==0&&s<10?o=0:o=10;break e}if(t<20*i){o=0;break e}if(this.commonChars==null)o=30+t-20*i,o>100&&(o=100);else{let u=90/Math.log(t/4);o=Math.floor(Math.log(r+1)*u+10),o=Math.min(o,100)}}return o==0?null:(0,Xp.default)(e,this,o)}nextChar(e,t){return!0}},ho=class extends Zt{constructor(){super(...arguments),this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314]}name(){return"Shift_JIS"}language(){return"ja"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r>160&&r<=223)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=r<<8|i,i>=64&&i<=127||i>=128&&i<=255||(e.error=!0),!0)}};Ue.sjis=ho;var xo=class extends Zt{constructor(){super(...arguments),this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271]}name(){return"Big5"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=e.charValue=e.nextByte(t);if(r<0)return!1;if(r<=127||r==255)return!0;let i=e.nextByte(t);return i<0?!1:(e.charValue=e.charValue<<8|i,(i<64||i==127||i==255)&&(e.error=!0),!0)}};Ue.big5=xo;function yc(n,e){n.index=n.nextIndex,n.error=!1;let t=0,r=0,i=0;e:{if(t=n.charValue=n.nextByte(e),t<0){n.done=!0;break e}if(t<=141)break e;if(r=n.nextByte(e),n.charValue=n.charValue<<8|r,t>=161&&t<=254){r<161&&(n.error=!0);break e}if(t==142){r<161&&(n.error=!0);break e}t==143&&(i=n.nextByte(e),n.charValue=n.charValue<<8|i,i<161&&(n.error=!0))}return n.done==!1}var mo=class extends Zt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=yc}name(){return"EUC-JP"}language(){return"ja"}};Ue.euc_jp=mo;var go=class extends Zt{constructor(){super(...arguments),this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=yc}name(){return"EUC-KR"}language(){return"ko"}};Ue.euc_kr=go;var yo=class extends Zt{constructor(){super(...arguments),this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]}name(){return"GB18030"}language(){return"zh"}nextChar(e,t){e.index=e.nextIndex,e.error=!1;let r=0,i=0,s=0,o=0;e:{if(r=e.charValue=e.nextByte(t),r<0){e.done=!0;break e}if(r<=128)break e;if(i=e.nextByte(t),e.charValue=e.charValue<<8|i,r>=129&&r<=254){if(i>=64&&i<=126||i>=80&&i<=254)break e;if(i>=48&&i<=57&&(s=e.nextByte(t),s>=129&&s<=254&&(o=e.nextByte(t),o>=48&&o<=57))){e.charValue=e.charValue<<16|s<<8|o;break e}e.error=!0;break e}}return e.done==!1}};Ue.gb_18030=yo});var vc=F(ae=>{"use strict";var Vp=ae&&ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ae,"__esModule",{value:!0});ae.KOI8_R=ae.windows_1256=ae.windows_1251=ae.ISO_8859_9=ae.ISO_8859_8=ae.ISO_8859_7=ae.ISO_8859_6=ae.ISO_8859_5=ae.ISO_8859_2=ae.ISO_8859_1=void 0;var bc=Vp(Kt()),Gp=16777215,Wn=class{constructor(e,t){this.byteIndex=0,this.ngram=0,this.ngramCount=0,this.hitCount=0,this.spaceChar=32,this.ngramList=e,this.byteMap=t}search(e,t){let r=0;return e[r+32]<=t&&(r+=32),e[r+16]<=t&&(r+=16),e[r+8]<=t&&(r+=8),e[r+4]<=t&&(r+=4),e[r+2]<=t&&(r+=2),e[r+1]<=t&&(r+=1),e[r]>t&&(r-=1),r<0||e[r]!=t?-1:r}lookup(e){this.ngramCount+=1,this.search(this.ngramList,e)>=0&&(this.hitCount+=1)}addByte(e){this.ngram=(this.ngram<<8)+(e&255)&Gp,this.lookup(this.ngram)}nextByte(e){return this.byteIndex>=e.inputLen?-1:e.inputBytes[this.byteIndex++]&255}parse(e,t){let r,i=!1;for(this.spaceChar=t;(r=this.nextByte(e))>=0;){let o=this.byteMap[r];o!=0&&(o==this.spaceChar&&i||this.addByte(o),i=o==this.spaceChar)}this.addByte(this.spaceChar);let s=this.hitCount/this.ngramCount;return s>.33?98:Math.floor(s*300)}},we=class{constructor(e,t){this.fLang=e,this.fNGrams=t}},zp=n=>Array.isArray(n)&&isFinite(n[0]),Ze=class{constructor(){this.spaceChar=32,this.nGramLang=void 0}ngrams(){return[]}byteMap(){return[]}name(e){return"sbcs"}language(){return this.nGramLang}match(e){this.nGramLang=void 0;let t=this.ngrams();if(zp(t)){let s=new Wn(t,this.byteMap()).parse(e,this.spaceChar);return s<=0?null:(0,bc.default)(e,this,s)}let r=-1;for(let i=t.length-1;i>=0;i--){let s=t[i],a=new Wn(s.fNGrams,this.byteMap()).parse(e,this.spaceChar);a>r&&(r=a,this.nGramLang=s.fLang)}return r<=0?null:(0,bc.default)(e,this,r)}},wo=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[new we("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new we("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new we("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new we("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new we("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new we("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new we("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new we("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new we("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new we("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]}name(e){return e&&e.c1Bytes?"windows-1252":"ISO-8859-1"}};ae.ISO_8859_1=wo;var bo=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]}ngrams(){return[new we("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new we("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new we("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new we("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]}name(e){return e&&e.c1Bytes?"windows-1250":"ISO-8859-2"}};ae.ISO_8859_2=bo;var vo=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]}ngrams(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]}name(){return"ISO-8859-5"}language(){return"ru"}};ae.ISO_8859_5=vo;var Eo=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]}ngrams(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]}name(){return"ISO-8859-6"}language(){return"ar"}};ae.ISO_8859_6=Eo;var Co=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]}ngrams(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]}name(e){return e&&e.c1Bytes?"windows-1253":"ISO-8859-7"}language(){return"el"}};ae.ISO_8859_7=Co;var Io=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]}ngrams(){return[new we("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new we("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]}name(e){return e&&e.c1Bytes?"windows-1255":"ISO-8859-8"}language(){return"he"}};ae.ISO_8859_8=Io;var So=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]}ngrams(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]}name(e){return e&&e.c1Bytes?"windows-1254":"ISO-8859-9"}language(){return"tr"}};ae.ISO_8859_9=So;var Do=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}ngrams(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]}name(){return"windows-1251"}language(){return"ru"}};ae.windows_1251=Do;var Ro=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]}ngrams(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]}name(){return"windows-1256"}language(){return"ar"}};ae.windows_1256=Ro;var To=class extends Ze{byteMap(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}ngrams(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]}name(){return"KOI8-R"}language(){return"ru"}};ae.KOI8_R=To});var Ec=F(ut=>{"use strict";var Hp=ut&&ut.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ut,"__esModule",{value:!0});ut.ISO_2022_CN=ut.ISO_2022_KR=ut.ISO_2022_JP=void 0;var Yp=Hp(Kt()),Xr=class{constructor(){this.escapeSequences=[]}name(){return"ISO_2022"}match(e){let t,r,i,s=0,o=0,a=0,c,u=e.inputBytes,x=e.inputLen;e:for(t=0;t<x;t++){if(u[t]==27){t:for(i=0;i<this.escapeSequences.length;i++){let m=this.escapeSequences[i];if(x-t<m.length)continue t;for(r=1;r<m.length;r++)if(m[r]!=u[t+r])continue t;s++,t+=m.length-1;continue e}o++}(u[t]==14||u[t]==15)&&a++}return s==0?null:(c=(100*s-100*o)/(s+o),s+a<5&&(c-=(5-(s+a))*10),c<=0?null:(0,Yp.default)(e,this,c))}},Po=class extends Xr{constructor(){super(...arguments),this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]}name(){return"ISO-2022-JP"}language(){return"ja"}};ut.ISO_2022_JP=Po;var No=class extends Xr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,67]]}name(){return"ISO-2022-KR"}language(){return"kr"}};ut.ISO_2022_KR=No;var Oo=class extends Xr{constructor(){super(...arguments),this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]}name(){return"ISO-2022-CN"}language(){return"zh"}};ut.ISO_2022_CN=Oo});var Cc=F(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.isByteArray=void 0;var Qp=n=>n==null||typeof n!="object"?!1:isFinite(n.length)&&n.length>=0;Vn.isByteArray=Qp});var Sc=F(ne=>{"use strict";var Kp=ne&&ne.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Zp=ne&&ne.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),zn=ne&&ne.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},n(e)};return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=n(e),i=0;i<r.length;i++)r[i]!=="default"&&Kp(t,e,r[i]);return Zp(t,e),t}}(),Ao=ne&&ne.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ne,"__esModule",{value:!0});ne.detectFileSync=ne.detectFile=ne.analyse=ne.detect=void 0;var Ic=Ao(hc()),Jp=Ao(dc()),eh=Ao(mc()),Gn=zn(gc()),Wr=zn(wc()),lt=zn(vc()),_o=zn(Ec()),th=Cc(),rh=[new eh.default,new Gn.UTF_16BE,new Gn.UTF_16LE,new Gn.UTF_32BE,new Gn.UTF_32LE,new Wr.sjis,new Wr.big5,new Wr.euc_jp,new Wr.euc_kr,new Wr.gb_18030,new _o.ISO_2022_JP,new _o.ISO_2022_KR,new _o.ISO_2022_CN,new lt.ISO_8859_1,new lt.ISO_8859_2,new lt.ISO_8859_5,new lt.ISO_8859_6,new lt.ISO_8859_7,new lt.ISO_8859_8,new lt.ISO_8859_9,new lt.windows_1251,new lt.windows_1256,new lt.KOI8_R,new Jp.default],nh=n=>{let e=(0,ne.analyse)(n);return e.length>0?e[0].name:null};ne.detect=nh;var ih=n=>{if(!(0,th.isByteArray)(n))throw new Error("Input must be a byte array, e.g. Buffer or Uint8Array");let e=[];for(let s=0;s<256;s++)e[s]=0;for(let s=n.length-1;s>=0;s--)e[n[s]&255]++;let t=!1;for(let s=128;s<=159;s+=1)if(e[s]!==0){t=!0;break}let r={byteStats:e,c1Bytes:t,rawInput:n,rawLen:n.length,inputBytes:n,inputLen:n.length};return rh.map(s=>s.match(r)).filter(s=>!!s).sort((s,o)=>o.confidence-s.confidence)};ne.analyse=ih;var sh=(n,e={})=>new Promise((t,r)=>{let i,s=(0,Ic.default)(),o=(c,u)=>{i&&s.closeSync(i),c?r(c):u?t((0,ne.detect)(u)):r(new Error("No error and no buffer received"))},a=(e==null?void 0:e.sampleSize)||0;if(a>0){i=s.openSync(n,"r");let c=Buffer.allocUnsafe(a);s.read(i,c,0,a,e.offset,(u,x)=>{u?o(u,null):(x<a&&(c=c.subarray(0,x)),o(null,c))});return}s.readFile(n,o)});ne.detectFile=sh;var oh=(n,e={})=>{let t=(0,Ic.default)();if(e&&e.sampleSize){let r=t.openSync(n,"r"),i=Buffer.allocUnsafe(e.sampleSize),s=t.readSync(r,i,0,e.sampleSize,e.offset);return s<e.sampleSize&&(i=i.subarray(0,s)),t.closeSync(r),(0,ne.detect)(i)}return(0,ne.detect)(t.readFileSync(n))};ne.detectFileSync=oh;ne.default={analyse:ne.analyse,detect:ne.detect,detectFileSync:ne.detectFileSync,detectFile:ne.detectFile}});var Yn=F(Lo=>{(function(){Lo.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Lo)});var ft=F((Pc,Ft)=>{(function(){var n,e,t,r,i,s,o,a=[].slice,c={}.hasOwnProperty;n=function(){var u,x,m,d,l,w;if(w=arguments[0],l=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,m=l.length;u<m;u++)if(d=l[u],d!=null)for(x in d)c.call(d,x)&&(w[x]=d[x]);return w},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},s=function(u){var x;return!!u&&((x=typeof u)=="function"||x==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var x;if(t(u))return!u.length;for(x in u)if(c.call(u,x))return!1;return!0},o=function(u){var x,m;return s(u)&&(m=Object.getPrototypeOf(u))&&(x=m.constructor)&&typeof x=="function"&&x instanceof x&&Function.prototype.toString.call(x)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Ft.exports.assign=n,Ft.exports.isFunction=i,Ft.exports.isObject=s,Ft.exports.isArray=t,Ft.exports.isEmpty=r,Ft.exports.isPlainObject=o,Ft.exports.getValue=e}).call(Pc)});var Mo=F((Nc,Oc)=>{(function(){var n;Oc.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Nc)});var Lc=F((_c,Ac)=>{(function(){var n;Ac.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(_c)});var kc=F((Mc,Fc)=>{(function(){var n;Fc.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Mc)});var Bc=F((Uc,$c)=>{(function(){var n,e,t;e=Lc(),t=kc(),$c.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,s){return!0},r.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},r}()}).call(Uc)});var fe=F((qc,jc)=>{(function(){jc.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(qc)});var Fo=F((Xc,Wc)=>{(function(){var n,e,t;n=fe(),t=Xe(),Wc.exports=e=function(){function r(i,s,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),s==null)throw new Error("Missing attribute name. "+this.debugInfo(s));this.name=this.stringify.name(s),this.value=this.stringify.attValue(o),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(Xc)});var Qn=F((Vc,Gc)=>{(function(){var n;Gc.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(Vc)});var Kn=F((zc,Hc)=>{(function(){var n,e,t,r,i,s,o,a,c,u=function(m,d){for(var l in d)x.call(d,l)&&(m[l]=d[l]);function w(){this.constructor=m}return w.prototype=d.prototype,m.prototype=new w,m.__super__=d.prototype,m},x={}.hasOwnProperty;c=ft(),a=c.isObject,o=c.isFunction,s=c.getValue,i=Xe(),n=fe(),e=Fo(),r=Qn(),Hc.exports=t=function(m){u(d,m);function d(l,w,E){var P,_,S,v;if(d.__super__.constructor.call(this,l),w==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(w),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,E!=null&&this.attribute(E),l.type===n.Document&&(this.isRoot=!0,this.documentObject=l,l.rootObject=this,l.children)){for(v=l.children,_=0,S=v.length;_<S;_++)if(P=v[_],P.type===n.DocType){P.name=this.name;break}}}return Object.defineProperty(d.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(d.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(d.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),d.prototype.clone=function(){var l,w,E,P;E=Object.create(this),E.isRoot&&(E.documentObject=null),E.attribs={},P=this.attribs;for(w in P)x.call(P,w)&&(l=P[w],E.attribs[w]=l.clone());return E.children=[],this.children.forEach(function(_){var S;return S=_.clone(),S.parent=E,E.children.push(S)}),E},d.prototype.attribute=function(l,w){var E,P;if(l!=null&&(l=s(l)),a(l))for(E in l)x.call(l,E)&&(P=l[E],this.attribute(E,P));else o(w)&&(w=w.apply()),this.options.keepNullAttributes&&w==null?this.attribs[l]=new e(this,l,""):w!=null&&(this.attribs[l]=new e(this,l,w));return this},d.prototype.removeAttribute=function(l){var w,E,P;if(l==null)throw new Error("Missing attribute name. "+this.debugInfo());if(l=s(l),Array.isArray(l))for(E=0,P=l.length;E<P;E++)w=l[E],delete this.attribs[w];else delete this.attribs[l];return this},d.prototype.toString=function(l){return this.options.writer.element(this,this.options.writer.filterOptions(l))},d.prototype.att=function(l,w){return this.attribute(l,w)},d.prototype.a=function(l,w){return this.attribute(l,w)},d.prototype.getAttribute=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l].value:null},d.prototype.setAttribute=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNode=function(l){return this.attribs.hasOwnProperty(l)?this.attribs[l]:null},d.prototype.setAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeAttributeNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNS=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setAttributeNS=function(l,w,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeAttributeNS=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNodeNS=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setAttributeNodeNS=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.hasAttribute=function(l){return this.attribs.hasOwnProperty(l)},d.prototype.hasAttributeNS=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setIdAttribute=function(l,w){return this.attribs.hasOwnProperty(l)?this.attribs[l].isId:w},d.prototype.setIdAttributeNS=function(l,w,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setIdAttributeNode=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isEqualNode=function(l){var w,E,P;if(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.namespaceURI!==this.namespaceURI||l.prefix!==this.prefix||l.localName!==this.localName||l.attribs.length!==this.attribs.length)return!1;for(w=E=0,P=this.attribs.length-1;0<=P?E<=P:E>=P;w=0<=P?++E:--E)if(!this.attribs[w].isEqualNode(l.attribs[w]))return!1;return!0},d}(i)}).call(zc)});var Gr=F((Yc,Qc)=>{(function(){var n,e,t=function(i,s){for(var o in s)r.call(s,o)&&(i[o]=s[o]);function a(){this.constructor=i}return a.prototype=s.prototype,i.prototype=new a,i.__super__=s.prototype,i},r={}.hasOwnProperty;e=Xe(),Qc.exports=n=function(i){t(s,i);function s(o){s.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(o,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(o){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},s}(e)}).call(Yc)});var Zn=F((Kc,Zc)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),t=Gr(),Zc.exports=e=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(c)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},o}(t)}).call(Kc)});var Jn=F((Jc,e0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Gr(),e0.exports=t=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(c)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},o}(e)}).call(Jc)});var ei=F((t0,r0)=>{(function(){var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;r=ft().isObject,t=Xe(),n=fe(),r0.exports=e=function(o){i(a,o);function a(c,u,x,m){var d;a.__super__.constructor.call(this,c),r(u)&&(d=u,u=d.version,x=d.encoding,m=d.standalone),u||(u="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(u),x!=null&&(this.encoding=this.stringify.xmlEncoding(x)),m!=null&&(this.standalone=this.stringify.xmlStandalone(m))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(t0)});var ti=F((n0,i0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),i0.exports=e=function(s){r(o,s);function o(a,c,u,x,m,d){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!x)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!m)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(m.indexOf("#")!==0&&(m="#"+m),!m.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(d&&!m.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(x),d&&(this.defaultValue=this.stringify.dtdAttDefault(d)),this.defaultValueType=m}return o.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},o}(t)}).call(n0)});var ri=F((s0,o0)=>{(function(){var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;r=ft().isObject,t=Xe(),n=fe(),o0.exports=e=function(o){i(a,o);function a(c,u,x,m){if(a.__super__.constructor.call(this,c),x==null)throw new Error("Missing DTD entity name. "+this.debugInfo(x));if(m==null)throw new Error("Missing DTD entity value. "+this.debugInfo(x));if(this.pe=!!u,this.name=this.stringify.name(x),this.type=n.EntityDeclaration,!r(m))this.value=this.stringify.dtdEntityValue(m),this.internal=!0;else{if(!m.pubID&&!m.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(x));if(m.pubID&&!m.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(x));if(this.internal=!1,m.pubID!=null&&(this.pubID=this.stringify.dtdPubID(m.pubID)),m.sysID!=null&&(this.sysID=this.stringify.dtdSysID(m.sysID)),m.nData!=null&&(this.nData=this.stringify.dtdNData(m.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(x))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(s0)});var ni=F((a0,c0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),c0.exports=e=function(s){r(o,s);function o(a,c,u){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return o.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},o}(t)}).call(a0)});var ii=F((u0,l0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),l0.exports=e=function(s){r(o,s);function o(a,c,u){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=n.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},o}(t)}).call(u0)});var si=F((f0,p0)=>{(function(){var n,e,t,r,i,s,o,a,c,u=function(m,d){for(var l in d)x.call(d,l)&&(m[l]=d[l]);function w(){this.constructor=m}return w.prototype=d.prototype,m.prototype=new w,m.__super__=d.prototype,m},x={}.hasOwnProperty;c=ft().isObject,a=Xe(),n=fe(),e=ti(),r=ri(),t=ni(),i=ii(),o=Qn(),p0.exports=s=function(m){u(d,m);function d(l,w,E){var P,_,S,v,p,h;if(d.__super__.constructor.call(this,l),this.type=n.DocType,l.children){for(v=l.children,_=0,S=v.length;_<S;_++)if(P=v[_],P.type===n.Element){this.name=P.name;break}}this.documentObject=l,c(w)&&(p=w,w=p.pubID,E=p.sysID),E==null&&(h=[w,E],E=h[0],w=h[1]),w!=null&&(this.pubID=this.stringify.dtdPubID(w)),E!=null&&(this.sysID=this.stringify.dtdSysID(E))}return Object.defineProperty(d.prototype,"entities",{get:function(){var l,w,E,P,_;for(P={},_=this.children,w=0,E=_.length;w<E;w++)l=_[w],l.type===n.EntityDeclaration&&!l.pe&&(P[l.name]=l);return new o(P)}}),Object.defineProperty(d.prototype,"notations",{get:function(){var l,w,E,P,_;for(P={},_=this.children,w=0,E=_.length;w<E;w++)l=_[w],l.type===n.NotationDeclaration&&(P[l.name]=l);return new o(P)}}),Object.defineProperty(d.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(d.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(d.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),d.prototype.element=function(l,w){var E;return E=new t(this,l,w),this.children.push(E),this},d.prototype.attList=function(l,w,E,P,_){var S;return S=new e(this,l,w,E,P,_),this.children.push(S),this},d.prototype.entity=function(l,w){var E;return E=new r(this,!1,l,w),this.children.push(E),this},d.prototype.pEntity=function(l,w){var E;return E=new r(this,!0,l,w),this.children.push(E),this},d.prototype.notation=function(l,w){var E;return E=new i(this,l,w),this.children.push(E),this},d.prototype.toString=function(l){return this.options.writer.docType(this,this.options.writer.filterOptions(l))},d.prototype.ele=function(l,w){return this.element(l,w)},d.prototype.att=function(l,w,E,P,_){return this.attList(l,w,E,P,_)},d.prototype.ent=function(l,w){return this.entity(l,w)},d.prototype.pent=function(l,w){return this.pEntity(l,w)},d.prototype.not=function(l,w){return this.notation(l,w)},d.prototype.up=function(){return this.root()||this.documentObject},d.prototype.isEqualNode=function(l){return!(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.name!==this.name||l.publicId!==this.publicId||l.systemId!==this.systemId)},d}(a)}).call(f0)});var oi=F((h0,x0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Xe(),x0.exports=t=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(c)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},o}(e)}).call(h0)});var ai=F((d0,m0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Gr(),m0.exports=t=function(s){r(o,s);function o(a,c){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(c)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},o.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(e)}).call(d0)});var ci=F((g0,y0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;n=fe(),e=Gr(),y0.exports=t=function(s){r(o,s);function o(a,c,u){if(o.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},o.prototype.isEqualNode=function(a){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},o}(e)}).call(g0)});var ko=F((w0,b0)=>{(function(){var n,e,t,r=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=Xe(),n=fe(),b0.exports=e=function(s){r(o,s);function o(a){o.__super__.constructor.call(this,a),this.type=n.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return""},o}(t)}).call(w0)});var C0=F((v0,E0)=>{(function(){var n;E0.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(v0)});var D0=F((I0,S0)=>{(function(){S0.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(I0)});var Xe=F((R0,T0)=>{(function(){var n,e,t,r,i,s,o,a,c,u,x,m,d,l,w,E,P,_,S,v={}.hasOwnProperty;S=ft(),_=S.isObject,P=S.isFunction,E=S.isEmpty,w=S.getValue,a=null,t=null,r=null,i=null,s=null,d=null,l=null,m=null,o=null,e=null,x=null,c=null,n=null,T0.exports=u=function(){function p(h){this.parent=h,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Kn(),t=Zn(),r=Jn(),i=ei(),s=si(),d=oi(),l=ai(),m=ci(),o=ko(),e=fe(),x=C0(),c=Qn(),n=D0())}return Object.defineProperty(p.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(p.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(p.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(p.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new x(this.children)),this.childNodeList}}),Object.defineProperty(p.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(p.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(p.prototype,"previousSibling",{get:function(){var h;return h=this.parent.children.indexOf(this),this.parent.children[h-1]||null}}),Object.defineProperty(p.prototype,"nextSibling",{get:function(){var h;return h=this.parent.children.indexOf(this),this.parent.children[h+1]||null}}),Object.defineProperty(p.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(p.prototype,"textContent",{get:function(){var h,y,R,g,D;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(D="",g=this.children,y=0,R=g.length;y<R;y++)h=g[y],h.textContent&&(D+=h.textContent);return D}else return null},set:function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),p.prototype.setParent=function(h){var y,R,g,D,C;for(this.parent=h,h&&(this.options=h.options,this.stringify=h.stringify),D=this.children,C=[],R=0,g=D.length;R<g;R++)y=D[R],C.push(y.setParent(this));return C},p.prototype.element=function(h,y,R){var g,D,C,T,N,O,M,U,A,X,B;if(O=null,y===null&&R==null&&(A=[{},null],y=A[0],R=A[1]),y==null&&(y={}),y=w(y),_(y)||(X=[y,R],R=X[0],y=X[1]),h!=null&&(h=w(h)),Array.isArray(h))for(C=0,M=h.length;C<M;C++)D=h[C],O=this.element(D);else if(P(h))O=this.element(h.apply());else if(_(h)){for(N in h)if(v.call(h,N))if(B=h[N],P(B)&&(B=B.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&N.indexOf(this.stringify.convertAttKey)===0)O=this.attribute(N.substr(this.stringify.convertAttKey.length),B);else if(!this.options.separateArrayItems&&Array.isArray(B)&&E(B))O=this.dummy();else if(_(B)&&E(B))O=this.element(N);else if(!this.options.keepNullNodes&&B==null)O=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(B))for(T=0,U=B.length;T<U;T++)D=B[T],g={},g[N]=D,O=this.element(g);else _(B)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&N.indexOf(this.stringify.convertTextKey)===0?O=this.element(B):(O=this.element(N),O.element(B)):O=this.element(N,B)}else!this.options.keepNullNodes&&R===null?O=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&h.indexOf(this.stringify.convertTextKey)===0?O=this.text(R):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&h.indexOf(this.stringify.convertCDataKey)===0?O=this.cdata(R):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&h.indexOf(this.stringify.convertCommentKey)===0?O=this.comment(R):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&h.indexOf(this.stringify.convertRawKey)===0?O=this.raw(R):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&h.indexOf(this.stringify.convertPIKey)===0?O=this.instruction(h.substr(this.stringify.convertPIKey.length),R):O=this.node(h,y,R);if(O==null)throw new Error("Could not create any elements with: "+h+". "+this.debugInfo());return O},p.prototype.insertBefore=function(h,y,R){var g,D,C,T,N;if(h!=null&&h.type)return C=h,T=y,C.setParent(this),T?(D=children.indexOf(T),N=children.splice(D),children.push(C),Array.prototype.push.apply(children,N)):children.push(C),C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return D=this.parent.children.indexOf(this),N=this.parent.children.splice(D),g=this.parent.element(h,y,R),Array.prototype.push.apply(this.parent.children,N),g},p.prototype.insertAfter=function(h,y,R){var g,D,C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return D=this.parent.children.indexOf(this),C=this.parent.children.splice(D+1),g=this.parent.element(h,y,R),Array.prototype.push.apply(this.parent.children,C),g},p.prototype.remove=function(){var h,y;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return h=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[h,h-h+1].concat(y=[])),this.parent},p.prototype.node=function(h,y,R){var g,D;return h!=null&&(h=w(h)),y||(y={}),y=w(y),_(y)||(D=[y,R],R=D[0],y=D[1]),g=new a(this,h,y),R!=null&&g.text(R),this.children.push(g),g},p.prototype.text=function(h){var y;return _(h)&&this.element(h),y=new l(this,h),this.children.push(y),this},p.prototype.cdata=function(h){var y;return y=new t(this,h),this.children.push(y),this},p.prototype.comment=function(h){var y;return y=new r(this,h),this.children.push(y),this},p.prototype.commentBefore=function(h){var y,R,g;return R=this.parent.children.indexOf(this),g=this.parent.children.splice(R),y=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,g),this},p.prototype.commentAfter=function(h){var y,R,g;return R=this.parent.children.indexOf(this),g=this.parent.children.splice(R+1),y=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,g),this},p.prototype.raw=function(h){var y;return y=new d(this,h),this.children.push(y),this},p.prototype.dummy=function(){var h;return h=new o(this),h},p.prototype.instruction=function(h,y){var R,g,D,C,T;if(h!=null&&(h=w(h)),y!=null&&(y=w(y)),Array.isArray(h))for(C=0,T=h.length;C<T;C++)R=h[C],this.instruction(R);else if(_(h))for(R in h)v.call(h,R)&&(g=h[R],this.instruction(R,g));else P(y)&&(y=y.apply()),D=new m(this,h,y),this.children.push(D);return this},p.prototype.instructionBefore=function(h,y){var R,g,D;return g=this.parent.children.indexOf(this),D=this.parent.children.splice(g),R=this.parent.instruction(h,y),Array.prototype.push.apply(this.parent.children,D),this},p.prototype.instructionAfter=function(h,y){var R,g,D;return g=this.parent.children.indexOf(this),D=this.parent.children.splice(g+1),R=this.parent.instruction(h,y),Array.prototype.push.apply(this.parent.children,D),this},p.prototype.declaration=function(h,y,R){var g,D;return g=this.document(),D=new i(g,h,y,R),g.children.length===0?g.children.unshift(D):g.children[0].type===e.Declaration?g.children[0]=D:g.children.unshift(D),g.root()||g},p.prototype.dtd=function(h,y){var R,g,D,C,T,N,O,M,U,A;for(g=this.document(),D=new s(g,h,y),U=g.children,C=T=0,O=U.length;T<O;C=++T)if(R=U[C],R.type===e.DocType)return g.children[C]=D,D;for(A=g.children,C=N=0,M=A.length;N<M;C=++N)if(R=A[C],R.isRoot)return g.children.splice(C,0,D),D;return g.children.push(D),D},p.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},p.prototype.root=function(){var h;for(h=this;h;){if(h.type===e.Document)return h.rootObject;if(h.isRoot)return h;h=h.parent}},p.prototype.document=function(){var h;for(h=this;h;){if(h.type===e.Document)return h;h=h.parent}},p.prototype.end=function(h){return this.document().end(h)},p.prototype.prev=function(){var h;if(h=this.parent.children.indexOf(this),h<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[h-1]},p.prototype.next=function(){var h;if(h=this.parent.children.indexOf(this),h===-1||h===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[h+1]},p.prototype.importDocument=function(h){var y;return y=h.root().clone(),y.parent=this,y.isRoot=!1,this.children.push(y),this},p.prototype.debugInfo=function(h){var y,R;return h=h||this.name,h==null&&!((y=this.parent)!=null&&y.name)?"":h==null?"parent: <"+this.parent.name+">":(R=this.parent)!=null&&R.name?"node: <"+h+">, parent: <"+this.parent.name+">":"node: <"+h+">"},p.prototype.ele=function(h,y,R){return this.element(h,y,R)},p.prototype.nod=function(h,y,R){return this.node(h,y,R)},p.prototype.txt=function(h){return this.text(h)},p.prototype.dat=function(h){return this.cdata(h)},p.prototype.com=function(h){return this.comment(h)},p.prototype.ins=function(h,y){return this.instruction(h,y)},p.prototype.doc=function(){return this.document()},p.prototype.dec=function(h,y,R){return this.declaration(h,y,R)},p.prototype.e=function(h,y,R){return this.element(h,y,R)},p.prototype.n=function(h,y,R){return this.node(h,y,R)},p.prototype.t=function(h){return this.text(h)},p.prototype.d=function(h){return this.cdata(h)},p.prototype.c=function(h){return this.comment(h)},p.prototype.r=function(h){return this.raw(h)},p.prototype.i=function(h,y){return this.instruction(h,y)},p.prototype.u=function(){return this.up()},p.prototype.importXMLBuilder=function(h){return this.importDocument(h)},p.prototype.replaceChild=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeChild=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.appendChild=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasChildNodes=function(){return this.children.length!==0},p.prototype.cloneNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isSupported=function(h,y){return!0},p.prototype.hasAttributes=function(){return this.attribs.length!==0},p.prototype.compareDocumentPosition=function(h){var y,R;return y=this,y===h?0:this.document()!==h.document()?(R=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?R|=n.Preceding:R|=n.Following,R):y.isAncestor(h)?n.Contains|n.Preceding:y.isDescendant(h)?n.Contains|n.Following:y.isPreceding(h)?n.Preceding:n.Following},p.prototype.isSameNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.lookupPrefix=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isDefaultNamespace=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.lookupNamespaceURI=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(h){var y,R,g;if(h.nodeType!==this.nodeType||h.children.length!==this.children.length)return!1;for(y=R=0,g=this.children.length-1;0<=g?R<=g:R>=g;y=0<=g?++R:--R)if(!this.children[y].isEqualNode(h.children[y]))return!1;return!0},p.prototype.getFeature=function(h,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setUserData=function(h,y,R){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getUserData=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.contains=function(h){return h?h===this||this.isDescendant(h):!1},p.prototype.isDescendant=function(h){var y,R,g,D,C;for(C=this.children,g=0,D=C.length;g<D;g++)if(y=C[g],h===y||(R=y.isDescendant(h),R))return!0;return!1},p.prototype.isAncestor=function(h){return h.isDescendant(this)},p.prototype.isPreceding=function(h){var y,R;return y=this.treePosition(h),R=this.treePosition(this),y===-1||R===-1?!1:y<R},p.prototype.isFollowing=function(h){var y,R;return y=this.treePosition(h),R=this.treePosition(this),y===-1||R===-1?!1:y>R},p.prototype.treePosition=function(h){var y,R;return R=0,y=!1,this.foreachTreeNode(this.document(),function(g){if(R++,!y&&g===h)return y=!0}),y?R:-1},p.prototype.foreachTreeNode=function(h,y){var R,g,D,C,T;for(h||(h=this.document()),C=h.children,g=0,D=C.length;g<D;g++){if(R=C[g],T=y(R))return T;if(T=this.foreachTreeNode(R,y),T)return T}},p}()}).call(R0)});var Uo=F((P0,N0)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;N0.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var s,o,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{};for(s in o)t.call(o,s)&&(a=o[s],this[s]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var s,o;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+o.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+o.index);return i},r.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(P0)});var zr=F((O0,_0)=>{(function(){_0.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(O0)});var $o=F((A0,L0)=>{(function(){var n,e,t,r,i,s,o,a,c,u,x,m,d,l,w,E,P,_={}.hasOwnProperty;P=ft().assign,n=fe(),c=ei(),u=si(),t=Zn(),r=Jn(),m=Kn(),l=oi(),w=ai(),d=ci(),x=ko(),i=ti(),s=ni(),o=ri(),a=ii(),e=zr(),L0.exports=E=function(){function S(v){var p,h,y;v||(v={}),this.options=v,h=v.writer||{};for(p in h)_.call(h,p)&&(y=h[p],this["_"+p]=this[p],this[p]=y)}return S.prototype.filterOptions=function(v){var p,h,y,R,g,D,C,T;return v||(v={}),v=P({},this.options,v),p={writer:this},p.pretty=v.pretty||!1,p.allowEmpty=v.allowEmpty||!1,p.indent=(h=v.indent)!=null?h:"  ",p.newline=(y=v.newline)!=null?y:`
`,p.offset=(R=v.offset)!=null?R:0,p.dontPrettyTextNodes=(g=(D=v.dontPrettyTextNodes)!=null?D:v.dontprettytextnodes)!=null?g:0,p.spaceBeforeSlash=(C=(T=v.spaceBeforeSlash)!=null?T:v.spacebeforeslash)!=null?C:"",p.spaceBeforeSlash===!0&&(p.spaceBeforeSlash=" "),p.suppressPrettyCount=0,p.user={},p.state=e.None,p},S.prototype.indent=function(v,p,h){var y;return!p.pretty||p.suppressPrettyCount?"":p.pretty&&(y=(h||0)+p.offset+1,y>0)?new Array(y).join(p.indent):""},S.prototype.endline=function(v,p,h){return!p.pretty||p.suppressPrettyCount?"":p.newline},S.prototype.attribute=function(v,p,h){var y;return this.openAttribute(v,p,h),y=" "+v.name+'="'+v.value+'"',this.closeAttribute(v,p,h),y},S.prototype.cdata=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<![CDATA[",p.state=e.InsideTag,y+=v.value,p.state=e.CloseTag,y+="]]>"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.comment=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<!-- ",p.state=e.InsideTag,y+=v.value,p.state=e.CloseTag,y+=" -->"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.declaration=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<?xml",p.state=e.InsideTag,y+=' version="'+v.version+'"',v.encoding!=null&&(y+=' encoding="'+v.encoding+'"'),v.standalone!=null&&(y+=' standalone="'+v.standalone+'"'),p.state=e.CloseTag,y+=p.spaceBeforeSlash+"?>",y+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.docType=function(v,p,h){var y,R,g,D,C;if(h||(h=0),this.openNode(v,p,h),p.state=e.OpenTag,D=this.indent(v,p,h),D+="<!DOCTYPE "+v.root().name,v.pubID&&v.sysID?D+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(D+=' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(D+=" [",D+=this.endline(v,p,h),p.state=e.InsideTag,C=v.children,R=0,g=C.length;R<g;R++)y=C[R],D+=this.writeChildNode(y,p,h+1);p.state=e.CloseTag,D+="]"}return p.state=e.CloseTag,D+=p.spaceBeforeSlash+">",D+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),D},S.prototype.element=function(v,p,h){var y,R,g,D,C,T,N,O,M,U,A,X,B,Q;h||(h=0),U=!1,A="",this.openNode(v,p,h),p.state=e.OpenTag,A+=this.indent(v,p,h)+"<"+v.name,X=v.attribs;for(M in X)_.call(X,M)&&(y=X[M],A+=this.attribute(y,p,h));if(g=v.children.length,D=g===0?null:v.children[0],g===0||v.children.every(function(Z){return(Z.type===n.Text||Z.type===n.Raw)&&Z.value===""}))p.allowEmpty?(A+=">",p.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,p,h)):(p.state=e.CloseTag,A+=p.spaceBeforeSlash+"/>"+this.endline(v,p,h));else if(p.pretty&&g===1&&(D.type===n.Text||D.type===n.Raw)&&D.value!=null)A+=">",p.state=e.InsideTag,p.suppressPrettyCount++,U=!0,A+=this.writeChildNode(D,p,h+1),p.suppressPrettyCount--,U=!1,p.state=e.CloseTag,A+="</"+v.name+">"+this.endline(v,p,h);else{if(p.dontPrettyTextNodes){for(B=v.children,C=0,N=B.length;C<N;C++)if(R=B[C],(R.type===n.Text||R.type===n.Raw)&&R.value!=null){p.suppressPrettyCount++,U=!0;break}}for(A+=">"+this.endline(v,p,h),p.state=e.InsideTag,Q=v.children,T=0,O=Q.length;T<O;T++)R=Q[T],A+=this.writeChildNode(R,p,h+1);p.state=e.CloseTag,A+=this.indent(v,p,h)+"</"+v.name+">",U&&p.suppressPrettyCount--,A+=this.endline(v,p,h),p.state=e.None}return this.closeNode(v,p,h),A},S.prototype.writeChildNode=function(v,p,h){switch(v.type){case n.CData:return this.cdata(v,p,h);case n.Comment:return this.comment(v,p,h);case n.Element:return this.element(v,p,h);case n.Raw:return this.raw(v,p,h);case n.Text:return this.text(v,p,h);case n.ProcessingInstruction:return this.processingInstruction(v,p,h);case n.Dummy:return"";case n.Declaration:return this.declaration(v,p,h);case n.DocType:return this.docType(v,p,h);case n.AttributeDeclaration:return this.dtdAttList(v,p,h);case n.ElementDeclaration:return this.dtdElement(v,p,h);case n.EntityDeclaration:return this.dtdEntity(v,p,h);case n.NotationDeclaration:return this.dtdNotation(v,p,h);default:throw new Error("Unknown XML node type: "+v.constructor.name)}},S.prototype.processingInstruction=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<?",p.state=e.InsideTag,y+=v.target,v.value&&(y+=" "+v.value),p.state=e.CloseTag,y+=p.spaceBeforeSlash+"?>",y+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.raw=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h),p.state=e.InsideTag,y+=v.value,p.state=e.CloseTag,y+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.text=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h),p.state=e.InsideTag,y+=v.value,p.state=e.CloseTag,y+=this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.dtdAttList=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<!ATTLIST",p.state=e.InsideTag,y+=" "+v.elementName+" "+v.attributeName+" "+v.attributeType,v.defaultValueType!=="#DEFAULT"&&(y+=" "+v.defaultValueType),v.defaultValue&&(y+=' "'+v.defaultValue+'"'),p.state=e.CloseTag,y+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.dtdElement=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<!ELEMENT",p.state=e.InsideTag,y+=" "+v.name+" "+v.value,p.state=e.CloseTag,y+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.dtdEntity=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<!ENTITY",p.state=e.InsideTag,v.pe&&(y+=" %"),y+=" "+v.name,v.value?y+=' "'+v.value+'"':(v.pubID&&v.sysID?y+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(y+=' SYSTEM "'+v.sysID+'"'),v.nData&&(y+=" NDATA "+v.nData)),p.state=e.CloseTag,y+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.dtdNotation=function(v,p,h){var y;return this.openNode(v,p,h),p.state=e.OpenTag,y=this.indent(v,p,h)+"<!NOTATION",p.state=e.InsideTag,y+=" "+v.name,v.pubID&&v.sysID?y+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.pubID?y+=' PUBLIC "'+v.pubID+'"':v.sysID&&(y+=' SYSTEM "'+v.sysID+'"'),p.state=e.CloseTag,y+=p.spaceBeforeSlash+">"+this.endline(v,p,h),p.state=e.None,this.closeNode(v,p,h),y},S.prototype.openNode=function(v,p,h){},S.prototype.closeNode=function(v,p,h){},S.prototype.openAttribute=function(v,p,h){},S.prototype.closeAttribute=function(v,p,h){},S}()}).call(A0)});var ui=F((M0,F0)=>{(function(){var n,e,t=function(i,s){for(var o in s)r.call(s,o)&&(i[o]=s[o]);function a(){this.constructor=i}return a.prototype=s.prototype,i.prototype=new a,i.__super__=s.prototype,i},r={}.hasOwnProperty;e=$o(),F0.exports=n=function(i){t(s,i);function s(o){s.__super__.constructor.call(this,o)}return s.prototype.document=function(o,a){var c,u,x,m,d;for(a=this.filterOptions(a),m="",d=o.children,u=0,x=d.length;u<x;u++)c=d[u],m+=this.writeChildNode(c,a,0);return a.pretty&&m.slice(-a.newline.length)===a.newline&&(m=m.slice(0,-a.newline.length)),m},s}(e)}).call(M0)});var Bo=F((k0,U0)=>{(function(){var n,e,t,r,i,s,o,a,c=function(x,m){for(var d in m)u.call(m,d)&&(x[d]=m[d]);function l(){this.constructor=x}return l.prototype=m.prototype,x.prototype=new l,x.__super__=m.prototype,x},u={}.hasOwnProperty;a=ft().isPlainObject,t=Mo(),e=Bc(),i=Xe(),n=fe(),o=Uo(),s=ui(),U0.exports=r=function(x){c(m,x);function m(d){m.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,d||(d={}),d.writer||(d.writer=new s),this.options=d,this.stringify=new o(d)}return Object.defineProperty(m.prototype,"implementation",{value:new t}),Object.defineProperty(m.prototype,"doctype",{get:function(){var d,l,w,E;for(E=this.children,l=0,w=E.length;l<w;l++)if(d=E[l],d.type===n.DocType)return d;return null}}),Object.defineProperty(m.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(m.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(m.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(m.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(m.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(m.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(m.prototype,"origin",{get:function(){return null}}),Object.defineProperty(m.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(m.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(m.prototype,"contentType",{get:function(){return null}}),m.prototype.end=function(d){var l;return l={},d?a(d)&&(l=d,d=this.options.writer):d=this.options.writer,d.document(this,d.filterOptions(l))},m.prototype.toString=function(d){return this.options.writer.document(this,this.options.writer.filterOptions(d))},m.prototype.createElement=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTextNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createComment=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createCDATASection=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createProcessingInstruction=function(d,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttribute=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEntityReference=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagName=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.importNode=function(d,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createElementNS=function(d,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createAttributeNS=function(d,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByTagNameNS=function(d,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementById=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.adoptNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.renameNode=function(d,l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getElementsByClassName=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createEvent=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createNodeIterator=function(d,l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.createTreeWalker=function(d,l,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},m}(i)}).call(k0)});var q0=F(($0,B0)=>{(function(){var n,e,t,r,i,s,o,a,c,u,x,m,d,l,w,E,P,_,S,v,p,h,y,R,g={}.hasOwnProperty;R=ft(),h=R.isObject,p=R.isFunction,y=R.isPlainObject,v=R.getValue,n=fe(),m=Bo(),l=Kn(),r=Zn(),i=Jn(),E=oi(),S=ai(),w=ci(),u=ei(),x=si(),s=ti(),a=ri(),o=ni(),c=ii(),t=Fo(),_=Uo(),P=ui(),e=zr(),B0.exports=d=function(){function D(C,T,N){var O;this.name="?xml",this.type=n.Document,C||(C={}),O={},C.writer?y(C.writer)&&(O=C.writer,C.writer=new P):C.writer=new P,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(O),this.stringify=new _(C),this.onDataCallback=T||function(){},this.onEndCallback=N||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return D.prototype.createChildNode=function(C){var T,N,O,M,U,A,X,B;switch(C.type){case n.CData:this.cdata(C.value);break;case n.Comment:this.comment(C.value);break;case n.Element:O={},X=C.attribs;for(N in X)g.call(X,N)&&(T=X[N],O[N]=T.value);this.node(C.name,O);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(C.value);break;case n.Text:this.text(C.value);break;case n.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(B=C.children,U=0,A=B.length;U<A;U++)M=B[U],this.createChildNode(M),M.type===n.Element&&this.up();return this},D.prototype.dummy=function(){return this},D.prototype.node=function(C,T,N){var O;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=v(C),T==null&&(T={}),T=v(T),h(T)||(O=[T,N],N=O[0],T=O[1]),this.currentNode=new l(this,C,T),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,N!=null&&this.text(N),this},D.prototype.element=function(C,T,N){var O,M,U,A,X,B;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||h(C)||p(C))for(A=this.options.noValidation,this.options.noValidation=!0,B=new m(this.options).element("TEMP_ROOT"),B.element(C),this.options.noValidation=A,X=B.children,M=0,U=X.length;M<U;M++)O=X[M],this.createChildNode(O),O.type===n.Element&&this.up();else this.node(C,T,N);return this},D.prototype.attribute=function(C,T){var N,O;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=v(C)),h(C))for(N in C)g.call(C,N)&&(O=C[N],this.attribute(N,O));else p(T)&&(T=T.apply()),this.options.keepNullAttributes&&T==null?this.currentNode.attribs[C]=new t(this,C,""):T!=null&&(this.currentNode.attribs[C]=new t(this,C,T));return this},D.prototype.text=function(C){var T;return this.openCurrent(),T=new S(this,C),this.onData(this.writer.text(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.cdata=function(C){var T;return this.openCurrent(),T=new r(this,C),this.onData(this.writer.cdata(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.comment=function(C){var T;return this.openCurrent(),T=new i(this,C),this.onData(this.writer.comment(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.raw=function(C){var T;return this.openCurrent(),T=new E(this,C),this.onData(this.writer.raw(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.instruction=function(C,T){var N,O,M,U,A;if(this.openCurrent(),C!=null&&(C=v(C)),T!=null&&(T=v(T)),Array.isArray(C))for(N=0,U=C.length;N<U;N++)O=C[N],this.instruction(O);else if(h(C))for(O in C)g.call(C,O)&&(M=C[O],this.instruction(O,M));else p(T)&&(T=T.apply()),A=new w(this,C,T),this.onData(this.writer.processingInstruction(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},D.prototype.declaration=function(C,T,N){var O;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return O=new u(this,C,T,N),this.onData(this.writer.declaration(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.doctype=function(C,T,N){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new x(this,T,N),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},D.prototype.dtdElement=function(C,T){var N;return this.openCurrent(),N=new o(this,C,T),this.onData(this.writer.dtdElement(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.attList=function(C,T,N,O,M){var U;return this.openCurrent(),U=new s(this,C,T,N,O,M),this.onData(this.writer.dtdAttList(U,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.entity=function(C,T){var N;return this.openCurrent(),N=new a(this,!1,C,T),this.onData(this.writer.dtdEntity(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.pEntity=function(C,T){var N;return this.openCurrent(),N=new a(this,!0,C,T),this.onData(this.writer.dtdEntity(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.notation=function(C,T){var N;return this.openCurrent(),N=new c(this,C,T),this.onData(this.writer.dtdNotation(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},D.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},D.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},D.prototype.openNode=function(C){var T,N,O,M;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===n.Element&&(this.root=C),N="",C.type===n.Element){this.writerOptions.state=e.OpenTag,N=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,M=C.attribs;for(O in M)g.call(M,O)&&(T=M[O],N+=this.writer.attribute(T,this.writerOptions,this.currentLevel));N+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,N=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?N+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(N+=' SYSTEM "'+C.sysID+'"'),C.children?(N+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,N+=">"),N+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(N,this.currentLevel),C.isOpen=!0}},D.prototype.closeNode=function(C){var T;if(!C.isClosed)return T="",this.writerOptions.state=e.CloseTag,C.type===n.Element?T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(T,this.currentLevel),C.isClosed=!0},D.prototype.onData=function(C,T){return this.documentStarted=!0,this.onDataCallback(C,T+1)},D.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},D.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},D.prototype.ele=function(){return this.element.apply(this,arguments)},D.prototype.nod=function(C,T,N){return this.node(C,T,N)},D.prototype.txt=function(C){return this.text(C)},D.prototype.dat=function(C){return this.cdata(C)},D.prototype.com=function(C){return this.comment(C)},D.prototype.ins=function(C,T){return this.instruction(C,T)},D.prototype.dec=function(C,T,N){return this.declaration(C,T,N)},D.prototype.dtd=function(C,T,N){return this.doctype(C,T,N)},D.prototype.e=function(C,T,N){return this.element(C,T,N)},D.prototype.n=function(C,T,N){return this.node(C,T,N)},D.prototype.t=function(C){return this.text(C)},D.prototype.d=function(C){return this.cdata(C)},D.prototype.c=function(C){return this.comment(C)},D.prototype.r=function(C){return this.raw(C)},D.prototype.i=function(C,T){return this.instruction(C,T)},D.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.ent=function(C,T){return this.entity(C,T)},D.prototype.pent=function(C,T){return this.pEntity(C,T)},D.prototype.not=function(C,T){return this.notation(C,T)},D}()}).call($0)});var W0=F((j0,X0)=>{(function(){var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;n=fe(),r=$o(),e=zr(),X0.exports=t=function(o){i(a,o);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,x){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,x)},a.prototype.document=function(c,u){var x,m,d,l,w,E,P,_,S;for(P=c.children,m=d=0,w=P.length;d<w;m=++d)x=P[m],x.isLastRootNode=m===c.children.length-1;for(u=this.filterOptions(u),_=c.children,S=[],l=0,E=_.length;l<E;l++)x=_[l],S.push(this.writeChildNode(x,u,0));return S},a.prototype.attribute=function(c,u,x){return this.stream.write(a.__super__.attribute.call(this,c,u,x))},a.prototype.cdata=function(c,u,x){return this.stream.write(a.__super__.cdata.call(this,c,u,x))},a.prototype.comment=function(c,u,x){return this.stream.write(a.__super__.comment.call(this,c,u,x))},a.prototype.declaration=function(c,u,x){return this.stream.write(a.__super__.declaration.call(this,c,u,x))},a.prototype.docType=function(c,u,x){var m,d,l,w;if(x||(x=0),this.openNode(c,u,x),u.state=e.OpenTag,this.stream.write(this.indent(c,u,x)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,x)),u.state=e.InsideTag,w=c.children,d=0,l=w.length;d<l;d++)m=w[d],this.writeChildNode(m,u,x+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,x)),u.state=e.None,this.closeNode(c,u,x)},a.prototype.element=function(c,u,x){var m,d,l,w,E,P,_,S,v,p;x||(x=0),this.openNode(c,u,x),u.state=e.OpenTag,this.stream.write(this.indent(c,u,x)+"<"+c.name),v=c.attribs;for(_ in v)s.call(v,_)&&(m=v[_],this.attribute(m,u,x));if(l=c.children.length,w=l===0?null:c.children[0],l===0||c.children.every(function(h){return(h.type===n.Text||h.type===n.Raw)&&h.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&l===1&&(w.type===n.Text||w.type===n.Raw)&&w.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,S=!0,this.writeChildNode(w,u,x+1),u.suppressPrettyCount--,S=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,x)),u.state=e.InsideTag,p=c.children,E=0,P=p.length;E<P;E++)d=p[E],this.writeChildNode(d,u,x+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,x)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,x)),u.state=e.None,this.closeNode(c,u,x)},a.prototype.processingInstruction=function(c,u,x){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,x))},a.prototype.raw=function(c,u,x){return this.stream.write(a.__super__.raw.call(this,c,u,x))},a.prototype.text=function(c,u,x){return this.stream.write(a.__super__.text.call(this,c,u,x))},a.prototype.dtdAttList=function(c,u,x){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,x))},a.prototype.dtdElement=function(c,u,x){return this.stream.write(a.__super__.dtdElement.call(this,c,u,x))},a.prototype.dtdEntity=function(c,u,x){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,x))},a.prototype.dtdNotation=function(c,u,x){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,x))},a}(r)}).call(j0)});var G0=F((V0,kt)=>{(function(){var n,e,t,r,i,s,o,a,c,u;u=ft(),a=u.assign,c=u.isFunction,t=Mo(),r=Bo(),i=q0(),o=ui(),s=W0(),n=fe(),e=zr(),kt.exports.create=function(x,m,d,l){var w,E;if(x==null)throw new Error("Root element needs a name.");return l=a({},m,d,l),w=new r(l),E=w.element(x),l.headless||(w.declaration(l),(l.pubID!=null||l.sysID!=null)&&w.dtd(l)),E},kt.exports.begin=function(x,m,d){var l;return c(x)&&(l=[x,m],m=l[0],d=l[1],x={}),m?new i(x,m,d):new r(x)},kt.exports.stringWriter=function(x){return new o(x)},kt.exports.streamWriter=function(x,m){return new s(x,m)},kt.exports.implementation=new t,kt.exports.nodeType=n,kt.exports.writerState=e}).call(V0)});var z0=F(qo=>{(function(){"use strict";var n,e,t,r,i,s={}.hasOwnProperty;n=G0(),e=Yn().defaults,r=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},i=function(o){return"<![CDATA["+t(o)+"]]>"},t=function(o){return o.replace("]]>","]]]]><![CDATA[>")},qo.Builder=function(){function o(a){var c,u,x;this.options={},u=e["0.2"];for(c in u)s.call(u,c)&&(x=u[c],this.options[c]=x);for(c in a)s.call(a,c)&&(x=a[c],this.options[c]=x)}return o.prototype.buildObject=function(a){var c,u,x,m,d;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(d=Object.keys(a)[0],a=a[d]):d=this.options.rootName,x=function(l){return function(w,E){var P,_,S,v,p,h;if(typeof E!="object")l.options.cdata&&r(E)?w.raw(i(E)):w.txt(E);else if(Array.isArray(E)){for(v in E)if(s.call(E,v)){_=E[v];for(p in _)S=_[p],w=x(w.ele(p),S).up()}}else for(p in E)if(s.call(E,p))if(_=E[p],p===c){if(typeof _=="object")for(P in _)h=_[P],w=w.att(P,h)}else if(p===u)l.options.cdata&&r(_)?w=w.raw(i(_)):w=w.txt(_);else if(Array.isArray(_))for(v in _)s.call(_,v)&&(S=_[v],typeof S=="string"?l.options.cdata&&r(S)?w=w.ele(p).raw(i(S)).up():w=w.ele(p,S).up():w=x(w.ele(p),S).up());else typeof _=="object"?w=x(w.ele(p),_).up():typeof _=="string"&&l.options.cdata&&r(_)?w=w.ele(p).raw(i(_)).up():(_==null&&(_=""),w=w.ele(p,_.toString()).up());return w}}(this),m=n.create(d,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),x(m,a).end(this.options.renderOpts)},o}()}).call(qo)});var H0=F(li=>{(function(n){n.parser=function(b,f){return new t(b,f)},n.SAXParser=t,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(b,f){if(!(this instanceof t))return new t(b,f);var L=this;i(L),L.q=L.c="",L.bufferCheckPosition=n.MAX_BUFFER_LENGTH,L.opt=f||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!b,L.noscript=!!(b||L.opt.noscript),L.state=g.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(w)),L.opt.unquotedAttributeValues===void 0&&(L.opt.unquotedAttributeValues=!b),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),C(L,"onready")}Object.create||(Object.create=function(b){function f(){}f.prototype=b;var L=new f;return L}),Object.keys||(Object.keys=function(b){var f=[];for(var L in b)b.hasOwnProperty(L)&&f.push(L);return f});function r(b){for(var f=Math.max(n.MAX_BUFFER_LENGTH,10),L=0,I=0,Y=e.length;I<Y;I++){var ie=b[e[I]].length;if(ie>f)switch(e[I]){case"textNode":N(b);break;case"cdata":T(b,"oncdata",b.cdata),b.cdata="";break;case"script":T(b,"onscript",b.script),b.script="";break;default:M(b,"Max buffer length exceeded: "+e[I])}L=Math.max(L,ie)}var xe=n.MAX_BUFFER_LENGTH-L;b.bufferCheckPosition=xe+b.position}function i(b){for(var f=0,L=e.length;f<L;f++)b[e[f]]=""}function s(b){N(b),b.cdata!==""&&(T(b,"oncdata",b.cdata),b.cdata=""),b.script!==""&&(T(b,"onscript",b.script),b.script="")}t.prototype={end:function(){U(this)},write:gt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}o||(o=function(){});var a=n.EVENTS.filter(function(b){return b!=="error"&&b!=="end"});function c(b,f){return new u(b,f)}function u(b,f){if(!(this instanceof u))return new u(b,f);o.apply(this),this._parser=new t(b,f),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(I){L.emit("error",I),L._parser.error=null},this._decoder=null,a.forEach(function(I){Object.defineProperty(L,"on"+I,{get:function(){return L._parser["on"+I]},set:function(Y){if(!Y)return L.removeAllListeners(I),L._parser["on"+I]=Y,Y;L.on(I,Y)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(o.prototype,{constructor:{value:u}}),u.prototype.write=function(b){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(b)){if(!this._decoder){var f=require("string_decoder").StringDecoder;this._decoder=new f("utf8")}b=this._decoder.write(b)}return this._parser.write(b.toString()),this.emit("data",b),!0},u.prototype.end=function(b){return b&&b.length&&this.write(b),this._parser.end(),!0},u.prototype.on=function(b,f){var L=this;return!L._parser["on"+b]&&a.indexOf(b)!==-1&&(L._parser["on"+b]=function(){var I=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);I.splice(0,0,b),L.emit.apply(L,I)}),o.prototype.on.call(L,b,f)};var x="[CDATA[",m="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",w={xml:d,xmlns:l},E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(b){return b===" "||b===`
`||b==="\r"||b==="	"}function p(b){return b==='"'||b==="'"}function h(b){return b===">"||v(b)}function y(b,f){return b.test(f)}function R(b,f){return!y(b,f)}var g=0;n.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(b){var f=n.ENTITIES[b],L=typeof f=="number"?String.fromCharCode(f):f;n.ENTITIES[b]=L});for(var D in n.STATE)n.STATE[n.STATE[D]]=D;g=n.STATE;function C(b,f,L){b[f]&&b[f](L)}function T(b,f,L){b.textNode&&N(b),C(b,f,L)}function N(b){b.textNode=O(b.opt,b.textNode),b.textNode&&C(b,"ontext",b.textNode),b.textNode=""}function O(b,f){return b.trim&&(f=f.trim()),b.normalize&&(f=f.replace(/\s+/g," ")),f}function M(b,f){return N(b),b.trackPosition&&(f+=`
Line: `+b.line+`
Column: `+b.column+`
Char: `+b.c),f=new Error(f),b.error=f,C(b,"onerror",f),b}function U(b){return b.sawRoot&&!b.closedRoot&&A(b,"Unclosed root tag"),b.state!==g.BEGIN&&b.state!==g.BEGIN_WHITESPACE&&b.state!==g.TEXT&&M(b,"Unexpected end"),N(b),b.c="",b.closed=!0,C(b,"onend"),t.call(b,b.strict,b.opt),b}function A(b,f){if(typeof b!="object"||!(b instanceof t))throw new Error("bad call to strictFail");b.strict&&M(b,f)}function X(b){b.strict||(b.tagName=b.tagName[b.looseCase]());var f=b.tags[b.tags.length-1]||b,L=b.tag={name:b.tagName,attributes:{}};b.opt.xmlns&&(L.ns=f.ns),b.attribList.length=0,T(b,"onopentagstart",L)}function B(b,f){var L=b.indexOf(":"),I=L<0?["",b]:b.split(":"),Y=I[0],ie=I[1];return f&&b==="xmlns"&&(Y="xmlns",ie=""),{prefix:Y,local:ie}}function Q(b){if(b.strict||(b.attribName=b.attribName[b.looseCase]()),b.attribList.indexOf(b.attribName)!==-1||b.tag.attributes.hasOwnProperty(b.attribName)){b.attribName=b.attribValue="";return}if(b.opt.xmlns){var f=B(b.attribName,!0),L=f.prefix,I=f.local;if(L==="xmlns")if(I==="xml"&&b.attribValue!==d)A(b,"xml: prefix must be bound to "+d+`
Actual: `+b.attribValue);else if(I==="xmlns"&&b.attribValue!==l)A(b,"xmlns: prefix must be bound to "+l+`
Actual: `+b.attribValue);else{var Y=b.tag,ie=b.tags[b.tags.length-1]||b;Y.ns===ie.ns&&(Y.ns=Object.create(ie.ns)),Y.ns[I]=b.attribValue}b.attribList.push([b.attribName,b.attribValue])}else b.tag.attributes[b.attribName]=b.attribValue,T(b,"onattribute",{name:b.attribName,value:b.attribValue});b.attribName=b.attribValue=""}function Z(b,f){if(b.opt.xmlns){var L=b.tag,I=B(b.tagName);L.prefix=I.prefix,L.local=I.local,L.uri=L.ns[I.prefix]||"",L.prefix&&!L.uri&&(A(b,"Unbound namespace prefix: "+JSON.stringify(b.tagName)),L.uri=I.prefix);var Y=b.tags[b.tags.length-1]||b;L.ns&&Y.ns!==L.ns&&Object.keys(L.ns).forEach(function(ja){T(b,"onopennamespace",{prefix:ja,uri:L.ns[ja]})});for(var ie=0,xe=b.attribList.length;ie<xe;ie++){var Le=b.attribList[ie],Me=Le[0],or=Le[1],be=B(Me,!0),yt=be.prefix,wp=be.local,qa=yt===""?"":L.ns[yt]||"",qs={name:Me,value:or,prefix:yt,local:wp,uri:qa};yt&&yt!=="xmlns"&&!qa&&(A(b,"Unbound namespace prefix: "+JSON.stringify(yt)),qs.uri=yt),b.tag.attributes[Me]=qs,T(b,"onattribute",qs)}b.attribList.length=0}b.tag.isSelfClosing=!!f,b.sawRoot=!0,b.tags.push(b.tag),T(b,"onopentag",b.tag),f||(!b.noscript&&b.tagName.toLowerCase()==="script"?b.state=g.SCRIPT:b.state=g.TEXT,b.tag=null,b.tagName=""),b.attribName=b.attribValue="",b.attribList.length=0}function ue(b){if(!b.tagName){A(b,"Weird empty close tag."),b.textNode+="</>",b.state=g.TEXT;return}if(b.script){if(b.tagName!=="script"){b.script+="</"+b.tagName+">",b.tagName="",b.state=g.SCRIPT;return}T(b,"onscript",b.script),b.script=""}var f=b.tags.length,L=b.tagName;b.strict||(L=L[b.looseCase]());for(var I=L;f--;){var Y=b.tags[f];if(Y.name!==I)A(b,"Unexpected close tag");else break}if(f<0){A(b,"Unmatched closing tag: "+b.tagName),b.textNode+="</"+b.tagName+">",b.state=g.TEXT;return}b.tagName=L;for(var ie=b.tags.length;ie-- >f;){var xe=b.tag=b.tags.pop();b.tagName=b.tag.name,T(b,"onclosetag",b.tagName);var Le={};for(var Me in xe.ns)Le[Me]=xe.ns[Me];var or=b.tags[b.tags.length-1]||b;b.opt.xmlns&&xe.ns!==or.ns&&Object.keys(xe.ns).forEach(function(be){var yt=xe.ns[be];T(b,"onclosenamespace",{prefix:be,uri:yt})})}f===0&&(b.closedRoot=!0),b.tagName=b.attribValue=b.attribName="",b.attribList.length=0,b.state=g.TEXT}function de(b){var f=b.entity,L=f.toLowerCase(),I,Y="";return b.ENTITIES[f]?b.ENTITIES[f]:b.ENTITIES[L]?b.ENTITIES[L]:(f=L,f.charAt(0)==="#"&&(f.charAt(1)==="x"?(f=f.slice(2),I=parseInt(f,16),Y=I.toString(16)):(f=f.slice(1),I=parseInt(f,10),Y=I.toString(10))),f=f.replace(/^0+/,""),isNaN(I)||Y.toLowerCase()!==f||I<0||I>1114111?(A(b,"Invalid character entity"),"&"+b.entity+";"):String.fromCodePoint(I))}function Pe(b,f){f==="<"?(b.state=g.OPEN_WAKA,b.startTagPosition=b.position):v(f)||(A(b,"Non-whitespace before first tag."),b.textNode=f,b.state=g.TEXT)}function st(b,f){var L="";return f<b.length&&(L=b.charAt(f)),L}function gt(b){var f=this;if(this.error)throw this.error;if(f.closed)return M(f,"Cannot write after close. Assign an onready handler.");if(b===null)return U(f);typeof b=="object"&&(b=b.toString());for(var L=0,I="";I=st(b,L++),f.c=I,!!I;)switch(f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++),f.state){case g.BEGIN:if(f.state=g.BEGIN_WHITESPACE,I==="\uFEFF")continue;Pe(f,I);continue;case g.BEGIN_WHITESPACE:Pe(f,I);continue;case g.TEXT:if(f.sawRoot&&!f.closedRoot){for(var ie=L-1;I&&I!=="<"&&I!=="&";)I=st(b,L++),I&&f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++);f.textNode+=b.substring(ie,L-1)}I==="<"&&!(f.sawRoot&&f.closedRoot&&!f.strict)?(f.state=g.OPEN_WAKA,f.startTagPosition=f.position):(!v(I)&&(!f.sawRoot||f.closedRoot)&&A(f,"Text data outside of root node."),I==="&"?f.state=g.TEXT_ENTITY:f.textNode+=I);continue;case g.SCRIPT:I==="<"?f.state=g.SCRIPT_ENDING:f.script+=I;continue;case g.SCRIPT_ENDING:I==="/"?f.state=g.CLOSE_TAG:(f.script+="<"+I,f.state=g.SCRIPT);continue;case g.OPEN_WAKA:if(I==="!")f.state=g.SGML_DECL,f.sgmlDecl="";else if(!v(I))if(y(E,I))f.state=g.OPEN_TAG,f.tagName=I;else if(I==="/")f.state=g.CLOSE_TAG,f.tagName="";else if(I==="?")f.state=g.PROC_INST,f.procInstName=f.procInstBody="";else{if(A(f,"Unencoded <"),f.startTagPosition+1<f.position){var Y=f.position-f.startTagPosition;I=new Array(Y).join(" ")+I}f.textNode+="<"+I,f.state=g.TEXT}continue;case g.SGML_DECL:if(f.sgmlDecl+I==="--"){f.state=g.COMMENT,f.comment="",f.sgmlDecl="";continue}f.doctype&&f.doctype!==!0&&f.sgmlDecl?(f.state=g.DOCTYPE_DTD,f.doctype+="<!"+f.sgmlDecl+I,f.sgmlDecl=""):(f.sgmlDecl+I).toUpperCase()===x?(T(f,"onopencdata"),f.state=g.CDATA,f.sgmlDecl="",f.cdata=""):(f.sgmlDecl+I).toUpperCase()===m?(f.state=g.DOCTYPE,(f.doctype||f.sawRoot)&&A(f,"Inappropriately located doctype declaration"),f.doctype="",f.sgmlDecl=""):I===">"?(T(f,"onsgmldeclaration",f.sgmlDecl),f.sgmlDecl="",f.state=g.TEXT):(p(I)&&(f.state=g.SGML_DECL_QUOTED),f.sgmlDecl+=I);continue;case g.SGML_DECL_QUOTED:I===f.q&&(f.state=g.SGML_DECL,f.q=""),f.sgmlDecl+=I;continue;case g.DOCTYPE:I===">"?(f.state=g.TEXT,T(f,"ondoctype",f.doctype),f.doctype=!0):(f.doctype+=I,I==="["?f.state=g.DOCTYPE_DTD:p(I)&&(f.state=g.DOCTYPE_QUOTED,f.q=I));continue;case g.DOCTYPE_QUOTED:f.doctype+=I,I===f.q&&(f.q="",f.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:I==="]"?(f.doctype+=I,f.state=g.DOCTYPE):I==="<"?(f.state=g.OPEN_WAKA,f.startTagPosition=f.position):p(I)?(f.doctype+=I,f.state=g.DOCTYPE_DTD_QUOTED,f.q=I):f.doctype+=I;continue;case g.DOCTYPE_DTD_QUOTED:f.doctype+=I,I===f.q&&(f.state=g.DOCTYPE_DTD,f.q="");continue;case g.COMMENT:I==="-"?f.state=g.COMMENT_ENDING:f.comment+=I;continue;case g.COMMENT_ENDING:I==="-"?(f.state=g.COMMENT_ENDED,f.comment=O(f.opt,f.comment),f.comment&&T(f,"oncomment",f.comment),f.comment=""):(f.comment+="-"+I,f.state=g.COMMENT);continue;case g.COMMENT_ENDED:I!==">"?(A(f,"Malformed comment"),f.comment+="--"+I,f.state=g.COMMENT):f.doctype&&f.doctype!==!0?f.state=g.DOCTYPE_DTD:f.state=g.TEXT;continue;case g.CDATA:for(var ie=L-1;I&&I!=="]";)I=st(b,L++),I&&f.trackPosition&&(f.position++,I===`
`?(f.line++,f.column=0):f.column++);f.cdata+=b.substring(ie,L-1),I==="]"&&(f.state=g.CDATA_ENDING);continue;case g.CDATA_ENDING:I==="]"?f.state=g.CDATA_ENDING_2:(f.cdata+="]"+I,f.state=g.CDATA);continue;case g.CDATA_ENDING_2:I===">"?(f.cdata&&T(f,"oncdata",f.cdata),T(f,"onclosecdata"),f.cdata="",f.state=g.TEXT):I==="]"?f.cdata+="]":(f.cdata+="]]"+I,f.state=g.CDATA);continue;case g.PROC_INST:I==="?"?f.state=g.PROC_INST_ENDING:v(I)?f.state=g.PROC_INST_BODY:f.procInstName+=I;continue;case g.PROC_INST_BODY:if(!f.procInstBody&&v(I))continue;I==="?"?f.state=g.PROC_INST_ENDING:f.procInstBody+=I;continue;case g.PROC_INST_ENDING:I===">"?(T(f,"onprocessinginstruction",{name:f.procInstName,body:f.procInstBody}),f.procInstName=f.procInstBody="",f.state=g.TEXT):(f.procInstBody+="?"+I,f.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:y(P,I)?f.tagName+=I:(X(f),I===">"?Z(f):I==="/"?f.state=g.OPEN_TAG_SLASH:(v(I)||A(f,"Invalid character in tag name"),f.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:I===">"?(Z(f,!0),ue(f)):(A(f,"Forward-slash in opening tag not followed by >"),f.state=g.ATTRIB);continue;case g.ATTRIB:if(v(I))continue;I===">"?Z(f):I==="/"?f.state=g.OPEN_TAG_SLASH:y(E,I)?(f.attribName=I,f.attribValue="",f.state=g.ATTRIB_NAME):A(f,"Invalid attribute name");continue;case g.ATTRIB_NAME:I==="="?f.state=g.ATTRIB_VALUE:I===">"?(A(f,"Attribute without value"),f.attribValue=f.attribName,Q(f),Z(f)):v(I)?f.state=g.ATTRIB_NAME_SAW_WHITE:y(P,I)?f.attribName+=I:A(f,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if(I==="=")f.state=g.ATTRIB_VALUE;else{if(v(I))continue;A(f,"Attribute without value"),f.tag.attributes[f.attribName]="",f.attribValue="",T(f,"onattribute",{name:f.attribName,value:""}),f.attribName="",I===">"?Z(f):y(E,I)?(f.attribName=I,f.state=g.ATTRIB_NAME):(A(f,"Invalid attribute name"),f.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(v(I))continue;p(I)?(f.q=I,f.state=g.ATTRIB_VALUE_QUOTED):(f.opt.unquotedAttributeValues||M(f,"Unquoted attribute value"),f.state=g.ATTRIB_VALUE_UNQUOTED,f.attribValue=I);continue;case g.ATTRIB_VALUE_QUOTED:if(I!==f.q){I==="&"?f.state=g.ATTRIB_VALUE_ENTITY_Q:f.attribValue+=I;continue}Q(f),f.q="",f.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:v(I)?f.state=g.ATTRIB:I===">"?Z(f):I==="/"?f.state=g.OPEN_TAG_SLASH:y(E,I)?(A(f,"No whitespace between attributes"),f.attribName=I,f.attribValue="",f.state=g.ATTRIB_NAME):A(f,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!h(I)){I==="&"?f.state=g.ATTRIB_VALUE_ENTITY_U:f.attribValue+=I;continue}Q(f),I===">"?Z(f):f.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(f.tagName)I===">"?ue(f):y(P,I)?f.tagName+=I:f.script?(f.script+="</"+f.tagName,f.tagName="",f.state=g.SCRIPT):(v(I)||A(f,"Invalid tagname in closing tag"),f.state=g.CLOSE_TAG_SAW_WHITE);else{if(v(I))continue;R(E,I)?f.script?(f.script+="</"+I,f.state=g.SCRIPT):A(f,"Invalid tagname in closing tag."):f.tagName=I}continue;case g.CLOSE_TAG_SAW_WHITE:if(v(I))continue;I===">"?ue(f):A(f,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var xe,Le;switch(f.state){case g.TEXT_ENTITY:xe=g.TEXT,Le="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:xe=g.ATTRIB_VALUE_QUOTED,Le="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:xe=g.ATTRIB_VALUE_UNQUOTED,Le="attribValue";break}if(I===";"){var Me=de(f);f.opt.unparsedEntities&&!Object.values(n.XML_ENTITIES).includes(Me)?(f.entity="",f.state=xe,f.write(Me)):(f[Le]+=Me,f.entity="",f.state=xe)}else y(f.entity.length?S:_,I)?f.entity+=I:(A(f,"Invalid character in entity name"),f[Le]+="&"+f.entity+I,f.entity="",f.state=xe);continue;default:throw new Error(f,"Unknown state: "+f.state)}return f.position>=f.bufferCheckPosition&&r(f),f}String.fromCodePoint||function(){var b=String.fromCharCode,f=Math.floor,L=function(){var I=16384,Y=[],ie,xe,Le=-1,Me=arguments.length;if(!Me)return"";for(var or="";++Le<Me;){var be=Number(arguments[Le]);if(!isFinite(be)||be<0||be>1114111||f(be)!==be)throw RangeError("Invalid code point: "+be);be<=65535?Y.push(be):(be-=65536,ie=(be>>10)+55296,xe=be%1024+56320,Y.push(ie,xe)),(Le+1===Me||Y.length>I)&&(or+=b.apply(null,Y),Y.length=0)}return or};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(typeof li>"u"?li.sax={}:li)});var Y0=F(jo=>{(function(){"use strict";jo.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(jo)});var Xo=F(Jt=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),Jt.normalize=function(e){return e.toLowerCase()},Jt.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},Jt.stripPrefix=function(e){return e.replace(n,"")},Jt.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},Jt.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(Jt)});var Q0=F(St=>{(function(){"use strict";var n,e,t,r,i,s,o,a,c,u=function(d,l){return function(){return d.apply(l,arguments)}},x=function(d,l){for(var w in l)m.call(l,w)&&(d[w]=l[w]);function E(){this.constructor=d}return E.prototype=l.prototype,d.prototype=new E,d.__super__=l.prototype,d},m={}.hasOwnProperty;a=H0(),r=require("events"),n=Y0(),o=Xo(),c=require("timers").setImmediate,e=Yn().defaults,i=function(d){return typeof d=="object"&&d!=null&&Object.keys(d).length===0},s=function(d,l,w){var E,P,_;for(E=0,P=d.length;E<P;E++)_=d[E],l=_(l,w);return l},t=function(d,l,w){var E;return E=Object.create(null),E.value=w,E.writable=!0,E.enumerable=!0,E.configurable=!0,Object.defineProperty(d,l,E)},St.Parser=function(d){x(l,d);function l(w){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var E,P,_;if(!(this instanceof St.Parser))return new St.Parser(w);this.options={},P=e["0.2"];for(E in P)m.call(P,E)&&(_=P[E],this.options[E]=_);for(E in w)m.call(w,E)&&(_=w[E],this.options[E]=_);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return l.prototype.processAsync=function(){var w,E;try{return this.remaining.length<=this.options.chunkSize?(w=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(w),this.saxParser.close()):(w=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(w),c(this.processAsync))}catch(P){if(E=P,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(E)}},l.prototype.assignOrPush=function(w,E,P){return E in w?(w[E]instanceof Array||t(w,E,[w[E]]),w[E].push(P)):this.options.explicitArray?t(w,E,[P]):t(w,E,P)},l.prototype.reset=function(){var w,E,P,_;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(S){return function(v){if(S.saxParser.resume(),!S.saxParser.errThrown)return S.saxParser.errThrown=!0,S.emit("error",v)}}(this),this.saxParser.onend=function(S){return function(){if(!S.saxParser.ended)return S.saxParser.ended=!0,S.emit("end",S.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,_=[],w=this.options.attrkey,E=this.options.charkey,this.saxParser.onopentag=function(S){return function(v){var p,h,y,R,g;if(y={},y[E]="",!S.options.ignoreAttrs){g=v.attributes;for(p in g)m.call(g,p)&&(!(w in y)&&!S.options.mergeAttrs&&(y[w]={}),h=S.options.attrValueProcessors?s(S.options.attrValueProcessors,v.attributes[p],p):v.attributes[p],R=S.options.attrNameProcessors?s(S.options.attrNameProcessors,p):p,S.options.mergeAttrs?S.assignOrPush(y,R,h):t(y[w],R,h))}return y["#name"]=S.options.tagNameProcessors?s(S.options.tagNameProcessors,v.name):v.name,S.options.xmlns&&(y[S.options.xmlnskey]={uri:v.uri,local:v.local}),_.push(y)}}(this),this.saxParser.onclosetag=function(S){return function(){var v,p,h,y,R,g,D,C,T,N;if(g=_.pop(),R=g["#name"],(!S.options.explicitChildren||!S.options.preserveChildrenOrder)&&delete g["#name"],g.cdata===!0&&(v=g.cdata,delete g.cdata),T=_[_.length-1],g[E].match(/^\s*$/)&&!v?(p=g[E],delete g[E]):(S.options.trim&&(g[E]=g[E].trim()),S.options.normalize&&(g[E]=g[E].replace(/\s{2,}/g," ").trim()),g[E]=S.options.valueProcessors?s(S.options.valueProcessors,g[E],R):g[E],Object.keys(g).length===1&&E in g&&!S.EXPLICIT_CHARKEY&&(g=g[E])),i(g)&&(typeof S.options.emptyTag=="function"?g=S.options.emptyTag():g=S.options.emptyTag!==""?S.options.emptyTag:p),S.options.validator!=null&&(N="/"+function(){var O,M,U;for(U=[],O=0,M=_.length;O<M;O++)y=_[O],U.push(y["#name"]);return U}().concat(R).join("/"),function(){var O;try{return g=S.options.validator(N,T&&T[R],g)}catch(M){return O=M,S.emit("error",O)}}()),S.options.explicitChildren&&!S.options.mergeAttrs&&typeof g=="object"){if(!S.options.preserveChildrenOrder)y={},S.options.attrkey in g&&(y[S.options.attrkey]=g[S.options.attrkey],delete g[S.options.attrkey]),!S.options.charsAsChildren&&S.options.charkey in g&&(y[S.options.charkey]=g[S.options.charkey],delete g[S.options.charkey]),Object.getOwnPropertyNames(g).length>0&&(y[S.options.childkey]=g),g=y;else if(T){T[S.options.childkey]=T[S.options.childkey]||[],D={};for(h in g)m.call(g,h)&&t(D,h,g[h]);T[S.options.childkey].push(D),delete g["#name"],Object.keys(g).length===1&&E in g&&!S.EXPLICIT_CHARKEY&&(g=g[E])}}return _.length>0?S.assignOrPush(T,R,g):(S.options.explicitRoot&&(C=g,g={},t(g,R,C)),S.resultObject=g,S.saxParser.ended=!0,S.emit("end",S.resultObject))}}(this),P=function(S){return function(v){var p,h;if(h=_[_.length-1],h)return h[E]+=v,S.options.explicitChildren&&S.options.preserveChildrenOrder&&S.options.charsAsChildren&&(S.options.includeWhiteChars||v.replace(/\\n/g,"").trim()!=="")&&(h[S.options.childkey]=h[S.options.childkey]||[],p={"#name":"__text__"},p[E]=v,S.options.normalize&&(p[E]=p[E].replace(/\s{2,}/g," ").trim()),h[S.options.childkey].push(p)),h}}(this),this.saxParser.ontext=P,this.saxParser.oncdata=function(S){return function(v){var p;if(p=P(v),p)return p.cdata=!0}}(this)},l.prototype.parseString=function(w,E){var P;E!=null&&typeof E=="function"&&(this.on("end",function(_){return this.reset(),E(null,_)}),this.on("error",function(_){return this.reset(),E(_)}));try{return w=w.toString(),w.trim()===""?(this.emit("end",null),!0):(w=n.stripBOM(w),this.options.async?(this.remaining=w,c(this.processAsync),this.saxParser):this.saxParser.write(w).close())}catch(_){if(P=_,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw P}else return this.emit("error",P),this.saxParser.errThrown=!0}},l.prototype.parseStringPromise=function(w){return new Promise(function(E){return function(P,_){return E.parseString(w,function(S,v){return S?_(S):P(v)})}}(this))},l}(r),St.parseString=function(d,l,w){var E,P,_;return w!=null?(typeof w=="function"&&(E=w),typeof l=="object"&&(P=l)):(typeof l=="function"&&(E=l),P={}),_=new St.Parser(P),_.parseString(d,E)},St.parseStringPromise=function(d,l){var w,E;return typeof l=="object"&&(w=l),E=new St.Parser(w),E.parseStringPromise(d)}}).call(St)});var gr=F(Dt=>{(function(){"use strict";var n,e,t,r,i=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function u(){this.constructor=o}return u.prototype=a.prototype,o.prototype=new u,o.__super__=a.prototype,o},s={}.hasOwnProperty;e=Yn(),n=z0(),t=Q0(),r=Xo(),Dt.defaults=e.defaults,Dt.processors=r,Dt.ValidationError=function(o){i(a,o);function a(c){this.message=c}return a}(Error),Dt.Builder=n.Builder,Dt.Parser=t.Parser,Dt.parseString=t.parseString,Dt.parseStringPromise=t.parseStringPromise}).call(Dt)});var mu=F((cw,Pt)=>{var te=require("fs"),pi=require("os"),ve=require("path"),J0=require("crypto"),pt={fs:te.constants,os:pi.constants},eu="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",iu=/XXXXXX/,uh=3,su=(pt.O_CREAT||pt.fs.O_CREAT)|(pt.O_EXCL||pt.fs.O_EXCL)|(pt.O_RDWR||pt.fs.O_RDWR),lh=pi.platform()==="win32",fh=pt.EBADF||pt.os.errno.EBADF,ph=pt.ENOENT||pt.os.errno.ENOENT,ou=448,au=384,hh="exit",yr=[],cu=te.rmdirSync.bind(te),uu=!1;function xh(n,e){return te.rm(n,{recursive:!0},e)}function lu(n){return te.rmSync(n,{recursive:!0})}function zo(n,e){let t=wr(n,e),r=t[0],i=t[1];Ih(r,function(s,o){if(s)return i(s);let a=o.tries;(function c(){try{let u=pu(o);te.stat(u,function(x){if(!x)return a-- >0?c():i(new Error("Could not get a unique tmp filename, max tries reached "+u));i(null,u)})}catch(u){i(u)}})()})}function Ho(n){let e=wr(n),t=e[0],r=Sh(t),i=r.tries;do{let s=pu(r);try{te.statSync(s)}catch{return s}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function dh(n,e){let t=wr(n,e),r=t[0],i=t[1];zo(r,function(o,a){if(o)return i(o);te.open(a,su,r.mode||au,function(u,x){if(u)return i(u);if(r.discardDescriptor)return te.close(x,function(d){return i(d,a,void 0,Vo(a,-1,r,!1))});{let m=r.discardDescriptor||r.detachDescriptor;i(null,a,x,Vo(a,m?-1:x,r,!1))}})})}function mh(n){let e=wr(n),t=e[0],r=t.discardDescriptor||t.detachDescriptor,i=Ho(t),s=te.openSync(i,su,t.mode||au);return t.discardDescriptor&&(te.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:Vo(i,r?-1:s,t,!0)}}function gh(n,e){let t=wr(n,e),r=t[0],i=t[1];zo(r,function(o,a){if(o)return i(o);te.mkdir(a,r.mode||ou,function(u){if(u)return i(u);i(null,a,fu(a,r,!1))})})}function yh(n){let e=wr(n),t=e[0],r=Ho(t);return te.mkdirSync(r,t.mode||ou),{name:r,removeCallback:fu(r,t,!0)}}function wh(n,e){let t=function(r){if(r&&!Go(r))return e(r);e()};0<=n[0]?te.close(n[0],function(){te.unlink(n[1],t)}):te.unlink(n[1],t)}function bh(n){let e=null;try{0<=n[0]&&te.closeSync(n[0])}catch(t){if(!Dh(t)&&!Go(t))throw t}finally{try{te.unlinkSync(n[1])}catch(t){Go(t)||(e=t)}}if(e!==null)throw e}function Vo(n,e,t,r){let i=fi(bh,[e,n],r),s=fi(wh,[e,n],r,i);return t.keep||yr.unshift(i),r?i:s}function fu(n,e,t){let r=e.unsafeCleanup?xh:te.rmdir.bind(te),i=e.unsafeCleanup?lu:cu,s=fi(i,n,t),o=fi(r,n,t,s);return e.keep||yr.unshift(s),t?s:o}function fi(n,e,t,r){let i=!1;return function s(o){if(!i){let a=r||s,c=yr.indexOf(a);return c>=0&&yr.splice(c,1),i=!0,t||n===cu||n===lu?n(e):n(e,o||function(){})}}}function vh(){if(uu)for(;yr.length;)try{yr[0]()}catch{}}function tu(n){let e=[],t=null;try{t=J0.randomBytes(n)}catch{t=J0.pseudoRandomBytes(n)}for(let r=0;r<n;r++)e.push(eu[t[r]%eu.length]);return e.join("")}function We(n){return typeof n>"u"}function wr(n,e){if(typeof n=="function")return[{},n];if(We(n))return[{},e];let t={};for(let r of Object.getOwnPropertyNames(n))t[r]=n[r];return[t,e]}function Eh(n,e,t){let r=ve.isAbsolute(n)?n:ve.join(e,n);te.stat(r,function(i){i?te.realpath(ve.dirname(r),function(s,o){if(s)return t(s);t(null,ve.join(o,ve.basename(r)))}):te.realpath(r,t)})}function Ch(n,e){let t=ve.isAbsolute(n)?n:ve.join(e,n);try{return te.statSync(t),te.realpathSync(t)}catch{let i=te.realpathSync(ve.dirname(t));return ve.join(i,ve.basename(t))}}function pu(n){let e=n.tmpdir;if(!We(n.name))return ve.join(e,n.dir,n.name);if(!We(n.template))return ve.join(e,n.dir,n.template).replace(iu,tu(6));let t=[n.prefix?n.prefix:"tmp","-",process.pid,"-",tu(12),n.postfix?"-"+n.postfix:""].join("");return ve.join(e,n.dir,t)}function hu(n){if(!We(n.name)){let e=n.name;if(ve.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let t=ve.basename(e);if(t===".."||t==="."||t!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!We(n.template)&&!n.template.match(iu))throw new Error(`Invalid template, found "${n.template}".`);if(!We(n.tries)&&isNaN(n.tries)||n.tries<0)throw new Error(`Invalid tries, found "${n.tries}".`);n.tries=We(n.name)?n.tries||uh:1,n.keep=!!n.keep,n.detachDescriptor=!!n.detachDescriptor,n.discardDescriptor=!!n.discardDescriptor,n.unsafeCleanup=!!n.unsafeCleanup,n.prefix=We(n.prefix)?"":n.prefix,n.postfix=We(n.postfix)?"":n.postfix}function ru(n,e,t,r){if(We(e))return r(null);Eh(e,t,function(i,s){if(i)return r(i);let o=ve.relative(t,s);if(!s.startsWith(t))return r(new Error(`${n} option must be relative to "${t}", found "${o}".`));r(null,o)})}function nu(n,e,t){if(We(e))return;let r=Ch(e,t),i=ve.relative(t,r);if(!r.startsWith(t))throw new Error(`${n} option must be relative to "${t}", found "${i}".`);return i}function Ih(n,e){Th(n,function(t,r){if(t)return e(t);n.tmpdir=r;try{hu(n,r)}catch(i){return e(i)}ru("dir",n.dir,r,function(i,s){if(i)return e(i);n.dir=We(s)?"":s,ru("template",n.template,r,function(o,a){if(o)return e(o);n.template=a,e(null,n)})})})}function Sh(n){let e=n.tmpdir=du(n);hu(n,e);let t=nu("dir",n.dir,e);return n.dir=We(t)?"":t,n.template=nu("template",n.template,e),n}function Dh(n){return xu(n,-fh,"EBADF")}function Go(n){return xu(n,-ph,"ENOENT")}function xu(n,e,t){return lh?n.code===t:n.code===t&&n.errno===e}function Rh(){uu=!0}function Th(n,e){return te.realpath(n&&n.tmpdir||pi.tmpdir(),e)}function du(n){return te.realpathSync(n&&n.tmpdir||pi.tmpdir())}process.addListener(hh,vh);Object.defineProperty(Pt.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return du()}});Pt.exports.dir=gh;Pt.exports.dirSync=yh;Pt.exports.file=dh;Pt.exports.fileSync=mh;Pt.exports.tmpName=zo;Pt.exports.tmpNameSync=Ho;Pt.exports.setGracefulCleanup=Rh});var an=F((Db,el)=>{"use strict";var Ax="2.0.0",Lx=Number.MAX_SAFE_INTEGER||9007199254740991,Mx=16,Fx=250,kx=["major","premajor","minor","preminor","patch","prepatch","prerelease"];el.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Mx,MAX_SAFE_BUILD_LENGTH:Fx,MAX_SAFE_INTEGER:Lx,RELEASE_TYPES:kx,SEMVER_SPEC_VERSION:Ax,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var cn=F((Rb,tl)=>{"use strict";var Ux=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};tl.exports=Ux});var Ir=F((dt,rl)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:la,MAX_SAFE_BUILD_LENGTH:$x,MAX_LENGTH:Bx}=an(),qx=cn();dt=rl.exports={};var jx=dt.re=[],Xx=dt.safeRe=[],q=dt.src=[],Wx=dt.safeSrc=[],j=dt.t={},Vx=0,fa="[a-zA-Z0-9-]",Gx=[["\\s",1],["\\d",Bx],[fa,$x]],zx=n=>{for(let[e,t]of Gx)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},W=(n,e,t)=>{let r=zx(e),i=Vx++;qx(n,i,e),j[n]=i,q[i]=e,Wx[i]=r,jx[i]=new RegExp(e,t?"g":void 0),Xx[i]=new RegExp(r,t?"g":void 0)};W("NUMERICIDENTIFIER","0|[1-9]\\d*");W("NUMERICIDENTIFIERLOOSE","\\d+");W("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${fa}*`);W("MAINVERSION",`(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})\\.(${q[j.NUMERICIDENTIFIER]})`);W("MAINVERSIONLOOSE",`(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})\\.(${q[j.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASEIDENTIFIER",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIER]})`);W("PRERELEASEIDENTIFIERLOOSE",`(?:${q[j.NONNUMERICIDENTIFIER]}|${q[j.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASE",`(?:-(${q[j.PRERELEASEIDENTIFIER]}(?:\\.${q[j.PRERELEASEIDENTIFIER]})*))`);W("PRERELEASELOOSE",`(?:-?(${q[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${q[j.PRERELEASEIDENTIFIERLOOSE]})*))`);W("BUILDIDENTIFIER",`${fa}+`);W("BUILD",`(?:\\+(${q[j.BUILDIDENTIFIER]}(?:\\.${q[j.BUILDIDENTIFIER]})*))`);W("FULLPLAIN",`v?${q[j.MAINVERSION]}${q[j.PRERELEASE]}?${q[j.BUILD]}?`);W("FULL",`^${q[j.FULLPLAIN]}$`);W("LOOSEPLAIN",`[v=\\s]*${q[j.MAINVERSIONLOOSE]}${q[j.PRERELEASELOOSE]}?${q[j.BUILD]}?`);W("LOOSE",`^${q[j.LOOSEPLAIN]}$`);W("GTLT","((?:<|>)?=?)");W("XRANGEIDENTIFIERLOOSE",`${q[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);W("XRANGEIDENTIFIER",`${q[j.NUMERICIDENTIFIER]}|x|X|\\*`);W("XRANGEPLAIN",`[v=\\s]*(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:\\.(${q[j.XRANGEIDENTIFIER]})(?:${q[j.PRERELEASE]})?${q[j.BUILD]}?)?)?`);W("XRANGEPLAINLOOSE",`[v=\\s]*(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${q[j.XRANGEIDENTIFIERLOOSE]})(?:${q[j.PRERELEASELOOSE]})?${q[j.BUILD]}?)?)?`);W("XRANGE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAIN]}$`);W("XRANGELOOSE",`^${q[j.GTLT]}\\s*${q[j.XRANGEPLAINLOOSE]}$`);W("COERCEPLAIN",`(^|[^\\d])(\\d{1,${la}})(?:\\.(\\d{1,${la}}))?(?:\\.(\\d{1,${la}}))?`);W("COERCE",`${q[j.COERCEPLAIN]}(?:$|[^\\d])`);W("COERCEFULL",q[j.COERCEPLAIN]+`(?:${q[j.PRERELEASE]})?(?:${q[j.BUILD]})?(?:$|[^\\d])`);W("COERCERTL",q[j.COERCE],!0);W("COERCERTLFULL",q[j.COERCEFULL],!0);W("LONETILDE","(?:~>?)");W("TILDETRIM",`(\\s*)${q[j.LONETILDE]}\\s+`,!0);dt.tildeTrimReplace="$1~";W("TILDE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAIN]}$`);W("TILDELOOSE",`^${q[j.LONETILDE]}${q[j.XRANGEPLAINLOOSE]}$`);W("LONECARET","(?:\\^)");W("CARETTRIM",`(\\s*)${q[j.LONECARET]}\\s+`,!0);dt.caretTrimReplace="$1^";W("CARET",`^${q[j.LONECARET]}${q[j.XRANGEPLAIN]}$`);W("CARETLOOSE",`^${q[j.LONECARET]}${q[j.XRANGEPLAINLOOSE]}$`);W("COMPARATORLOOSE",`^${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]})$|^$`);W("COMPARATOR",`^${q[j.GTLT]}\\s*(${q[j.FULLPLAIN]})$|^$`);W("COMPARATORTRIM",`(\\s*)${q[j.GTLT]}\\s*(${q[j.LOOSEPLAIN]}|${q[j.XRANGEPLAIN]})`,!0);dt.comparatorTrimReplace="$1$2$3";W("HYPHENRANGE",`^\\s*(${q[j.XRANGEPLAIN]})\\s+-\\s+(${q[j.XRANGEPLAIN]})\\s*$`);W("HYPHENRANGELOOSE",`^\\s*(${q[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${q[j.XRANGEPLAINLOOSE]})\\s*$`);W("STAR","(<|>)?=?\\s*\\*");W("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");W("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ki=F((Tb,nl)=>{"use strict";var Hx=Object.freeze({loose:!0}),Yx=Object.freeze({}),Qx=n=>n?typeof n!="object"?Hx:n:Yx;nl.exports=Qx});var pa=F((Pb,ol)=>{"use strict";var il=/^[0-9]+$/,sl=(n,e)=>{if(typeof n=="number"&&typeof e=="number")return n===e?0:n<e?-1:1;let t=il.test(n),r=il.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},Kx=(n,e)=>sl(e,n);ol.exports={compareIdentifiers:sl,rcompareIdentifiers:Kx}});var De=F((Nb,cl)=>{"use strict";var Ui=cn(),{MAX_LENGTH:al,MAX_SAFE_INTEGER:$i}=an(),{safeRe:Bi,t:qi}=Ir(),Zx=ki(),{compareIdentifiers:ha}=pa(),xa=class n{constructor(e,t){if(t=Zx(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>al)throw new TypeError(`version is longer than ${al} characters`);Ui("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Bi[qi.LOOSE]:Bi[qi.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>$i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<$i)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ui("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(Ui("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ha(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(Ui("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ha(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?Bi[qi.PRERELEASELOOSE]:Bi[qi.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];r===!1&&(s=[t]),ha(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};cl.exports=xa});var tr=F((Ob,ll)=>{"use strict";var ul=De(),Jx=(n,e,t=!1)=>{if(n instanceof ul)return n;try{return new ul(n,e)}catch(r){if(!t)return null;throw r}};ll.exports=Jx});var pl=F((_b,fl)=>{"use strict";var ed=tr(),td=(n,e)=>{let t=ed(n,e);return t?t.version:null};fl.exports=td});var xl=F((Ab,hl)=>{"use strict";var rd=tr(),nd=(n,e)=>{let t=rd(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};hl.exports=nd});var gl=F((Lb,ml)=>{"use strict";var dl=De(),id=(n,e,t,r,i)=>{typeof t=="string"&&(i=r,r=t,t=void 0);try{return new dl(n instanceof dl?n.version:n,t).inc(e,r,i).version}catch{return null}};ml.exports=id});var bl=F((Mb,wl)=>{"use strict";var yl=tr(),sd=(n,e)=>{let t=yl(n,null,!0),r=yl(e,null,!0),i=t.compare(r);if(i===0)return null;let s=i>0,o=s?t:r,a=s?r:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let x=c?"pre":"";return t.major!==r.major?x+"major":t.minor!==r.minor?x+"minor":t.patch!==r.patch?x+"patch":"prerelease"};wl.exports=sd});var El=F((Fb,vl)=>{"use strict";var od=De(),ad=(n,e)=>new od(n,e).major;vl.exports=ad});var Il=F((kb,Cl)=>{"use strict";var cd=De(),ud=(n,e)=>new cd(n,e).minor;Cl.exports=ud});var Dl=F((Ub,Sl)=>{"use strict";var ld=De(),fd=(n,e)=>new ld(n,e).patch;Sl.exports=fd});var Tl=F(($b,Rl)=>{"use strict";var pd=tr(),hd=(n,e)=>{let t=pd(n,e);return t&&t.prerelease.length?t.prerelease:null};Rl.exports=hd});var tt=F((Bb,Nl)=>{"use strict";var Pl=De(),xd=(n,e,t)=>new Pl(n,t).compare(new Pl(e,t));Nl.exports=xd});var _l=F((qb,Ol)=>{"use strict";var dd=tt(),md=(n,e,t)=>dd(e,n,t);Ol.exports=md});var Ll=F((jb,Al)=>{"use strict";var gd=tt(),yd=(n,e)=>gd(n,e,!0);Al.exports=yd});var ji=F((Xb,Fl)=>{"use strict";var Ml=De(),wd=(n,e,t)=>{let r=new Ml(n,t),i=new Ml(e,t);return r.compare(i)||r.compareBuild(i)};Fl.exports=wd});var Ul=F((Wb,kl)=>{"use strict";var bd=ji(),vd=(n,e)=>n.sort((t,r)=>bd(t,r,e));kl.exports=vd});var Bl=F((Vb,$l)=>{"use strict";var Ed=ji(),Cd=(n,e)=>n.sort((t,r)=>Ed(r,t,e));$l.exports=Cd});var un=F((Gb,ql)=>{"use strict";var Id=tt(),Sd=(n,e,t)=>Id(n,e,t)>0;ql.exports=Sd});var Xi=F((zb,jl)=>{"use strict";var Dd=tt(),Rd=(n,e,t)=>Dd(n,e,t)<0;jl.exports=Rd});var da=F((Hb,Xl)=>{"use strict";var Td=tt(),Pd=(n,e,t)=>Td(n,e,t)===0;Xl.exports=Pd});var ma=F((Yb,Wl)=>{"use strict";var Nd=tt(),Od=(n,e,t)=>Nd(n,e,t)!==0;Wl.exports=Od});var Wi=F((Qb,Vl)=>{"use strict";var _d=tt(),Ad=(n,e,t)=>_d(n,e,t)>=0;Vl.exports=Ad});var Vi=F((Kb,Gl)=>{"use strict";var Ld=tt(),Md=(n,e,t)=>Ld(n,e,t)<=0;Gl.exports=Md});var ga=F((Zb,zl)=>{"use strict";var Fd=da(),kd=ma(),Ud=un(),$d=Wi(),Bd=Xi(),qd=Vi(),jd=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Fd(n,t,r);case"!=":return kd(n,t,r);case">":return Ud(n,t,r);case">=":return $d(n,t,r);case"<":return Bd(n,t,r);case"<=":return qd(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};zl.exports=jd});var Yl=F((Jb,Hl)=>{"use strict";var Xd=De(),Wd=tr(),{safeRe:Gi,t:zi}=Ir(),Vd=(n,e)=>{if(n instanceof Xd)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(e.includePrerelease?Gi[zi.COERCEFULL]:Gi[zi.COERCE]);else{let c=e.includePrerelease?Gi[zi.COERCERTLFULL]:Gi[zi.COERCERTL],u;for(;(u=c.exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(t===null)return null;let r=t[2],i=t[3]||"0",s=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return Wd(`${r}.${i}.${s}${o}${a}`,e)};Hl.exports=Vd});var Kl=F((ev,Ql)=>{"use strict";var ya=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};Ql.exports=ya});var rt=F((tv,tf)=>{"use strict";var Gd=/\s+/g,wa=class n{constructor(e,t){if(t=Hd(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof ba)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(Gd," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Jl(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&tm(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&Jd)|(this.options.loose&&em))+":"+e,i=Zl.get(r);if(i)return i;let s=this.options.loose,o=s?Oe[Re.HYPHENRANGELOOSE]:Oe[Re.HYPHENRANGE];e=e.replace(o,fm(this.options.includePrerelease)),oe("hyphen replace",e),e=e.replace(Oe[Re.COMPARATORTRIM],Qd),oe("comparator trim",e),e=e.replace(Oe[Re.TILDETRIM],Kd),oe("tilde trim",e),e=e.replace(Oe[Re.CARETTRIM],Zd),oe("caret trim",e);let a=e.split(" ").map(m=>rm(m,this.options)).join(" ").split(/\s+/).map(m=>lm(m,this.options));s&&(a=a.filter(m=>(oe("loose invalid filter",m,this.options),!!m.match(Oe[Re.COMPARATORLOOSE])))),oe("range list",a);let c=new Map,u=a.map(m=>new ba(m,this.options));for(let m of u){if(Jl(m))return[m];c.set(m.value,m)}c.size>1&&c.has("")&&c.delete("");let x=[...c.values()];return Zl.set(r,x),x}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>ef(r,t)&&e.set.some(i=>ef(i,t)&&r.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Yd(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(pm(this.set[t],e,this.options))return!0;return!1}};tf.exports=wa;var zd=Kl(),Zl=new zd,Hd=ki(),ba=ln(),oe=cn(),Yd=De(),{safeRe:Oe,t:Re,comparatorTrimReplace:Qd,tildeTrimReplace:Kd,caretTrimReplace:Zd}=Ir(),{FLAG_INCLUDE_PRERELEASE:Jd,FLAG_LOOSE:em}=an(),Jl=n=>n.value==="<0.0.0-0",tm=n=>n.value==="",ef=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(s=>i.intersects(s,e)),i=r.pop();return t},rm=(n,e)=>(n=n.replace(Oe[Re.BUILD],""),oe("comp",n,e),n=sm(n,e),oe("caret",n),n=nm(n,e),oe("tildes",n),n=am(n,e),oe("xrange",n),n=um(n,e),oe("stars",n),n),_e=n=>!n||n.toLowerCase()==="x"||n==="*",nm=(n,e)=>n.trim().split(/\s+/).map(t=>im(t,e)).join(" "),im=(n,e)=>{let t=e.loose?Oe[Re.TILDELOOSE]:Oe[Re.TILDE];return n.replace(t,(r,i,s,o,a)=>{oe("tilde",n,r,i,s,o,a);let c;return _e(i)?c="":_e(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:_e(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(oe("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,oe("tilde return",c),c})},sm=(n,e)=>n.trim().split(/\s+/).map(t=>om(t,e)).join(" "),om=(n,e)=>{oe("caret",n,e);let t=e.loose?Oe[Re.CARETLOOSE]:Oe[Re.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,s,o,a,c)=>{oe("caret",n,i,s,o,a,c);let u;return _e(s)?u="":_e(o)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:_e(a)?s==="0"?u=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:c?(oe("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(oe("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),oe("caret return",u),u})},am=(n,e)=>(oe("replaceXRanges",n,e),n.split(/\s+/).map(t=>cm(t,e)).join(" ")),cm=(n,e)=>{n=n.trim();let t=e.loose?Oe[Re.XRANGELOOSE]:Oe[Re.XRANGE];return n.replace(t,(r,i,s,o,a,c)=>{oe("xRange",n,r,i,s,o,a,c);let u=_e(s),x=u||_e(o),m=x||_e(a),d=m;return i==="="&&d&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&d?(x&&(o=0),a=0,i===">"?(i=">=",x?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",x?s=+s+1:o=+o+1),i==="<"&&(c="-0"),r=`${i+s}.${o}.${a}${c}`):x?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:m&&(r=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),oe("xRange return",r),r})},um=(n,e)=>(oe("replaceStars",n,e),n.trim().replace(Oe[Re.STAR],"")),lm=(n,e)=>(oe("replaceGTE0",n,e),n.trim().replace(Oe[e.includePrerelease?Re.GTE0PRE:Re.GTE0],"")),fm=n=>(e,t,r,i,s,o,a,c,u,x,m,d)=>(_e(r)?t="":_e(i)?t=`>=${r}.0.0${n?"-0":""}`:_e(s)?t=`>=${r}.${i}.0${n?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,_e(u)?c="":_e(x)?c=`<${+u+1}.0.0-0`:_e(m)?c=`<${u}.${+x+1}.0-0`:d?c=`<=${u}.${x}.${m}-${d}`:n?c=`<${u}.${x}.${+m+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),pm=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(oe(n[r].semver),n[r].semver!==ba.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ln=F((rv,cf)=>{"use strict";var fn=Symbol("SemVer ANY"),Ca=class n{static get ANY(){return fn}constructor(e,t){if(t=rf(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ea("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===fn?this.value="":this.value=this.operator+this.semver.version,Ea("comp",this)}parse(e){let t=this.options.loose?nf[sf.COMPARATORLOOSE]:nf[sf.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new of(r[2],this.options.loose):this.semver=fn}toString(){return this.value}test(e){if(Ea("Comparator.test",e,this.options.loose),this.semver===fn||e===fn)return!0;if(typeof e=="string")try{e=new of(e,this.options)}catch{return!1}return va(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new af(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new af(this.value,t).test(e.semver):(t=rf(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||va(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||va(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};cf.exports=Ca;var rf=ki(),{safeRe:nf,t:sf}=Ir(),va=ga(),Ea=cn(),of=De(),af=rt()});var pn=F((nv,uf)=>{"use strict";var hm=rt(),xm=(n,e,t)=>{try{e=new hm(e,t)}catch{return!1}return e.test(n)};uf.exports=xm});var ff=F((iv,lf)=>{"use strict";var dm=rt(),mm=(n,e)=>new dm(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));lf.exports=mm});var hf=F((sv,pf)=>{"use strict";var gm=De(),ym=rt(),wm=(n,e,t)=>{let r=null,i=null,s=null;try{s=new ym(e,t)}catch{return null}return n.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new gm(r,t))}),r};pf.exports=wm});var df=F((ov,xf)=>{"use strict";var bm=De(),vm=rt(),Em=(n,e,t)=>{let r=null,i=null,s=null;try{s=new vm(e,t)}catch{return null}return n.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new bm(r,t))}),r};xf.exports=Em});var yf=F((av,gf)=>{"use strict";var Ia=De(),Cm=rt(),mf=un(),Im=(n,e)=>{n=new Cm(n,e);let t=new Ia("0.0.0");if(n.test(t)||(t=new Ia("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],s=null;i.forEach(o=>{let a=new Ia(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||mf(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!t||mf(t,s))&&(t=s)}return t&&n.test(t)?t:null};gf.exports=Im});var bf=F((cv,wf)=>{"use strict";var Sm=rt(),Dm=(n,e)=>{try{return new Sm(n,e).range||"*"}catch{return null}};wf.exports=Dm});var Hi=F((uv,If)=>{"use strict";var Rm=De(),Cf=ln(),{ANY:Tm}=Cf,Pm=rt(),Nm=pn(),vf=un(),Ef=Xi(),Om=Vi(),_m=Wi(),Am=(n,e,t,r)=>{n=new Rm(n,r),e=new Pm(e,r);let i,s,o,a,c;switch(t){case">":i=vf,s=Om,o=Ef,a=">",c=">=";break;case"<":i=Ef,s=_m,o=vf,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Nm(n,e,r))return!1;for(let u=0;u<e.set.length;++u){let x=e.set[u],m=null,d=null;if(x.forEach(l=>{l.semver===Tm&&(l=new Cf(">=0.0.0")),m=m||l,d=d||l,i(l.semver,m.semver,r)?m=l:o(l.semver,d.semver,r)&&(d=l)}),m.operator===a||m.operator===c||(!d.operator||d.operator===a)&&s(n,d.semver))return!1;if(d.operator===c&&o(n,d.semver))return!1}return!0};If.exports=Am});var Df=F((lv,Sf)=>{"use strict";var Lm=Hi(),Mm=(n,e,t)=>Lm(n,e,">",t);Sf.exports=Mm});var Tf=F((fv,Rf)=>{"use strict";var Fm=Hi(),km=(n,e,t)=>Fm(n,e,"<",t);Rf.exports=km});var Of=F((pv,Nf)=>{"use strict";var Pf=rt(),Um=(n,e,t)=>(n=new Pf(n,t),e=new Pf(e,t),n.intersects(e,t));Nf.exports=Um});var Af=F((hv,_f)=>{"use strict";var $m=pn(),Bm=tt();_f.exports=(n,e,t)=>{let r=[],i=null,s=null,o=n.sort((x,m)=>Bm(x,m,t));for(let x of o)$m(x,e,t)?(s=x,i||(i=x)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let a=[];for(let[x,m]of r)x===m?a.push(x):!m&&x===o[0]?a.push("*"):m?x===o[0]?a.push(`<=${m}`):a.push(`${x} - ${m}`):a.push(`>=${x}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var $f=F((xv,Uf)=>{"use strict";var Lf=rt(),Da=ln(),{ANY:Sa}=Da,hn=pn(),Ra=tt(),qm=(n,e,t={})=>{if(n===e)return!0;n=new Lf(n,t),e=new Lf(e,t);let r=!1;e:for(let i of n.set){for(let s of e.set){let o=Xm(i,s,t);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},jm=[new Da(">=0.0.0-0")],Mf=[new Da(">=0.0.0")],Xm=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Sa){if(e.length===1&&e[0].semver===Sa)return!0;t.includePrerelease?n=jm:n=Mf}if(e.length===1&&e[0].semver===Sa){if(t.includePrerelease)return!0;e=Mf}let r=new Set,i,s;for(let l of n)l.operator===">"||l.operator===">="?i=Ff(i,l,t):l.operator==="<"||l.operator==="<="?s=kf(s,l,t):r.add(l.semver);if(r.size>1)return null;let o;if(i&&s){if(o=Ra(i.semver,s.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let l of r){if(i&&!hn(l,String(i),t)||s&&!hn(l,String(s),t))return null;for(let w of e)if(!hn(l,String(w),t))return!1;return!0}let a,c,u,x,m=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&s.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let l of e){if(x=x||l.operator===">"||l.operator===">=",u=u||l.operator==="<"||l.operator==="<=",i){if(d&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===d.major&&l.semver.minor===d.minor&&l.semver.patch===d.patch&&(d=!1),l.operator===">"||l.operator===">="){if(a=Ff(i,l,t),a===l&&a!==i)return!1}else if(i.operator===">="&&!hn(i.semver,String(l),t))return!1}if(s){if(m&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===m.major&&l.semver.minor===m.minor&&l.semver.patch===m.patch&&(m=!1),l.operator==="<"||l.operator==="<="){if(c=kf(s,l,t),c===l&&c!==s)return!1}else if(s.operator==="<="&&!hn(s.semver,String(l),t))return!1}if(!l.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&x&&!i&&o!==0||d||m)},Ff=(n,e,t)=>{if(!n)return e;let r=Ra(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},kf=(n,e,t)=>{if(!n)return e;let r=Ra(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};Uf.exports=qm});var xn=F((dv,jf)=>{"use strict";var Ta=Ir(),Bf=an(),Wm=De(),qf=pa(),Vm=tr(),Gm=pl(),zm=xl(),Hm=gl(),Ym=bl(),Qm=El(),Km=Il(),Zm=Dl(),Jm=Tl(),eg=tt(),tg=_l(),rg=Ll(),ng=ji(),ig=Ul(),sg=Bl(),og=un(),ag=Xi(),cg=da(),ug=ma(),lg=Wi(),fg=Vi(),pg=ga(),hg=Yl(),xg=ln(),dg=rt(),mg=pn(),gg=ff(),yg=hf(),wg=df(),bg=yf(),vg=bf(),Eg=Hi(),Cg=Df(),Ig=Tf(),Sg=Of(),Dg=Af(),Rg=$f();jf.exports={parse:Vm,valid:Gm,clean:zm,inc:Hm,diff:Ym,major:Qm,minor:Km,patch:Zm,prerelease:Jm,compare:eg,rcompare:tg,compareLoose:rg,compareBuild:ng,sort:ig,rsort:sg,gt:og,lt:ag,eq:cg,neq:ug,gte:lg,lte:fg,cmp:pg,coerce:hg,Comparator:xg,Range:dg,satisfies:mg,toComparators:gg,maxSatisfying:yg,minSatisfying:wg,minVersion:bg,validRange:vg,outside:Eg,gtr:Cg,ltr:Ig,intersects:Sg,simplifyRange:Dg,subset:Rg,SemVer:Wm,re:Ta.re,src:Ta.src,tokens:Ta.t,SEMVER_SPEC_VERSION:Bf.SEMVER_SPEC_VERSION,RELEASE_TYPES:Bf.RELEASE_TYPES,compareIdentifiers:qf.compareIdentifiers,rcompareIdentifiers:qf.rcompareIdentifiers}});var ip=F((Ma,Fa)=>{(function(n,e){typeof Ma=="object"&&typeof Fa<"u"?Fa.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})(Ma,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",i="second",s="minute",o="hour",a="day",c="week",u="month",x="quarter",m="year",d="date",l="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var O=["th","st","nd","rd"],M=N%100;return"["+N+(O[(M-20)%10]||O[M]||O[0])+"]"}},_=function(N,O,M){var U=String(N);return!U||U.length>=O?N:""+Array(O+1-U.length).join(M)+N},S={s:_,z:function(N){var O=-N.utcOffset(),M=Math.abs(O),U=Math.floor(M/60),A=M%60;return(O<=0?"+":"-")+_(U,2,"0")+":"+_(A,2,"0")},m:function N(O,M){if(O.date()<M.date())return-N(M,O);var U=12*(M.year()-O.year())+(M.month()-O.month()),A=O.clone().add(U,u),X=M-A<0,B=O.clone().add(U+(X?-1:1),u);return+(-(U+(M-A)/(X?A-B:B-A))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:u,y:m,w:c,d:a,D:d,h:o,m:s,s:i,ms:r,Q:x}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},v="en",p={};p[v]=P;var h="$isDayjsObject",y=function(N){return N instanceof C||!(!N||!N[h])},R=function N(O,M,U){var A;if(!O)return v;if(typeof O=="string"){var X=O.toLowerCase();p[X]&&(A=X),M&&(p[X]=M,A=X);var B=O.split("-");if(!A&&B.length>1)return N(B[0])}else{var Q=O.name;p[Q]=O,A=Q}return!U&&A&&(v=A),A||!U&&v},g=function(N,O){if(y(N))return N.clone();var M=typeof O=="object"?O:{};return M.date=N,M.args=arguments,new C(M)},D=S;D.l=R,D.i=y,D.w=function(N,O){return g(N,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var C=function(){function N(M){this.$L=R(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[h]=!0}var O=N.prototype;return O.parse=function(M){this.$d=function(U){var A=U.date,X=U.utc;if(A===null)return new Date(NaN);if(D.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var B=A.match(w);if(B){var Q=B[2]-1||0,Z=(B[7]||"0").substring(0,3);return X?new Date(Date.UTC(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)):new Date(B[1],Q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Z)}}return new Date(A)}(M),this.init()},O.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},O.$utils=function(){return D},O.isValid=function(){return this.$d.toString()!==l},O.isSame=function(M,U){var A=g(M);return this.startOf(U)<=A&&A<=this.endOf(U)},O.isAfter=function(M,U){return g(M)<this.startOf(U)},O.isBefore=function(M,U){return this.endOf(U)<g(M)},O.$g=function(M,U,A){return D.u(M)?this[U]:this.set(A,M)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(M,U){var A=this,X=!!D.u(U)||U,B=D.p(M),Q=function(f,L){var I=D.w(A.$u?Date.UTC(A.$y,L,f):new Date(A.$y,L,f),A);return X?I:I.endOf(a)},Z=function(f,L){return D.w(A.toDate()[f].apply(A.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(L)),A)},ue=this.$W,de=this.$M,Pe=this.$D,st="set"+(this.$u?"UTC":"");switch(B){case m:return X?Q(1,0):Q(31,11);case u:return X?Q(1,de):Q(0,de+1);case c:var gt=this.$locale().weekStart||0,b=(ue<gt?ue+7:ue)-gt;return Q(X?Pe-b:Pe+(6-b),de);case a:case d:return Z(st+"Hours",0);case o:return Z(st+"Minutes",1);case s:return Z(st+"Seconds",2);case i:return Z(st+"Milliseconds",3);default:return this.clone()}},O.endOf=function(M){return this.startOf(M,!1)},O.$set=function(M,U){var A,X=D.p(M),B="set"+(this.$u?"UTC":""),Q=(A={},A[a]=B+"Date",A[d]=B+"Date",A[u]=B+"Month",A[m]=B+"FullYear",A[o]=B+"Hours",A[s]=B+"Minutes",A[i]=B+"Seconds",A[r]=B+"Milliseconds",A)[X],Z=X===a?this.$D+(U-this.$W):U;if(X===u||X===m){var ue=this.clone().set(d,1);ue.$d[Q](Z),ue.init(),this.$d=ue.set(d,Math.min(this.$D,ue.daysInMonth())).$d}else Q&&this.$d[Q](Z);return this.init(),this},O.set=function(M,U){return this.clone().$set(M,U)},O.get=function(M){return this[D.p(M)]()},O.add=function(M,U){var A,X=this;M=Number(M);var B=D.p(U),Q=function(de){var Pe=g(X);return D.w(Pe.date(Pe.date()+Math.round(de*M)),X)};if(B===u)return this.set(u,this.$M+M);if(B===m)return this.set(m,this.$y+M);if(B===a)return Q(1);if(B===c)return Q(7);var Z=(A={},A[s]=e,A[o]=t,A[i]=n,A)[B]||1,ue=this.$d.getTime()+M*Z;return D.w(ue,this)},O.subtract=function(M,U){return this.add(-1*M,U)},O.format=function(M){var U=this,A=this.$locale();if(!this.isValid())return A.invalidDate||l;var X=M||"YYYY-MM-DDTHH:mm:ssZ",B=D.z(this),Q=this.$H,Z=this.$m,ue=this.$M,de=A.weekdays,Pe=A.months,st=A.meridiem,gt=function(L,I,Y,ie){return L&&(L[I]||L(U,X))||Y[I].slice(0,ie)},b=function(L){return D.s(Q%12||12,L,"0")},f=st||function(L,I,Y){var ie=L<12?"AM":"PM";return Y?ie.toLowerCase():ie};return X.replace(E,function(L,I){return I||function(Y){switch(Y){case"YY":return String(U.$y).slice(-2);case"YYYY":return D.s(U.$y,4,"0");case"M":return ue+1;case"MM":return D.s(ue+1,2,"0");case"MMM":return gt(A.monthsShort,ue,Pe,3);case"MMMM":return gt(Pe,ue);case"D":return U.$D;case"DD":return D.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return gt(A.weekdaysMin,U.$W,de,2);case"ddd":return gt(A.weekdaysShort,U.$W,de,3);case"dddd":return de[U.$W];case"H":return String(Q);case"HH":return D.s(Q,2,"0");case"h":return b(1);case"hh":return b(2);case"a":return f(Q,Z,!0);case"A":return f(Q,Z,!1);case"m":return String(Z);case"mm":return D.s(Z,2,"0");case"s":return String(U.$s);case"ss":return D.s(U.$s,2,"0");case"SSS":return D.s(U.$ms,3,"0");case"Z":return B}return null}(L)||B.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(M,U,A){var X,B=this,Q=D.p(U),Z=g(M),ue=(Z.utcOffset()-this.utcOffset())*e,de=this-Z,Pe=function(){return D.m(B,Z)};switch(Q){case m:X=Pe()/12;break;case u:X=Pe();break;case x:X=Pe()/3;break;case c:X=(de-ue)/6048e5;break;case a:X=(de-ue)/864e5;break;case o:X=de/t;break;case s:X=de/e;break;case i:X=de/n;break;default:X=de}return A?X:D.a(X)},O.daysInMonth=function(){return this.endOf(u).$D},O.$locale=function(){return p[this.$L]},O.locale=function(M,U){if(!M)return this.$L;var A=this.clone(),X=R(M,U,!0);return X&&(A.$L=X),A},O.clone=function(){return D.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},N}(),T=C.prototype;return g.prototype=T,[["$ms",r],["$s",i],["$m",s],["$H",o],["$W",a],["$M",u],["$y",m],["$D",d]].forEach(function(N){T[N[1]]=function(O){return this.$g(O,N[0],N[1])}}),g.extend=function(N,O){return N.$i||(N(O,C,g),N.$i=!0),g},g.locale=R,g.isDayjs=y,g.unix=function(N){return g(1e3*N)},g.en=p[v],g.Ls=p,g.p={},g})});var sp=F((ka,Ua)=>{(function(n,e){typeof ka=="object"&&typeof Ua<"u"?Ua.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs_plugin_relativeTime=e()})(ka,function(){"use strict";return function(n,e,t){n=n||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(a,c,u,x){return r.fromToBase(a,c,u,x)}t.en.relativeTime=i,r.fromToBase=function(a,c,u,x,m){for(var d,l,w,E=u.$locale().relativeTime||i,P=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],_=P.length,S=0;S<_;S+=1){var v=P[S];v.d&&(d=x?t(a).diff(u,v.d,!0):u.diff(a,v.d,!0));var p=(n.rounding||Math.round)(Math.abs(d));if(w=d>0,p<=v.r||!v.r){p<=1&&S>0&&(v=P[S-1]);var h=E[v.l];m&&(p=m(""+p)),l=typeof h=="string"?h.replace("%d",p):h(p,c,v.l,w);break}}if(c)return l;var y=w?E.future:E.past;return typeof y=="function"?y(l):y.replace("%s",l)},r.to=function(a,c){return s(a,c,this,!0)},r.from=function(a,c){return s(a,c,this)};var o=function(a){return a.$u?t.utc():t()};r.toNow=function(a){return this.to(o(this),a)},r.fromNow=function(a){return this.from(o(this),a)}}})});var qg={};Wa(qg,{activate:()=>$g,deactivate:()=>Bg});module.exports=Ip(qg);var yp=V(require("path")),ze=require("vscode");var cc=require("vscode");var Ct=V(require("path")),z=require("vscode");var Ur=(i=>(i.empty="only the target itself",i.files="the target and any immediate file children thereof",i.immediates="the target and any immediate children thereof",i.infinity="the target and all of its descendants\u2014full recursion",i))(Ur||{});var ee={};Wa(ee,{default:()=>Va.default});js(ee,require("fs"));var Va=V(require("fs"),1);function le(n){return new Promise((e,t)=>{(0,ee.access)(n,r=>e(!r))})}var Ga=require("util"),ot=(0,Ga.promisify)(ee.lstat);var za=require("util"),Xs=(0,za.promisify)(ee.readFile);var Ha=require("util"),zt=(0,Ha.promisify)(ee.readdir);var Ya=require("util"),Ws=(0,Ya.promisify)(ee.rmdir);var Qa=require("util"),wt=(0,Qa.promisify)(ee.stat);var Ka=require("util"),Ht=(0,Ka.promisify)(ee.unlink);var Za=require("util"),_n=(0,Za.promisify)(ee.writeFile);var cr=V(require("path")),Vs=require("vscode"),ar=class{constructor(e,t=!1){this.expression=e;this.recursive=t}get label(){let e=this.recursive?" (Recursive)":"";return`${this.expression}${e}`}get description(){let e=this.recursive?" (Recursive)":"";return`Add '${this.expression}' to 'svn:ignore'${e}`}};async function Ja(n,e){if(e.length===0)return!1;let t=new RegExp("\\.[^\\.]+(\\.map)?$","i");if(e.length===1){let w=e[0],E=w.fsPath.match(t),P=E&&E[0]?E[0]:"",_=cr.basename(w.fsPath),S=cr.dirname(w.fsPath),v=[];v.push(new ar(_)),P&&v.push(new ar("*"+P)),v.push(new ar(_,!0)),P&&v.push(new ar("*"+P,!0));let p=await Vs.window.showQuickPick(v);return p?n.addToIgnore([p.expression],S,p.recursive):!1}let r=e.length,i="(Recursive)",s=`Ignore ${r} by filename`,o=`Ignore ${r} by extension`,a=`Ignore ${r} by filename ${i}`,c=`Ignore ${r} by extension ${i}`,u=[s,o,a,c],x=await Vs.window.showQuickPick(u);if(!x)return!1;let m=x.startsWith(s),d=x.endsWith(i),l={};for(let w of e){let E=cr.dirname(w.fsPath),P=cr.basename(w.fsPath),_=w.fsPath.match(t),S=_&&_[0]?_[0]:"";typeof l[E]>"u"&&(l[E]=[]),m?l[E].push(P):S&&l[E].push("*"+S)}for(let w in l)if(l.hasOwnProperty(w)){let E=[...new Set(l[w])];await n.addToIgnore(E,w,d)}return!0}var An=require("vscode");function ec(n,e,t){let r=[],i=0;for(let s of t){let o=s.originalEndLineNumber===0,a=s.modifiedEndLineNumber===0;if(r.push(n.getText(new An.Range(i,0,o?s.originalStartLineNumber:s.originalStartLineNumber-1,0))),!a){let c=s.modifiedStartLineNumber-1,u=0;o&&s.originalStartLineNumber===n.lineCount&&(c=n.lineCount-1,u=n.lineAt(c).range.end.character),r.push(e.getText(new An.Range(c,u,s.modifiedEndLineNumber,0)))}i=o?s.originalStartLineNumber:s.originalEndLineNumber}return r.push(n.getText(new An.Range(i,0,n.lineCount,0))),r.join("")}var eo=V(require("path")),_t=require("vscode");var Fe=V(require("path")),tc=require("vscode");function Gs(n){return n.then(()=>{})}function Ie(n){return n.forEach(e=>e.dispose()),[]}function Be(n){return{dispose:n}}function Sp(n){return Be(()=>Ie(n))}function at(...n){return(e,t=null,r)=>{let i=Sp(n.map(s=>s(o=>e.call(t,o))));return r&&r.push(i),i}}function me(n,e){return(t,r=null,i)=>n(s=>e(s)&&t.call(r,s),null,i)}function Dp(n){return(e,t=null,r)=>{let i=n(s=>(i.dispose(),e.call(t,s)),null,r);return i}}function Yt(n){return new Promise(e=>Dp(n)(e))}var Rp=new RegExp(Fe.sep==="/"?"\\\\":"/","g"),Tp=new RegExp("^\\\\(\\w:)","g");function He(n){return n=n.replace(Rp,Fe.sep),n=n.replace(Tp,"$1"),Fe.sep==="\\"&&(n=n.charAt(0).toLowerCase()+n.slice(1)),n}function ct(n){return n=He(n),Fe.sep==="\\"&&(n=n.toLowerCase()),n}function ke(n,e){return n.trim()===""||e.trim()===""?!1:(n=n.replace(/[\\\/]/g,Fe.sep),e=e.replace(/[\\\/]/g,Fe.sep),Fe.sep==="\\"&&(n=n.replace(/^\\/,"").toLowerCase(),e=e.replace(/^\\/,"").toLowerCase()),n===e?!0:(n.charAt(n.length-1)!==Fe.sep&&(n+=Fe.sep),e.startsWith(n)))}function zs(n){return n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>t===0?e.toLowerCase():e.toUpperCase()).replace(/[\s\-]+/g,"")}function Hs(n){return new Promise(e=>setTimeout(e,n))}function Ln(n){switch(n){case"CurrentBranch":case"Log":case"Show":case"Info":case"Changes":return!0;default:return!1}}async function Ys(n){await le(n)&&(await ot(n)).isDirectory()&&(await Promise.all((await zt(n)).map(async e=>{let t=Fe.join(n,e);(await ot(t)).isDirectory()?await Ys(t):await Ht(t)})),await Ws(n))}function Ye(n){if(n===void 0)throw new Error("undefined unwrap");return n}function Mn(n){return/@/.test(n)&&(n+="@"),n}function bt(){return process.env.SVN_ASP_DOT_NET_HACK?"_svn":".svn"}async function Qs(n,e=!0){let t=bt(),r=await le(`${n}/${t}`);if(r||!e)return r;let i=Fe.dirname(n);return i===n||i==="."?!1:Qs(i,!0)}function Ot(n,e){tc.commands.executeCommand("setContext",n,e)}function Pp(n){return/^[a-zA-Z]:\\/.test(n)}function rc(n,e){return Pp(n)&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e}var nc=Be(()=>null);function $r(n){return(e,t,r)=>{let i=null,s=null;if(typeof r.value=="function"?(i="value",s=r.value):typeof r.get=="function"&&(i="get",s=r.get),!s||!i)throw new Error("not supported");r[i]=n(s,t)}}function Np(n,e){let t=`$memoize$${e}`;return function(...r){return this.hasOwnProperty(t)||Object.defineProperty(this,t,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[t]}}var ge=$r(Np);function Op(n,e){let t=`$throttle$current$${e}`,r=`$throttle$next$${e}`,i=function(...s){if(this[r])return this[r];if(this[t])return this[r]=Gs(this[t]).then(()=>(this[r]=void 0,i.apply(this,s))),this[r];this[t]=n.apply(this,s);let o=()=>this[t]=void 0;return Gs(this[t]).then(o,o),this[t]};return i}var ur=$r(Op);function _p(n,e){let t=`__$sequence$${e}`;return function(...r){let i=this[t]||Promise.resolve(null),s=async()=>n.apply(this,r);return this[t]=i.then(s,s),this[t]}}var ic=$r(_p);function Ne(n){return $r((e,t)=>{let r=`$debounce$${t}`;return function(...i){clearTimeout(this[r]),this[r]=setTimeout(()=>e.apply(this,i),n)}})}var Ks={};function sc(n){return $r((e,t)=>function(...r){let i=Ks[n]||Promise.resolve(null),s=async()=>e.apply(this,r);return Ks[n]=i.then(s,s),Ks[n]})}var lr=require("vscode"),Zs="svn",Js=class{constructor(){this._onDidChange=new lr.EventEmitter;this.configuration=lr.workspace.getConfiguration(Zs),lr.workspace.onDidChangeConfiguration(this.onConfigurationChanged,this)}get onDidChange(){return this._onDidChange.event}onConfigurationChanged(e){e.affectsConfiguration(Zs)&&(this.configuration=lr.workspace.getConfiguration(Zs),this._onDidChange.fire(e))}get(e,t){return this.configuration.get(e,t)}update(e,t,r){return this.configuration.update(e,t,r)}inspect(e){return this.configuration.inspect(e)}},$=new Js;var Ap=eo.join(__dirname,"..","icons");function ye(n,e){return _t.Uri.file(eo.join(Ap,e,`${n}.svg`))}var vt=class vt{constructor(e,t,r,i,s=!1){this._resourceUri=e;this._type=t;this._renameResourceUri=r;this._props=i;this._remote=s}get resourceUri(){return this._resourceUri}get type(){return this._type}get renameResourceUri(){return this._renameResourceUri}get props(){return this._props}get remote(){return this._remote}get decorations(){let e={iconPath:this.getIconPath("light")},t={iconPath:this.getIconPath("dark")},r=this.tooltip,i=this.strikeThrough,s=this.faded;return{strikeThrough:i,faded:s,tooltip:r,light:e,dark:t}}get command(){let e=$.get("diff.withHead",!0),t=$.get("sourceControl.changesLeftClick","open diff");return!this.remote&&t==="open"?{command:"svn.openFile",title:"Open file",arguments:[this]}:this.remote||e?{command:"svn.openResourceHead",title:"Open Diff With Head",arguments:[this]}:{command:"svn.openResourceBase",title:"Open Diff With Base",arguments:[this]}}getIconPath(e){if(this.type==="added"&&this.renameResourceUri)return vt.icons[e].Renamed;let t=this.type.charAt(0).toUpperCase()+this.type.slice(1);if(typeof vt.icons[e][t]<"u")return vt.icons[e][t]}get tooltip(){return this.type==="added"&&this.renameResourceUri?"Renamed from "+this.renameResourceUri.fsPath:this.type==="normal"&&this.props&&this.props!=="none"?"Property "+this.props.charAt(0).toUpperCase()+this.props.slice(1):this.type.charAt(0).toUpperCase()+this.type.slice(1)}get strikeThrough(){return this.type==="deleted"}get faded(){return!1}get letter(){switch(this.type){case"added":return this.renameResourceUri?"R":"A";case"conflicted":return"C";case"deleted":return"D";case"external":return"E";case"ignored":return"I";case"modified":return"M";case"replaced":return"R";case"unversioned":return"U";case"missing":return"!";default:return}}get color(){switch(this.type){case"modified":case"replaced":return new _t.ThemeColor("gitDecoration.modifiedResourceForeground");case"deleted":case"missing":return new _t.ThemeColor("gitDecoration.deletedResourceForeground");case"added":case"unversioned":return new _t.ThemeColor("gitDecoration.untrackedResourceForeground");case"external":case"ignored":return new _t.ThemeColor("gitDecoration.ignoredResourceForeground");case"conflicted":return new _t.ThemeColor("gitDecoration.conflictingResourceForeground");default:return}}get priority(){switch(this.type){case"modified":return 2;case"ignored":return 3;case"deleted":case"added":case"replaced":case"missing":return 4;default:return 1}}};vt.icons={light:{Added:ye("status-added","light"),Conflicted:ye("status-conflicted","light"),Deleted:ye("status-deleted","light"),Ignored:ye("status-ignored","light"),Missing:ye("status-missing","light"),Modified:ye("status-modified","light"),Renamed:ye("status-renamed","light"),Replaced:ye("status-replaced","light"),Unversioned:ye("status-unversioned","light")},dark:{Added:ye("status-added","dark"),Conflicted:ye("status-conflicted","dark"),Deleted:ye("status-deleted","dark"),Ignored:ye("status-ignored","dark"),Missing:ye("status-missing","dark"),Modified:ye("status-modified","dark"),Renamed:ye("status-renamed","dark"),Replaced:ye("status-replaced","dark"),Unversioned:ye("status-unversioned","dark")}},H([ge],vt.prototype,"resourceUri",1),H([ge],vt.prototype,"type",1),H([ge],vt.prototype,"command",1);var re=vt;var ac=V(require("path")),Fn=require("vscode");var to=V(require("path")),oc=require("vscode");function At(n){return JSON.parse(n.query)}function Qe(n,e,t={},r=!1){let i={action:e,fsPath:n.fsPath,extra:t};return n.with({scheme:"svn",path:r?n.path+bt():n.path,query:JSON.stringify(i)})}function Et(n,e){let t=to.join(__dirname,"..","icons");return oc.Uri.file(to.join(t,e,`${n}.svg`))}var qe=class{constructor(e,t,r){this.uri=e;this.type=t;this.repository=r}get props(){}get label(){return ac.relative(this.repository.workspaceRoot,this.uri.fsPath)}get contextValue(){return`incomingChange:${this.type}`}getTreeItem(){let e=new Fn.TreeItem(this.label,Fn.TreeItemCollapsibleState.None);return e.iconPath={dark:Et(`status-${this.type}`,"dark"),light:Et(`status-${this.type}`,"light")},e.contextValue=this.contextValue,e.command=this.getCommand(),e}getChildren(){return Promise.resolve([])}getCommand(){switch(this.type){case"modified":return{command:"svn.openChangeHead",title:"Open Changes with HEAD",arguments:[new re(this.uri,this.type,void 0,"none",!0)]};case"deleted":return{command:"svn.openFile",title:"Open File",arguments:[this.uri]};case"added":return{command:"svn.openHEADFile",title:"Open File (HEAD)",arguments:[new re(this.uri,this.type,void 0,"none",!0)]};default:console.error(`No command returned for type ${this.type}`);return}}};var k=class{constructor(e,t={}){if(t.repository){let r=this.createRepositoryCommand(this.execute);this._disposable=z.commands.registerCommand(e,r);return}if(!t.repository){this._disposable=z.commands.registerCommand(e,(...r)=>this.execute(...r));return}}dispose(){var e;(e=this._disposable)==null||e.dispose()}createRepositoryCommand(e){return async(...r)=>{let i=await z.commands.executeCommand("svn.getSourceControlManager",""),s=i.getRepository(r[0]),o;return s?o=Promise.resolve(s):i.repositories.length===1?o=Promise.resolve(i.repositories[0]):o=i.pickRepository(),o.then(c=>c?Promise.resolve(e.apply(this,[c,...r])):Promise.resolve()).catch(c=>{console.error(c)})}}async getResourceStates(e){if(e.length===0||!(e[0].resourceUri instanceof z.Uri)){let t=await this.getSCMResource();if(!t)return[];e=[t]}return e.filter(t=>t instanceof re)}async runByRepository(e,t){let r=e instanceof z.Uri?[e]:e,i=e instanceof z.Uri,s=await z.commands.executeCommand("svn.getSourceControlManager",""),o=[];for(let c of r){let u=s.getRepository(c);if(!u){console.warn("Could not find Svn repository for ",c);continue}let x=o.filter(m=>m.repository===u)[0];x?x.resources.push(c):o.push({repository:u,resources:[c]})}let a=o.map(({repository:c,resources:u})=>i?t(c,u[0]):t(c,u));return Promise.all(a)}async getSCMResource(e){if(e=e||z.window.activeTextEditor&&z.window.activeTextEditor.document.uri,!!e){if(e.scheme==="svn"){let{fsPath:t}=At(e);e=z.Uri.file(t)}if(e.scheme==="file"){let r=(await z.commands.executeCommand("svn.getSourceControlManager","")).getRepository(e);return r?r.getResourceFromFile(e):void 0}}}async _openResource(e,t,r,i,s){let o=await this.getLeftResource(e,t),a=this.getRightResource(e,t),c=this.getTitle(e,t);if(e.remote&&o&&([o,a]=[a,o]),!a){console.error("oh no");return}if(await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())return;let u={preserveFocus:i,preview:r,viewColumn:z.ViewColumn.Active},x=z.window.activeTextEditor;return s&&x&&x.document.uri.toString()===a.toString()&&(u.selection=x.selection),o?z.commands.executeCommand("vscode.diff",o,a,c,u):z.commands.executeCommand("vscode.open",a,u)}async getLeftResource(e,t=""){if(e.remote)return e.type!=="deleted"?Qe(e.resourceUri,"SHOW",{ref:t}):void 0;if(e.type==="added"&&e.renameResourceUri)return Qe(e.renameResourceUri,"SHOW",{ref:t});if(e.type==="conflicted"&&await le(e.resourceUri.fsPath)){let r=await Xs(e.resourceUri.fsPath,{encoding:"utf8"});if(/^<{7}[^]+^={7}[^]+^>{7}/m.test(r))return}switch(e.type){case"conflicted":case"modified":case"replaced":return Qe(e.resourceUri,"SHOW",{ref:t})}}getRightResource(e,t=""){if(e.remote)return e.type!=="added"?e.resourceUri:void 0;switch(e.type){case"added":case"conflicted":case"ignored":case"modified":case"unversioned":case"replaced":return e.resourceUri;case"deleted":case"missing":return Qe(e.resourceUri,"SHOW",{ref:t})}}getTitle(e,t){if(e.type==="added"&&e.renameResourceUri){let i=Ct.basename(e.renameResourceUri.fsPath),s=Ct.relative(Ct.dirname(e.renameResourceUri.fsPath),e.resourceUri.fsPath);return t?`${i} -> ${s} (${t})`:`${i} -> ${s}`}let r=Ct.basename(e.resourceUri.fsPath);return t?`${r} (${t})`:""}async openChange(e,t,r){let i=e instanceof re,s=e instanceof z.Uri||!e,o;if(e instanceof z.Uri){let c=await this.getSCMResource(e);c!==void 0&&(o=[c])}else if(e instanceof qe)o=[new re(e.uri,e.type,void 0,e.props,!0)];else{let c;e instanceof re?c=e:c=await this.getSCMResource(),c&&(o=[...r,c])}if(!o)return;let a=o.length===1?void 0:!1;for(let c of o)await this._openResource(c,t,a,i,s)}async showDiffPath(e,t){try{let r=Ct.join(e.root,bt(),"tmp","svn.patch");if(await le(r))try{await Ht(r)}catch{}let i=z.Uri.file(r).with({scheme:"untitled"}),s=await z.workspace.openTextDocument(i);await(await z.window.showTextDocument(s)).edit(a=>{a.delete(new z.Range(new z.Position(0,0),new z.Position(Number.MAX_SAFE_INTEGER,0))),a.insert(new z.Position(0,0),t)})}catch(r){console.error(r),z.window.showErrorMessage("Unable to patch")}}async _revertChanges(e,t){let r=e.document,i=r.uri;if(i.scheme!=="file")return;let s=Qe(i,"SHOW",{ref:"BASE"}),o=await z.workspace.openTextDocument(s),a=ec(o,r,t),c=new z.WorkspaceEdit;c.replace(i,new z.Range(new z.Position(0,0),r.lineAt(r.lineCount-1).range.end),a),z.workspace.applyEdit(c),await r.save()}async addToIgnore(e){await this.runByRepository(e,async(t,r)=>{if(t)try{await Ja(t,r)&&z.window.showInformationMessage("File(s) is now being ignored")}catch(i){console.log(i),z.window.showErrorMessage("Unable to set property ignore")}})}};var kn=class extends k{constructor(){super("svn.add")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(a=>a.fsPath);try{await i.addFiles(o)}catch(a){console.log(a),cc.window.showErrorMessage("Unable to add file")}})}};var Un=class extends k{constructor(){super("svn.addToIgnoreExplorer")}async execute(e,t){if(!(!t||t.length===0))return this.addToIgnore(t)}};var $n=class extends k{constructor(){super("svn.addToIgnoreSCM")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);return this.addToIgnore(r)}};var je=require("vscode");var Mt=require("vscode");var Lt=class{constructor(e){this.group=e}get label(){return this.group.id.replace(/^changelist-/,"")}get id(){return this.group.id}get description(){return this.group.label}get resourceGroup(){return this.group}};var Br=class{constructor(e){this._id=e}get label(){return this._id}get description(){return"Ignored on commit"}};var fr=class{get label(){return"$(plus) New changelist"}get description(){return"Create a new change list"}};var pr=class{get label(){return"$(dash) Remove changelist"}get description(){return"Remove changelist of file(s)"}};var Bn=class{constructor(e,t,r=!1){this._repository=e;this._state=t;this.picked=r}get label(){return this._repository.repository.removeAbsolutePath(this._state.resourceUri.fsPath)}get description(){return this._state.resourceUri.fsPath}get state(){return this._state}};function Lp(n,e=!1){let t=[];t.push(new fr),n.changelists.forEach((i,s)=>{i.resourceStates.length&&t.push(new Lt(i))});let r=$.get("sourceControl.ignoreOnCommit");for(let i of r)t.some(s=>s.label===i)||t.push(new Br(i));return e&&t.push(new pr),t}function Mp(n){let e=[];n.changes.resourceStates.length&&e.push(new Lt(n.changes));let t=$.get("sourceControl.ignoreOnCommit");return n.changelists.forEach((r,i)=>{r.resourceStates.length&&!t.includes(i)&&e.push(new Lt(r))}),e}async function uc(n,e=!1){let t=Lp(n,e),r=await Mt.window.showQuickPick(t,{placeHolder:"Select an existing changelist or create a new"});if(!r)return;let i;if(r instanceof pr)return!1;if(r instanceof fr){let s=await Mt.window.showInputBox({placeHolder:"Changelist name",prompt:"Please enter a changelist name"});if(!s)return;i=s}else i=r.label;return i}async function Fp(n){let e=Mp(n);if(e.length===0){Mt.window.showInformationMessage("There are no changes to commit.");return}let t;return e.length===1&&n.changes.resourceStates.length?t=e[0]:t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist to commit"}),t}async function lc(n){let e=await Fp(n);if(e){if(e.id==="changes"&&e.resourceGroup.resourceStates.length>1){let t=$.get("commit.changes.selectedAll",!0),r=e.resourceGroup.resourceStates.map(s=>new Bn(n,s,t)),i=await Mt.window.showQuickPick(r,{placeHolder:"Select files to commit",canPickMany:!0});return i!==void 0&&i.length>0?i.map(s=>s.state):void 0}return e.resourceGroup.resourceStates}}function kp(n){let e=[];return n.changelists.forEach((t,r)=>{t.resourceStates.length&&e.push(new Lt(t))}),e}async function fc(n){let e=kp(n);if(!e.length){Mt.window.showErrorMessage("No changelists to pick from");return}let t=await Mt.window.showQuickPick(e,{placeHolder:"Select a changelist"});if(t)return t.label}var qn=class extends k{constructor(){super("svn.changelist")}async execute(...e){let t;if(e[0]instanceof re)t=e.map(m=>m.resourceUri);else if(e[0]instanceof je.Uri)t=e[1];else if(je.window.activeTextEditor)t=[je.window.activeTextEditor.document.uri];else{console.error("Unhandled type for changelist command");return}let r=await je.commands.executeCommand("svn.getSourceControlManager",""),i=t.map(async m=>r.getRepositoryFromUri(m)),s=await Promise.all(i);if(s=s.filter(m=>m),s.length===0){je.window.showErrorMessage("Files are not under version control and cannot be added to a change list");return}if(Array.from(new Set(s)).length!==1){je.window.showErrorMessage("Unable to add files from different repositories to change list");return}if(s.length!==t.length){je.window.showErrorMessage("Some Files are not under version control and cannot be added to a change list");return}let a=s[0];if(!a)return;let c=t.map(m=>m.fsPath),u=!1;a.changelists.forEach((m,d)=>{if(m.resourceStates.some(l=>c.some(w=>ct(w)===ct(l.resourceUri.path))))return u=!0,!1});let x=await uc(a,u);if(!(!x&&x!==!1))if(x===!1)try{await a.removeChangelist(c)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to remove file "${c.join(",")}" from changelist`)}else try{await a.addChangelist(c,x),je.window.showInformationMessage(`Added files "${c.join(",")}" to changelist "${x}"`)}catch(m){console.log(m),je.window.showErrorMessage(`Unable to add file "${c.join(",")}" to changelist "${x}"`)}}};var sa=V(require("os")),yi=V(require("path")),ce=require("vscode");var dr=require("vscode");var Qt=class{constructor(e,t){this.dir=e;this.parent=t}get label(){return this.branch?`$(git-branch) ${this.dir.name}`:`$(file-directory) ${this.dir.name}`}get description(){return`r${this.dir.commit.revision} | ${this.dir.commit.author} | ${new Date(this.dir.commit.date).toLocaleString()}`}get path(){return this.parent?`${this.parent}/${this.dir.name}`:this.dir.name}get branch(){return It(this.path)}};H([ge],Qt.prototype,"branch",1);var hr=class{constructor(e){this._parent=e}get label(){return"$(plus) Create new branch"}get description(){return`Create new branch in "${this._parent}"`}};var xr=class{constructor(e){this.path=e}get label(){return`$(arrow-left) back to /${this.path}`}get description(){return"Back to parent"}};function It(n){let e=["layout.trunkRegex","layout.branchesRegex","layout.tagsRegex"];for(let t of e){let r=$.get(t);if(!r)continue;let i=$.get(`${t}Name`,1)+2,s=new RegExp(`(^|/)(${r})$`),o=n.match(s);if(o&&o[2]&&o[i])return{name:o[i],path:o[2]}}}async function mr(n,e=!1,t){let r=n.repository.list(t);dr.window.withProgress({location:dr.ProgressLocation.Window,title:"Checking remote branches"},()=>r);let s=(await r).filter(c=>c.kind==="dir"),o=[];if(t){let c=t.split("/");c.pop();let u=c.join("/");o.push(new xr(u))}e&&t&&It(`${t}/test`)&&o.push(new hr(t)),o.push(...s.map(c=>new Qt(c,t)));let a=await dr.window.showQuickPick(o);if(a){if(a instanceof xr)return mr(n,e,a.path);if(a instanceof Qt)return a.branch?a.branch:mr(n,e,a.path);if(a instanceof hr){let c=await dr.window.showInputBox({prompt:"Please provide a branch name",ignoreFocusOut:!0});if(!c)return;let u=c.replace(/^\.|\/\.|\.\.|~|\^|:|\/$|\.lock$|\.lock\/|\\|\*|\s|^\s*$|\.$/g,"-"),x=It(`${t}/${u}`);return x&&(x.isNew=!0),x}}}function pc(n){let e="layout.trunkRegex",t=$.get(e),r=new RegExp(`(^|/)(${t})$`),i=n.match(r),s=$.get(`${e}Name`,1)+2;return!!(i&&i[2]&&i[s])}var ia=V(require("child_process")),Gu=require("events"),sn=V(require("process"));var Rc=V(Sc());function ah(n){if(!n||n.length<2)return null;let e=n.readUInt8(0),t=n.readUInt8(1);if(e===254&&t===255)return"utf16be";if(e===255&&t===254)return"utf16le";if(n.length<3)return null;let r=n.readUInt8(2);return e===239&&t===187&&r===191?"utf8":null}var ch=["ascii","utf-8","utf-16","utf-32"],Dc={ibm866:"cp866",big5:"cp950"};function Hn(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function Vr(n){let e=ah(n);if(e)return e;let t=(0,Rc.analyse)(n);if(!t||t.length===0)return null;let r=$.get("experimental.encoding_priority",[]);if(r.length>0)for(let c of r){let u=t.find(x=>Hn(c)===Hn(x.name));if(u&&u.confidence>60){let x=Hn(u.name);return Dc[x]||x}}let i=t[0];if(i.confidence<80)return null;let s=i.name;if(0<=ch.indexOf(s.toLowerCase()))return null;let o=Hn(s);return Dc[o]||o}var Wo=V(gr());var nt={mergeAttrs:!0,explicitRoot:!1,explicitArray:!1,attrNameProcessors:[zs],tagNameProcessors:[zs],doctype:!1};async function Hr(n){return new Promise((e,t)=>{Wo.parseString(n,nt,(r,i)=>{(r||typeof i.entry>"u")&&t(),e(i.entry)})})}async function K0(n){return new Promise((e,t)=>{Wo.parseString(n,nt,(r,i)=>{if(r){t(r);return}let s=new Map,o=Array.isArray(i.entry)?i.entry:[i.entry];for(let a of o)a&&a.$.path&&s.set(a.$.path,a);e(s)})})}function Rt(n){if(!n)return n;let e=n;return e=e.replace(/[A-Z]:\\(?:[^\\/:*?"<>|\r\n]+\\)*[^\\/:*?"<>|\r\n]*/gi,"[PATH]"),e=e.replace(/\/(?:[a-zA-Z0-9._\-~]+\/)*[a-zA-Z0-9._\-~]*/g,"[PATH]"),e=e.replace(/https?:\/\/(?:(?:[a-zA-Z0-9\-._~:/?#\[\]@!$&'()*+,;=])+)/gi,"[DOMAIN]"),e=e.replace(/\b(?:\d{1,3}\.){3}\d{1,3}\b/g,"[IP]"),e=e.replace(/\b(?:[0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}\b/g,"[IP]"),e=e.replace(/(?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s,;]+/gi,"$&=[REDACTED]"),e=e.replace(/[?&](?:password|passwd|pwd|token|secret|api[_-]?key|auth|credential|apikey)\s*=\s*[^\s&;]+/gi,t=>{let[r]=t.split("=");return r+"=[REDACTED]"}),e=e.replace(/Bearer\s+[A-Za-z0-9._\-~+/=]+/g,"Bearer [REDACTED]"),e=e.replace(/Basic\s+[A-Za-z0-9+/=]+/g,"Basic [REDACTED]"),e=e.replace(/"([A-Za-z0-9+/=_\-]{32,})"/g,'"[REDACTED]"'),e=e.replace(/'([A-Za-z0-9+/=_\-]{32,})'/g,"'[REDACTED]'"),e=e.replace(/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/gi,"[UUID]"),e=e.replace(/AKIA[0-9A-Z]{16}/g,"[AWS_KEY]"),e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,"[EMAIL]"),e}function Z0(n){if(!n)return{};let e={};return n.message&&(e.message=Rt(n.message)),n.name&&(e.name=n.name),n.code&&(e.code=n.code),n.exitCode&&(e.exitCode=n.exitCode),n.svnErrorCode&&(e.svnErrorCode=n.svnErrorCode),n.svnCommand&&(e.svnCommand=Rt(n.svnCommand)),n.stdout&&(e.stdout=Rt(n.stdout)),n.stderr&&(e.stderr=Rt(n.stderr)),n.stderrFormated&&(e.stderrFormated=Rt(n.stderrFormated)),n.stack&&(e.stack=Rt(n.stack)),e}var Tt=class{constructor(e){e.error?(this.error=e.error,this.message=e.error.message):this.error=void 0,this.message=e.message||"SVN error",this.stdout=e.stdout,this.stderr=e.stderr,this.stderrFormated=e.stderrFormated,this.exitCode=e.exitCode,this.svnErrorCode=e.svnErrorCode,this.svnCommand=e.svnCommand}toString(){let e=Z0(this),t=Rt(this.message)+" "+JSON.stringify(e,null,2);return this.error&&(t+=Rt(this.error.stack||"")),t}};var Nt=V(require("path")),tn=V(mu()),Se=require("vscode");var $t=require("path"),gu=V(require("path")),Qr=require("vscode");var Yr=require("path"),Yo=require("vscode");function Ut(n){return n.path||"/"}var ht=class{constructor(e,t,r,i,s){this.remoteRoot=e;this.branchRoot=t;this.checkoutRoot=r;this._path=i;this._revision=s;if(i.length===0||i.charAt(0)==="/")throw new Error("Invalid _path "+i)}get remoteFullPath(){return Yo.Uri.parse(this.remoteRoot.toString()+"/"+this._path)}get localFullPath(){if(this.checkoutRoot!==void 0)return Yo.Uri.file(Yr.posix.join(this.checkoutRoot.path,Yr.posix.relative(this.fromRepoToBranch,this._path)))}get relativeFromBranch(){return Yr.posix.relative(this.fromRepoToBranch,this._path)}get fromRepoToBranch(){return Yr.posix.relative(Ut(this.remoteRoot),Ut(this.branchRoot))}get revision(){return this._revision}toString(e){return this.remoteFullPath+(e&&this._revision||"")}};H([ge],ht.prototype,"remoteFullPath",1),H([ge],ht.prototype,"localFullPath",1),H([ge],ht.prototype,"relativeFromBranch",1),H([ge],ht.prototype,"fromRepoToBranch",1),H([ge],ht.prototype,"revision",1),H([ge],ht.prototype,"toString",1);var Bt=class{constructor(e){this.repoInfo=e;this.repoRoot=Qr.Uri.parse(e.repository.root),this.branchRoot=Qr.Uri.parse(e.url),e.wcInfo&&e.wcInfo.wcrootAbspath&&(this.checkoutRoot=Qr.Uri.file(e.wcInfo.wcrootAbspath))}getFullRepoPathFromUrl(e){if(e.startsWith("/"))return e.substr(1);if(e.startsWith("svn://")||e.startsWith("file://")){let t=Qr.Uri.parse(e).path;return $t.posix.relative(Ut(this.repoRoot),t)}else throw new Error("unknown path")}parse(e,t=2,r){let i;if(t===2)i=this.getFullRepoPathFromUrl(e);else if(t===1){if(!$t.posix.isAbsolute(e))throw new Error("Path isn't absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=gu.relative(this.checkoutRoot.fsPath,e),i=$t.posix.join(this.fromRootToBranch(),i)}else if(t===0){if($t.posix.isAbsolute(e))throw new Error("Path is absolute");if(this.checkoutRoot===void 0)throw new Error("Local paths are not");i=$t.posix.join(this.fromRootToBranch(),e)}else throw new Error("unsupported kind");return new ht(this.repoRoot,this.branchRoot,this.checkoutRoot,i,r)}fromRootToBranch(){return $t.posix.relative(Ut(this.repoRoot),Ut(this.branchRoot))}fromBranchToRoot(){return $t.posix.relative(Ut(this.branchRoot),Ut(this.repoRoot))}};H([ge],Bt.prototype,"fromRootToBranch",1),H([ge],Bt.prototype,"fromBranchToRoot",1);var yu=V(gr());async function Qo(n){return new Promise((e,t)=>{yu.parseString(n,nt,(r,i)=>{r&&t(),i.list&&i.list.entry?(Array.isArray(i.list.entry)||(i.list.entry=[i.list.entry]),e(i.list.entry)):e([])})})}var wu=V(gr());async function hi(n){return new Promise((e,t)=>{wu.parseString(n,nt,(r,i)=>{r&&t();let s=[];Array.isArray(i.logentry)?s=i.logentry:typeof i.logentry=="object"&&(s=[i.logentry]);for(let o of s)o.paths===void 0?o.paths=[]:Array.isArray(o.paths.path)?o.paths=o.paths.path:o.paths=[o.paths.path];e(s)})})}var bu=V(gr());function Ko(n,e){if(Array.isArray(n)){let i=[];return n.forEach(s=>{let o=Ko(s,e);o&&i.push(...o)}),i}let t={locked:!!n.wcStatus.wcLocked&&n.wcStatus.wcLocked==="true"||!!(n.reposStatus&&n.reposStatus.lock),switched:!!n.wcStatus.switched&&n.wcStatus.switched==="true"},r={changelist:e,path:n.path,status:n.wcStatus.item,props:n.wcStatus.props,wcStatus:t,reposStatus:n.reposStatus};return n.wcStatus.movedTo&&r.status==="deleted"?[]:(n.wcStatus.movedFrom&&r.status==="added"&&(r.rename=n.wcStatus.movedFrom),n.wcStatus.commit&&(r.commit={revision:n.wcStatus.commit.revision,author:n.wcStatus.commit.author,date:n.wcStatus.commit.date}),[r])}function Ph(n){let e=[];return n.target&&n.target.entry&&e.push(...Ko(n.target.entry)),n.changelist&&(Array.isArray(n.changelist)||(n.changelist=[n.changelist]),n.changelist.forEach(t=>{e.push(...Ko(t.entry,t.name))})),e}async function vu(n){return new Promise((e,t)=>{bu.parseString(n,nt,(r,i)=>{r&&t();let s=Ph(i);e(s)})})}var Zo=(n,e,t)=>{let r=n instanceof RegExp?Eu(n,t):n,i=e instanceof RegExp?Eu(e,t):e,s=r!==null&&i!=null&&Nh(r,i,t);return s&&{start:s[0],end:s[1],pre:t.slice(0,s[0]),body:t.slice(s[0]+r.length,s[1]),post:t.slice(s[1]+i.length)}},Eu=(n,e)=>{let t=e.match(n);return t?t[0]:null},Nh=(n,e,t)=>{let r,i,s,o,a,c=t.indexOf(n),u=t.indexOf(e,c+1),x=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],s=t.length;x>=0&&!a;){if(x===c)r.push(x),c=t.indexOf(n,x+1);else if(r.length===1){let m=r.pop();m!==void 0&&(a=[m,u])}else i=r.pop(),i!==void 0&&i<s&&(s=i,o=u),u=t.indexOf(e,x+1);x=c<u&&c>=0?c:u}r.length&&o!==void 0&&(a=[s,o])}return a};var Cu="\0SLASH"+Math.random()+"\0",Iu="\0OPEN"+Math.random()+"\0",ea="\0CLOSE"+Math.random()+"\0",Su="\0COMMA"+Math.random()+"\0",Du="\0PERIOD"+Math.random()+"\0",Oh=new RegExp(Cu,"g"),_h=new RegExp(Iu,"g"),Ah=new RegExp(ea,"g"),Lh=new RegExp(Su,"g"),Mh=new RegExp(Du,"g"),Fh=/\\\\/g,kh=/\\{/g,Uh=/\\}/g,$h=/\\,/g,Bh=/\\./g;function Jo(n){return isNaN(n)?n.charCodeAt(0):parseInt(n,10)}function qh(n){return n.replace(Fh,Cu).replace(kh,Iu).replace(Uh,ea).replace($h,Su).replace(Bh,Du)}function jh(n){return n.replace(Oh,"\\").replace(_h,"{").replace(Ah,"}").replace(Lh,",").replace(Mh,".")}function Ru(n){if(!n)return[""];let e=[],t=Zo("{","}",n);if(!t)return n.split(",");let{pre:r,body:i,post:s}=t,o=r.split(",");o[o.length-1]+="{"+i+"}";let a=Ru(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Tu(n){return n?(n.slice(0,2)==="{}"&&(n="\\{\\}"+n.slice(2)),Kr(qh(n),!0).map(jh)):[]}function Xh(n){return"{"+n+"}"}function Wh(n){return/^-?0\d/.test(n)}function Vh(n,e){return n<=e}function Gh(n,e){return n>=e}function Kr(n,e){let t=[],r=Zo("{","}",n);if(!r)return[n];let i=r.pre,s=r.post.length?Kr(r.post,!1):[""];if(/\$$/.test(r.pre))for(let o=0;o<s.length;o++){let a=i+"{"+r.body+"}"+s[o];t.push(a)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=o||a,u=r.body.indexOf(",")>=0;if(!c&&!u)return r.post.match(/,(?!,).*\}/)?(n=r.pre+"{"+r.body+ea+r.post,Kr(n)):[n];let x;if(c)x=r.body.split(/\.\./);else if(x=Ru(r.body),x.length===1&&x[0]!==void 0&&(x=Kr(x[0],!1).map(Xh),x.length===1))return s.map(d=>r.pre+x[0]+d);let m;if(c&&x[0]!==void 0&&x[1]!==void 0){let d=Jo(x[0]),l=Jo(x[1]),w=Math.max(x[0].length,x[1].length),E=x.length===3&&x[2]!==void 0?Math.abs(Jo(x[2])):1,P=Vh;l<d&&(E*=-1,P=Gh);let S=x.some(Wh);m=[];for(let v=d;P(v,l);v+=E){let p;if(a)p=String.fromCharCode(v),p==="\\"&&(p="");else if(p=String(v),S){let h=w-p.length;if(h>0){let y=new Array(h+1).join("0");v<0?p="-"+y+p.slice(1):p=y+p}}m.push(p)}}else{m=[];for(let d=0;d<x.length;d++)m.push.apply(m,Kr(x[d],!1))}for(let d=0;d<m.length;d++)for(let l=0;l<s.length;l++){let w=i+m[d]+s[l];(!e||c||w)&&t.push(w)}}return t}var Zr=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var zh={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Jr=n=>n.replace(/[[\]\\-]/g,"\\$&"),Hh=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Pu=n=>n.join(""),Nu=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],i=[],s=t+1,o=!1,a=!1,c=!1,u=!1,x=t,m="";e:for(;s<n.length;){let E=n.charAt(s);if((E==="!"||E==="^")&&s===t+1){u=!0,s++;continue}if(E==="]"&&o&&!c){x=s+1;break}if(o=!0,E==="\\"&&!c){c=!0,s++;continue}if(E==="["&&!c){for(let[P,[_,S,v]]of Object.entries(zh))if(n.startsWith(P,s)){if(m)return["$.",!1,n.length-t,!0];s+=P.length,v?i.push(_):r.push(_),a=a||S;continue e}}if(c=!1,m){E>m?r.push(Jr(m)+"-"+Jr(E)):E===m&&r.push(Jr(E)),m="",s++;continue}if(n.startsWith("-]",s+1)){r.push(Jr(E+"-")),s+=2;continue}if(n.startsWith("-",s+1)){m=E,s+=2;continue}r.push(Jr(E)),s++}if(x<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let E=r[0].length===2?r[0].slice(-1):r[0];return[Hh(E),!1,x-t,!1]}let d="["+(u?"^":"")+Pu(r)+"]",l="["+(u?"":"^")+Pu(i)+"]";return[r.length&&i.length?"("+d+"|"+l+")":r.length?d:l,a,x-t,!0]};var qt=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!0}={})=>t?e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):e?n.replace(/\[([^\/\\{}])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1");var Yh=new Set(["!","?","+","*","@"]),Ou=n=>Yh.has(n),Qh="(?!(?:^|/)\\.\\.?(?:$|/))",xi="(?!\\.)",Kh=new Set(["[","."]),Zh=new Set(["..","."]),Jh=new Set("().*{}+?[]^$\\!"),ex=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ta="[^/]",_u=ta+"*?",Au=ta+"+?",br=class n{type;#r;#n;#s=!1;#e=[];#t;#o;#c;#a=!1;#i;#u;#f=!1;constructor(e,t,r={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#r=this.#t?this.#t.#r:this,this.#i=this.#r===this?r:this.#r.#i,this.#c=this.#r===this?[]:this.#r.#c,e==="!"&&!this.#r.#a&&this.#c.push(this),this.#o=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#u=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#o+1;!r.type&&i<r.#e.length;i++)for(let s of e.#e){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){var t;let e=this.type===null?this.#e.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#e.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#a&&((t=this.#t)==null?void 0:t.type)==="!")&&e.push({}),e}isStart(){var t;if(this.#r===this)return!0;if(!((t=this.#t)!=null&&t.isStart()))return!1;if(this.#o===0)return!0;let e=this.#t;for(let r=0;r<this.#o;r++){let i=e.#e[r];if(!(i instanceof n&&i.type==="!"))return!1}return!0}isEnd(){var t,r,i;if(this.#r===this||((t=this.#t)==null?void 0:t.type)==="!")return!0;if(!((r=this.#t)!=null&&r.isEnd()))return!1;if(!this.type)return(i=this.#t)==null?void 0:i.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let r of this.#e)t.copyIn(r);return t}static#l(e,t,r,i){let s=!1,o=!1,a=-1,c=!1;if(t.type===null){let l=r,w="";for(;l<e.length;){let E=e.charAt(l++);if(s||E==="\\"){s=!s,w+=E;continue}if(o){l===a+1?(E==="^"||E==="!")&&(c=!0):E==="]"&&!(l===a+2&&c)&&(o=!1),w+=E;continue}else if(E==="["){o=!0,a=l,c=!1,w+=E;continue}if(!i.noext&&Ou(E)&&e.charAt(l)==="("){t.push(w),w="";let P=new n(E,t);l=n.#l(e,P,l,i),t.push(P);continue}w+=E}return t.push(w),l}let u=r+1,x=new n(null,t),m=[],d="";for(;u<e.length;){let l=e.charAt(u++);if(s||l==="\\"){s=!s,d+=l;continue}if(o){u===a+1?(l==="^"||l==="!")&&(c=!0):l==="]"&&!(u===a+2&&c)&&(o=!1),d+=l;continue}else if(l==="["){o=!0,a=u,c=!1,d+=l;continue}if(Ou(l)&&e.charAt(u)==="("){x.push(d),d="";let w=new n(l,x);x.push(w),u=n.#l(e,w,u,i);continue}if(l==="|"){x.push(d),d="",m.push(x),x=new n(null,t);continue}if(l===")")return d===""&&t.#e.length===0&&(t.#f=!0),x.push(d),d="",t.push(...m,x),u;d+=l}return t.type=null,t.#n=void 0,t.#e=[e.substring(r-1)],u}static fromGlob(e,t={}){let r=new n(null,void 0,t);return n.#l(e,r,0,t),r}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[t,r,i,s]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#i.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){var c;let t=e??!!this.#i.dot;if(this.#r===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd()&&!this.#e.some(w=>typeof w!="string"),x=this.#e.map(w=>{let[E,P,_,S]=typeof w=="string"?n.#x(w,this.#n,u):w.toRegExpSource(e);return this.#n=this.#n||_,this.#s=this.#s||S,E}).join(""),m="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&Zh.has(this.#e[0]))){let E=Kh,P=t&&E.has(x.charAt(0))||x.startsWith("\\.")&&E.has(x.charAt(2))||x.startsWith("\\.\\.")&&E.has(x.charAt(4)),_=!t&&!e&&E.has(x.charAt(0));m=P?Qh:_?xi:""}let d="";return this.isEnd()&&this.#r.#a&&((c=this.#t)==null?void 0:c.type)==="!"&&(d="(?:$|\\/)"),[m+x+d,qt(x),this.#n=!!this.#n,this.#s]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#p(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#e=[u],this.type=null,this.#n=void 0,[u,qt(this.toString()),!1,!1]}let o=!r||e||t||!xi?"":this.#p(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#f)a=(this.isStart()&&!t?xi:"")+Au;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?xi:"")+_u+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+u}return[a,qt(s),this.#n=!!this.#n,this.#s]}#p(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[r,i,s,o]=t.toRegExpSource(e);return this.#s=this.#s||o,r}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#x(e,t,r=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,s+=(Jh.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(c==="["){let[u,x,m,d]=Nu(e,a);if(m){s+=u,o=o||x,a+=m-1,t=t||d;continue}}if(c==="*"){s+=r&&e==="*"?Au:_u,t=!0;continue}if(c==="?"){s+=ta,t=!0;continue}s+=ex(c)}return[s,qt(e),!!t,o]}};var ra=(n,{windowsPathsNoEscape:e=!1,magicalBraces:t=!1}={})=>t?e?n.replace(/[?*()[\]{}]/g,"[$&]"):n.replace(/[?*()[\]\\{}]/g,"\\$&"):e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Ee=(n,e,t={})=>(Zr(e),!t.nocomment&&e.charAt(0)==="#"?!1:new jt(e,t).match(n)),tx=/^\*+([^+@!?\*\[\(]*)$/,rx=n=>e=>!e.startsWith(".")&&e.endsWith(n),nx=n=>e=>e.endsWith(n),ix=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),sx=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),ox=/^\*+\.\*+$/,ax=n=>!n.startsWith(".")&&n.includes("."),cx=n=>n!=="."&&n!==".."&&n.includes("."),ux=/^\.\*+$/,lx=n=>n!=="."&&n!==".."&&n.startsWith("."),fx=/^\*+$/,px=n=>n.length!==0&&!n.startsWith("."),hx=n=>n.length!==0&&n!=="."&&n!=="..",xx=/^\?+([^+@!?\*\[\(]*)?$/,dx=([n,e=""])=>{let t=Fu([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},mx=([n,e=""])=>{let t=ku([n]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},gx=([n,e=""])=>{let t=ku([n]);return e?r=>t(r)&&r.endsWith(e):t},yx=([n,e=""])=>{let t=Fu([n]);return e?r=>t(r)&&r.endsWith(e):t},Fu=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},ku=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},Uu=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Lu={win32:{sep:"\\"},posix:{sep:"/"}},wx=Uu==="win32"?Lu.win32.sep:Lu.posix.sep;Ee.sep=wx;var et=Symbol("globstar **");Ee.GLOBSTAR=et;var bx="[^/]",vx=bx+"*?",Ex="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Cx="(?:(?!(?:\\/|^)\\.).)*?",Ix=(n,e={})=>t=>Ee(t,n,e);Ee.filter=Ix;var Je=(n,e={})=>Object.assign({},n,e),Sx=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Ee;let e=Ee;return Object.assign((r,i,s={})=>e(r,i,Je(n,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,Je(n,s))}static defaults(i){return e.defaults(Je(n,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,Je(n,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,Je(n,s))}},unescape:(r,i={})=>e.unescape(r,Je(n,i)),escape:(r,i={})=>e.escape(r,Je(n,i)),filter:(r,i={})=>e.filter(r,Je(n,i)),defaults:r=>e.defaults(Je(n,r)),makeRe:(r,i={})=>e.makeRe(r,Je(n,i)),braceExpand:(r,i={})=>e.braceExpand(r,Je(n,i)),match:(r,i,s={})=>e.match(r,i,Je(n,s)),sep:e.sep,GLOBSTAR:et})};Ee.defaults=Sx;var $u=(n,e={})=>(Zr(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Tu(n));Ee.braceExpand=$u;var Dx=(n,e={})=>new jt(n,e).makeRe();Ee.makeRe=Dx;var Rx=(n,e,t={})=>{let r=new jt(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};Ee.match=Rx;var Mu=/[?*]|[+@!]\(.*?\)|\[|\]/,Tx=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){Zr(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Uu,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=s[0]===""&&s[1]===""&&(s[2]==="?"||!Mu.test(s[2]))&&!Mu.test(s[3]),u=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(x=>this.parse(x))];if(u)return[s[0],...s.slice(1).map(x=>this.parse(x))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,i)=>{let s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let o=i;for(;r[o+1]==="**";)o++;o>i&&r.splice(i+1,o-i);let a=r[i+1],c=r[i+2],u=r[i+3];if(a!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;t=!0,r.splice(i,1);let x=r.slice(0);x[i]="**",e.push(x),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<r.length-1;o++){let a=r[o];o===1&&a===""&&r[0]===""||(a==="."||a==="")&&(t=!0,r.splice(o,1),o--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){let o=r[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;let c=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...c),r.length===0&&r.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<t.length;)if(e[i]===t[s])o.push(a==="b"?t[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&t[s]===e[i+1])o.push(e[i]),i++;else if(r&&t[s]==="**"&&e[i]===t[s+1])o.push(t[s]),s++;else if(e[i]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(t[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(t[s]),i++,s++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let i=this.options;if(this.isWindows){let E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),P=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),_=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),S=!_&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),v=P?3:E?0:void 0,p=S?3:_?0:void 0;if(typeof v=="number"&&typeof p=="number"){let[h,y]=[e[v],t[p]];h.toLowerCase()===y.toLowerCase()&&(t[p]=h,p>v?t=t.slice(p):v>p&&(e=e.slice(v)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,c=e.length,u=t.length;o<c&&a<u;o++,a++){this.debug("matchOne loop");var x=t[a],m=e[o];if(this.debug(t,x,m),x===!1)return!1;if(x===et){this.debug("GLOBSTAR",[t,x,m]);var d=o,l=a+1;if(l===u){for(this.debug("** at the end");o<c;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;d<c;){var w=e[d];if(this.debug(`
globstar while`,e,d,t,l,w),this.matchOne(e.slice(d),t.slice(l),r))return this.debug("globstar found match!",d,c,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,d,t,l);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,t,l),d===c))}let E;if(typeof x=="string"?(E=m===x,this.debug("string match",x,m,E)):(E=x.test(m),this.debug("pattern match",x,m,E)),!E)return!1}if(o===c&&a===u)return!0;if(o===c)return r;if(a===u)return o===c-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return $u(this.pattern,this.options)}parse(e){Zr(e);let t=this.options;if(e==="**")return et;if(e==="")return"";let r,i=null;(r=e.match(fx))?i=t.dot?hx:px:(r=e.match(tx))?i=(t.nocase?t.dot?sx:ix:t.dot?nx:rx)(r[1]):(r=e.match(xx))?i=(t.nocase?t.dot?mx:dx:t.dot?gx:yx)(r):(r=e.match(ox))?i=t.dot?cx:ax:(r=e.match(ux))&&(i=lx);let s=br.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?vx:t.dot?Ex:Cx,i=new Set(t.nocase?["i"]:[]),s=e.map(c=>{let u=c.map(m=>{if(m instanceof RegExp)for(let d of m.flags.split(""))i.add(d);return typeof m=="string"?Tx(m):m===et?et:m._src});u.forEach((m,d)=>{let l=u[d+1],w=u[d-1];m!==et||w===et||(w===void 0?l!==void 0&&l!==et?u[d+1]="(?:\\/|"+r+"\\/)?"+l:u[d]=r:l===void 0?u[d-1]=w+"(?:\\/|\\/"+r+")?":l!==et&&(u[d-1]=w+"(?:\\/|\\/"+r+"\\/)"+l,u[d+1]=et))});let x=u.filter(m=>m!==et);if(this.partial&&x.length>=1){let m=[];for(let d=1;d<=x.length;d++)m.push(x.slice(0,d).join("/"));return"(?:"+m.join("|")+")"}return x.join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.partial&&(s="^(?:\\/|"+o+s.slice(1,-1)+a+")$"),this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let c=s[a],u=i;if(r.matchBase&&c.length===1&&(u=[o]),this.matchOne(u,c,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Ee.defaults(e).Minimatch}};Ee.AST=br;Ee.Minimatch=jt;Ee.escape=ra;Ee.unescape=qt;function er(n,e,t={}){let r=!1;return e.forEach(i=>{let s=i[0]==="!";r===s&&(r=Ee(n,i,t))}),r}function Bu(n){return new jt(n)}var qu=V(gr());async function ju(n){return new Promise((e,t)=>{qu.parseString(n,nt,(r,i)=>{(r||!i.paths||!i.paths.path)&&t(),Array.isArray(i.paths.path)||(i.paths.path=[i.paths.path]),e(i.paths.path)})})}function Xu(n){return!n||typeof n!="string"?!1:/^[a-zA-Z0-9_-]+$/.test(n)}var Px=["postpone","base","mine-conflict","theirs-conflict","mine-full","theirs-full","edit","launch","working"];function Wu(n){return!n||typeof n!="string"?!1:Px.includes(n)}function di(n){return!n||typeof n!="string"?!1:!/[|;$()[\]{}`\\]/.test(n)}var en=class{constructor(e,t,r,i){this.svn=e;this.root=t;this.workspaceRoot=r;this._infoCache={};this._cacheTimers=[];return i===1?(async()=>this)():(async()=>(await this.updateInfo(),this))()}get branchRoot(){return Se.Uri.parse(this.info.url)}getPathNormalizer(){return new Bt(this.info)}async updateInfo(){let e=await this.exec(["info","--xml",Mn(this.workspaceRoot?this.workspaceRoot:this.root)]);this._info=await Hr(e.stdout)}async exec(e,t={}){return t.username=this.username,t.password=this.password,this.svn.exec(this.workspaceRoot,e,t)}async execBuffer(e,t={}){return t.username=this.username,t.password=this.password,this.svn.execBuffer(this.workspaceRoot,e,t)}removeAbsolutePath(e){return e=He(e),e=Nt.relative(this.workspaceRoot,e),e===""&&(e="."),Mn(e)}async getStatus(e){var o,a;e=Object.assign({},{includeIgnored:!1,includeExternals:!0,checkRemoteChanges:!1},e);let t=["stat","--xml"];e.includeIgnored&&t.push("--no-ignore"),e.includeExternals||t.push("--ignore-externals"),e.checkRemoteChanges&&t.push("--show-updates");let r=await this.exec(t),i=await vu(r.stdout),s=i.filter(c=>c.status==="external").map(c=>c.path);if(s.length>0)try{let c=await this.getBatchInfo(s);for(let u of i)if(u.status==="external"){let x=c.get(u.path);x&&(u.repositoryUuid=(o=x.repository)==null?void 0:o.uuid)}}catch(c){console.error("Failed to batch fetch external info:",c);for(let u of i)if(u.status==="external")try{let x=await this.getInfo(u.path);u.repositoryUuid=(a=x.repository)==null?void 0:a.uuid}catch(x){console.error(x)}}return i}get info(){return Ye(this._info)}resetInfoCache(e=""){delete this._infoCache[e]}async getInfo(e="",t,r=!1,i=!1){if(!r&&this._infoCache[e])return this._infoCache[e];let s=["info","--xml"];t&&s.push("-r",t),e&&(i||(e=He(e)),s.push(e));let o=await this.exec(s);this._infoCache[e]=await Hr(o.stdout);let a=setTimeout(()=>{this.resetInfoCache(e);let c=this._cacheTimers.indexOf(a);c>-1&&this._cacheTimers.splice(c,1)},2*60*1e3);return this._cacheTimers.push(a),this._infoCache[e]}async getBatchInfo(e){if(e.length===0)return new Map;let t=tn.fileSync(),r=e.map(i=>He(i)).join(`
`);await _n(t.name,r,"utf8");try{let i=["info","--xml","--targets",t.name],s=await this.exec(i);return await K0(s.stdout)}finally{t.removeCallback()}}async getChanges(){var E;let e=["log","-r1:HEAD","--limit=1","--stop-on-copy","--xml","--with-all-revprops","--verbose"],t=await this.exec(e),r=await hi(t.stdout);if(r.length===0||((E=r[0])==null?void 0:E.paths.length)===0)return[];let i=r[0].paths[0];if(i.copyfromRev===void 0||i.copyfromPath===void 0||i._===void 0||i.copyfromRev.trim().length===0||i.copyfromPath.trim().length===0||i._.trim().length===0)return[];let s=i.copyfromPath,o=i.copyfromRev,a=i._,c=this.info.repository.root+s,u=this.info.repository.root+a;e=["mergeinfo","--show-revs=merged",c,u],t=await this.exec(e);let x=t.stdout.trim().split(`
`),m="";x.length&&(m=x[x.length-1]),m.trim().length===0&&(m=o);let d=await this.getInfo(u,void 0,!0,!0);e=["diff",`${c}@${m}`,u,"--ignore-properties","--xml","--summarize"],t=await this.exec(e);let l;try{l=await ju(t.stdout)}catch{return[]}let w=[];for(let P of l)w.push({oldPath:Se.Uri.parse(P._),newPath:Se.Uri.parse(P._.replace(c,u)),oldRevision:m.replace("r",""),newRevision:d.revision,item:P.item,props:P.props,kind:P.kind,repo:Se.Uri.parse(this.info.repository.root),localPath:Se.Uri.parse(P._.replace(c,""))});return w}async show(e,t){let r=await this.showBuffer(e,t),i=e instanceof Se.Uri?e:Se.Uri.file(e),s=e instanceof Se.Uri?e.toString(!0):e,o=Se.workspace.getConfiguration("files",i),a=o.get("encoding"),c=o.get("autoGuessEncoding",!1),u=Se.workspace.textDocuments.find(m=>ct(m.uri.fsPath)===ct(s));if(u){let m=Se.workspace.getConfiguration(`[${u.languageId}]`,i);if(m["files.encoding"]!==void 0&&(a=m["files.encoding"]),m["files.autoGuessEncoding"]!==void 0&&(c=m["files.autoGuessEncoding"]),c){let d=Vr(r);d&&(a=d)}}else{let m=$.get("default.encoding");m&&(a=m)}return $.get("experimental.detect_encoding",!1)&&(a=Vr(r)||"utf8"),r.toString(a||"utf8")}async showBuffer(e,t){let r=["cat"],i,s;e instanceof Se.Uri?(i=e,s=e.toString(!0)):(i=Se.Uri.file(e),s=e);let o=i.scheme==="file"&&ke(this.workspaceRoot,i.fsPath),a=s;return o&&(a=this.removeAbsolutePath(a)),t&&(r.push("-r",t),o&&!["BASE","COMMITTED","PREV"].includes(t.toUpperCase())&&(a=(await this.getInfo()).url+"/"+a.replace(/\\/g,"/"))),r.push(a),(await this.execBuffer(r)).stdout}async commitFiles(e,t){t=t.map(a=>this.removeAbsolutePath(a));let r=["commit",...t];await le(Nt.join(this.workspaceRoot,e))&&r.push("--force-log");let i;/\n|[^\x00-\x7F\x80-\xFF]/.test(e)?(tn.setGracefulCleanup(),i=tn.fileSync({prefix:"svn-commit-message-"}),await _n(i.name,e,{encoding:"utf-8"}),r.push("-F",i.name),r.push("--encoding","UTF-8")):r.push("-m",e),r.push("--depth","empty");let s=await this.exec(r);i&&i.removeCallback();let o=s.stdout.match(/Committed revision (.*)\./i);if(o&&o[0]){let a=(s.stdout.match(/(Sending|Adding|Deleting)\s+/g)??[]).length;return`${`${a} ${a===1?"file":"files"} commited`}: revision ${o[1]}.`}return s.stdout}async addFilesByIgnore(e,t){let r=async i=>(await wt(i)).isDirectory()?(await Promise.all((await zt(i)).map(s=>{let o=Nt.resolve(i+Nt.sep+s),a=this.removeAbsolutePath(o);return er(Nt.sep+a,t,{dot:!0,matchBase:!0})?[]:r(o)}))).reduce((s,o)=>s.concat(o),[i]):[i];return e=(await Promise.all(e.map(i=>r(i)))).flat(),e=e.map(i=>this.removeAbsolutePath(i)),this.exec(["add","--depth=empty",...e])}addFiles(e){let t=$.get("sourceControl.ignore");return t.length>0?this.addFilesByIgnore(e,t):(e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["add",...e]))}addChangelist(e,t){if(!Xu(t))throw new Error("Invalid changelist name");return e=e.map(r=>this.removeAbsolutePath(r)),this.exec(["changelist",t,...e])}removeChangelist(e){return e=e.map(t=>this.removeAbsolutePath(t)),this.exec(["changelist","--remove",...e])}async getCurrentBranch(){let e=await this.getInfo(),t=It(e.url);return t?$.get("layout.showFullName")?t.path:t.name:""}async getRepositoryUuid(){return(await this.getInfo()).repository.uuid}async getRepoUrl(){let e=await this.getInfo(),t=It(e.url);if(!t)return e.repository.root;let r=new RegExp(t.path+"$");return e.url.replace(r,"").replace(/\/$/,"")}async getBranches(){let e=$.get("layout.trunk"),t=$.get("layout.branches"),r=$.get("layout.tags"),i=await this.getRepoUrl(),s=[],o=[];e&&o.push(new Promise(async u=>{try{await this.exec(["ls",i+"/"+e,"--depth","empty"]),u([e])}catch{u([])}}));let a=[];t&&a.push(t),r&&a.push(r);for(let u of a)o.push(new Promise(async x=>{let m=i+"/"+u;try{let l=(await this.exec(["ls",m])).stdout.trim().replace(/\/|\\/g,"").split(/[\r\n]+/).filter(w=>!!w).map(w=>u+"/"+w);x(l)}catch{x([])}}));return(await Promise.all(o)).forEach(u=>{s.push(...u)}),s}async newBranch(e,t="Created new branch"){let i=await this.getRepoUrl()+"/"+e,o=(await this.getInfo()).url;return await this.exec(["copy",o,i,"-m",t]),await this.switchBranch(e),!0}async switchBranch(e,t=!1){let i=await this.getRepoUrl()+"/"+e;return await this.exec(["switch",i].concat(t?["--ignore-ancestry"]:[])),this.resetInfoCache(),!0}async merge(e,t=!1,r="postpone"){if(!Wu(r))throw new Error("Invalid accept action");let s=await this.getRepoUrl()+"/"+e,o=["merge","--accept",r];return o=o.concat(t?["--reintegrate"]:[]),o=o.concat([s]),await this.exec(o),this.resetInfoCache(),!0}async revert(e,t){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["revert","--depth",t,...e])).stdout}async update(e=!0){let t=["update"];e&&t.push("--ignore-externals");let r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async pullIncomingChange(e){let t=["update",e],r=await this.exec(t);this.resetInfoCache();let i=r.stdout.trim().split(/\r?\n/).pop();return i||r.stdout}async patch(e){return(await this.patchBuffer(e)).toString("utf8")}async patchBuffer(e){return e=e.map(r=>this.removeAbsolutePath(r)),(await this.execBuffer(["diff","--internal-diff",...e])).stdout}async patchChangelist(e){return(await this.exec(["diff","--internal-diff","--changelist",e])).stdout}async removeFiles(e,t){e=e.map(s=>this.removeAbsolutePath(s));let r=["remove"];return t&&r.push("--keep-local"),r.push(...e),(await this.exec(r)).stdout}async resolve(e,t){return e=e.map(i=>this.removeAbsolutePath(i)),(await this.exec(["resolve","--accept",t,...e])).stdout}async plainLog(){return(await this.plainLogBuffer()).toString("utf8")}async plainLogBuffer(){let e=$.get("log.length")??"50";return(await this.execBuffer(["log","-r","HEAD:1","--limit",e])).stdout}async plainLogByRevision(e){return(await this.plainLogByRevisionBuffer(e)).toString("utf8")}async plainLogByRevisionBuffer(e){return(await this.execBuffer(["log","-r",e.toString()])).stdout}async plainLogByText(e){return(await this.plainLogByTextBuffer(e)).toString("utf8")}async plainLogByTextBuffer(e){if(!di(e))throw new Error("Invalid search pattern");return(await this.execBuffer(["log","--search",e])).stdout}async log(e,t,r,i){let s=["log","-r",`${e}:${t}`,`--limit=${r}`,"--xml","-v"];i!==void 0&&s.push(Mn(i instanceof Se.Uri?i.toString(!0):i));let o=await this.exec(s);return hi(o.stdout)}async logByUser(e){let t=await this.exec(["log","--xml","-v","--search",e]);return hi(t.stdout)}async countNewCommit(e="BASE:HEAD"){let r=(await this.exec(["log","-r",e,"-q","--xml"])).stdout.match(/<logentry/g);return r&&r.length>0?r.length-1:0}async cleanup(){return(await this.exec(["cleanup"])).stdout}async removeUnversioned(){let e=await this.exec(["cleanup","--remove-unversioned"]);return this.svn.logOutput(e.stdout),e.stdout}async finishCheckout(){let e=await this.getInfo();return(await this.exec(["switch",e.url])).stdout}async list(e){let t=await this.getRepoUrl();e&&(t+="/"+e);let r=await this.exec(["list",t,"--xml"]);return Qo(r.stdout)}async ls(e){let t=await this.exec(["list",e,"--xml"]);return Qo(t.stdout)}async getCurrentIgnore(e){e=this.removeAbsolutePath(e);let t="";try{let i=["propget","svn:ignore"];e&&i.push(e),t=(await this.exec(i)).stdout.trim()}catch(i){console.error(i)}return t.split(/[\r\n]+/)}async addToIgnore(e,t,r=!1){let i=await this.getCurrentIgnore(t);t=this.removeAbsolutePath(t),i.push(...e);let o=["propset","svn:ignore",[...new Set(i)].filter(c=>!!c).sort().join(`
`)];return t?o.push(t):o.push("."),r&&o.push("--recursive"),(await this.exec(o)).stdout}async rename(e,t){e=this.removeAbsolutePath(e),t=this.removeAbsolutePath(t);let r=["rename",e,t];return(await this.exec(r)).stdout}dispose(){for(let e of this._cacheTimers)clearTimeout(e);this._cacheTimers=[],this._infoCache={}}};H([ic],en.prototype,"getInfo",1);var rn=require("vscode");function Vu(n,e=!0){let t=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[`${rn.env.appRoot}/node_modules.asar/${n}`,`${rn.env.appRoot}/node_modules/${n}`,n];for(let i of r)try{return t(i)}catch{}e&&rn.window.showErrorMessage(`Missing dependency: ${n}`)}var na=Vu("@vscode/iconv-lite-umd",!1);na||(na=Vu("iconv-lite"));var nn=na;var Ve={AuthorizationFailed:"E170001",RepositoryIsLocked:"E155004",NotASvnRepository:"E155007",NotShareCommonAncestry:"E195012",WorkingCopyIsTooOld:"E155036"};function Nx(n){for(let e in Ve)if(Ve.hasOwnProperty(e)){let t=Ve[e];if(new RegExp(`svn: ${t}`).test(n))return t}if(/No more credentials or we tried too many times/.test(n))return Ve.AuthorizationFailed}function zu(n){return e=>{/ENOENT/.test(e.message)&&(e=new Tt({error:e,message:"Failed to execute svn (ENOENT)",svnErrorCode:"NotASvnRepository"})),n(e)}}var mi=class{constructor(e){this.lastCwd="";this._onOutput=new Gu.EventEmitter;this.svnPath=e.svnPath,this.version=e.version}get onOutput(){return this._onOutput}logOutput(e){this._onOutput.emit("log",e)}async exec(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let w=t.map(E=>/ |^$/.test(E)?`'${E}'`:E);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${w.join(" ")}
`)}r.username&&t.push("--username",r.username),r.password&&t.push("--password",r.password),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let i=r.encoding;delete r.encoding,t.includes("--xml")&&(i="utf8");let s={env:sn.env};e&&(s.cwd=e),s.env=Object.assign({},sn.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let o=ia.spawn(this.svnPath,t,s),a=[],c=(w,E,P)=>{w.once(E,P),a.push(Be(()=>w.removeListener(E,P)))},u=(w,E,P)=>{w.on(E,P),a.push(Be(()=>w.removeListener(E,P)))},[x,m,d]=await Promise.all([new Promise((w,E)=>{c(o,"error",E),c(o,"exit",w)}),new Promise(w=>{let E=[];u(o.stdout,"data",P=>E.push(P)),c(o.stdout,"close",()=>w(Buffer.concat(E)))}),new Promise(w=>{let E=[];u(o.stderr,"data",P=>E.push(P)),c(o.stderr,"close",()=>w(Buffer.concat(E).toString()))})]);Ie(a),i||(m.slice(0,100).toString("utf8").trimStart().startsWith("<?xml")?i="utf8":i=Vr(m)),i||(i=$.get("default.encoding")),nn.encodingExists(i)||(i&&console.warn(`SVN: The encoding "${i}" is invalid`),i="utf8");let l=nn.decode(m,i);if(r.log!==!1&&d.length>0){let w=this.lastCwd.split(/[\\\/]+/).pop(),E=d.split(`
`).filter(P=>P).map(P=>`[${w}]$ ${P}`).join(`
`);this.logOutput(E)}return x?Promise.reject(new Tt({message:"Failed to execute svn",stdout:l,stderr:d,stderrFormated:d.replace(/^svn: E\d+: +/gm,""),exitCode:x,svnErrorCode:Nx(d),svnCommand:t[0]})):{exitCode:x,stdout:l,stderr:d}}async execBuffer(e,t,r={}){if(e&&(this.lastCwd=e,r.cwd=e),r.log!==!1){let d=t.map(l=>/ |^$/.test(l)?`'${l}'`:l);this.logOutput(`[${this.lastCwd.split(/[\\\/]+/).pop()}]$ svn ${d.join(" ")}
`)}r.username&&t.push("--username",r.username),r.password&&t.push("--password",r.password),(r.username||r.password)&&(t.push("--config-option","config:auth:password-stores="),t.push("--config-option","servers:global:store-auth-creds=no")),t.push("--non-interactive");let i={env:sn.env};e&&(i.cwd=e),i.env=Object.assign({},sn.env,r.env||{},{LC_ALL:"en_US.UTF-8",LANG:"en_US.UTF-8"});let s=ia.spawn(this.svnPath,t,i),o=[],a=(d,l,w)=>{d.once(l,w),o.push(Be(()=>d.removeListener(l,w)))},c=(d,l,w)=>{d.on(l,w),o.push(Be(()=>d.removeListener(l,w)))},[u,x,m]=await Promise.all([new Promise((d,l)=>{a(s,"error",l),a(s,"exit",d)}),new Promise(d=>{let l=[];c(s.stdout,"data",w=>l.push(w)),a(s.stdout,"close",()=>d(Buffer.concat(l)))}),new Promise(d=>{let l=[];c(s.stderr,"data",w=>l.push(w)),a(s.stderr,"close",()=>d(Buffer.concat(l).toString()))})]);if(Ie(o),r.log!==!1&&m.length>0){let d=this.lastCwd.split(/[\\\/]+/).pop(),l=m.split(`
`).filter(w=>w).map(w=>`[${d}]$ ${w}`).join(`
`);this.logOutput(l)}return{exitCode:u,stdout:x,stderr:m}}async getRepositoryRoot(e){try{let t=await this.exec(e,["info","--xml"]),r=await Hr(t.stdout);return r&&r.wcInfo&&r.wcInfo.wcrootAbspath?r.wcInfo.wcrootAbspath:e}catch(t){throw t instanceof Tt?t:(console.error(t),new Error("Unable to find repository root path"))}}async open(e,t){return new en(this,e,t,0)}};var gi=class extends k{constructor(){super("svn.checkout")}async execute(e){if(e||(e=await ce.window.showInputBox({prompt:"Repository URL",ignoreFocusOut:!0})),!e)return;let t=$.get("defaultCheckoutDirectory")||sa.homedir();t=t.replace(/^~/,sa.homedir());let r=await ce.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:ce.Uri.file(t),openLabel:"Select Repository Location"});if(!r||r.length===0)return;let s=r[0].fsPath,o,a=It(e);if(a){let v=e.replace(/\//g,"/").replace(a.path,"");o=yi.basename(v)}if(o=await ce.window.showInputBox({prompt:"Folder name",value:o,ignoreFocusOut:!0}),!o)return;let c=yi.join(s,o),u=ce.ProgressLocation.Window;ce.ProgressLocation.Notification&&(u=ce.ProgressLocation.Notification);let x={location:u,title:`Checkout svn repository '${e}'...`,cancellable:!0},m=0,d={};for(;;){m++;try{await ce.window.withProgress(x,async()=>{let v=await ce.commands.executeCommand("svn.getSourceControlManager",""),p=["checkout",e,c];await v.svn.exec(s,p,d)});break}catch(v){if(v.svnErrorCode===Ve.AuthorizationFailed&&m<=3){let h=await ce.commands.executeCommand("svn.promptAuth",d.username);if(h){d.username=h.username,d.password=h.password;continue}}throw v}}let l=[],w="Would you like to open the checked out repository?",E="Open Repository";l.push(E);let P="Add to Workspace";ce.workspace.workspaceFolders&&ce.workspace.updateWorkspaceFolders&&(w="Would you like to open the checked out repository, or add it to the current workspace?",l.push(P));let _=await ce.window.showInformationMessage(w,...l);_===E?ce.commands.executeCommand("vscode.openFolder",ce.Uri.file(c)):_===P&&ce.workspace.updateWorkspaceFolders(ce.workspace.workspaceFolders.length,0,{uri:ce.Uri.file(c)})}};var wi=class extends k{constructor(){super("svn.cleanup",{repository:!0})}async execute(e){await e.cleanup()}};var Hu=require("vscode");var bi=class extends k{constructor(){super("svn.close",{repository:!0})}async execute(e){(await Hu.commands.executeCommand("svn.getSourceControlManager","")).close(e)}};var aa=V(require("path")),on=require("vscode");var Yu=V(require("path")),Ge=require("vscode");var Ce,oa;Ge.commands.registerCommand("svn.forceCommitMessageTest",n=>{if(oa)return oa(n)});function Qu(){Ce&&Ce.dispose()}async function Ox(n,e){return new Promise(r=>{Ce&&Ce.dispose(),oa=u=>{r(u),Ce.dispose()},Ce=Ge.window.createWebviewPanel("svnCommitMessage","Commit Message",{preserveFocus:!1,viewColumn:Ge.ViewColumn.Active},{enableScripts:!0,retainContextWhenHidden:!0});let i=Ge.Uri.file(Yu.join(__dirname,"..","css","commit-message.css")),s=Ce.webview.asWebviewUri(i),o="";if(e&&e.length){let u=e.sort().map(x=>`<li>${x}</li>`);u.length&&(o=`
<div class="file-list">
  <h3 class="title">Files to commit</h3>
  <ul>
    ${u.join(`
`)}
  </ul>
</div>`)}let a=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
  Use a content security policy to only allow loading images from https or from our extension directory,
  and only allow scripts that have a specific nonce.
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${Ce.webview.cspSource} https:; script-src ${Ce.webview.cspSource} 'unsafe-inline'; style-src ${Ce.webview.cspSource};">

  <title>Commit Message</title>
  <link rel="stylesheet" href="${s}">
</head>
<body>
  <section class="container">
    ${o}
    <form>
      <fieldset>
        <div class="float-right">
          <a href="#" id="pickCommitMessage">Pick a previous commit message</a>
        </div>
        <label for="message">Commit message</label>
        <textarea id="message" rows="3" placeholder="Message (press Ctrl+Enter to commit)"></textarea>
        <button id="commit" class="button-primary">Commit</button>
        <div class="float-right">
          <button id="cancel" class="button button-outline">Cancel</button>
        </div>
      </fieldset>
    </form>
  </section>
  <script>
    const vscode = acquireVsCodeApi();

    const txtMessage = document.getElementById("message");
    const btnCommit = document.getElementById("commit");
    const btnCancel = document.getElementById("cancel");
    const linkPickCommitMessage = document.getElementById("pickCommitMessage");

    // load current message
    txtMessage.value = ${JSON.stringify(n)};

    btnCommit.addEventListener("click", function() {
      vscode.postMessage({
        command: "commit",
        message: txtMessage.value
      });
    });

    btnCancel.addEventListener("click", function() {
      vscode.postMessage({
        command: "cancel"
      });
    });

    // Allow CTRL + Enter
    txtMessage.addEventListener("keydown", function(e) {
      if (event.ctrlKey && event.keyCode === 13) {
        btnCommit.click();
      }
    });

    // Auto resize the height of message
    txtMessage.addEventListener("input", function(e) {
      txtMessage.style.height = "auto";
      txtMessage.style.height = (txtMessage.scrollHeight) + "px";
    });

    window.addEventListener("load", function() {
      setTimeout(() => {
        txtMessage.focus();
      }, 1000);
    });

    linkPickCommitMessage.addEventListener("click", function() {
      vscode.postMessage({
        command: "pickCommitMessage"
      });
    });

    // Message from VSCode
    window.addEventListener("message", function(event) {
      const message = event.data;
      switch (message.command) {
        case "setMessage":
          txtMessage.value = message.message;
          txtMessage.dispatchEvent(new Event("input"));
          break;
      }
    });
  </script>
</body>
</html>`;Ce.webview.html=a,Ce.onDidDispose(()=>{r(void 0)});let c=async()=>{let u;e&&e[0]&&(u=await(await Ge.commands.executeCommand("svn.getSourceControlManager","")).getRepositoryFromUri(Ge.Uri.file(e[0])));let x=await Ge.commands.executeCommand("svn.pickCommitMessage",u);x!==void 0&&Ce.webview.postMessage({command:"setMessage",message:x})};Ce.webview.onDidReceiveMessage(u=>{switch(u.command){case"commit":r(u.message),Ce.dispose();break;case"pickCommitMessage":c();break;default:r(void 0),Ce.dispose()}}),Ce.reveal(Ge.ViewColumn.Active,!1)})}async function vi(n,e=!0,t){e&&(n=await Ox(n,t));let r=$.get("commit.checkEmptyMessage",!0);return n===""&&r?await Ge.window.showWarningMessage("Do you really want to commit an empty message?",{modal:!0},"Yes")==="Yes"?"":void 0:n}var Ei=class extends k{constructor(){super("svn.commit")}async execute(...e){if(e.length===0||!(e[0].resourceUri instanceof on.Uri)){let i=await this.getSCMResource();if(!i)return;e=[i]}let t=e.filter(i=>i instanceof re),r=t.map(i=>i.resourceUri);t.forEach(i=>{i.type==="added"&&i.renameResourceUri&&r.push(i.renameResourceUri)}),await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(a=>a.fsPath);for(let a of s){let c=aa.dirname(a.fsPath),u=i.getResourceFromFile(c);for(;u;)u.type==="added"&&o.push(c),c=aa.dirname(c),u=i.getResourceFromFile(c)}try{let a=await vi(i.inputBox.value,!0,o);if(a===void 0)return;i.inputBox.value=a;let c=await i.commitFiles(a,o);on.window.showInformationMessage(c),i.inputBox.value=""}catch(a){console.error(a);let c=a;on.window.showErrorMessage(c.stderrFormated||String(a))}})}};var ca=V(require("path")),ua=require("vscode");var Ci=class extends k{constructor(){super("svn.commitWithMessage",{repository:!0})}async execute(e){let t=await lc(e);if(!t||t.length===0)return;let r=t.map(s=>s.resourceUri.fsPath),i=await vi(e.inputBox.value,!1,r);if(i!==void 0){t.forEach(s=>{if(s instanceof re){s.type==="added"&&s.renameResourceUri&&r.push(s.renameResourceUri.fsPath);let o=ca.dirname(s.resourceUri.fsPath),a=e.getResourceFromFile(o);for(;a;)a.type==="added"&&r.push(o),o=ca.dirname(o),a=e.getResourceFromFile(o)}});try{let s=await e.commitFiles(i,r);ua.window.showInformationMessage(s),e.inputBox.value=""}catch(s){console.error(s);let o=s;ua.window.showErrorMessage(o.stderrFormated||String(s))}}}};var Ku=require("vscode");var Ii=class extends k{constructor(){super("svn.deleteUnversioned")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(s=>s.resourceUri);if(await Ku.window.showWarningMessage("Would you like to delete selected files?",{modal:!0},"Yes","No")==="Yes")for(let s of r){let o=s.fsPath;try{if(!await le(o))continue;(await ot(o)).isDirectory()?Ys(o):await Ht(o)}catch{}}}};var Zu=require("vscode");var Si=class extends k{constructor(){super("svn.fileOpen")}async execute(e){await Zu.commands.executeCommand("vscode.open",e)}};var Di=class extends k{constructor(){super("svn.finishCheckout",{repository:!0})}async execute(e){await e.finishCheckout()}};var Ri=class extends k{constructor(t){super("svn.getSourceControlManager");this.sourceControlManager=t}async execute(){return this.sourceControlManager}};var Ju=require("path"),vr=require("vscode");var Ti=class extends k{constructor(){super("svn.log",{repository:!0})}async execute(e){try{let t=Qe(vr.Uri.file(e.workspaceRoot),"LOG"),r=t.with({path:Ju.posix.join(t.path,"svn.log")});await vr.commands.executeCommand("vscode.open",r)}catch(t){console.error(t),vr.window.showErrorMessage("Unable to log")}}};var Er=class extends k{constructor(t,r){super(t);this.against=r}async execute(t,...r){return this.openChange(t,this.against,r)}};var xt=require("vscode");var Pi=class extends k{constructor(){super("svn.openFile")}async execute(e,...t){let r=e instanceof re,i;if(e instanceof xt.Uri)e.scheme==="svn"?i=[xt.Uri.file(At(e).fsPath)]:e.scheme==="file"&&(i=[e]);else if(e instanceof qe)i=[new re(e.uri,e.type,void 0,e.props,!0).resourceUri];else{let a=e;a instanceof re,a&&(i=[...t.map(c=>c.resourceUri),a.resourceUri])}if(!i)return;let s=i.length===1,o=xt.window.activeTextEditor;for(let a of i){if(!a||await le(a.fsPath)&&(await wt(a.fsPath)).isDirectory())continue;let c={preserveFocus:r,preview:s,viewColumn:xt.ViewColumn.Active};o&&o.document.uri.toString()===a.toString()&&(c.selection=o.selection);let u=await xt.workspace.openTextDocument(a);await xt.window.showTextDocument(u,c)}}};var Ni=require("path"),Cr=require("vscode");var Oi=class extends k{constructor(){super("svn.openHEADFile")}async execute(e){let t;if(e instanceof re?t=e:e instanceof Cr.Uri?t=await this.getSCMResource(e):e instanceof qe?t=new re(e.uri,e.type,void 0,e.props,!0):t=await this.getSCMResource(),!t)return;let r=await this.getLeftResource(t,"HEAD"),i=Ni.posix.basename(t.resourceUri.path);if(!r){Cr.window.showWarningMessage(`"HEAD version of '${i}' is not available."`);return}let s=Ni.posix.dirname(t.resourceUri.path),o=r.with({path:Ni.posix.join(s,`(HEAD) ${i}`)});return Cr.commands.executeCommand("vscode.open",o,{preview:!0})}};var _i=class extends k{constructor(){super("svn.openResourceBase")}async execute(e){await this._openResource(e,"BASE",void 0,!0,!1)}};var Ai=class extends k{constructor(){super("svn.openResourceHead")}async execute(e){await this._openResource(e,"HEAD",void 0,!0,!1)}};var Li=class extends k{constructor(){super("svn.patch")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=t.map(i=>i.resourceUri);await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(c=>c.fsPath),a=await i.patch(o);await this.showDiffPath(i,a)})}};var Mi=class extends k{constructor(){super("svn.patchAll",{repository:!0})}async execute(e){let t=await e.patch([]);await this.showDiffPath(e,t)}};var Fi=class extends k{constructor(){super("svn.patchChangeList",{repository:!0})}async execute(e){let t=await fc(e);if(!t)return;let r=await e.patchChangelist(t);await this.showDiffPath(e,r)}};var Xf=require("vscode");var Wf=V(xn()),Yi=class extends k{constructor(t){super("svn.pickCommitMessage",{repository:!0});this.svnVersion=t}async execute(t){let r=Wf.satisfies(this.svnVersion,">= 1.8"),i=[],s=$.get("previousCommitsUser",null);if(s&&r?i=await t.logByUser(s):i=await t.log("HEAD","0",20),!i.length)return;let o=i.map(u=>({label:u.msg,description:`r${u.revision} | ${u.author} | ${new Date(u.date).toLocaleString()}`})),a=await Xf.window.showQuickPick(o);if(a===void 0)return;let c=a.label;return t.inputBox.value=c,c}};var Pa=require("vscode");var Qi=class extends k{constructor(){super("svn.promptAuth")}async execute(e,t){let r=await Pa.window.showInputBox({placeHolder:"Svn repository username",prompt:"Please enter your username",ignoreFocusOut:!0,value:e});if(r===void 0)return;let i=await Pa.window.showInputBox({placeHolder:"Svn repository password",prompt:"Please enter your password",value:t,ignoreFocusOut:!0,password:!0});return i===void 0?void 0:{username:r,password:i}}};var Vf=require("vscode");var Ki=class extends k{constructor(){super("svn.promptRemove",{repository:!0})}async execute(e,...t){let r=t.map(a=>a.fsPath),i=r.map(a=>e.repository.removeAbsolutePath(a)).sort(),s="Add to ignored list",o=await Vf.window.showInformationMessage(`The file(s) "${i.join(", ")}" are removed from disk.
Would you like remove from SVN?`,{modal:!1},"Yes",s,"No");if(o==="Yes")await e.removeFiles(r,!1);else if(o===s){let a=$.get("delete.ignoredRulesForDeletedFiles",[]);a.push(...i),a=[...new Set(a)],$.update("delete.ignoredRulesForDeletedFiles",a)}}};var Zi=require("vscode");var Ji=class extends k{constructor(){super("svn.treeview.pullIncomingChange")}async execute(...e){let t=$.get("showUpdateMessage",!0);if(e[0]instanceof qe){try{let i=e[0],s=await i.repository.pullIncomingChange(i.uri.fsPath);t&&Zi.window.showInformationMessage(s)}catch(i){console.error(i),Zi.window.showErrorMessage("Unable to update")}return}let r=e.map(i=>i.resourceUri);await this.runByRepository(r,async(i,s)=>{if(!i)return;s.map(a=>a.fsPath).forEach(async a=>{let c=await i.pullIncomingChange(a);t&&Zi.window.showInformationMessage(c)})})}};var es=class extends k{constructor(){super("svn.refresh",{repository:!0})}async execute(e){let t=$.get("refresh.remoteChanges",!1);await e.status(),t&&await e.updateRemoteChangedFiles()}};var ts=class extends k{constructor(){super("svn.refreshRemoteChanges",{repository:!0})}async execute(e){await e.updateRemoteChangedFiles()}};var Na=require("vscode");var rs=class extends k{constructor(){super("svn.remove")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r,i=await Na.window.showWarningMessage("Would you like to keep a local copy of the files?",{modal:!0},"Yes","No");if(!i)return;i==="Yes"?r=!0:r=!1;let s=t.map(o=>o.resourceUri);await this.runByRepository(s,async(o,a)=>{if(!o)return;let c=a.map(u=>u.fsPath);try{await o.removeFiles(c,r)}catch(u){console.log(u),Na.window.showErrorMessage("Unable to remove files")}})}};var Gf=require("vscode"),ns=class extends k{constructor(){super("svn.removeUnversioned",{repository:!0})}async execute(e){await Gf.window.showWarningMessage("Are you sure? This will remove all unversioned files except for ignored.",{modal:!0},"Yes","No")==="Yes"&&await e.removeUnversioned()}};var Xt=V(require("path")),zf=require("vscode");var is=class extends k{constructor(){super("svn.renameExplorer",{repository:!0})}async execute(e,t,r){if(!t)return;let i=t.fsPath;return this.rename(e,i)}async rename(e,t,r){if(t=He(t),!r){let s=He(e.workspaceRoot),o=Xt.relative(s,t);r=await zf.window.showInputBox({value:Xt.basename(t),prompt:`New name name for ${o}`})}if(!r)return;let i=Xt.dirname(t);r=Xt.join(i,r),await e.rename(t,r)}};var Hf=require("vscode");var Tg=[{label:"base",description:"Choose the file that was the (unmodified) BASE revision before you tried to integrate changes"},{label:"working",description:"Assuming that you've manually handled the conflict resolution, choose the version of the file as it currently stands in your working copy."},{label:"mine-full",description:"Preserve all local modifications and discarding all changes fetched"},{label:"theirs-full",description:"Discard all local modifications and integrating all changes fetched"},{label:"mine-conflict",description:"Resolve conflicted files by preferring local modifications over the changes fetched"},{label:"theirs-conflict",description:"Resolve conflicted files by preferring the changes fetched from the server over local modifications"}],Oa=class{constructor(e){this.option=e}get label(){return this.option.label}get description(){return this.option.description}};function ss(){return Tg.map(n=>new Oa(n))}var os=class extends k{constructor(){super("svn.resolve")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0)return;let r=ss(),i=await Hf.window.showQuickPick(r,{placeHolder:"Select conflict option"});if(!i)return;let s=t.map(o=>o.resourceUri);await this.runByRepository(s,async(o,a)=>{if(!o)return;let c=a.map(u=>u.fsPath);await o.resolve(c,i.label)})}};var dn=require("vscode");var as=class extends k{constructor(){super("svn.resolveAll",{repository:!0})}async execute(e){let t=e.conflicts.resourceStates;t.length||dn.window.showInformationMessage("No Conflicts");for(let r of t){let i=`Select conflict option for ${r.resourceUri.path}`,s=ss(),o=await dn.window.showQuickPick(s,{placeHolder:i});if(!o)return;try{let a=await e.resolve([r.resourceUri.path],o.label);dn.window.showInformationMessage(a)}catch(a){let c=a;dn.window.showErrorMessage(c.stderr||String(a))}}}};var Yf=V(require("path")),Qf=require("vscode");var cs=class extends k{constructor(){super("svn.resolved")}async execute(e){if(!e)return;if(!$.get("conflict.autoResolve")){let i=Yf.basename(e.fsPath);if(await Qf.window.showWarningMessage(`Mark the conflict as resolved for "${i}"?`,{modal:!0},"Yes","No")!=="Yes")return}let r=[e];await this.runByRepository(r,async(i,s)=>{if(!i)return;let o=s.map(a=>a.fsPath);await i.resolve(o,"working")})}};var Kf=require("vscode");var _a=require("vscode");async function Sr(){let n="Yes I'm sure";return await _a.window.showWarningMessage("Are you sure? This will wipe all local changes.",{modal:!0},n)===n}async function Pg(){let n=[];for(let r in Ur)Ur.hasOwnProperty(r)&&n.push({label:r,description:Ur[r]});let t=await _a.window.showQuickPick(n,{placeHolder:"Select revert depth"});if(t)return t.label}async function Dr(n,e="empty"){let t=n.length===0;for(let r of n)if(r.scheme==="file")try{if((await ot(r.fsPath)).isDirectory()){t=!0;break}}catch{}return t?Pg():e}var us=class extends k{constructor(){super("svn.revert")}async execute(...e){let t=await this.getResourceStates(e);if(t.length===0||!await Sr())return;let r=t.map(s=>s.resourceUri),i=await Dr(r);i&&await this.runByRepository(r,async(s,o)=>{if(!s)return;let a=o.map(c=>c.fsPath).reverse();try{await s.revert(a,i)}catch(c){console.log(c),Kf.window.showErrorMessage("Unable to revert")}})}};var Zf=require("vscode");var ls=class extends k{constructor(){super("svn.revertAll")}async execute(e){let t=e.resourceStates;if(t.length===0||!await Sr())return;let r=t.map(s=>s.resourceUri),i=await Dr(r);i&&await this.runByRepository(r,async(s,o)=>{if(!s)return;let a=o.map(c=>c.fsPath).reverse();try{await s.revert(a,i)}catch(c){console.log(c),Zf.window.showErrorMessage("Unable to revert")}})}};var Jf=require("vscode");var fs=class extends k{constructor(){super("svn.revertChange")}async execute(e,t,r){let i=Jf.window.visibleTextEditors.filter(s=>s.document.uri.toString()===e.toString())[0];i&&await this._revertChanges(i,[...t.slice(0,r),...t.slice(r+1)])}};var ep=require("vscode");var ps=class extends k{constructor(){super("svn.revertExplorer")}async execute(e,t){if(!t)return;let r=t;if(r.length===0||!await Sr())return;let i=await Dr(r);i&&await this.runByRepository(r,async(s,o)=>{if(!s)return;let a=o.map(c=>c.fsPath);try{await s.revert(a,i)}catch(c){console.log(c),ep.window.showErrorMessage("Unable to revert")}})}};var mn=require("vscode");var hs=class extends k{constructor(){super("svn.switchBranch",{repository:!0})}async execute(e){let t=await mr(e,!0);if(t)try{if(t.isNew){let r=await mn.window.showInputBox({value:`Created new branch ${t.name}`,prompt:`Commit message for create branch ${t.name}`});if(r===void 0)return;await e.newBranch(t.path,r)}else try{await e.switchBranch(t.path)}catch(r){let i=r;if(i.stderrFormated&&i.stderrFormated.includes("ignore-ancestry"))await mn.window.showErrorMessage("Seems like these branches don't have a common ancestor.  Do you want to retry with '--ignore-ancestry' option?","Yes","No")==="Yes"&&await e.switchBranch(t.path,!0);else throw r}}catch(r){console.log(r),t.isNew?mn.window.showErrorMessage("Unable to create new branch"):mn.window.showErrorMessage("Unable to switch branch")}}};var Aa=require("vscode");var xs=class extends k{constructor(){super("svn.update",{repository:!0})}async execute(e){try{let t=$.get("update.ignoreExternals",!1),r=$.get("showUpdateMessage",!0),i=await e.updateRevision(t);r&&Aa.window.showInformationMessage(i)}catch(t){console.error(t),Aa.window.showErrorMessage("Unable to update")}}};var Rr=require("vscode");var ds=class extends k{constructor(){super("svn.upgrade")}async execute(e){if(!e||$.get("ignoreWorkingCopyIsTooOld",!1))return;e=He(e);let t="Yes",r="No",i="Don't Show Again",s=await Rr.window.showWarningMessage("You want upgrade the working copy (svn upgrade)?",t,r,i),o=await Rr.commands.executeCommand("svn.getSourceControlManager","");if(s===t)await o.upgradeWorkingCopy(e)?(Rr.window.showInformationMessage(`Working copy "${e}" upgraded`),o.tryOpenRepository(e)):Rr.window.showErrorMessage(`Error on upgrading working copy "${e}". See log for more detail`);else if(s===i)return $.update("ignoreWorkingCopyIsTooOld",!0)}};var tp=require("path");var Wt=require("vscode");var ms=class extends k{constructor(){super("svn.searchLogByRevision",{repository:!0})}async execute(e){let t=await Wt.window.showInputBox({prompt:"Revision?"});if(!t)return;let r=parseInt(t,10);if(!r||!/^\+?(0|[1-9]\d*)$/.test(t)){Wt.window.showErrorMessage("Invalid revision");return}try{let i=Qe(Wt.Uri.file(e.workspaceRoot),"LOG_REVISION",{revision:r}),s=i.with({path:tp.posix.join(i.path,"svn.log")});await Wt.commands.executeCommand("vscode.open",s)}catch(i){console.error(i),Wt.window.showErrorMessage("Unable to log")}}};var it=require("vscode");var K=require("vscode"),mt=V(require("path")),rp=V(require("crypto"));var gs=class{constructor(e){this.type=K.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},rr=class{constructor(e){this.type=K.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},La=class{constructor(){this._emitter=new K.EventEmitter;this._bufferedEvents=[];this._root=new rr("");this._disposables=[];this.onDidChangeFile=this._emitter.event;this._disposables.push(K.workspace.registerFileSystemProvider("tempsvnfs",this,{isCaseSensitive:!0}),K.workspace.onDidCloseTextDocument(e=>{e.uri.scheme==="tempsvnfs"&&this.delete(e.uri)}))}watch(e){return new K.Disposable(()=>{})}stat(e){return this._lookup(e,!1)}readDirectory(e){let t=this._lookupAsDirectory(e,!1),r=[];for(let[i,s]of t.entries)r.push([i,s.type]);return r}createDirectory(e){let t=mt.posix.basename(e.path),r=e.with({path:mt.posix.dirname(e.path)}),i=this._lookupAsDirectory(r,!1),s=new rr(t);i.entries.set(s.name,s),i.mtime=Date.now(),i.size+=1,this._fireSoon({type:K.FileChangeType.Changed,uri:r},{type:K.FileChangeType.Created,uri:e})}readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw K.FileSystemError.FileNotFound()}writeFile(e,t,r){let i=mt.posix.basename(e.path),s=this._lookupParentDirectory(e),o=s.entries.get(i);if(o instanceof rr)throw K.FileSystemError.FileIsADirectory(e);if(!o&&!r.create)throw K.FileSystemError.FileNotFound(e);if(o&&r.create&&!r.overwrite)throw K.FileSystemError.FileExists(e);o||(o=new gs(i),s.entries.set(i,o),this._fireSoon({type:K.FileChangeType.Created,uri:e})),o.mtime=Date.now(),o.size=t.byteLength,o.data=t,this._fireSoon({type:K.FileChangeType.Changed,uri:e})}delete(e){let t=e.with({path:mt.posix.dirname(e.path)}),r=mt.posix.basename(e.path),i=this._lookupAsDirectory(t,!1);if(!i.entries.has(r))throw K.FileSystemError.FileNotFound(e);i.entries.delete(r),i.mtime=Date.now(),i.size-=1,this._fireSoon({type:K.FileChangeType.Changed,uri:t},{type:K.FileChangeType.Deleted,uri:e})}rename(e,t,r){if(!r.overwrite&&this._lookup(t,!0))throw K.FileSystemError.FileExists(t);let i=this._lookup(e,!1),s=this._lookupParentDirectory(e),o=this._lookupParentDirectory(t),a=mt.posix.basename(t.path);s.entries.delete(i.name),i.name=a,o.entries.set(a,i),this._fireSoon({type:K.FileChangeType.Deleted,uri:e},{type:K.FileChangeType.Created,uri:t})}async createTempSvnRevisionFile(e,t,r){let i=`r${t}_${mt.basename(e.fsPath)}`,o=rp.createHash("md5").update(e.path).digest("hex"),a=$.get("default.encoding"),c;a?c=Buffer.from(nn.encode(r,a)):c=Buffer.from(r),this._root.entries.has(o)||this.createDirectory(K.Uri.parse(`tempsvnfs:/${o}`));let u=K.Uri.parse(`tempsvnfs:/${o}/${i}`,!0);return this.writeFile(u,c,{create:!0,overwrite:!0}),u}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[];for(let[e]of this.readDirectory(K.Uri.parse("tempsvnfs:/")))this.delete(K.Uri.parse(`tempsvnfs:/${e}`))}_lookup(e,t){let r=e.path.split("/"),i=this._root;for(let s of r){if(!s)continue;let o;if(i instanceof rr&&(o=i.entries.get(s)),!o){if(t)return;throw K.FileSystemError.FileNotFound(e)}i=o}return i}_lookupAsDirectory(e,t){let r=this._lookup(e,t);if(r instanceof rr)return r;throw K.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let r=this._lookup(e,t);if(r instanceof gs)return r;throw K.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){let t=e.with({path:mt.posix.dirname(e.path)});return this._lookupAsDirectory(t,!1)}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandler&&clearTimeout(this._fireSoonHandler),this._fireSoonHandler=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},1)}},Vt=new La;var ys=class extends k{constructor(){super("svn.searchLogByText",{repository:!0})}async execute(e){let t=await it.window.showInputBox({prompt:"Search query"});if(!t)return;if(!di(t)){it.window.showErrorMessage("Invalid search pattern: contains forbidden characters");return}let r=it.Uri.parse("tempsvnfs:/svn.log");Vt.writeFile(r,Buffer.from(""),{create:!0,overwrite:!0}),await it.commands.executeCommand("vscode.open",r);try{let i=await it.window.withProgress({cancellable:!1,location:it.ProgressLocation.Notification,title:"Searching Log"},async()=>e.plainLogByText(t));Vt.writeFile(r,Buffer.from(i),{create:!0,overwrite:!0})}catch(i){it.window.showErrorMessage(`Search failed: ${i instanceof Error?i.message:String(i)}`),console.error(i)}}};var Tr=require("vscode");var ws=class extends k{constructor(){super("svn.merge",{repository:!0})}async execute(e){let t=await mr(e);t&&await this.merge(e,t)}async merge(e,t){let r=!1;pc(e.currentBranch)&&(r=!0);try{await e.merge(t.path,r)}catch(i){let s=i;s.stderrFormated?s.stderrFormated.includes("try updating first")?await Tr.window.showErrorMessage("Seems like you need to update first prior to merging. Would you like to update now and try merging again?","Yes","No")==="Yes"&&(await Tr.commands.executeCommand("svn.update"),await this.merge(e,t)):Tr.window.showErrorMessage("Unable to merge branch: "+s.stderrFormated):(console.log(i),Tr.window.showErrorMessage("Unable to merge branch"))}}};function np(n,e){e.push(new Ri(n)),e.push(new Si),e.push(new Pi),e.push(new Qi),e.push(new Ci),e.push(new kn),e.push(new qn),e.push(new es),e.push(new Ei),e.push(new _i),e.push(new Ai),e.push(new Er("svn.openChangeBase","BASE")),e.push(new hs),e.push(new ws),e.push(new us),e.push(new xs),e.push(new Ji),e.push(new Mi),e.push(new Li),e.push(new Fi),e.push(new rs),e.push(new as),e.push(new os),e.push(new cs),e.push(new Ti),e.push(new fs),e.push(new bi),e.push(new wi),e.push(new ns),e.push(new Di),e.push(new $n),e.push(new Un),e.push(new is),e.push(new ds),e.push(new Er("svn.openChangePrev","PREV")),e.push(new Ki),e.push(new gi),e.push(new ts),e.push(new Ii),e.push(new Er("svn.openChangeHead","HEAD")),e.push(new Oi),e.push(new ls),e.push(new Yi(n.svn.version)),e.push(new ps),e.push(new ms),e.push(new ys)}var bs=require("vscode");var gn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidChangeStatusRepository(this.checkHasChangesOnActiveEditor,this,this.disposables),bs.window.onDidChangeActiveTextEditor(()=>this.checkHasChangesOnActiveEditor(),this,this.disposables)}checkHasChangesOnActiveEditor(){Ot("svnActiveEditorHasChanges",this.hasChangesOnActiveEditor())}hasChangesOnActiveEditor(){if(!bs.window.activeTextEditor)return!1;let e=bs.window.activeTextEditor.document.uri,t=this.sourceControlManager.getRepository(e);if(!t)return!1;let r=t.getResourceFromFile(e);if(!r)return!1;switch(r.type){case"added":case"deleted":case"external":case"ignored":case"none":case"normal":case"unversioned":return!1;case"conflicted":case"incomplete":case"merged":case"missing":case"modified":case"obstructed":case"replaced":return!0}return!0}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(100)],gn.prototype,"checkHasChangesOnActiveEditor",1);var yn=class{constructor(e){this.sourceControlManager=e;this.disposables=[];e.onDidOpenRepository(this.checkOpened,this,this.disposables),e.onDidCloseRepository(this.checkOpened,this,this.disposables),this.checkOpened()}checkOpened(){Ot("svnOpenRepositoryCount",this.sourceControlManager.repositories.length)}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(100)],yn.prototype,"checkOpened",1);var En=V(require("path")),se=require("vscode");var cp=require("crypto"),wn=V(require("path")),$a=V(ip()),up=V(sp()),he=require("vscode");$a.default.extend(up.default);var bn=class{constructor(e){this.path=e}toString(){return this.path}};function Pr(n,e,t){return n.map(r=>({kind:e,data:r,parent:t}))}function vs(n){let e=wn.join(__dirname,"..","icons"),t=r=>he.Uri.file(wn.join(e,r,`${n}.svg`));return{light:t("light"),dark:t("dark")}}async function Nr(n,e){let t=he.env.clipboard;if(t===void 0){he.window.showErrorMessage("Clipboard is supported in VS Code 1.30 and newer");return}if(e.kind===2){let r=e.data;switch(n){case"msg":case"revision":await t.writeText(r[n])}}}function Ng(n,e,t){return!(n.length&&n[n.length-1].revision==="1"||e.length===0||e[e.length-1].revision==="1"||e.length<t)}function Es(n,e,t){let r=n.persisted.baseRevision;if(e.length&&r&&parseInt(e[0].revision,10)>r){let i=1;for(;e.length>i&&parseInt(e[i].revision,10)>r;)i++;let s=new he.TreeItem("BASE");s.tooltip="Log entries above do not exist in working copy",t.splice(i,0,{kind:4,data:s})}}async function Ba(n,e){if(n.localFullPath===void 0){e&&he.window.showErrorMessage("No working copy for this path");return}let t;try{t=await ot(n.localFullPath.fsPath)}catch{return he.window.showWarningMessage("Not available from this working copy: "+n.localFullPath),!1}return t.isFile()?!0:(he.window.showErrorMessage("This target is not a file"),!1)}function vn(){let n=Number.parseInt($.get("log.length")||"50",10);if(isNaN(n)||n<=0)throw new Error("Invalid log.length setting value");return n}async function Or(n){let e=n.persisted.commitFrom,t=n.entries;t.length&&(e=t[t.length-1].revision,e=(Number.parseInt(e,10)-1).toString());let r=[],i=vn();try{r=await n.repo.log(e,"1",i,n.svnTarget)}catch{}Ng(t,r,i)||(n.isComplete=!0),t.push(...r)}var op=new Map;function Og(n){let e=(0,cp.createHash)("md5");return e.write(n),e.digest().toString("hex")}function Cs(n,e=16){if(!$.get("gravatars.enabled",!0)||n===void 0)return new he.ThemeIcon("git-commit");let t=op.get(n);if(t!==void 0)return t;let r=$.get("gravatar.icon_url","").replace("<AUTHOR>",n).replace("<AUTHOR_MD5>",Og(n)).replace("<SIZE>",e.toString());return t=he.Uri.parse(r),op.set(n,t),t}function Is(n){let e=(0,$a.default)(n.date).fromNow();return`r${n.revision}, ${e} by ${n.author}`}function Ss(n){return n.msg?n.msg.split(/\r?\n/,1)[0]:"<blank>"}function Ds(n){let e=n.date;return isNaN(Date.parse(e))||(e=new Date(e).toString()),`Author: ${n.author}
${e}
Revision: ${n.revision}
Message: ${n.msg}`}async function ap(n,e,t){if(t==="BASE"){let o=n.getPathNormalizer().parse(e.toString(!0)).localFullPath;if(o===void 0||!await le(o.path)){let a="BASE revision doesn't exist for "+(o?o.path:"remote path");throw he.window.showErrorMessage(a),new Error(a)}return o}let r;try{r=await n.show(e,t)}catch(i){throw he.window.showErrorMessage("Failed to open path"),i}return Vt.createTempSvnRevisionFile(e,t,r)}async function nr(n,e,t,r,i){let s=await ap(n,e,t),o=await ap(n,i||e,r),a={preview:!0},c=`${wn.basename(e.path)} (${t} : ${r})`;return he.commands.executeCommand("vscode.diff",s,o,c,a)}async function _r(n,e,t){let r;try{r=await n.show(e,t)}catch{he.window.showErrorMessage("Failed to open path");return}let i=await Vt.createTempSvnRevisionFile(e,t,r),s={preview:!0};return he.commands.executeCommand("vscode.open",i,s)}var Rs=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new se.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose=[];this._dispose.push(se.window.onDidChangeActiveTextEditor(this.editorChanged,this),se.window.registerTreeDataProvider("itemlog",this),se.commands.registerCommand("svn.itemlog.copymsg",async t=>Nr("msg",t)),se.commands.registerCommand("svn.itemlog.copyrevision",async t=>Nr("revision",t)),se.commands.registerCommand("svn.itemlog.openFileRemote",this.openFileRemoteCmd,this),se.commands.registerCommand("svn.itemlog.openDiff",this.openDiffCmd,this),se.commands.registerCommand("svn.itemlog.openDiffBase",this.openDiffBaseCmd,this),se.commands.registerCommand("svn.itemlog.refresh",this.refresh,this)),this.refresh()}dispose(){Ie(this._dispose)}async openFileRemoteCmd(e){let t=e.data,r=Ye(this.currentItem);return _r(r.repo,r.svnTarget,t.revision)}async openDiffBaseCmd(e){let t=e.data,r=Ye(this.currentItem);return nr(r.repo,r.svnTarget,t.revision,"BASE")}async openDiffCmd(e){let t=e.data,r=Ye(this.currentItem),i=r.entries.findIndex(o=>o===t);if(i===r.entries.length-1){se.window.showWarningMessage("Cannot diff last commit");return}let s=r.entries[i+1].revision;return nr(r.repo,r.svnTarget,s,t.revision)}async editorChanged(e){return this.refresh(void 0,e)}async refresh(e,t,r){if(r){await Or(Ye(this.currentItem)),this._onDidChangeTreeData.fire(e);return}if(t===void 0&&(t=se.window.activeTextEditor),t){let i=t.document.uri;if(i.scheme==="file"){let s=this.sourceControlManager.getRepository(i);if(s!==null)try{let o=await s.getInfo(i.fsPath);this.currentItem={isComplete:!1,entries:[],repo:s.repository,svnTarget:se.Uri.parse(o.url),persisted:{commitFrom:"HEAD",baseRevision:parseInt(o.revision,10)},order:0}}catch{}}this._onDidChangeTreeData.fire(e)}}async getTreeItem(e){let t;if(e.kind===2){let r=e.data;t=new se.TreeItem(Ss(r),se.TreeItemCollapsibleState.None),t.description=Is(r),t.iconPath=Cs(r.author),t.tooltip=Ds(r),t.contextValue="diffable",t.command={command:"svn.itemlog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Shouldn't happen");return t}async getChildren(e){if(this.currentItem===void 0)return[];if(e===void 0){let t=En.basename(this.currentItem.svnTarget.fsPath),r=new se.TreeItem(t,se.TreeItemCollapsibleState.Expanded);return r.tooltip=En.dirname(this.currentItem.svnTarget.fsPath),r.description=En.dirname(this.currentItem.svnTarget.fsPath),r.iconPath=new se.ThemeIcon("history"),[{kind:4,data:r}]}else{let t=this.currentItem.entries;t.length===0&&await Or(this.currentItem);let r=Pr(t,2);if(Es(this.currentItem,t,r),!this.currentItem.isComplete){let i=new se.TreeItem(`Load another ${vn()} revisions`),s={kind:4,data:i};i.tooltip="Paging size may be adjusted using log.length setting",i.command={command:"svn.itemlog.refresh",arguments:[e,void 0,!0],title:"refresh element"},i.iconPath=new se.ThemeIcon("unfold"),r.push(s)}return r}}};var Gt=V(require("path")),G=require("vscode");var Ar=V(require("path")),Sn=require("timers"),J=require("vscode");var Cn=class{constructor(){this.operations=new Map}start(e){this.operations.set(e,(this.operations.get(e)||0)+1)}end(e){let t=(this.operations.get(e)||0)-1;t<=0?this.operations.delete(e):this.operations.set(e,t)}isRunning(e){return this.operations.has(e)}isIdle(){let e=this.operations.keys();for(let t of e)if(!Ln(t))return!1;return!0}};var lp=require("vscode");var Ts=class{constructor(e){this.repository=e;this._onDidChange=new lp.EventEmitter;this.disposables=[];e.onDidChangeStatus(this._onDidChange.fire,this._onDidChange,this.disposables),e.onDidChangeOperations(this._onDidChange.fire,this._onDidChange,this.disposables)}get onDidChange(){return this._onDidChange.event}get command(){if(!this.repository.currentBranch)return;let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch");return{command:"svn.switchBranch",tooltip:"Switch Branch...",title:`$(git-branch) ${this.repository.currentBranch}${e?" (Switching)":""}`,arguments:[this.repository.sourceControl]}}dispose(){this.disposables.forEach(e=>e.dispose())}};var fp=require("vscode");var Ns=class Ns{constructor(e){this.repository=e;this._onDidChange=new fp.EventEmitter;this.disposables=[];this._state=Ns.startState;e.onDidChangeStatus(this.onModelChange,this,this.disposables),e.onDidChangeOperations(this.onOperationsChange,this,this.disposables),this._onDidChange.fire()}get onDidChange(){return this._onDidChange.event}get state(){return this._state}set state(e){this._state=e,this._onDidChange.fire()}onOperationsChange(){let e=this.repository.operations.isRunning("SwitchBranch")||this.repository.operations.isRunning("NewBranch")||this.repository.operations.isRunning("Update")||this.repository.operations.isRunning("Merge"),t=this.repository.operations.isRunning("StatusRemote"),r=!this.repository.operations.isIdle();this.state={...this.state,isStatusRemoteRunning:t,isOperationRunning:r,isSyncRunning:e}}onModelChange(){this.state={...this.state,remoteChangedFiles:this.repository.remoteChangedFiles}}get command(){let e="$(sync)",t="",r="",i="";return this.state.isSyncRunning?(r="",e="$(sync~spin)",t="",i="Updating Revision..."):this.state.isStatusRemoteRunning?(r="",e="$(sync~spin)",t="",i="Checking remote updates..."):this.state.isOperationRunning?(r="",e="$(sync~spin)",t="Running",i="Running..."):this.state.needCleanUp?(r="svn.cleanup",e="$(alert)",t="Need cleanup",i="Run cleanup command"):this.state.isIncomplete?(r="svn.finishCheckout",e="$(issue-reopened)",t="Incomplete (Need finish checkout)",i="Run update to complete"):this.state.remoteChangedFiles>0?(e="$(cloud-download)",r="svn.update",i="Update Revision",t=`${this.state.remoteChangedFiles}\u2193`):(r="svn.update",i="Update Revision"),{command:r,title:[e,t].join(" ").trim(),tooltip:i,arguments:[this.repository]}}dispose(){this.disposables.forEach(e=>e.dispose())}};Ns.startState={isIncomplete:!1,isOperationRunning:!1,isStatusRemoteRunning:!1,isSyncRunning:!1,needCleanUp:!1,remoteChangedFiles:0};var Ps=Ns;var Os=class{constructor(e){this.disposables=[];this.checkoutStatusBar=new Ts(e),this.syncStatusBar=new Ps(e),this.disposables.push(this.checkoutStatusBar,this.syncStatusBar)}get onDidChange(){return at(this.syncStatusBar.onDidChange,this.checkoutStatusBar.onDidChange)}get commands(){let e=[],t=this.checkoutStatusBar.command;t&&e.push(t);let r=this.syncStatusBar.command;return r&&e.push(r),e}dispose(){this.disposables.forEach(e=>e.dispose())}};var $e=require("vscode"),pp=require("fs");var hp=require("path");var In=class{constructor(e){this.root=e;this.disposables=[];let t=$e.workspace.createFileSystemWatcher(new $e.RelativePattern(He(e),"**"));this._onRepoChange=new $e.EventEmitter,this._onRepoCreate=new $e.EventEmitter,this._onRepoDelete=new $e.EventEmitter;let r,i,s;typeof $e.workspace.workspaceFolders<"u"&&!$e.workspace.workspaceFolders.filter(m=>ke(m.uri.fsPath,e)).length&&((0,pp.watch)((0,hp.join)(e,bt()),this.repoWatch.bind(this)).on("error",d=>{throw d}),r=this._onRepoChange.event,i=this._onRepoCreate.event,s=this._onRepoDelete.event),this.disposables.push(t);let o=m=>/[\\\/](\.svn|_svn)[\\\/]tmp/.test(m.path),a=m=>!o(m);this.onDidChange=me(t.onDidChange,a),this.onDidCreate=me(t.onDidCreate,a),this.onDidDelete=me(t.onDidDelete,a),this.onDidAny=at(this.onDidChange,this.onDidCreate,this.onDidDelete);let c=/[\\\/](\.svn|_svn)[\\\/]/,u=m=>!c.test(m.path);this.onDidWorkspaceChange=me(this.onDidChange,u),this.onDidWorkspaceCreate=me(this.onDidCreate,u),this.onDidWorkspaceDelete=me(this.onDidDelete,u),this.onDidWorkspaceAny=at(this.onDidWorkspaceChange,this.onDidWorkspaceCreate,this.onDidWorkspaceDelete);let x=m=>c.test(m.path);this.onDidSvnChange=me(this.onDidChange,x),this.onDidSvnCreate=me(this.onDidCreate,x),this.onDidSvnDelete=me(this.onDidDelete,x),r&&i&&s&&(this.onDidSvnChange=r,this.onDidSvnCreate=i,this.onDidSvnDelete=s),this.onDidSvnAny=at(this.onDidSvnChange,this.onDidSvnCreate,this.onDidSvnDelete)}repoWatch(e,t){t&&(e==="change"?this._onRepoChange.fire($e.Uri.parse(t)):e==="rename"&&le(t).then(r=>{r?this._onRepoCreate.fire($e.Uri.parse(t)):this._onRepoDelete.fire($e.Uri.parse(t))}))}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(1e3)],In.prototype,"repoWatch",1);function Ag(n){switch(n){case"CurrentBranch":case"Show":case"Info":return!1;default:return!0}}var Te=class{constructor(e,t){this.repository=e;this.secrets=t;this.changelists=new Map;this.statusIgnored=[];this.statusExternal=[];this.disposables=[];this.currentBranch="";this.remoteChangedFiles=0;this.isIncomplete=!1;this.needCleanUp=!1;this.deletedUris=[];this.canSaveAuth=!1;this._onDidChangeRepository=new J.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeState=new J.EventEmitter;this.onDidChangeState=this._onDidChangeState.event;this._onDidChangeStatus=new J.EventEmitter;this.onDidChangeStatus=this._onDidChangeStatus.event;this._onDidChangeRemoteChangedFiles=new J.EventEmitter;this.onDidChangeRemoteChangedFile=this._onDidChangeRemoteChangedFiles.event;this._onRunOperation=new J.EventEmitter;this.onRunOperation=this._onRunOperation.event;this._onDidRunOperation=new J.EventEmitter;this.onDidRunOperation=this._onDidRunOperation.event;this._operations=new Cn;this._state=0;this._fsWatcher=new In(e.root),this.disposables.push(this._fsWatcher),this._fsWatcher.onDidAny(this.onFSChange,this,this.disposables),this._fsWatcher.onDidSvnAny(async r=>{await this.onDidAnyFileChanged(r)},this,this.disposables),this.sourceControl=J.scm.createSourceControl("svn","SVN",J.Uri.file(e.workspaceRoot)),this.sourceControl.count=0,this.sourceControl.inputBox.placeholder="Message (press Ctrl+Enter to commit)",this.sourceControl.acceptInputCommand={command:"svn.commitWithMessage",title:"commit",arguments:[this.sourceControl]},this.sourceControl.quickDiffProvider=this,this.disposables.push(this.sourceControl),this.statusBar=new Os(this),this.disposables.push(this.statusBar),this.statusBar.onDidChange(()=>this.sourceControl.statusBarCommands=this.statusBar.commands,null,this.disposables),this.changes=this.sourceControl.createResourceGroup("changes","Changes"),this.conflicts=this.sourceControl.createResourceGroup("conflicts","Conflicts"),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.changes.hideWhenEmpty=!0,this.unversioned.hideWhenEmpty=!0,this.conflicts.hideWhenEmpty=!0,this.disposables.push(this.changes),this.disposables.push(this.conflicts),this.disposables.push(Be(()=>this.unversioned.dispose())),this.disposables.push(Be(()=>{this.remoteChangedUpdateInterval&&(0,Sn.clearInterval)(this.remoteChangedUpdateInterval)})),this._fsWatcher.onDidWorkspaceDelete(r=>this.deletedUris.push(r),this,this.disposables),this.onDidChangeStatus(this.actionForDeletedFiles,this,this.disposables),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles(),$.onDidChange(r=>{r.affectsConfiguration("svn.remoteChanges.checkFrequency")&&(this.remoteChangedUpdateInterval&&(0,Sn.clearInterval)(this.remoteChangedUpdateInterval),this.createRemoteChangedInterval(),this.updateRemoteChangedFiles())}),this.status(),this.disposables.push(J.workspace.onDidSaveTextDocument(r=>{this.onDidSaveTextDocument(r)}))}get fsWatcher(){return this._fsWatcher}get onDidChangeOperations(){return at(this.onRunOperation,this.onDidRunOperation)}get operations(){return this._operations}get state(){return this._state}set state(e){var t;this._state=e,this._onDidChangeState.fire(e),this.changes.resourceStates=[],this.unversioned.resourceStates=[],this.conflicts.resourceStates=[],this.changelists.forEach((r,i)=>{r.resourceStates=[]}),(t=this.remoteChanges)==null||t.dispose(),this.isIncomplete=!1,this.needCleanUp=!1}get root(){return this.repository.root}get workspaceRoot(){return this.repository.workspaceRoot}get branchRoot(){return J.Uri.parse(this.repository.info.url)}get inputBox(){return this.sourceControl.inputBox}get username(){return this.repository.username}set username(e){this.repository.username=e}get password(){return this.repository.password}set password(e){this.repository.password=e}async onDidAnyFileChanged(e){await this.repository.updateInfo(),this._onDidChangeRepository.fire(e)}createRemoteChangedInterval(){let e=$.get("remoteChanges.checkFrequency",300);e&&(this.remoteChangedUpdateInterval=(0,Sn.setInterval)(()=>{this.updateRemoteChangedFiles()},1e3*e))}async actionForDeletedFiles(){if(!this.deletedUris.length)return;let e=this.deletedUris;this.deletedUris=[];let t=$.get("delete.actionForDeletedFiles","prompt");if(t==="none")return;let i=e.map(a=>this.getResourceFromFile(a)).filter(a=>a&&a.type==="missing").map(a=>a.resourceUri);if(!i.length)return;let o=$.get("delete.ignoredRulesForDeletedFiles",[]).map(a=>Bu(a));if(o.length&&(i=i.filter(a=>{let c=this.repository.removeAbsolutePath(a.fsPath);return!o.some(u=>u.match(c)||u.match(a.fsPath))})),!!i.length){if(t==="remove")return this.removeFiles(i.map(a=>a.fsPath),!1);if(t==="prompt")return J.commands.executeCommand("svn.promptRemove",...i)}}async updateRemoteChangedFiles(){var t;$.get("remoteChanges.checkFrequency",300)?this.run("StatusRemote"):((t=this.remoteChanges)==null||t.dispose(),this.remoteChanges=void 0)}onFSChange(e){$.get("autorefresh")&&this.operations.isIdle()&&this.eventuallyUpdateWhenIdleAndWait()}eventuallyUpdateWhenIdleAndWait(){this.updateWhenIdleAndWait()}async updateWhenIdleAndWait(){await this.whenIdleAndFocused(),await this.status(),await Hs(5e3)}async whenIdleAndFocused(){for(;;){if(!this.operations.isIdle()){await Yt(this.onDidRunOperation);continue}if(!J.window.state.focused){let e=me(J.window.onDidChangeWindowState,t=>t.focused);await Yt(e);continue}return}}async updateModelState(e=!1){var p,h;let t=[],r=[],i=[],s=new Map,o=[];this.statusExternal=[],this.statusIgnored=[],this.isIncomplete=!1,this.needCleanUp=!1;let a=$.get("sourceControl.combineExternalIfSameServer",!1),c=await this.retryRun(async()=>this.repository.getStatus({includeIgnored:!0,includeExternals:a,checkRemoteChanges:e}))??[],x=J.workspace.getConfiguration("files",J.Uri.file(this.root)).get("exclude"),m=[];for(let y in x)if(x.hasOwnProperty(y)){let R=!x[y];m.push((R?"!":"")+y)}if(this.statusExternal=c.filter(y=>y.status==="external"),a&&this.statusExternal.length){let y=await this.repository.getRepositoryUuid();this.statusExternal=this.statusExternal.filter(R=>y!==R.repositoryUuid)}let d=new Set(this.statusExternal.map(y=>y.path)),l=c.filter(y=>{if(y.status==="external")return!1;for(let R of d)if(ke(R,y.path))return!1;return!0}),w=$.get("sourceControl.hideUnversioned"),E=$.get("sourceControl.ignore"),P=new Set(l.map(y=>y.path));for(let y of l){if(y.path==="."&&(this.isIncomplete=y.status==="incomplete",this.needCleanUp=y.wcStatus.locked),y.wcStatus.switched&&(this.isIncomplete=!0),y.wcStatus.locked||y.wcStatus.switched||y.status==="incomplete"||er(y.path,m,{dot:!0}))continue;let R=J.Uri.file(Ar.join(this.workspaceRoot,y.path)),g=y.rename?J.Uri.file(Ar.join(this.workspaceRoot,y.rename)):void 0;y.reposStatus&&o.push(new re(R,y.reposStatus.item,void 0,y.reposStatus.props,!0));let D=new re(R,y.status,g,y.props);if(!((y.status==="normal"||y.status==="none")&&(y.props==="normal"||y.props==="none")&&!y.changelist))if(y.status==="ignored")this.statusIgnored.push(y);else if(y.status==="conflicted")i.push(D);else if(y.status==="unversioned"){if(w)continue;let C=y.path.match(/(.+?)\.(mine|working|merge-\w+\.r\d+|r\d+)$/);if(C&&C[1]&&P.has(C[1])||E.length>0&&er(Ar.sep+y.path,E,{dot:!0,matchBase:!0}))continue;r.push(D)}else if(y.changelist){let C=s.get(y.changelist);C||(C=[]),C.push(D),s.set(y.changelist,C)}else t.push(D)}this.changes.resourceStates=t,this.conflicts.resourceStates=i;let _=this.changelists.size;this.changelists.forEach((y,R)=>{y.resourceStates=[]});let S=[this.changes,this.conflicts],v=$.get("sourceControl.ignoreOnStatusCount");if(s.forEach((y,R)=>{let g=this.changelists.get(R);g||(g=this.sourceControl.createResourceGroup(`changelist-${R}`,`Changelist "${R}"`),g.hideWhenEmpty=!0,this.disposables.push(g),this.changelists.set(R,g)),g.resourceStates=y,v.includes(R)||S.push(g)}),_!==this.changelists.size&&(this.unversioned.dispose(),this.unversioned=this.sourceControl.createResourceGroup("unversioned","Unversioned"),this.unversioned.hideWhenEmpty=!0),this.unversioned.resourceStates=r,$.get("sourceControl.countUnversioned",!1)&&S.push(this.unversioned),this.sourceControl.count=S.reduce((y,R)=>y+R.resourceStates.length,0),!this.remoteChanges||_!==this.changelists.size){let y=((p=this.remoteChanges)==null?void 0:p.resourceStates)??[];(h=this.remoteChanges)==null||h.dispose(),this.remoteChanges=this.sourceControl.createResourceGroup("remotechanges","Remote Changes"),this.remoteChanges.repository=this,this.remoteChanges.hideWhenEmpty=!0,this.remoteChanges.resourceStates=y}return e&&(this.remoteChanges.resourceStates=o,o.length!==this.remoteChangedFiles&&(this.remoteChangedFiles=o.length,this._onDidChangeRemoteChangedFiles.fire())),this._onDidChangeStatus.fire(),this.currentBranch=await this.getCurrentBranch(),Promise.resolve()}getResourceFromFile(e){typeof e=="string"&&(e=J.Uri.file(e));let t=[this.changes,this.conflicts,this.unversioned,...this.changelists.values()],r=e.toString();for(let i of t)for(let s of i.resourceStates)if(r===s.resourceUri.toString()&&s instanceof re)return s}provideOriginalResource(e){if(e.scheme==="file"&&!ke(Ar.join(this.root,bt()),e.fsPath))return Qe(e,"SHOW",{},!0)}async getBranches(){try{return await this.repository.getBranches()}catch{return[]}}async status(){return this.run("Status")}async show(e,t){return this.run("Show",()=>this.repository.show(e,t))}async showBuffer(e,t){return this.run("Show",()=>this.repository.showBuffer(e,t))}async addFiles(e){return this.run("Add",()=>this.repository.addFiles(e))}async addChangelist(e,t){return this.run("AddChangelist",()=>this.repository.addChangelist(e,t))}async removeChangelist(e){return this.run("RemoveChangelist",()=>this.repository.removeChangelist(e))}async getCurrentBranch(){return this.run("CurrentBranch",async()=>this.repository.getCurrentBranch())}async newBranch(e,t="Created new branch"){return this.run("NewBranch",async()=>{await this.repository.newBranch(e,t),this.updateRemoteChangedFiles()})}async switchBranch(e,t=!1){await this.run("SwitchBranch",async()=>{await this.repository.switchBranch(e,t),this.updateRemoteChangedFiles()})}async merge(e,t=!1,r="postpone"){await this.run("Merge",async()=>{await this.repository.merge(e,t,r),this.updateRemoteChangedFiles()})}async updateRevision(e=!1){return this.run("Update",async()=>{let t=await this.repository.update(e);return this.updateRemoteChangedFiles(),t})}async pullIncomingChange(e){return this.run("Update",async()=>{let t=await this.repository.pullIncomingChange(e);return this.updateRemoteChangedFiles(),t})}async resolve(e,t){return this.run("Resolve",()=>this.repository.resolve(e,t))}async commitFiles(e,t){return this.run("Commit",()=>this.repository.commitFiles(e,t))}async revert(e,t){return this.run("Revert",()=>this.repository.revert(e,t))}async info(e){return this.run("Info",()=>this.repository.getInfo(e))}async patch(e){return this.run("Patch",()=>this.repository.patch(e))}async patchBuffer(e){return this.run("Patch",()=>this.repository.patchBuffer(e))}async patchChangelist(e){return this.run("Patch",()=>this.repository.patchChangelist(e))}async removeFiles(e,t){return this.run("Remove",()=>this.repository.removeFiles(e,t))}async plainLog(){return this.run("Log",()=>this.repository.plainLog())}async plainLogBuffer(){return this.run("Log",()=>this.repository.plainLogBuffer())}async plainLogByRevision(e){return this.run("Log",()=>this.repository.plainLogByRevision(e))}async plainLogByRevisionBuffer(e){return this.run("Log",()=>this.repository.plainLogByRevisionBuffer(e))}async plainLogByText(e){return this.run("Log",()=>this.repository.plainLogByText(e))}async plainLogByTextBuffer(e){return this.run("Log",()=>this.repository.plainLogByTextBuffer(e))}async log(e,t,r,i){return this.run("Log",()=>this.repository.log(e,t,r,i))}async logByUser(e){return this.run("Log",()=>this.repository.logByUser(e))}async cleanup(){return this.run("CleanUp",()=>this.repository.cleanup())}async removeUnversioned(){return this.run("CleanUp",()=>this.repository.removeUnversioned())}async getInfo(e,t){return this.run("Info",()=>this.repository.getInfo(e,t,!0))}async getChanges(){return this.run("Changes",()=>this.repository.getChanges())}async finishCheckout(){return this.run("SwitchBranch",()=>this.repository.finishCheckout())}async addToIgnore(e,t,r=!1){return this.run("Ignore",()=>this.repository.addToIgnore(e,t,r))}async rename(e,t){return this.run("Rename",()=>this.repository.rename(e,t))}async list(e){return this.run("List",()=>this.repository.ls(e))}getPathNormalizer(){return new Bt(this.repository.info)}getCredentialServiceName(){var r;let e="vscode.positron-svn",t=this.repository.info;return(r=t.repository)!=null&&r.root?e+=":"+t.repository.root:t.url&&(e+=":"+t.url),e}async loadStoredAuths(){this.lastPromptAuth&&await this.lastPromptAuth;let e=await this.secrets.get(this.getCredentialServiceName());return e===void 0?[]:JSON.parse(e)}async saveAuth(){if(this.canSaveAuth&&this.username&&this.password){let e=await this.secrets.get(this.getCredentialServiceName()),t=[];typeof e=="string"&&(t=JSON.parse(e)),t.push({account:this.username,password:this.password}),await this.secrets.store(this.getCredentialServiceName(),JSON.stringify(t)),this.canSaveAuth=!1}}async promptAuth(){if(this.lastPromptAuth)return this.lastPromptAuth;this.lastPromptAuth=J.commands.executeCommand("svn.promptAuth");let e=await this.lastPromptAuth;return e&&(this.username=e.username,this.password=e.password,this.canSaveAuth=!0),this.lastPromptAuth=void 0,e}onDidSaveTextDocument(e){let t=e.uri.toString(),r=this.conflicts.resourceStates.find(s=>s.resourceUri.toString()===t);if(!r)return;let i=e.getText();/^<{7}[^]+^={7}[^]+^>{7}/m.test(i)||J.commands.executeCommand("svn.resolved",r.resourceUri)}async run(e,t=()=>Promise.resolve(null)){if(this.state!==0)throw new Error("Repository not initialized");let r=async()=>{this._operations.start(e),this._onRunOperation.fire(e);try{let i=await this.retryRun(t),s=e==="StatusRemote";return Ln(e)||await this.updateModelState(s),i}catch(i){throw i.svnErrorCode===Ve.NotASvnRepository&&(this.state=1),await le(this.workspaceRoot)||await J.commands.executeCommand("svn.close",this),i}finally{this._operations.end(e),this._onDidRunOperation.fire(e)}};return Ag(e)?J.window.withProgress({location:J.ProgressLocation.SourceControl},r):r()}async retryRun(e=()=>Promise.resolve(null)){let t=0,r=[];for(;;)try{t++;let i=await e();return this.saveAuth(),i}catch(i){let s=i;if(s.svnErrorCode===Ve.RepositoryIsLocked&&t<=10)await Hs(Math.pow(t,2)*50);else if(s.svnErrorCode===Ve.AuthorizationFailed&&t<=1+r.length){t===1&&(r=await this.loadStoredAuths());let o=r.length-1;typeof r[o]<"u"&&(this.username=r[o].account,this.password=r[o].password)}else if(s.svnErrorCode===Ve.AuthorizationFailed&&t<=3+r.length){if(!await this.promptAuth())throw i}else throw i}}dispose(){this.disposables=Ie(this.disposables)}};H([ge],Te.prototype,"onDidChangeOperations",1),H([Ne(1e3)],Te.prototype,"onDidAnyFileChanged",1),H([Ne(1e3)],Te.prototype,"actionForDeletedFiles",1),H([Ne(1e3)],Te.prototype,"updateRemoteChangedFiles",1),H([Ne(1e3)],Te.prototype,"eventuallyUpdateWhenIdleAndWait",1),H([ur],Te.prototype,"updateWhenIdleAndWait",1),H([ur,sc("updateModelState")],Te.prototype,"updateModelState",1),H([ur],Te.prototype,"status",1);function Lg(n){let e;switch(n){case"A":e="status-added";break;case"D":e="status-deleted";break;case"M":e="status-modified";break;case"R":e="status-renamed";break}if(e!==void 0)return vs(e)}var _s=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new G.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.logCache=new Map;this._dispose=[];this.refresh(),this._dispose.push(G.window.registerTreeDataProvider("repolog",this),G.commands.registerCommand("svn.repolog.copymsg",async t=>Nr("msg",t)),G.commands.registerCommand("svn.repolog.copyrevision",async t=>Nr("revision",t)),G.commands.registerCommand("svn.repolog.addrepolike",this.addRepolikeGui,this),G.commands.registerCommand("svn.repolog.remove",this.removeRepo,this),G.commands.registerCommand("svn.repolog.openFileRemote",this.openFileRemoteCmd,this),G.commands.registerCommand("svn.repolog.openDiff",this.openDiffCmd,this),G.commands.registerCommand("svn.repolog.openFileLocal",this.openFileLocal,this),G.commands.registerCommand("svn.repolog.refresh",this.refresh,this),this.sourceControlManager.onDidChangeRepository(async t=>this.refresh()))}getCached(e){let t=Ye(e);return t.data instanceof bn?Ye(this.logCache.get(t.data.toString())):this.getCached(t.parent)}dispose(){Ie(this._dispose)}removeRepo(e){this.logCache.delete(e.data.toString()),this.refresh()}async addRepolike(e,t){let r={entries:[],isComplete:!1,svnTarget:{},repo:{},persisted:{commitFrom:t,userAdded:!0},order:this.logCache.size};if(this.logCache.has(e)){G.window.showWarningMessage("This path is already added");return}let i=this.sourceControlManager.getRepository(e);if(i===null)try{let o;if(e.startsWith("^")){let c=this.sourceControlManager.getRepository(Ye(G.workspace.workspaceFolders)[0].uri);if(!c)throw new Error("No repository in workspace root");let u=await c.getInfo(e);o=G.Uri.parse(u.url)}else o=G.Uri.parse(e);if(t!=="HEAD"&&isNaN(parseInt(t,10)))throw new Error("erroneous revision");let a=await this.sourceControlManager.getRemoteRepository(o);r.repo=a,r.svnTarget=o}catch(o){G.window.showWarningMessage("Failed to add repo: "+(o instanceof Error?o.message:""));return}else try{let o=await i.getInfo(e,t);r.repo=i.repository,r.svnTarget=G.Uri.parse(o.url),r.persisted.baseRevision=parseInt(o.revision,10)}catch{G.window.showErrorMessage("Failed to resolve svn path");return}let s=r.svnTarget.toString(!0);if(this.logCache.has(s)){G.window.showWarningMessage("Repository with this name already exists");return}this.logCache.set(s,r),this._onDidChangeTreeData.fire(void 0)}addRepolikeGui(){let e=G.window.createInputBox();e.prompt="Enter SVN URL or local path",e.onDidAccept(async()=>{let t=e.value;if(!Gt.isAbsolute(t)&&G.workspace.workspaceFolders&&!t.startsWith("^")&&!/^[a-z]+?:\/\//.test(t))for(let i of G.workspace.workspaceFolders){let s=Gt.join(i.uri.fsPath,t);if(await le(s)){t=s;break}}e.dispose();let r=G.window.createInputBox();r.prompt="Enter starting revision (optional)",r.onDidAccept(async()=>{let i=r.value;return r.dispose(),this.addRepolike(t,i||"HEAD")},void 0),r.show()}),e.show()}async openFileRemoteCmd(e){let t=e.data,r=this.getCached(e),i=r.repo.getPathNormalizer().parse(t._);if(await Ba(i,!1)===!1)return;let s=e.parent.data;return _r(r.repo,i.remoteFullPath,s.revision)}openFileLocal(e){let t=e.data,i=this.getCached(e).repo.getPathNormalizer().parse(t._);Ba(i,!0)&&G.commands.executeCommand("vscode.open",Ye(i.localFullPath))}async openDiffCmd(e){let t=e.data,r=this.getCached(e),i=e.parent.data,s=r.repo.getPathNormalizer().parse(t._).remoteFullPath,o,a=await r.repo.log(i.revision,"1",2,s);if(a.length===2)o=a[1];else{G.window.showWarningMessage("Cannot find previous commit");return}return nr(r.repo,s,o.revision,i.revision)}async refresh(e,t){if(e===void 0){for(let[r,i]of this.logCache)i.persisted.userAdded||this.logCache.delete(r);for(let r of this.sourceControlManager.repositories){let i=r.branchRoot,s=i.toString(!0),o={commitFrom:"HEAD",baseRevision:parseInt(r.repository.info.revision,10)},a=this.logCache.get(s);a&&(o=a.persisted),this.logCache.set(s,{entries:[],isComplete:!1,repo:r.repository,svnTarget:i,persisted:o,order:this.logCache.size})}}else if(e.kind===1){let r=this.getCached(e);t?await Or(r):(r.entries=[],r.isComplete=!1)}this._onDidChangeTreeData.fire(e)}async getTreeItem(e){let t;if(e.kind===1){let r=e.data,i=this.getCached(e);t=new G.TreeItem(r.toString(),G.TreeItemCollapsibleState.Collapsed),i.persisted.userAdded?(t.label="\u2218 "+t.label,t.contextValue="userrepo"):t.contextValue="repo",i.repo instanceof Te?t.iconPath=new G.ThemeIcon("folder-opened"):t.iconPath=new G.ThemeIcon("repo");let s=i.persisted.commitFrom||"HEAD";t.tooltip=`${r} since ${s}`}else if(e.kind===2){let r=e.data;t=new G.TreeItem(Ss(r),G.TreeItemCollapsibleState.Collapsed),t.description=Is(r),t.tooltip=Ds(r),t.iconPath=Cs(r.author),t.contextValue="commit"}else if(e.kind===3){let r=e.data,i=Gt.basename(r._);t=new G.TreeItem(i,G.TreeItemCollapsibleState.None),t.description=Gt.dirname(r._);let o=this.getCached(e).repo.getPathNormalizer();t.tooltip=o.parse(r._).relativeFromBranch,t.iconPath=Lg(r.action),t.contextValue="diffable",t.command={command:"svn.repolog.openDiff",title:"Open diff",arguments:[e]}}else if(e.kind===4)t=e.data;else throw new Error("Unknown tree elem");return t}async getChildren(e){if(e===void 0)return Pr(Array.from(this.logCache.entries()).sort(([t,r],[i,s])=>r.persisted.userAdded!==s.persisted.userAdded?r.persisted.userAdded?1:-1:r.order-s.order).map(([t,r])=>new bn(t)),1);if(e.kind===1){let t=vn(),r=this.getCached(e),i=r.entries;i.length===0&&await Or(r);let s=Pr(i,2,e);if(Es(r,i,s),!r.isComplete){let o=new G.TreeItem(`Load another ${t} revisions`);o.tooltip="Paging size may be adjusted using log.length setting",o.command={command:"svn.repolog.refresh",arguments:[e,!0],title:"refresh element"},o.iconPath=new G.ThemeIcon("unfold"),s.push({kind:4,data:o})}return s}else if(e.kind===2){let t=e.data;return Pr(t.paths,3,e)}return[]}};var ir=V(require("path")),pe=require("vscode");var Dn=class{constructor(e,t,r){this._svn=e;this.extensionContact=r;this._onDidOpenRepository=new pe.EventEmitter;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new pe.EventEmitter;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidChangeRepository=new pe.EventEmitter;this.onDidChangeRepository=this._onDidChangeRepository.event;this._onDidChangeStatusRepository=new pe.EventEmitter;this.onDidChangeStatusRepository=this._onDidChangeStatusRepository.event;this.openRepositories=[];this.disposables=[];this.enabled=!1;this.possibleSvnRepositoryPaths=new Set;this.ignoreList=[];this.maxDepth=0;this._onDidChangeState=new pe.EventEmitter;this.onDidchangeState=this._onDidChangeState.event;this._state="uninitialized";if(t!==0)throw new Error("Unsopported policy");return this.enabled=$.get("enabled")===!0,this.configurationChangeDisposable=pe.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this),(async()=>(this.enabled&&await this.enable(),this))()}get state(){return this._state}setState(e){this._state=e,this._onDidChangeState.fire(e)}get isInitialized(){return this._state==="initialized"?Promise.resolve():Yt(me(this.onDidchangeState,e=>e==="initialized"))}get repositories(){return this.openRepositories.map(e=>e.repository)}get svn(){return this._svn}openRepositoriesSorted(){return this.openRepositories.sort((e,t)=>t.repository.workspaceRoot.length-e.repository.workspaceRoot.length)}onDidChangeConfiguration(){let e=$.get("enabled")===!0;this.maxDepth=$.get("multipleFolders.depth",0),e!==this.enabled&&(this.enabled=e,e?this.enable():this.disable())}async enable(){$.get("multipleFolders.enabled",!1)&&(this.maxDepth=$.get("multipleFolders.depth",0),this.ignoreList=$.get("multipleFolders.ignore",[])),pe.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,this.disposables);let t=pe.workspace.createFileSystemWatcher("**");this.disposables.push(t);let r=at(t.onDidChange,t.onDidCreate,t.onDidDelete);me(r,s=>s.scheme==="file"&&!this.getRepository(s))(this.onPossibleSvnRepositoryChange,this,this.disposables),this.setState("initialized"),await this.scanWorkspaceFolders()}onPossibleSvnRepositoryChange(e){let t=e.fsPath.replace(/\.svn.*$/,"");this.eventuallyScanPossibleSvnRepository(t)}eventuallyScanPossibleSvnRepository(e){this.possibleSvnRepositoryPaths.add(e),this.eventuallyScanPossibleSvnRepositories()}eventuallyScanPossibleSvnRepositories(){for(let e of this.possibleSvnRepositoryPaths)this.tryOpenRepository(e,1);this.possibleSvnRepositoryPaths.clear()}scanExternals(e){$.get("detectExternals")===!0&&e.statusExternal.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}scanIgnored(e){$.get("detectIgnored")===!0&&e.statusIgnored.map(r=>ir.join(e.workspaceRoot,r.path)).forEach(r=>this.eventuallyScanPossibleSvnRepository(r))}disable(){this.repositories.forEach(e=>e.dispose()),this.openRepositories=[],this.possibleSvnRepositoryPaths.clear(),this.disposables=Ie(this.disposables)}async onDidChangeWorkspaceFolders({added:e,removed:t}){let r=e.filter(s=>!this.getOpenRepository(s.uri)),i=t.map(s=>this.getOpenRepository(s.uri.fsPath)).filter(s=>!!s).filter(s=>!(pe.workspace.workspaceFolders||[]).some(o=>s.repository.workspaceRoot.startsWith(o.uri.fsPath)));r.forEach(s=>this.tryOpenRepository(s.uri.fsPath)),i.forEach(s=>s.repository.dispose())}async scanWorkspaceFolders(){for(let e of pe.workspace.workspaceFolders||[]){let t=e.uri.fsPath;await this.tryOpenRepository(t)}}async tryOpenRepository(e,t=0){if(this.getRepository(e))return;if(await Qs(e,t===0)){let s=pe.workspace.getConfiguration("svn",pe.Uri.file(e));if(new Set((s.get("ignoreRepositories")||[]).map(a=>ct(a))).has(ct(e)))return;try{let a=await this.svn.getRepositoryRoot(e),c=new Te(await this.svn.open(a,e),this.extensionContact.secrets);this.open(c)}catch(a){if(a instanceof Tt&&a.svnErrorCode===Ve.WorkingCopyIsTooOld){await pe.commands.executeCommand("svn.upgrade",e);return}console.error(a)}return}let i=t+1;if(i<=this.maxDepth){let s=[];try{s=await zt(e)}catch{return}for(let o of s){let a=e+"/"+o,c;try{c=await wt(a)}catch{continue}c.isDirectory()&&!er(a,this.ignoreList,{dot:!0})&&await this.tryOpenRepository(a,i)}}}async getRemoteRepository(e){return this.svn.open(e.toString(!0),"")}getRepository(e){let t=this.getOpenRepository(e);return t&&t.repository?t.repository:null}getOpenRepository(e){if(e){if(e instanceof Te)return this.openRepositories.find(t=>t.repository===e);if(e.repository instanceof Te)return this.openRepositories.find(t=>t.repository===e.repository);if(typeof e=="string"&&(e=pe.Uri.file(e)),e instanceof pe.Uri)return this.openRepositoriesSorted().find(t=>{if(!ke(t.repository.workspaceRoot,e.fsPath))return!1;for(let r of t.repository.statusExternal){let i=ir.join(t.repository.workspaceRoot,r.path);if(ke(i,e.fsPath))return!1}for(let r of t.repository.statusIgnored){let i=ir.join(t.repository.workspaceRoot,r.path);if(ke(i,e.fsPath))return!1}return!0});for(let t of this.openRepositories){let r=t.repository;if(e===r.sourceControl||e===r.changes)return t}}}async getRepositoryFromUri(e){for(let t of this.openRepositoriesSorted()){let r=t.repository;if(ke(r.workspaceRoot,e.fsPath))try{let i=ct(e.fsPath);return await r.info(i),r}catch{}}return null}open(e){let r=me(e.onDidChangeState,u=>u===1)(()=>a()),i=e.onDidChangeRepository(u=>this._onDidChangeRepository.fire({repository:e,uri:u})),s=e.onDidChangeStatus(()=>{this._onDidChangeStatusRepository.fire(e)}),o=e.onDidChangeStatus(()=>{this.scanExternals(e),this.scanIgnored(e)});this.scanExternals(e),this.scanIgnored(e);let a=()=>{r.dispose(),i.dispose(),s.dispose(),o.dispose(),e.dispose(),this.openRepositories=this.openRepositories.filter(u=>u!==c),this._onDidCloseRepository.fire(e)},c={repository:e,dispose:a};this.openRepositories.push(c),this._onDidOpenRepository.fire(e)}close(e){let t=this.getOpenRepository(e);t&&t.dispose()}async pickRepository(){if(this.openRepositories.length===0)throw new Error("There are no available repositories");let e=this.repositories.map(i=>({label:ir.basename(i.root),repository:i})),r=await pe.window.showQuickPick(e,{placeHolder:"Choose a repository"});return r&&r.repository}async upgradeWorkingCopy(e){try{return(await this.svn.exec(e,["upgrade"])).exitCode===0}catch(t){console.log(t)}return!1}dispose(){this.disable(),this.configurationChangeDisposable.dispose()}};H([Ne(500)],Dn.prototype,"eventuallyScanPossibleSvnRepositories",1);var Lr=V(require("child_process")),xp=V(require("path")),Ls=V(xn());var As=class{findSvn(e){return(e?this.findSpecificSvn(e):Promise.reject(null)).then(void 0,()=>{switch(process.platform){case"darwin":return this.findSvnDarwin();case"win32":return this.findSvnWin32();default:return this.findSpecificSvn("svn")}}).then(r=>this.checkSvnVersion(r)).then(null,()=>Promise.reject(new Error("Svn installation not found.")))}findSvnWin32(){return this.findSystemSvnWin32(process.env.ProgramW6432).then(void 0,()=>this.findSystemSvnWin32(process.env["ProgramFiles(x86)"])).then(void 0,()=>this.findSystemSvnWin32(process.env.ProgramFiles)).then(void 0,()=>this.findSpecificSvn("svn"))}findSystemSvnWin32(e){return e?this.findSpecificSvn(xp.join(e,"TortoiseSVN","bin","svn.exe")):Promise.reject("Not found")}findSvnDarwin(){return new Promise((e,t)=>{Lr.exec("which svn",(r,i)=>{if(r)return t("svn not found");let s=i.toString().replace(/^\s+|\s+$/g,"");function o(a){Lr.exec("svn --version --quiet",(c,u)=>c?t("svn not found"):e({path:a,version:u.trim()}))}if(s!=="/usr/bin/svn")return o(s);Lr.exec("xcode-select -p",a=>{if(a&&a.code===2)return t("svn not found");o(s)})})})}findSpecificSvn(e){return new Promise((t,r)=>{let i=[],s=Lr.spawn(e,["--version","--quiet"]);s.stdout.on("data",o=>i.push(o)),s.on("error",zu(r)),s.on("close",o=>o?r(new Error("Not found")):t({path:e,version:Buffer.concat(i).toString("utf8").trim()}))})}checkSvnVersion(e){return new Promise((t,r)=>{let i=e.version.replace(/^(\d+\.\d+\.\d+).*/,"$1");Ls.valid(i)?Ls.gte(i,"1.6.0")?t(e):r(new Error("Required svn version must be >= 1.6")):r(new Error("Invalid svn version"))})}};var Mr=require("vscode");var dp=V(require("path")),ks=require("vscode");var Fs=require("vscode");var Ms=require("vscode"),Rn=class{getTreeItem(){return new Ms.TreeItem("No Incoming Changes",Ms.TreeItemCollapsibleState.None)}async getChildren(){return[]}};var Tn=class{constructor(e){this.repository=e}getTreeItem(){let e=new Fs.TreeItem("Incoming Changes",Fs.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("download","dark"),light:Et("download","light")},e}async getChildren(){if(!this.repository.remoteChanges)return[];let e=this.repository.remoteChanges.resourceStates.map(t=>new qe(t.resourceUri,t.type,this.repository));return e.length===0?[new Rn]:e}};var Pn=class{constructor(e,t){this.repository=e;this.svnProvider=t;e.onDidChangeStatus(()=>{this.svnProvider.update(this)})}get label(){return dp.basename(this.repository.workspaceRoot)}getTreeItem(){let e=new ks.TreeItem(this.label,ks.TreeItemCollapsibleState.Collapsed);return e.iconPath={dark:Et("repo","dark"),light:Et("repo","light")},e}async getChildren(){return[new Tn(this.repository)]}};var Nn=class{constructor(e){this.sourceControlManager=e;this._onDidChangeTreeData=new Mr.EventEmitter;this._dispose=[];this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(Mr.window.registerTreeDataProvider("svn",this),Mr.commands.registerCommand("svn.treeview.refreshProvider",()=>this.refresh()))}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e.getTreeItem()}async getChildren(e){return!this.sourceControlManager||this.sourceControlManager.openRepositories.length===0?Promise.resolve([]):e?e.getChildren():this.sourceControlManager.openRepositories.map(r=>new Pn(r.repository,this))}update(e){this._onDidChangeTreeData.fire(e)}dispose(){Ie(this._dispose)}};var sr=require("vscode");var Us=class{constructor(e){this.model=e;this._dispose=[];this._onDidChangeTreeData=new sr.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._dispose.push(sr.window.registerTreeDataProvider("branchchanges",this),sr.commands.registerCommand("svn.branchchanges.openDiff",this.openDiffCmd,this),sr.commands.registerCommand("svn.branchchanges.refresh",()=>this._onDidChangeTreeData.fire(void 0),this),this.model.onDidChangeRepository(()=>this._onDidChangeTreeData.fire(void 0)))}dispose(){Ie(this._dispose)}getTreeItem(e){let t="";e.item==="added"?t="status-added":e.item==="deleted"?t="status-deleted":e.item==="modified"&&(t="status-modified");let r=vs(t);return{label:e.localPath.fsPath,command:{command:"svn.branchchanges.openDiff",title:"Open diff",arguments:[e]},iconPath:r,tooltip:`${e.oldPath.fsPath.replace(e.repo.fsPath,"")}@r${e.oldRevision} \u2192 ${e.newPath.fsPath.replace(e.repo.fsPath,"")}@r${e.newRevision}`}}getChildren(e){if(e!==void 0)return Promise.resolve([]);let t=[];for(let r of this.model.repositories)t.push(r.getChanges());return Promise.all(t).then(r=>r.reduce((i,s)=>i.concat(s),[]))}async openDiffCmd(e){let t=await this.model.getRemoteRepository(e.repo);if(e.item==="modified")return nr(t,e.oldPath,e.oldRevision,e.newRevision,e.newPath);if(e.item==="added")return _r(t,e.newPath,e.newRevision)}};var mp=V(xn());var $s=class{constructor(e){let t=mp.satisfies(e,">= 1.9");Ot("isSvn19orGreater",t)}dispose(){}};var gp=V(xn());var Bs=class{constructor(e){let t=gp.satisfies(e,">= 1.8");Ot("isSvn18orGreater",t)}dispose(){}};var Ae=require("vscode");var Mg=1e3*60*3,Fg=1e3*60*5,Fr=class{constructor(e){this.sourceControlManager=e;this.disposables=[];this.cache=new Map;this._onDidChangeFile=new Ae.EventEmitter;this.onDidChangeFile=this._onDidChangeFile.event;this.changedRepositoryRoots=new Set;this.disposables.push(e.onDidChangeRepository(this.onDidChangeRepository,this),Ae.workspace.registerFileSystemProvider("svn",this,{isReadonly:!0,isCaseSensitive:!0})),setInterval(()=>this.cleanup(),Fg)}onDidChangeRepository({repository:e}){this.changedRepositoryRoots.add(e.root),this.eventuallyFireChangeEvents()}eventuallyFireChangeEvents(){this.fireChangeEvents()}async fireChangeEvents(){if(!Ae.window.state.focused){let t=me(Ae.window.onDidChangeWindowState,r=>r.focused);await Yt(t)}let e=[];for(let{uri:t}of this.cache.values()){let r=t.fsPath;for(let i of this.changedRepositoryRoots)if(ke(i,r)){e.push({type:Ae.FileChangeType.Changed,uri:t});break}}e.length>0&&this._onDidChangeFile.fire(e),this.changedRepositoryRoots.clear()}watch(){return nc}async stat(e){await this.sourceControlManager.isInitialized;let{fsPath:t}=At(e),r=this.sourceControlManager.getRepository(t);if(!r)throw Ae.FileSystemError.FileNotFound;let i=0,s=new Date().getTime();try{let o=await r.list(t);o.length&&(i=Number(o[0].size),s=Date.parse(o[0].commit.date))}catch(o){console.error("Failed to list SVN file:",o)}return{type:Ae.FileType.File,size:i,mtime:s,ctime:0}}readDirectory(){throw new Error("readDirectory is not implemented")}createDirectory(){throw new Error("createDirectory is not implemented")}async readFile(e){await this.sourceControlManager.isInitialized;let{fsPath:t,extra:r,action:i}=At(e),s=this.sourceControlManager.getRepository(t);if(!s)throw Ae.FileSystemError.FileNotFound();let o=e.toString(),a=new Date().getTime(),c={uri:e,timestamp:a};this.cache.set(o,c);try{if(i==="SHOW")return await s.showBuffer(t,r.ref);if(i==="LOG")return await s.plainLogBuffer();if(i==="LOG_REVISION"&&r.revision)return await s.plainLogByRevisionBuffer(r.revision);if(i==="LOG_SEARCH"&&r.search)return await s.plainLogByTextBuffer(r.search);if(i==="PATCH")return console.log("here"),await s.patchBuffer([t])}catch(u){console.error("Failed to read SVN file:",u)}return new Uint8Array(0)}writeFile(){throw new Error("writeFile is not implemented")}delete(){throw new Error("delete is not implemented")}rename(){throw new Error("rename is not implemented")}cleanup(){let e=new Date().getTime(),t=new Map;for(let r of this.cache.values()){let{fsPath:i}=At(r.uri);(Ae.workspace.textDocuments.filter(o=>o.uri.scheme==="file").some(o=>rc(o.uri.fsPath,i))||e-r.timestamp<Mg)&&t.set(r.uri.toString(),r)}this.cache=t}dispose(){this.disposables.forEach(e=>e.dispose())}};H([Ne(1100)],Fr.prototype,"eventuallyFireChangeEvents",1),H([ur],Fr.prototype,"fireChangeEvents",1);async function kg(n,e,t){console.log("SVN Extension: init() started");let r=$.get("path"),i=new As;console.log("SVN Extension: Finding SVN executable...");let s=await i.findSvn(r);console.log(`SVN Extension: Found SVN ${s.version} at ${s.path}`);let o=new mi({svnPath:s.path,version:s.version}),a=await new Dn(o,0,n);console.log("SVN Extension: Registering commands..."),np(a,t),console.log("SVN Extension: Creating providers..."),t.push(a,Vt,new Fr(a),new Nn(a),new _s(a),new Rs(a),new Us(a),new gn(a),new yn(a),new Bs(s.version),new $s(s.version)),e.appendLine(`Using svn "${s.version}" from "${s.path}"`),console.log("SVN Extension: Providers created successfully");let c=u=>e.append(u);o.onOutput.addListener("log",c),t.push(Be(()=>o.onOutput.removeListener("log",c))),t.push(Be(Qu)),console.log("SVN Extension: init() complete")}async function Ug(n,e){let t=ze.window.createOutputChannel("Svn");ze.commands.registerCommand("svn.showOutput",()=>t.show()),e.push(t),$.get("showOutput")&&t.show();let i=async()=>{try{await kg(n,t,e)}catch(s){let o=s;if(!/Svn installation not found/.test(o.message||""))throw s;if($.get("ignoreMissingSvnWarning")===!0)return;console.warn(o.message),t.appendLine(o.message),t.show();let c="Find SVN executable",u="Download SVN",x="Don't Show Again",m=await ze.window.showWarningMessage("SVN not found. Install it or configure it using the 'svn.path' setting.",c,u,x);if(m===c){let d;yp.sep==="\\"&&(d={svn:["exe","bat"]});let l=await ze.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:d});if(l&&l[0]){let w=l[0].fsPath;t.appendLine(`Updated "svn.path" with "${w}"`),await $.update("path",w),await i()}}else m===u?ze.commands.executeCommand("vscode.open",ze.Uri.parse("https://subversion.apache.org/packages.html")):m===x&&await $.update("ignoreMissingSvnWarning",!0)}};await i()}async function $g(n){console.log("SVN Extension: activate() called");let e=[];n.subscriptions.push(new ze.Disposable(()=>ze.Disposable.from(...e).dispose())),await Ug(n,e).catch(t=>{console.error("SVN Extension: Activation failed",t),ze.window.showErrorMessage(`SVN Extension activation failed: ${t.message||t}`)}),console.log("SVN Extension: activation complete")}function Bg(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/
//# sourceMappingURL=extension.js.map
